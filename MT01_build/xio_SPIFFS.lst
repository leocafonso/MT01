* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Tue Mar 14 17:28:33 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  14-Mar-2017 17:28:33
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=xio_SPIFFS.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx\src,C:/Workspace/e2studio/
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=xio_SPIFFS.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=0,EASYMAK=1,MOBILE=0,FREE_RTOS_PP
                                 ;xio_SPIFFS.c
                                 
                                 		.glb	_macro_func_ptr
                                 		.glb	_ds
                                 		.glb	_actualLine
                                 		.glb	_previousLine
                                 		.glb	_choosedLine
                                 		.glb	_choosedLinePosition
                                 		.glb	_uspiffs
                                 		.glb	_xio_ctrl_generic
                                 		.glb	_xio_fc_null
                                 		.glb	_xio_init_spiffs
                                 		.glb	_xio_open_spiffs
                                 		.glb	_xio_gets_spiffs
                                 		.glb	_xio_close_spiffs
                                 		.glb	_xio_getc_spiffs
                                 		.glb	_xio_putc_spiffs
                                 		.glb	_SPIFFS_spi_gets
                                 		.glb	_xio_open_generic
                                 		.glb	_SPIFFS_opendir
                                 		.glb	_SPIFFS_readdir
                                 		.glb	_SPIFFS_open_by_dirent
                                 		.glb	_SPIFFS_lseek
                                 		.glb	_RunningInicial_Macro
                                 		.glb	_SPIFFS_tell
                                 		.glb	_SPIFFS_close
                                 		.glb	_SPIFFS_read
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         _xio_init_spiffs:
                                 		.STACK	_xio_init_spiffs=28
                                 ;       1 /*
                                 ;       2  *  xio_file.c	- device driver for program memory "files"
                                 ;       3  * 				- works with avr-gcc stdio library
                                 ;       4  *
                                 ;       5  * Part of TinyG project
                                 ;       6  *
                                 ;       7  * Copyright (c) 2011 - 2015 Alden S. Hart Jr.
                                 ;       8  *
                                 ;       9  * This file ("the software") is free software: you can redistribute it and/or modify
                                 ;      10  * it under the terms of the GNU General Public License, version 2 as published by the
                                 ;      11  * Free Software Foundation. You should have received a copy of the GNU General Public
                                 ;      12  * License, version 2 along with the software.  If not, see <http://www.gnu.org/licenses/>.
                                 ;      13  *
                                 ;      14  * THE SOFTWARE IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT WITHOUT ANY
                                 ;      15  * WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
                                 ;      16  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT
                                 ;      17  * SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                 ;      18  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
                                 ;      19  * OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
                                 ;      20  */
                                 ;      21 #include "tinyg.h"			// #1
                                 ;      22 #include "config.h"			// #2
                                 ;      23 #include "macros.h"
                                 ;      24 
                                 ;      25 #include <stdio.h>				// precursor for xio.h
                                 ;      26 #include <stdbool.h>			// true and false
                                 ;      27 #include <string.h>				// for memset
                                 ;      28 #include <stdint.h>				//
                                 ;      29 //#include "platform.h"
                                 ;      30 #include "xio.h"
                                 ;      31 #include "ut_state.h"
                                 ;      32 #include "spiffs_hw.h"
                                 ;      33 #include "r_spi_flash_if.h"
                                 ;      34 
                                 ;      35 uint8_t* SPIFFS_spi_gets (uint8_t* buff, int len, xioSPIFFS_t *fs);
                                 ;      36 
                                 ;      37 /******************************************************************************
                                 ;      38  * FILE CONFIGURATION RECORDS
                                 ;      39  ******************************************************************************/
                                 ;      40 
                                 ;      41 static bool fileRunning = false;
                                 ;      42 uint32_t actualLine = 0;
                                 ;      43 uint32_t previousLine = 0;
                                 ;      44 uint32_t choosedLine = 0;
                                 ;      45 uint32_t choosedLinePosition = 0;
                                 ;      46 
                                 ;      47 xioSPIFFS_t	    uspiffs[XIO_DEV_SPIFFS_COUNT];
                                 ;      48 
                                 ;      49 struct cfgFILE {
                                 ;      50 	x_open_t x_open;			// see xio.h for typedefs
                                 ;      51 	x_ctrl_t x_ctrl;
                                 ;      52 	x_close_t x_close;
                                 ;      53 	x_gets_t x_gets;
                                 ;      54 	x_getc_t x_getc;
                                 ;      55 	x_putc_t x_putc;
                                 ;      56 	x_flow_t x_flow;
                                 ;      57 };
                                 ;      58 
                                 ;      59 static struct cfgFILE const cfgFile[] = {
                                 ;      60 {	// PGM config
                                 ;      61 	xio_open_spiffs,				// open function
                                 ;      62 	xio_ctrl_generic, 			// ctrl function
                                 ;      63 	xio_close_spiffs, 			// close function
                                 ;      64 	xio_gets_spiffs,				// get string function
                                 ;      65 	xio_getc_spiffs,				// stdio getc function
                                 ;      66 	xio_putc_spiffs,				// stdio putc function
                                 ;      67 	xio_fc_null,				// flow control callback
                                 ;      68 }
                                 ;      69 };
                                 ;      70 /******************************************************************************
                                 ;      71  * FUNCTIONS
                                 ;      72  ******************************************************************************/
                                 ;      73 
                                 ;      74 /*
                                 ;      75  *	xio_init_file() - initialize and set controls for file IO
                                 ;      76  *
                                 ;      77  *	Need to bind the open function or a subsequent opens will fail
                                 ;      78  */
                                 ;      79 
                                 ;      80 void xio_init_spiffs()
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",80
00000000 7EA6                    		PUSH.L R6
00000002 6040                    		SUB #04H, R0
                                 ;      81 {
                                 ;      82 	for (uint8_t i=0; i<XIO_DEV_SPIFFS_COUNT; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",82
00000004 3C0300                  		MOV.B #00H, 03H[R0]
00000007 2Err                 B  		BRA L13
00000009                         L12:	; bb
                                 ;      83 		xio_open_generic(XIO_DEV_SPIFFS_OFFSET + i,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",83
00000009 B089                    		MOVU.B 03H[R0], R1
0000000B EF1E                    		MOV.L R1, R14
0000000D 751E1C                  		MUL #1CH, R14
00000010 FB52rrrrrrrr            		MOV.L #__$cfgFile, R5
00000016 4BE5                    		ADD R14, R5
00000018 ED5F05                  		MOV.L 14H[R5], R15
0000001B ED5E04                  		MOV.L 10H[R5], R14
0000001E A8DE                    		MOV.L 0CH[R5], R6
00000020 A8D4                    		MOV.L 08H[R5], R4
00000022 A85B                    		MOV.L 04H[R5], R3
00000024 EC52                    		MOV.L [R5], R2
00000026 7100F0                  		ADD #0FFFFFFF0H, R0
00000029 E5500603                		MOV.L 18H[R5], 0CH[R0]
0000002D E70F02                  		MOV.L R15, 08H[R0]
00000030 E70E01                  		MOV.L R14, 04H[R0]
00000033 E306                    		MOV.L R6, [R0]
00000035 6221                    		ADD #02H, R1
00000037 5B11                    		MOVU.B R1, R1
00000039 05rrrrrr             A  		BSR _xio_open_generic
0000003D 710010                  		ADD #10H, R0
00000040 B089                    		MOVU.B 03H[R0], R1
00000042 6211                    		ADD #01H, R1
00000044 8089                    		MOV.B R1, 03H[R0]
00000046                         L13:	; bb43
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",82
00000046 B089                    		MOVU.B 03H[R0], R1
00000048 6101                    		CMP #00H, R1
0000004A 2Brr                    		BLE L12
0000004C                         L14:	; return
                                 ;      84 						(x_open_t)(cfgFile[i].x_open),
                                 ;      85 						(x_ctrl_t)(cfgFile[i].x_ctrl),
                                 ;      86 						(x_close_t)(cfgFile[i].x_close),
                                 ;      87 						(x_gets_t)(cfgFile[i].x_gets),
                                 ;      88 						(x_getc_t)(cfgFile[i].x_getc),
                                 ;      89 						(x_putc_t)(cfgFile[i].x_putc),
                                 ;      90 						(x_flow_t)(cfgFile[i].x_flow));
                                 ;      91 	}
                                 ;      92 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",92
0000004C 3F6602                  		RTSD #08H, R6-R6
0000004F                         _xio_open_spiffs:
                                 		.STACK	_xio_open_spiffs=96
                                 ;      93 
                                 ;      94 /*
                                 ;      95  *	xio_open_file() - open the program memory device to a specific string address
                                 ;      96  *
                                 ;      97  *	OK, so this is not really a UNIX open() except for its moral equivalent
                                 ;      98  *  Returns a pointer to the stdio FILE struct or -1 on error
                                 ;      99  */
                                 ;     100 FILE * xio_open_spiffs(const uint8_t dev, const char *addr, const flags_t flags)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",100
0000004F 7EA6                    		PUSH.L R6
00000051 7100A8                  		ADD #0FFFFFFA8H, R0
00000054 C70157                  		MOV.B R1, 57H[R0]
00000057 A502                    		MOV.L R2, 50H[R0]
00000059 D70327                  		MOV.W R3, 4EH[R0]
0000005C 754E88                  		MOV.L #00000088H, R14
                                 ;     101 {
                                 ;     102 	xioDev_t *d = (xioDev_t *)&ds[dev];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",102
0000005F 4D0E57                  		MUL 57H[R0].UB, R14
00000062 FB12rrrrrrrr            		MOV.L #_ds, R1
00000068 4BE1                    		ADD R14, R1
0000006A A009                    		MOV.L R1, 04H[R0]
0000006C                         L16:	; entry.split
                                 ;     103 	d->x = &uspiffs[0];			// bind extended struct to device
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",103
0000006C A809                    		MOV.L 04H[R0], R1
0000006E FB22rrrrrrrr            		MOV.L #_uspiffs, R2
00000074 A49A                    		MOV.L R2, 4CH[R1]
00000076                         L17:	; entry.split1
                                 ;     104 	xioSPIFFS_t *dx = (xioSPIFFS_t *)d->x;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",104
00000076 A809                    		MOV.L 04H[R0], R1
00000078 E5101302                		MOV.L 4CH[R1], 08H[R0]
0000007C                         L18:	; entry.split2
0000007C 710118                  		ADD #18H, R0, R1
                                 ;     105 	spiffs_DIR sf_dir;
                                 ;     106 	struct spiffs_dirent e;
                                 ;     107 	struct spiffs_dirent *pe = &e;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",107
0000007F A409                    		MOV.L R1, 44H[R0]
00000081                         L19:	; entry.split3
                                 ;     108 
                                 ;     109 //	f_mount(&dx->gFatfs,"",0);
                                 ;     110 //	f_close(&dx->f);
                                 ;     111 //    /* Open a text file */
                                 ;     112 	SPIFFS_opendir(&dx->gSPIFFS, "/", &sf_dir);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",112
00000081 A881                    		MOV.L 08H[R0], R1
00000083 71030C                  		ADD #0CH, R0, R3
00000086 FB22rrrrrrrr            		MOV.L #_L10, R2
0000008C 05rrrrrr             A  		BSR _SPIFFS_opendir
00000090                         L20:	; entry.split4
                                 ;     113 	pe = SPIFFS_readdir(&sf_dir, pe);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",113
00000090 AC0A                    		MOV.L 44H[R0], R2
00000092 71010C                  		ADD #0CH, R0, R1
00000095 05rrrrrr             A  		BSR _SPIFFS_readdir
00000099 A409                    		MOV.L R1, 44H[R0]
0000009B                         L21:	; entry.split5
                                 ;     114     dx->f = SPIFFS_open_by_dirent(&dx->gSPIFFS, pe, SPIFFS_RDONLY, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",114
0000009B A886                    		MOV.L 08H[R0], R6
0000009D AC0A                    		MOV.L 44H[R0], R2
0000009F 6604                    		MOV.L #00000000H, R4
000000A1 6683                    		MOV.L #00000008H, R3
000000A3 EF61                    		MOV.L R6, R1
000000A5 05rrrrrr             A  		BSR _SPIFFS_open_by_dirent
000000A9 D76132                  		MOV.W R1, 64H[R6]
000000AC                         L22:	; entry.split6
                                 ;     115     if (choosedLinePosition > 0 && flags == 1)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",115
000000AC FBE2rrrrrrrr            		MOV.L #_choosedLinePosition, R14
000000B2 ECEE                    		MOV.L [R14], R14
000000B4 610E                    		CMP #00H, R14
000000B6 21rr                    		BNE L27
000000B8 2Err                 B  		BRA L29
000000BA                         L23:	; bb29
                                 ;     116     {
                                 ;     117     	SPIFFS_lseek(&dx->gSPIFFS, dx->f, choosedLinePosition, SPIFFS_SEEK_SET);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",117
000000BA FBE2rrrrrrrr            		MOV.L #_choosedLinePosition, R14
000000C0 ECE3                    		MOV.L [R14], R3
000000C2 A881                    		MOV.L 08H[R0], R1
000000C4 DD1232                  		MOV.W 64H[R1], R2
000000C7 6604                    		MOV.L #00000000H, R4
000000C9 05rrrrrr             A  		BSR _SPIFFS_lseek
000000CD                         L24:	; bb29.split
                                 ;     118         macro_func_ptr = RunningInicial_Macro;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",118
000000CD FBE2rrrrrrrr            		MOV.L #_macro_func_ptr, R14
000000D3 FBF2rrrrrrrr            		MOV.L #_RunningInicial_Macro, R15
000000D9 E3EF                    		MOV.L R15, [R14]
000000DB                         L25:	; bb29.split7
                                 ;     119         choosedLinePosition = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",119
000000DB FBE2rrrrrrrr            		MOV.L #_choosedLinePosition, R14
000000E1 F8E600                  		MOV.L #00000000H, [R14]
000000E4                         L26:	; bb29.split8
                                 ;     120         choosedLine = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",120
000000E4 FBE2rrrrrrrr            		MOV.L #_choosedLine, R14
000000EA F8E600                  		MOV.L #00000000H, [R14]
000000ED 2Err                 B  		BRA L31
000000EF                         L27:	; bb40
000000EF 5D0127                  		MOVU.W 4EH[R0], R1
000000F2 6111                    		CMP #01H, R1
000000F4 18                   S  		BNE L29
000000F5                         L28:	; bb45
000000F5 F80601                  		MOV.L #00000001H, [R0]
000000F8 08                   S  		BRA L30
000000F9                         L29:	; bb46
000000F9 F80600                  		MOV.L #00000000H, [R0]
000000FC                         L30:	; bb47
000000FC EC01                    		MOV.L [R0], R1
000000FE 6101                    		CMP #00H, R1
00000100 21rr                    		BNE L23
00000102                         L31:	; bb51
                                 ;     121     }
                                 ;     122     fileRunning = true;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",122
00000102 FBE2rrrrrrrr            		MOV.L #__$fileRunning, R14
00000108 F8E401                  		MOV.B #01H, [R14]
0000010B                         L32:	; bb51.split
                                 ;     123 	return(&d->file);								// return pointer to the FILE stream
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",123
0000010B A809                    		MOV.L 04H[R0], R1
0000010D 6241                    		ADD #04H, R1
0000010F A481                    		MOV.L R1, 48H[R0]
00000111                         L33:	; bb51.split9
                                 ;     124 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",124
00000111 3F6617                  		RTSD #5CH, R6-R6
00000114                         _xio_gets_spiffs:
                                 		.STACK	_xio_gets_spiffs=28
                                 ;     125 
                                 ;     126 int xio_gets_spiffs(xioDev_t *d, char *buf, const int size)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",126
00000114 7100E8                  		ADD #0FFFFFFE8H, R0
00000117 A109                    		MOV.L R1, 14H[R0]
00000119 A102                    		MOV.L R2, 10H[R0]
0000011B A08B                    		MOV.L R3, 0CH[R0]
                                 ;     127 {
                                 ;     128 	xioSPIFFS_t *dx = (xioSPIFFS_t *)d->x;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",128
0000011D A909                    		MOV.L 14H[R0], R1
0000011F E5101301                		MOV.L 4CH[R1], 04H[R0]
00000123                         L35:	; entry.split
                                 ;     129 	if (fileRunning)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",129
00000123 FBE2rrrrrrrr            		MOV.L #__$fileRunning, R14
00000129 58EE                    		MOVU.B [R14], R14
0000012B 610E                    		CMP #00H, R14
0000012D 20rr                    		BEQ L43
0000012F                         L36:	; bb9
                                 ;     130 	{
                                 ;     131 		d->signal = XIO_SIG_OK;			// initialize signal
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",131
0000012F A909                    		MOV.L 14H[R0], R1
00000131 F9147900                		MOV.B #00H, 79H[R1]
00000135                         L37:	; bb9.split
                                 ;     132 		if (SPIFFS_spi_gets((uint8_t*)buf, size, dx) == NULL) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",132
00000135 A80B                    		MOV.L 04H[R0], R3
00000137 A88A                    		MOV.L 0CH[R0], R2
00000139 A901                    		MOV.L 10H[R0], R1
0000013B 39rrrr               W  		BSR _SPIFFS_spi_gets
0000013E 6101                    		CMP #00H, R1
00000140 21rr                    		BNE L40
00000142                         L38:	; bb13
                                 ;     133 			fileRunning = false;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",133
00000142 FBE2rrrrrrrr            		MOV.L #__$fileRunning, R14
00000148 F8E400                  		MOV.B #00H, [R14]
0000014B                         L39:	; bb13.split
                                 ;     134 			return (XIO_EOF);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",134
0000014B F80608                  		MOV.L #00000008H, [R0]
0000014E 2Err                 B  		BRA L44
00000150                         L40:	; bb21
                                 ;     135 		}
                                 ;     136 		previousLine = actualLine;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",136
00000150 FBE2rrrrrrrr            		MOV.L #_previousLine, R14
00000156 FBF2rrrrrrrr            		MOV.L #_actualLine, R15
0000015C E0FE                    		MOV.L [R15], [R14]
0000015E                         L41:	; bb21.split
                                 ;     137 		actualLine = SPIFFS_tell(&dx->gSPIFFS, dx->f);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",137
0000015E A809                    		MOV.L 04H[R0], R1
00000160 DD1232                  		MOV.W 64H[R1], R2
00000163 05rrrrrr             A  		BSR _SPIFFS_tell
00000167 FBE2rrrrrrrr            		MOV.L #_actualLine, R14
0000016D E3E1                    		MOV.L R1, [R14]
0000016F                         L42:	; bb21.split1
                                 ;     138 //		printf(buf);
                                 ;     139 		return(XIO_OK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",139
0000016F F80600                  		MOV.L #00000000H, [R0]
00000172 08                   S  		BRA L44
00000173                         L43:	; bb35
                                 ;     140 	}
                                 ;     141 	return(XIO_EAGAIN);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",141
00000173 F80602                  		MOV.L #00000002H, [R0]
00000176                         L44:	; bb37
00000176 EC01                    		MOV.L [R0], R1
00000178 A081                    		MOV.L R1, 08H[R0]
                                 ;     142 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",142
0000017A 6706                    		RTSD #18H
0000017C                         _xio_close_spiffs:
                                 		.STACK	_xio_close_spiffs=12
                                 ;     143 
                                 ;     144 void xio_close_spiffs (xioDev_t *d)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",144
0000017C 6080                    		SUB #08H, R0
0000017E A009                    		MOV.L R1, 04H[R0]
                                 ;     145 {
                                 ;     146 	xioSPIFFS_t *dx = (xioSPIFFS_t *)d->x;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",146
00000180 E11013                  		MOV.L 4CH[R1], [R0]
00000183                         L46:	; entry.split
                                 ;     147 	SPIFFS_close(&dx->gSPIFFS,dx->f);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",147
00000183 EC01                    		MOV.L [R0], R1
00000185 DD1232                  		MOV.W 64H[R1], R2
00000188 05rrrrrr             A  		BSR _SPIFFS_close
0000018C 6702                    		RTSD #08H
0000018E                         _xio_getc_spiffs:
                                 		.STACK	_xio_getc_spiffs=12
                                 ;     148 }
                                 ;     149 
                                 ;     150 int xio_getc_spiffs(FILE *stream)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",150
0000018E 6080                    		SUB #08H, R0
00000190 A009                    		MOV.L R1, 04H[R0]
                                 ;     151 {
                                 ;     152 	return(0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",152
00000192 F80600                  		MOV.L #00000000H, [R0]
00000195 6601                    		MOV.L #00000000H, R1
00000197                         L48:	; entry.split
                                 ;     153 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",153
00000197 6702                    		RTSD #08H
00000199                         _xio_putc_spiffs:
                                 		.STACK	_xio_putc_spiffs=16
                                 ;     154 
                                 ;     155 int xio_putc_spiffs(const char c, FILE *stream)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",155
00000199 60C0                    		SUB #0CH, R0
0000019B 8289                    		MOV.B R1, 0BH[R0]
0000019D A00A                    		MOV.L R2, 04H[R0]
                                 ;     156 {
                                 ;     157 	return(-1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",157
0000019F F806FF                  		MOV.L #0FFFFFFFFH, [R0]
000001A2 FB16FF                  		MOV.L #0FFFFFFFFH, R1
000001A5                         L50:	; entry.split
                                 ;     158 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",158
000001A5 6703                    		RTSD #0CH
000001A7                         _SPIFFS_spi_gets:
                                 		.STACK	_SPIFFS_spi_gets=44
                                 ;     159 
                                 ;     160 /*-----------------------------------------------------------------------*/
                                 ;     161 /* Get a string from the file                                            */
                                 ;     162 /*-----------------------------------------------------------------------*/
                                 ;     163 
                                 ;     164 uint8_t* SPIFFS_spi_gets (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",164
000001A7 7100D8                  		ADD #0FFFFFFD8H, R0
000001AA A209                    		MOV.L R1, 24H[R0]
000001AC A202                    		MOV.L R2, 20H[R0]
000001AE A18B                    		MOV.L R3, 1CH[R0]
                                 ;     165 	uint8_t* buff,	/* Pointer to the string buffer to read */
                                 ;     166 	int len,		/* Size of string buffer (characters) */
                                 ;     167 	xioSPIFFS_t *fs
                                 ;     168 )
                                 ;     169 {
                                 ;     170 	int n = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",170
000001B0 3E0100                  		MOV.L #00000000H, 04H[R0]
000001B3                         L52:	; entry.split
                                 ;     171 	s32_t res;
                                 ;     172 	uint8_t c, *p = buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",172
000001B3 E5000904                		MOV.L 24H[R0], 10H[R0]
000001B7 2Err                 B  		BRA L59
000001B9                         L53:	; bb
                                 ;     173 	uint8_t s[2];
                                 ;     174 
                                 ;     175 	while (n < len - 1) {	/* Read characters until buffer gets filled */
                                 ;     176 		res = SPIFFS_read(&fs->gSPIFFS, fs->f, s, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",176
000001B9 A989                    		MOV.L 1CH[R0], R1
000001BB DD1232                  		MOV.W 64H[R1], R2
000001BE 6614                    		MOV.L #00000001H, R4
000001C0 710316                  		ADD #16H, R0, R3
000001C3 05rrrrrr             A  		BSR _SPIFFS_read
000001C7 A081                    		MOV.L R1, 08H[R0]
000001C9                         L54:	; bb.split
                                 ;     177 		if(res <= 0) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",177
000001C9 A881                    		MOV.L 08H[R0], R1
000001CB 6101                    		CMP #00H, R1
000001CD 2Brr                    		BLE L60
000001CF                         L55:	; bb23
                                 ;     178 		c = s[0];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",178
000001CF C500160F                		MOV.B 16H[R0], 0FH[R0]
000001D3                         L56:	; bb23.split1
                                 ;     179 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
                                 ;     180 		*p++ = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",180
000001D3 B389                    		MOVU.B 0FH[R0], R1
000001D5 A902                    		MOV.L 10H[R0], R2
000001D7 C321                    		MOV.B R1, [R2]
000001D9 A901                    		MOV.L 10H[R0], R1
000001DB 6211                    		ADD #01H, R1
000001DD A101                    		MOV.L R1, 10H[R0]
000001DF                         L57:	; bb23.split2
                                 ;     181 		n++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",181
000001DF A809                    		MOV.L 04H[R0], R1
000001E1 6211                    		ADD #01H, R1
000001E3 A009                    		MOV.L R1, 04H[R0]
000001E5                         L58:	; bb23.split3
                                 ;     182 		if (c == '\n') break;		/* Break on EOL */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",182
000001E5 B389                    		MOVU.B 0FH[R0], R1
000001E7 61A1                    		CMP #0AH, R1
000001E9 20rr                    		BEQ L60
000001EB                         L59:	; bb47
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",175
000001EB AA01                    		MOV.L 20H[R0], R1
000001ED 6011                    		SUB #01H, R1
000001EF 06850101                		CMP 04H[R0].L, R1
000001F3 2Arr                    		BGT L53
000001F5                         L60:	; bb55
                                 ;     183 	}
                                 ;     184 	*p = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",184
000001F5 A901                    		MOV.L 10H[R0], R1
000001F7 F81400                  		MOV.B #00H, [R1]
000001FA                         L61:	; bb55.split
                                 ;     185 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",185
000001FA A809                    		MOV.L 04H[R0], R1
000001FC 6101                    		CMP #00H, R1
000001FE 10                   S  		BEQ L63
000001FF                         L62:	; bb60
000001FF E10009                  		MOV.L 24H[R0], [R0]
00000202 08                   S  		BRA L64
00000203                         L63:	; bb62
00000203 F80600                  		MOV.L #00000000H, [R0]
00000206                         L64:	; bb63
00000206 EC01                    		MOV.L [R0], R1
00000208 A181                    		MOV.L R1, 18H[R0]
                                 ;     186 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_SPIFFS.c",186
0000020A 670A                    		RTSD #28H
                                 		.SECTION	C,ROMDATA,ALIGN=4
00000000                         __$cfgFile:
00000000 rrrrrrrr                		.lword	_xio_open_spiffs
00000004 rrrrrrrr                		.lword	_xio_ctrl_generic
00000008 rrrrrrrr                		.lword	_xio_close_spiffs
0000000C rrrrrrrr                		.lword	_xio_gets_spiffs
00000010 rrrrrrrr                		.lword	_xio_getc_spiffs
00000014 rrrrrrrr                		.lword	_xio_putc_spiffs
00000018 rrrrrrrr                		.lword	_xio_fc_null
                                 		.SECTION	L,ROMDATA,ALIGN=4
00000000                         _L10:
00000000 2F                      		.byte	"/"
00000001 00                      		.byte	00H
                                 		.SECTION	D,ROMDATA,ALIGN=4
00000000                         _actualLine:
00000000 00000000                		.lword	00000000H
00000004                         _previousLine:
00000004 00000000                		.lword	00000000H
00000008                         _choosedLine:
00000008 00000000                		.lword	00000000H
0000000C                         _choosedLinePosition:
0000000C 00000000                		.lword	00000000H
                                 		.SECTION	D_1,ROMDATA
00000000                         __$fileRunning:
00000000 00                      		.byte	00H
                                 		.SECTION	B,DATA,ALIGN=4
00000000                         _uspiffs:
00000000(00000068H)              		.blkl	26
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     00577   LINES

Section List

Attr         Size               Name
CODE     0000000524(0000020CH)  P
ROMDATA  0000000028(0000001CH)  C
ROMDATA  0000000002(00000002H)  L
ROMDATA  0000000016(00000010H)  D
ROMDATA  0000000001(00000001H)  D_1
DATA     0000000104(00000068H)  B

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx4D06\$ccrx\xio_SPIFFS.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01_master\MT01_build\xio_SPIFFS.lst
-output=C:\Workspace\e2studio\git\MT01_master\MT01_build\src\cnc\xio\xio_SPIFFS.obj
