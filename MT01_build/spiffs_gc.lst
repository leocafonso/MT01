* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Tue Mar 14 14:02:55 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  14-Mar-2017 14:02:54
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=spiffs_gc.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx\src,C:/Workspace/e2studio/
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=spiffs_gc.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=0,EASYMAK=1,MOBILE=0,FREE_RTOS_PP
                                 ;spiffs_gc.c
                                 
                                 		.glb	_spiffs_erase_block
                                 		.glb	_spiffs_cache_drop_page
                                 		.glb	_spiffs_gc_quick
                                 		.glb	_spiffs_phys_rd
                                 		.glb	_spiffs_gc_check
                                 		.glb	_spiffs_gc_erase_page_stats
                                 		.glb	_spiffs_gc_find_candidate
                                 		.glb	_spiffs_gc_clean
                                 		.glb	_spiffs_page_move
                                 		.glb	_spiffs_page_delete
                                 		.glb	_spiffs_cb_object_event
                                 		.glb	_spiffs_obj_lu_find_id_and_span
                                 		.glb	_spiffs_object_update_index_hdr
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         __$spiffs_gc_erase_block:
                                 		.STACK	__$spiffs_gc_erase_block=28
                                 ;       1 #include "spiffs.h"
                                 ;       2 #include "spiffs_nucleus.h"
                                 ;       3 
                                 ;       4 #if !SPIFFS_READ_ONLY
                                 ;       5 
                                 ;       6 // Erases a logical block and updates the erase counter.
                                 ;       7 // If cache is enabled, all pages that might be cached in this block
                                 ;       8 // is dropped.
                                 ;       9 static s32_t spiffs_gc_erase_block(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",9
00000000 7100E8                  		ADD #0FFFFFFE8H, R0
00000003 A109                    		MOV.L R1, 14H[R0]
00000005 920A                    		MOV.W R2, 12H[R0]
                                 ;      10     spiffs *fs,
                                 ;      11     spiffs_block_ix bix) {
                                 ;      12   s32_t res;
                                 ;      13 
                                 ;      14   SPIFFS_GC_DBG("gc: erase block %i\n", bix);
                                 ;      15   res = spiffs_erase_block(fs, bix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",15
00000007 BA0A                    		MOVU.W 12H[R0], R2
00000009 A909                    		MOV.L 14H[R0], R1
0000000B 05rrrrrr             A  		BSR _spiffs_erase_block
0000000F A009                    		MOV.L R1, 04H[R0]
00000011                         L11:	; entry.split
                                 ;      16   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",16
00000011 A809                    		MOV.L 04H[R0], R1
00000013 69F1                    		SHLR #1FH, R1
00000015 6101                    		CMP #00H, R1
00000017 10                   S  		BEQ L13
00000018                         L12:	; bb9
00000018 E10001                  		MOV.L 04H[R0], [R0]
0000001B 2Err                 B  		BRA L17
0000001D                         L13:	; bb16
                                 ;      17 
                                 ;      18 #if SPIFFS_CACHE
                                 ;      19   {
                                 ;      20     u32_t i;
                                 ;      21     for (i = 0; i < SPIFFS_PAGES_PER_BLOCK(fs); i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",21
0000001D 3E0200                  		MOV.L #00000000H, 08H[R0]
00000020 2Err                 B  		BRA L15
00000022                         L14:	; bb17
                                 ;      22       spiffs_cache_drop_page(fs, SPIFFS_PAGE_FOR_BLOCK(fs, bix) + i);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",22
00000022 BA0A                    		MOVU.W 12H[R0], R2
00000024 6C82                    		SHLL #08H, R2
00000026 06890202                		ADD 08H[R0].L, R2
0000002A A909                    		MOV.L 14H[R0], R1
0000002C 5F22                    		MOVU.W R2, R2
0000002E 05rrrrrr             A  		BSR _spiffs_cache_drop_page
00000032 A881                    		MOV.L 08H[R0], R1
00000034 6211                    		ADD #01H, R1
00000036 A081                    		MOV.L R1, 08H[R0]
00000038                         L15:	; bb27
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",21
00000038 A881                    		MOV.L 08H[R0], R1
0000003A 76010001                		CMP #0100H, R1
0000003E 23rr                    		BLTU L14
00000040                         L16:	; bb32
                                 ;      23     }
                                 ;      24   }
                                 ;      25 #endif
                                 ;      26   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",26
00000040 E10001                  		MOV.L 04H[R0], [R0]
00000043                         L17:	; bb35
00000043 EC01                    		MOV.L [R0], R1
00000045 A089                    		MOV.L R1, 0CH[R0]
                                 ;      27 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",27
00000047 6706                    		RTSD #18H
00000049                         _spiffs_gc_quick:
                                 		.STACK	_spiffs_gc_quick=76
                                 ;      28 
                                 ;      29 // Searches for blocks where all entries are deleted - if one is found,
                                 ;      30 // the block is erased. Compared to the non-quick gc, the quick one ensures
                                 ;      31 // that no updates are needed on existing objects on pages that are erased.
                                 ;      32 s32_t spiffs_gc_quick(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",32
00000049 7100C0                  		ADD #0FFFFFFC0H, R0
0000004C A389                    		MOV.L R1, 3CH[R0]
0000004E 970A                    		MOV.W R2, 3AH[R0]
                                 ;      33     spiffs *fs, u16_t max_free_pages) {
                                 ;      34   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",34
00000050 3E0200                  		MOV.L #00000000H, 08H[R0]
00000053                         L19:	; entry.split
                                 ;      35   u32_t blocks = fs->block_count;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",35
00000053 AB89                    		MOV.L 3CH[R0], R1
00000055 E5100303                		MOV.L 0CH[R1], 0CH[R0]
00000059                         L20:	; entry.split1
                                 ;      36   spiffs_block_ix cur_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",36
00000059 3D0900                  		MOV.W #0000H, 12H[R0]
0000005C                         L21:	; entry.split2
                                 ;      37   u32_t cur_block_addr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",37
0000005C 3E0500                  		MOV.L #00000000H, 14H[R0]
0000005F                         L22:	; entry.split3
                                 ;      38   int cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",38
0000005F 3E0600                  		MOV.L #00000000H, 18H[R0]
00000062                         L23:	; entry.split4
                                 ;      39   spiffs_obj_id *obj_lu_buf = (spiffs_obj_id *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",39
00000062 AB89                    		MOV.L 3CH[R0], R1
00000064 E5100807                		MOV.L 20H[R1], 1CH[R0]
00000068                         L24:	; entry.split5
                                 ;      40 
                                 ;      41   SPIFFS_GC_DBG("gc_quick: running\n");
                                 ;      42 #if SPIFFS_GC_STATS
                                 ;      43   fs->stats_gc_runs++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",43
00000068 AB89                    		MOV.L 3CH[R0], R1
0000006A AC1A                    		MOV.L 44H[R1], R2
0000006C 6212                    		ADD #01H, R2
0000006E A41A                    		MOV.L R2, 44H[R1]
00000070                         L25:	; entry.split6
                                 ;      44 #endif
                                 ;      45 
                                 ;      46   int entries_per_page = (SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",46
00000070 3E0880                  		MOV.L #00000080H, 20H[R0]
00000073 38rrrr               W  		BRA L74
00000076                         L26:	; bb
                                 ;      47 
                                 ;      48   // find fully deleted blocks
                                 ;      49   // check each block
                                 ;      50   while (res == SPIFFS_OK && blocks--) {
                                 ;      51     u16_t deleted_pages_in_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",51
00000076 3D8200                  		MOV.W #0000H, 24H[R0]
00000079                         L27:	; bb.split
                                 ;      52     u16_t free_pages_in_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",52
00000079 3D8300                  		MOV.W #0000H, 26H[R0]
0000007C                         L28:	; bb.split7
                                 ;      53 
                                 ;      54     int obj_lookup_page = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",54
0000007C 3E0A00                  		MOV.L #00000000H, 28H[R0]
0000007F 38rrrr               W  		BRA L52
00000082                         L29:	; bb26
                                 ;      55     // check each object lookup page
                                 ;      56     while (res == SPIFFS_OK && obj_lookup_page < (int)SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 ;      57       int entry_offset = obj_lookup_page * entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",57
00000082 AA81                    		MOV.L 28H[R0], R1
00000084 068D0108                		MUL 20H[R0].L, R1
00000088 A289                    		MOV.L R1, 2CH[R0]
0000008A                         L30:	; bb26.split
                                 ;      58       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",58
0000008A AB89                    		MOV.L 3CH[R0], R1
0000008C AA84                    		MOV.L 28H[R0], R4
0000008E 6C84                    		SHLL #08H, R4
00000090 06890405                		ADD 14H[R0].L, R4
00000094 6080                    		SUB #08H, R0
00000096 E5100801                		MOV.L 20H[R1], 04H[R0]
0000009A F80A0001                		MOV.L #00000100H, [R0]
0000009E 7344000010              		ADD #00100000H, R4
000000A3 6603                    		MOV.L #00000000H, R3
000000A5 754214                  		MOV.L #00000014H, R2
000000A8 05rrrrrr             A  		BSR _spiffs_phys_rd
000000AC 6280                    		ADD #08H, R0
000000AE A081                    		MOV.L R1, 08H[R0]
000000B0 2Err                 B  		BRA L42
000000B2                         L31:	; bb40
                                 ;      59           0, cur_block_addr + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;      60       // check each entry
                                 ;      61       while (res == SPIFFS_OK &&
                                 ;      62           cur_entry - entry_offset < entries_per_page &&
                                 ;      63           cur_entry < (int)(SPIFFS_PAGES_PER_BLOCK(fs)-SPIFFS_OBJ_LOOKUP_PAGES(fs))) {
                                 ;      64         spiffs_obj_id obj_id = obj_lu_buf[cur_entry-entry_offset];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",64
000000B2 A981                    		MOV.L 18H[R0], R1
000000B4 0681010B                		SUB 2CH[R0].L, R1
000000B8 A98A                    		MOV.L 1CH[R0], R2
000000BA FE5121                  		MOV.W [R1,R2], R1
000000BD 9609                    		MOV.W R1, 32H[R0]
000000BF                         L32:	; bb40.split
                                 ;      65         if (obj_id == SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",65
000000BF BE09                    		MOVU.W 32H[R0], R1
000000C1 6101                    		CMP #00H, R1
000000C3 18                   S  		BNE L34
000000C4                         L33:	; bb48
                                 ;      66           deleted_pages_in_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",66
000000C4 9C81                    		MOV.W 24H[R0], R1
000000C6 6211                    		ADD #01H, R1
000000C8 9481                    		MOV.W R1, 24H[R0]
000000CA 2Err                 B  		BRA L41
000000CC                         L34:	; bb52
                                 ;      67         } else if (obj_id == SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",67
000000CC BE09                    		MOVU.W 32H[R0], R1
000000CE 7701FFFF00              		CMP #0FFFFH, R1
000000D3 21rr                    		BNE L39
000000D5                         L35:	; bb53
                                 ;      68           // kill scan, go for next block
                                 ;      69           free_pages_in_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",69
000000D5 9C89                    		MOV.W 26H[R0], R1
000000D7 6211                    		ADD #01H, R1
000000D9 9489                    		MOV.W R1, 26H[R0]
000000DB                         L36:	; bb53.split
                                 ;      70           if (free_pages_in_block > max_free_pages) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",70
000000DB BC89                    		MOVU.W 26H[R0], R1
000000DD 06C5011D                		CMP 3AH[R0].UW, R1
000000E1 2Brr                    		BLE L41
000000E3                         L37:	; bb57
                                 ;      71             obj_lookup_page = SPIFFS_OBJ_LOOKUP_PAGES(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",71
000000E3 3E0A02                  		MOV.L #00000002H, 28H[R0]
000000E6                         L38:	; bb57.split
                                 ;      72             res = 1; // kill object lu loop
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",72
000000E6 3E0201                  		MOV.L #00000001H, 08H[R0]
000000E9 2Err                 B  		BRA L51
000000EB                         L39:	; bb66
                                 ;      73             break;
                                 ;      74           }
                                 ;      75         }  else {
                                 ;      76           // kill scan, go for next block
                                 ;      77           obj_lookup_page = SPIFFS_OBJ_LOOKUP_PAGES(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",77
000000EB 3E0A02                  		MOV.L #00000002H, 28H[R0]
000000EE                         L40:	; bb66.split
                                 ;      78           res = 1; // kill object lu loop
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",78
000000EE 3E0201                  		MOV.L #00000001H, 08H[R0]
000000F1 2Err                 B  		BRA L51
000000F3                         L41:	; bb79
                                 ;      79           break;
                                 ;      80         }
                                 ;      81         cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",81
000000F3 A981                    		MOV.L 18H[R0], R1
000000F5 6211                    		ADD #01H, R1
000000F7 A181                    		MOV.L R1, 18H[R0]
000000F9                         L42:	; bb82
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",61
000000F9 A881                    		MOV.L 08H[R0], R1
000000FB 6101                    		CMP #00H, R1
000000FD 21rr                    		BNE L45
000000FF                         L43:	; bb86
000000FF A981                    		MOV.L 18H[R0], R1
00000101 0681010B                		SUB 2CH[R0].L, R1
00000105 06850108                		CMP 20H[R0].L, R1
00000109 28rr                    		BGE L45
0000010B                         L44:	; bb93
0000010B F80601                  		MOV.L #00000001H, [R0]
0000010E 08                   S  		BRA L46
0000010F                         L45:	; bb94
0000010F F80600                  		MOV.L #00000000H, [R0]
00000112                         L46:	; bb95
00000112 EC01                    		MOV.L [R0], R1
00000114 6101                    		CMP #00H, R1
00000116 20rr                    		BEQ L49
00000118                         L47:	; bb99
00000118 A981                    		MOV.L 18H[R0], R1
0000011A 7551FD                  		CMP #0FDH, R1
0000011D 2Arr                    		BGT L49
0000011F                         L48:	; bb103
0000011F F80601                  		MOV.L #00000001H, [R0]
00000122 08                   S  		BRA L50
00000123                         L49:	; bb104
00000123 F80600                  		MOV.L #00000000H, [R0]
00000126                         L50:	; bb105
00000126 EC01                    		MOV.L [R0], R1
00000128 6101                    		CMP #00H, R1
0000012A 21rr                    		BNE L31
0000012C                         L51:	; bb111
                                 ;      82       } // per entry
                                 ;      83       obj_lookup_page++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",83
0000012C AA81                    		MOV.L 28H[R0], R1
0000012E 6211                    		ADD #01H, R1
00000130 A281                    		MOV.L R1, 28H[R0]
00000132                         L52:	; bb114
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",56
00000132 A881                    		MOV.L 08H[R0], R1
00000134 6101                    		CMP #00H, R1
00000136 21rr                    		BNE L55
00000138                         L53:	; bb118
00000138 AA81                    		MOV.L 28H[R0], R1
0000013A 6111                    		CMP #01H, R1
0000013C 2Arr                    		BGT L55
0000013E                         L54:	; bb122
0000013E F80601                  		MOV.L #00000001H, [R0]
00000141 08                   S  		BRA L56
00000142                         L55:	; bb123
00000142 F80600                  		MOV.L #00000000H, [R0]
00000145                         L56:	; bb124
00000145 EC01                    		MOV.L [R0], R1
00000147 6101                    		CMP #00H, R1
00000149 3Brrrr               W  		BNE L29
0000014C                         L57:	; bb130
                                 ;      84     } // per object lookup page
                                 ;      85     if (res == 1) res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",85
0000014C A881                    		MOV.L 08H[R0], R1
0000014E 6111                    		CMP #01H, R1
00000150 18                   S  		BNE L59
00000151                         L58:	; bb131
00000151 3E0200                  		MOV.L #00000000H, 08H[R0]
00000154                         L59:	; bb137
                                 ;      86 
                                 ;      87     if (res == SPIFFS_OK &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",87
00000154 A881                    		MOV.L 08H[R0], R1
00000156 6101                    		CMP #00H, R1
00000158 20rr                    		BEQ L63
0000015A 2Err                 B  		BRA L65
0000015C                         L60:	; bb138
                                 ;      88         deleted_pages_in_block + free_pages_in_block == SPIFFS_PAGES_PER_BLOCK(fs)-SPIFFS_OBJ_LOOKUP_PAGES(fs) &&
                                 ;      89         free_pages_in_block <= max_free_pages) {
                                 ;      90       // found a fully deleted block
                                 ;      91       fs->stats_p_deleted -= deleted_pages_in_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",91
0000015C AB89                    		MOV.L 3CH[R0], R1
0000015E AB9A                    		MOV.L 3CH[R1], R2
00000160 06C10212                		SUB 24H[R0].UW, R2
00000164 A39A                    		MOV.L R2, 3CH[R1]
00000166                         L61:	; bb138.split
                                 ;      92       res = spiffs_gc_erase_block(fs, cur_block);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",92
00000166 BA0A                    		MOVU.W 12H[R0], R2
00000168 AB89                    		MOV.L 3CH[R0], R1
0000016A 39rrrr               W  		BSR __$spiffs_gc_erase_block
0000016D A081                    		MOV.L R1, 08H[R0]
0000016F                         L62:	; bb138.split10
                                 ;      93       return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",93
0000016F E5000201                		MOV.L 08H[R0], 04H[R0]
00000173 2Err                 B  		BRA L82
00000175                         L63:	; bb153
00000175 BC81                    		MOVU.W 24H[R0], R1
00000177 06C90113                		ADD 26H[R0].UW, R1
0000017B 7551FE                  		CMP #0FEH, R1
0000017E 18                   S  		BNE L65
0000017F                         L64:	; bb161
0000017F F80601                  		MOV.L #00000001H, [R0]
00000182 08                   S  		BRA L66
00000183                         L65:	; bb162
00000183 F80600                  		MOV.L #00000000H, [R0]
00000186                         L66:	; bb163
00000186 EC01                    		MOV.L [R0], R1
00000188 6101                    		CMP #00H, R1
0000018A 20rr                    		BEQ L69
0000018C                         L67:	; bb167
0000018C BC89                    		MOVU.W 26H[R0], R1
0000018E 06C5011D                		CMP 3AH[R0].UW, R1
00000192 2Arr                    		BGT L69
00000194                         L68:	; bb174
00000194 F80601                  		MOV.L #00000001H, [R0]
00000197 08                   S  		BRA L70
00000198                         L69:	; bb175
00000198 F80600                  		MOV.L #00000000H, [R0]
0000019B                         L70:	; bb176
0000019B EC01                    		MOV.L [R0], R1
0000019D 6101                    		CMP #00H, R1
0000019F 21rr                    		BNE L60
000001A1                         L71:	; bb181
                                 ;      94     }
                                 ;      95 
                                 ;      96     cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",96
000001A1 3E0600                  		MOV.L #00000000H, 18H[R0]
000001A4                         L72:	; bb181.split
                                 ;      97     cur_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",97
000001A4 9A09                    		MOV.W 12H[R0], R1
000001A6 6211                    		ADD #01H, R1
000001A8 9209                    		MOV.W R1, 12H[R0]
000001AA                         L73:	; bb181.split11
                                 ;      98     cur_block_addr += SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",98
000001AA A909                    		MOV.L 14H[R0], R1
000001AC 7311000001              		ADD #00010000H, R1
000001B1 A109                    		MOV.L R1, 14H[R0]
000001B3                         L74:	; bb186
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",50
000001B3 A881                    		MOV.L 08H[R0], R1
000001B5 6101                    		CMP #00H, R1
000001B7 21rr                    		BNE L77
000001B9                         L75:	; bb190
000001B9 A889                    		MOV.L 0CH[R0], R1
000001BB 7112FF                  		ADD #0FFFFFFFFH, R1, R2
000001BE A08A                    		MOV.L R2, 0CH[R0]
000001C0 6101                    		CMP #00H, R1
000001C2 10                   S  		BEQ L77
000001C3                         L76:	; bb196
000001C3 F80601                  		MOV.L #00000001H, [R0]
000001C6 08                   S  		BRA L78
000001C7                         L77:	; bb197
000001C7 F80600                  		MOV.L #00000000H, [R0]
000001CA                         L78:	; bb198
000001CA EC01                    		MOV.L [R0], R1
000001CC 6101                    		CMP #00H, R1
000001CE 3Brrrr               W  		BNE L26
000001D1                         L79:	; bb204
                                 ;      99   } // per block
                                 ;     100 
                                 ;     101   if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",101
000001D1 A881                    		MOV.L 08H[R0], R1
000001D3 6101                    		CMP #00H, R1
000001D5 18                   S  		BNE L81
000001D6                         L80:	; bb205
                                 ;     102     res = SPIFFS_ERR_NO_DELETED_BLOCKS;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",102
000001D6 F90A02D3D8              		MOV.L #0FFFFD8D3H, 08H[R0]
000001DB                         L81:	; bb210
                                 ;     103   }
                                 ;     104   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",104
000001DB E5000201                		MOV.L 08H[R0], 04H[R0]
000001DF                         L82:	; bb213
000001DF A809                    		MOV.L 04H[R0], R1
000001E1 A309                    		MOV.L R1, 34H[R0]
                                 ;     105 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",105
000001E3 6710                    		RTSD #40H
000001E5                         _spiffs_gc_check:
                                 		.STACK	_spiffs_gc_check=56
                                 ;     106 
                                 ;     107 // Checks if garbage collecting is necessary. If so a candidate block is found,
                                 ;     108 // cleansed and erased
                                 ;     109 s32_t spiffs_gc_check(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",109
000001E5 7100CC                  		ADD #0FFFFFFCCH, R0
000001E8 A301                    		MOV.L R1, 30H[R0]
000001EA A28A                    		MOV.L R2, 2CH[R0]
                                 ;     110     spiffs *fs,
                                 ;     111     u32_t len) {
                                 ;     112   s32_t res;
                                 ;     113   s32_t free_pages =
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",113
000001EC AB01                    		MOV.L 30H[R0], R1
000001EE A89A                    		MOV.L 0CH[R1], R2
000001F0 7612FE00                		MUL #0FEH, R2
000001F4 722204FE                		ADD #0FFFFFE04H, R2
000001F8 0681120E                		SUB 38H[R1].L, R2
000001FC 0681120F                		SUB 3CH[R1].L, R2
00000200 A08A                    		MOV.L R2, 0CH[R0]
00000202                         L84:	; entry.split
                                 ;     114       (SPIFFS_PAGES_PER_BLOCK(fs) - SPIFFS_OBJ_LOOKUP_PAGES(fs)) * (fs->block_count-2)
                                 ;     115       - fs->stats_p_allocated - fs->stats_p_deleted;
                                 ;     116   int tries = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",116
00000202 3E0400                  		MOV.L #00000000H, 10H[R0]
00000205                         L85:	; entry.split1
                                 ;     117 
                                 ;     118   if (fs->free_blocks > 3 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",118
00000205 AB01                    		MOV.L 30H[R0], R1
00000207 AB19                    		MOV.L 34H[R1], R1
00000209 6131                    		CMP #03H, R1
0000020B 24rr                    		BGTU L87
0000020D 2Err                 B  		BRA L89
0000020F                         L86:	; bb24
                                 ;     119       (s32_t)len < free_pages * (s32_t)SPIFFS_DATA_PAGE_SIZE(fs)) {
                                 ;     120     return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",120
0000020F 3E0100                  		MOV.L #00000000H, 04H[R0]
00000212 38rrrr               W  		BRA L135
00000215                         L87:	; bb31
00000215 A889                    		MOV.L 0CH[R0], R1
00000217 7611FA00                		MUL #0FAH, R1
0000021B 0685010B                		CMP 2CH[R0].L, R1
0000021F 2Brr                    		BLE L89
00000221                         L88:	; bb37
00000221 F80601                  		MOV.L #00000001H, [R0]
00000224 08                   S  		BRA L90
00000225                         L89:	; bb38
00000225 F80600                  		MOV.L #00000000H, [R0]
00000228                         L90:	; bb39
00000228 EC01                    		MOV.L [R0], R1
0000022A 6101                    		CMP #00H, R1
0000022C 21rr                    		BNE L86
0000022E                         L91:	; bb43
                                 ;     121   }
                                 ;     122 
                                 ;     123   u32_t needed_pages = (len + SPIFFS_DATA_PAGE_SIZE(fs) - 1) / SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",123
0000022E AA89                    		MOV.L 2CH[R0], R1
00000230 7211F900                		ADD #0F9H, R1
00000234 FD7891FA00              		DIVU #0FAH, R1
00000239 A109                    		MOV.L R1, 14H[R0]
0000023B                         L92:	; bb43.split
                                 ;     124 //  if (fs->free_blocks <= 2 && (s32_t)needed_pages > free_pages) {
                                 ;     125 //    SPIFFS_GC_DBG("gc: full freeblk:%i needed:%i free:%i dele:%i\n", fs->free_blocks, needed_pages, free_pages, fs->stats_p_deleted);
                                 ;     126 //    return SPIFFS_ERR_FULL;
                                 ;     127 //  }
                                 ;     128   if ((s32_t)needed_pages > (s32_t)(free_pages + fs->stats_p_deleted)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",128
0000023B AB01                    		MOV.L 30H[R0], R1
0000023D AB99                    		MOV.L 3CH[R1], R1
0000023F 06890103                		ADD 0CH[R0].L, R1
00000243 06850105                		CMP 14H[R0].L, R1
00000247 28rr                    		BGE L94
00000249                         L93:	; bb49
                                 ;     129     SPIFFS_GC_DBG("gc_check: full freeblk:%i needed:%i free:%i dele:%i\n", fs->free_blocks, needed_pages, free_pages, fs->stats_p_deleted);
                                 ;     130     return SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",130
00000249 F90A01EFD8              		MOV.L #0FFFFD8EFH, 04H[R0]
0000024E 38rrrr               W  		BRA L135
00000251                         L94:	; bb61
                                 ;     131   }
                                 ;     132 
                                 ;     133   do {
                                 ;     134     SPIFFS_GC_DBG("\ngc_check #%i: run gc free_blocks:%i pfree:%i pallo:%i pdele:%i [%i] len:%i of %i\n",
                                 ;     135         tries,
                                 ;     136         fs->free_blocks, free_pages, fs->stats_p_allocated, fs->stats_p_deleted, (free_pages+fs->stats_p_allocated+fs->stats_p_deleted),
                                 ;     137         len, free_pages*SPIFFS_DATA_PAGE_SIZE(fs));
                                 ;     138 
                                 ;     139     spiffs_block_ix *cands;
                                 ;     140     int count;
                                 ;     141     spiffs_block_ix cand;
                                 ;     142     s32_t prev_free_pages = free_pages;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",142
00000251 E5000309                		MOV.L 0CH[R0], 24H[R0]
00000255                         L95:	; bb61.split
                                 ;     143     // if the fs is crammed, ignore block age when selecting candidate - kind of a bad state
                                 ;     144     res = spiffs_gc_find_candidate(fs, &cands, &count, free_pages <= 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",144
00000255 A88A                    		MOV.L 0CH[R0], R2
00000257 AB01                    		MOV.L 30H[R0], R1
00000259 6102                    		CMP #00H, R2
0000025B FCDB4B                  		SCLE.L R4
0000025E 71031C                  		ADD #1CH, R0, R3
00000261 710218                  		ADD #18H, R0, R2
00000264 39rrrr               W  		BSR _spiffs_gc_find_candidate
00000267 A081                    		MOV.L R1, 08H[R0]
00000269                         L96:	; bb61.split2
                                 ;     145     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",145
00000269 A881                    		MOV.L 08H[R0], R1
0000026B 69F1                    		SHLR #1FH, R1
0000026D 6101                    		CMP #00H, R1
0000026F 10                   S  		BEQ L98
00000270                         L97:	; bb71
00000270 E5000201                		MOV.L 08H[R0], 04H[R0]
00000274 38rrrr               W  		BRA L135
00000277                         L98:	; bb80
                                 ;     146     if (count == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",146
00000277 A989                    		MOV.L 1CH[R0], R1
00000279 6101                    		CMP #00H, R1
0000027B 21rr                    		BNE L103
0000027D                         L99:	; bb81
                                 ;     147       SPIFFS_GC_DBG("gc_check: no candidates, return\n");
                                 ;     148       return (s32_t)needed_pages < free_pages ? SPIFFS_OK : SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",148
0000027D A909                    		MOV.L 14H[R0], R1
0000027F 06850103                		CMP 0CH[R0].L, R1
00000283 28rr                    		BGE L101
00000285                         L100:	; bb86
00000285 F80600                  		MOV.L #00000000H, [R0]
00000288 08                   S  		BRA L102
00000289                         L101:	; bb87
00000289 F80AEFD8                		MOV.L #0FFFFD8EFH, [R0]
0000028D                         L102:	; bb88
0000028D E40001                  		MOV.L [R0], 04H[R0]
00000290 38rrrr               W  		BRA L135
00000293                         L103:	; bb96
                                 ;     149     }
                                 ;     150 #if SPIFFS_GC_STATS
                                 ;     151     fs->stats_gc_runs++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",151
00000293 AB01                    		MOV.L 30H[R0], R1
00000295 AC1A                    		MOV.L 44H[R1], R2
00000297 6212                    		ADD #01H, R2
00000299 A41A                    		MOV.L R2, 44H[R1]
0000029B                         L104:	; bb96.split
                                 ;     152 #endif
                                 ;     153     cand = cands[0];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",153
0000029B A981                    		MOV.L 18H[R0], R1
0000029D D41011                  		MOV.W [R1], 22H[R0]
000002A0                         L105:	; bb96.split3
                                 ;     154     fs->cleaning = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",154
000002A0 AB01                    		MOV.L 30H[R0], R1
000002A2 F9144001                		MOV.B #01H, 40H[R1]
000002A6                         L106:	; bb96.split4
                                 ;     155     //printf("gcing: cleaning block %i\n", cand);
                                 ;     156     res = spiffs_gc_clean(fs, cand);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",156
000002A6 BC0A                    		MOVU.W 22H[R0], R2
000002A8 AB01                    		MOV.L 30H[R0], R1
000002AA 39rrrr               W  		BSR _spiffs_gc_clean
000002AD A081                    		MOV.L R1, 08H[R0]
000002AF                         L107:	; bb96.split5
                                 ;     157     fs->cleaning = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",157
000002AF AB01                    		MOV.L 30H[R0], R1
000002B1 F9144000                		MOV.B #00H, 40H[R1]
000002B5                         L108:	; bb96.split7
                                 ;     158     if (res < 0) {
                                 ;     159       SPIFFS_GC_DBG("gc_check: cleaning block %i, result %i\n", cand, res);
                                 ;     160     } else {
                                 ;     161       SPIFFS_GC_DBG("gc_check: cleaning block %i, result %i\n", cand, res);
                                 ;     162     }
                                 ;     163     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",163
000002B5 A881                    		MOV.L 08H[R0], R1
000002B7 69F1                    		SHLR #1FH, R1
000002B9 6101                    		CMP #00H, R1
000002BB 10                   S  		BEQ L110
000002BC                         L109:	; bb121
000002BC E5000201                		MOV.L 08H[R0], 04H[R0]
000002C0 38rrrr               W  		BRA L135
000002C3                         L110:	; bb129
                                 ;     164 
                                 ;     165     res = spiffs_gc_erase_page_stats(fs, cand);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",165
000002C3 BC0A                    		MOVU.W 22H[R0], R2
000002C5 AB01                    		MOV.L 30H[R0], R1
000002C7 39rrrr               W  		BSR _spiffs_gc_erase_page_stats
000002CA A081                    		MOV.L R1, 08H[R0]
000002CC                         L111:	; bb129.split
                                 ;     166     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",166
000002CC A881                    		MOV.L 08H[R0], R1
000002CE 69F1                    		SHLR #1FH, R1
000002D0 6101                    		CMP #00H, R1
000002D2 10                   S  		BEQ L113
000002D3                         L112:	; bb135
000002D3 E5000201                		MOV.L 08H[R0], 04H[R0]
000002D7 38rrrr               W  		BRA L135
000002DA                         L113:	; bb143
                                 ;     167 
                                 ;     168     res = spiffs_gc_erase_block(fs, cand);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",168
000002DA BC0A                    		MOVU.W 22H[R0], R2
000002DC AB01                    		MOV.L 30H[R0], R1
000002DE 39rrrr               W  		BSR __$spiffs_gc_erase_block
000002E1 A081                    		MOV.L R1, 08H[R0]
000002E3                         L114:	; bb143.split
                                 ;     169     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",169
000002E3 A881                    		MOV.L 08H[R0], R1
000002E5 69F1                    		SHLR #1FH, R1
000002E7 6101                    		CMP #00H, R1
000002E9 10                   S  		BEQ L116
000002EA                         L115:	; bb149
000002EA E5000201                		MOV.L 08H[R0], 04H[R0]
000002EE 38rrrr               W  		BRA L135
000002F1                         L116:	; bb157
                                 ;     170 
                                 ;     171     free_pages =
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",171
000002F1 AB01                    		MOV.L 30H[R0], R1
000002F3 A89A                    		MOV.L 0CH[R1], R2
000002F5 7612FE00                		MUL #0FEH, R2
000002F9 722204FE                		ADD #0FFFFFE04H, R2
000002FD 0681120E                		SUB 38H[R1].L, R2
00000301 0681120F                		SUB 3CH[R1].L, R2
00000305 A08A                    		MOV.L R2, 0CH[R0]
00000307                         L117:	; bb157.split
                                 ;     172           (SPIFFS_PAGES_PER_BLOCK(fs) - SPIFFS_OBJ_LOOKUP_PAGES(fs)) * (fs->block_count - 2)
                                 ;     173           - fs->stats_p_allocated - fs->stats_p_deleted;
                                 ;     174 
                                 ;     175     if (prev_free_pages <= 0 && prev_free_pages == free_pages) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",175
00000307 AA09                    		MOV.L 24H[R0], R1
00000309 6101                    		CMP #00H, R1
0000030B 2Arr                    		BGT L120
0000030D                         L118:	; bb177
0000030D AA09                    		MOV.L 24H[R0], R1
0000030F 06850103                		CMP 0CH[R0].L, R1
00000313 18                   S  		BNE L120
00000314                         L119:	; bb182
00000314 F80601                  		MOV.L #00000001H, [R0]
00000317 08                   S  		BRA L121
00000318                         L120:	; bb183
00000318 F80600                  		MOV.L #00000000H, [R0]
0000031B                         L121:	; bb184
0000031B EC01                    		MOV.L [R0], R1
0000031D 6101                    		CMP #00H, R1
0000031F 21rr                    		BNE L131
00000321                         L122:	; bb189
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",133
00000321 A901                    		MOV.L 10H[R0], R1
00000323 6211                    		ADD #01H, R1
00000325 A101                    		MOV.L R1, 10H[R0]
00000327 6141                    		CMP #04H, R1
00000329 2Arr                    		BGT L129
0000032B                         L123:	; bb195
0000032B AB01                    		MOV.L 30H[R0], R1
0000032D AB19                    		MOV.L 34H[R1], R1
0000032F 6131                    		CMP #03H, R1
00000331 23rr                    		BLTU L125
00000333                         L124:	; bb201
00000333 A889                    		MOV.L 0CH[R0], R1
00000335 7611FA00                		MUL #0FAH, R1
00000339 0685010B                		CMP 2CH[R0].L, R1
0000033D 28rr                    		BGE L126
0000033F                         L125:	; bb207
0000033F F80601                  		MOV.L #00000001H, [R0]
00000342 08                   S  		BRA L127
00000343                         L126:	; bb208
00000343 F80600                  		MOV.L #00000000H, [R0]
00000346                         L127:	; bb209
00000346 EC01                    		MOV.L [R0], R1
00000348 6101                    		CMP #00H, R1
0000034A 10                   S  		BEQ L129
0000034B                         L128:	; bb213
0000034B F80601                  		MOV.L #00000001H, [R0]
0000034E 08                   S  		BRA L130
0000034F                         L129:	; bb214
0000034F F80600                  		MOV.L #00000000H, [R0]
00000352                         L130:	; bb215
00000352 EC01                    		MOV.L [R0], R1
00000354 6101                    		CMP #00H, R1
00000356 3Brrrr               W  		BNE L94
00000359                         L131:	; bb221
                                 ;     176       // abort early to reduce wear, at least tried once
                                 ;     177       SPIFFS_GC_DBG("gc_check: early abort, no result on gc when fs crammed\n");
                                 ;     178       break;
                                 ;     179     }
                                 ;     180 
                                 ;     181   } while (++tries < SPIFFS_GC_MAX_RUNS && (fs->free_blocks <= 2 ||
                                 ;     182       (s32_t)len > free_pages*(s32_t)SPIFFS_DATA_PAGE_SIZE(fs)));
                                 ;     183 
                                 ;     184   free_pages =
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",184
00000359 AB01                    		MOV.L 30H[R0], R1
0000035B A89A                    		MOV.L 0CH[R1], R2
0000035D 7612FE00                		MUL #0FEH, R2
00000361 722204FE                		ADD #0FFFFFE04H, R2
00000365 0681120E                		SUB 38H[R1].L, R2
00000369 0681120F                		SUB 3CH[R1].L, R2
0000036D A08A                    		MOV.L R2, 0CH[R0]
0000036F                         L132:	; bb221.split
                                 ;     185         (SPIFFS_PAGES_PER_BLOCK(fs) - SPIFFS_OBJ_LOOKUP_PAGES(fs)) * (fs->block_count - 2)
                                 ;     186         - fs->stats_p_allocated - fs->stats_p_deleted;
                                 ;     187   if ((s32_t)len > free_pages*(s32_t)SPIFFS_DATA_PAGE_SIZE(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",187
0000036F A889                    		MOV.L 0CH[R0], R1
00000371 7611FA00                		MUL #0FAH, R1
00000375 0685010B                		CMP 2CH[R0].L, R1
00000379 28rr                    		BGE L134
0000037B                         L133:	; bb236
                                 ;     188     res = SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",188
0000037B F90A02EFD8              		MOV.L #0FFFFD8EFH, 08H[R0]
00000380                         L134:	; bb243
                                 ;     189   }
                                 ;     190 
                                 ;     191   SPIFFS_GC_DBG("gc_check: finished, %i dirty, blocks %i free, %i pages free, %i tries, res %i\n",
                                 ;     192       fs->stats_p_allocated + fs->stats_p_deleted,
                                 ;     193       fs->free_blocks, free_pages, tries, res);
                                 ;     194 
                                 ;     195   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",195
00000380 E5000201                		MOV.L 08H[R0], 04H[R0]
00000384                         L135:	; bb246
00000384 A809                    		MOV.L 04H[R0], R1
00000386 A281                    		MOV.L R1, 28H[R0]
                                 ;     196 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",196
00000388 670D                    		RTSD #34H
0000038A                         _spiffs_gc_erase_page_stats:
                                 		.STACK	_spiffs_gc_erase_page_stats=64
                                 ;     197 
                                 ;     198 // Updates page statistics for a block that is about to be erased
                                 ;     199 s32_t spiffs_gc_erase_page_stats(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",199
0000038A 7100CC                  		ADD #0FFFFFFCCH, R0
0000038D A301                    		MOV.L R1, 30H[R0]
0000038F 958A                    		MOV.W R2, 2EH[R0]
                                 ;     200     spiffs *fs,
                                 ;     201     spiffs_block_ix bix) {
                                 ;     202   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",202
00000391 3E0100                  		MOV.L #00000000H, 04H[R0]
00000394                         L137:	; entry.split
                                 ;     203   int obj_lookup_page = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",203
00000394 3E0200                  		MOV.L #00000000H, 08H[R0]
00000397                         L138:	; entry.split1
                                 ;     204   int entries_per_page = (SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",204
00000397 3E0380                  		MOV.L #00000080H, 0CH[R0]
0000039A                         L139:	; entry.split2
                                 ;     205   spiffs_obj_id *obj_lu_buf = (spiffs_obj_id *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",205
0000039A AB01                    		MOV.L 30H[R0], R1
0000039C E5100804                		MOV.L 20H[R1], 10H[R0]
000003A0                         L140:	; entry.split3
                                 ;     206   int cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",206
000003A0 3E0500                  		MOV.L #00000000H, 14H[R0]
000003A3                         L141:	; entry.split4
                                 ;     207   u32_t dele = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",207
000003A3 3E0600                  		MOV.L #00000000H, 18H[R0]
000003A6                         L142:	; entry.split5
                                 ;     208   u32_t allo = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",208
000003A6 3E0700                  		MOV.L #00000000H, 1CH[R0]
000003A9 38rrrr               W  		BRA L161
000003AC                         L143:	; bb
                                 ;     209 
                                 ;     210   // check each object lookup page
                                 ;     211   while (res == SPIFFS_OK && obj_lookup_page < (int)SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 ;     212     int entry_offset = obj_lookup_page * entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",212
000003AC A881                    		MOV.L 08H[R0], R1
000003AE 068D0103                		MUL 0CH[R0].L, R1
000003B2 A201                    		MOV.L R1, 20H[R0]
000003B4                         L144:	; bb.split
                                 ;     213     res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",213
000003B4 AB01                    		MOV.L 30H[R0], R1
000003B6 A884                    		MOV.L 08H[R0], R4
000003B8 9D8A                    		MOV.W 2EH[R0], R2
000003BA 6080                    		SUB #08H, R0
000003BC E5100801                		MOV.L 20H[R1], 04H[R0]
000003C0 F80A0001                		MOV.L #00000100H, [R0]
000003C4 6C84                    		SHLL #08H, R4
000003C6 6D02                    		SHLL #10H, R2
000003C8 4B24                    		ADD R2, R4
000003CA 7344000010              		ADD #00100000H, R4
000003CF 6603                    		MOV.L #00000000H, R3
000003D1 754214                  		MOV.L #00000014H, R2
000003D4 05rrrrrr             A  		BSR _spiffs_phys_rd
000003D8 6280                    		ADD #08H, R0
000003DA A009                    		MOV.L R1, 04H[R0]
000003DC 2Err                 B  		BRA L151
000003DE                         L145:	; bb31
                                 ;     214         0, bix * SPIFFS_CFG_LOG_BLOCK_SZ(fs) + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     215     // check each entry
                                 ;     216     while (res == SPIFFS_OK &&
                                 ;     217         cur_entry - entry_offset < entries_per_page && cur_entry < (int)(SPIFFS_PAGES_PER_BLOCK(fs)-SPIFFS_OBJ_LOOKUP_PAGES(fs))) {
                                 ;     218       spiffs_obj_id obj_id = obj_lu_buf[cur_entry-entry_offset];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",218
000003DE A909                    		MOV.L 14H[R0], R1
000003E0 06810108                		SUB 20H[R0].L, R1
000003E4 A902                    		MOV.L 10H[R0], R2
000003E6 FE5121                  		MOV.W [R1,R2], R1
000003E9 9489                    		MOV.W R1, 26H[R0]
000003EB                         L146:	; bb31.split
                                 ;     219       if (obj_id == SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",219
000003EB BC89                    		MOVU.W 26H[R0], R1
000003ED 7701FFFF00              		CMP #0FFFFH, R1
000003F2 20rr                    		BEQ L150
000003F4                         L147:	; bb41
                                 ;     220       } else if (obj_id == SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",220
000003F4 BC89                    		MOVU.W 26H[R0], R1
000003F6 6101                    		CMP #00H, R1
000003F8 18                   S  		BNE L149
000003F9                         L148:	; bb42
                                 ;     221         dele++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",221
000003F9 A981                    		MOV.L 18H[R0], R1
000003FB 6211                    		ADD #01H, R1
000003FD A181                    		MOV.L R1, 18H[R0]
000003FF 08                   S  		BRA L150
00000400                         L149:	; bb45
                                 ;     222       } else {
                                 ;     223         allo++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",223
00000400 A989                    		MOV.L 1CH[R0], R1
00000402 6211                    		ADD #01H, R1
00000404 A189                    		MOV.L R1, 1CH[R0]
00000406                         L150:	; bb58
                                 ;     224       }
                                 ;     225       cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",225
00000406 A909                    		MOV.L 14H[R0], R1
00000408 6211                    		ADD #01H, R1
0000040A A109                    		MOV.L R1, 14H[R0]
0000040C                         L151:	; bb61
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",216
0000040C A809                    		MOV.L 04H[R0], R1
0000040E 6101                    		CMP #00H, R1
00000410 21rr                    		BNE L154
00000412                         L152:	; bb65
00000412 A909                    		MOV.L 14H[R0], R1
00000414 06810108                		SUB 20H[R0].L, R1
00000418 06850103                		CMP 0CH[R0].L, R1
0000041C 28rr                    		BGE L154
0000041E                         L153:	; bb72
0000041E F80601                  		MOV.L #00000001H, [R0]
00000421 08                   S  		BRA L155
00000422                         L154:	; bb73
00000422 F80600                  		MOV.L #00000000H, [R0]
00000425                         L155:	; bb74
00000425 EC01                    		MOV.L [R0], R1
00000427 6101                    		CMP #00H, R1
00000429 20rr                    		BEQ L158
0000042B                         L156:	; bb78
0000042B A909                    		MOV.L 14H[R0], R1
0000042D 7551FD                  		CMP #0FDH, R1
00000430 2Arr                    		BGT L158
00000432                         L157:	; bb82
00000432 F80601                  		MOV.L #00000001H, [R0]
00000435 08                   S  		BRA L159
00000436                         L158:	; bb83
00000436 F80600                  		MOV.L #00000000H, [R0]
00000439                         L159:	; bb84
00000439 EC01                    		MOV.L [R0], R1
0000043B 6101                    		CMP #00H, R1
0000043D 21rr                    		BNE L145
0000043F                         L160:	; bb89
                                 ;     226     } // per entry
                                 ;     227     obj_lookup_page++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",227
0000043F A881                    		MOV.L 08H[R0], R1
00000441 6211                    		ADD #01H, R1
00000443 A081                    		MOV.L R1, 08H[R0]
00000445                         L161:	; bb92
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",211
00000445 A809                    		MOV.L 04H[R0], R1
00000447 6101                    		CMP #00H, R1
00000449 21rr                    		BNE L164
0000044B                         L162:	; bb96
0000044B A881                    		MOV.L 08H[R0], R1
0000044D 6111                    		CMP #01H, R1
0000044F 2Arr                    		BGT L164
00000451                         L163:	; bb100
00000451 F80601                  		MOV.L #00000001H, [R0]
00000454 08                   S  		BRA L165
00000455                         L164:	; bb101
00000455 F80600                  		MOV.L #00000000H, [R0]
00000458                         L165:	; bb102
00000458 EC01                    		MOV.L [R0], R1
0000045A 6101                    		CMP #00H, R1
0000045C 3Brrrr               W  		BNE L143
0000045F                         L166:	; bb107
                                 ;     228   } // per object lookup page
                                 ;     229   SPIFFS_GC_DBG("gc_check: wipe pallo:%i pdele:%i\n", allo, dele);
                                 ;     230   fs->stats_p_allocated -= allo;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",230
0000045F AB01                    		MOV.L 30H[R0], R1
00000461 AB92                    		MOV.L 38H[R1], R2
00000463 06810207                		SUB 1CH[R0].L, R2
00000467 A392                    		MOV.L R2, 38H[R1]
00000469                         L167:	; bb107.split
                                 ;     231   fs->stats_p_deleted -= dele;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",231
00000469 AB01                    		MOV.L 30H[R0], R1
0000046B AB9A                    		MOV.L 3CH[R1], R2
0000046D 06810206                		SUB 18H[R0].L, R2
00000471 A39A                    		MOV.L R2, 3CH[R1]
00000473                         L168:	; bb107.split6
                                 ;     232   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",232
00000473 A809                    		MOV.L 04H[R0], R1
00000475 A281                    		MOV.L R1, 28H[R0]
00000477                         L169:	; bb107.split7
                                 ;     233 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",233
00000477 670D                    		RTSD #34H
00000479                         _spiffs_gc_find_candidate:
                                 		.STACK	_spiffs_gc_find_candidate=112
                                 ;     234 
                                 ;     235 // Finds block candidates to erase
                                 ;     236 s32_t spiffs_gc_find_candidate(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",236
00000479 71009C                  		ADD #0FFFFFF9CH, R0
0000047C A601                    		MOV.L R1, 60H[R0]
0000047E A58A                    		MOV.L R2, 5CH[R0]
00000480 A583                    		MOV.L R3, 58H[R0]
00000482 C70457                  		MOV.B R4, 57H[R0]
                                 ;     237     spiffs *fs,
                                 ;     238     spiffs_block_ix **block_candidates,
                                 ;     239     int *candidate_count,
                                 ;     240     char fs_crammed) {
                                 ;     241   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",241
00000485 3E0200                  		MOV.L #00000000H, 08H[R0]
00000488                         L171:	; entry.split
                                 ;     242   u32_t blocks = fs->block_count;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",242
00000488 AE01                    		MOV.L 60H[R0], R1
0000048A E5100303                		MOV.L 0CH[R1], 0CH[R0]
0000048E                         L172:	; entry.split1
                                 ;     243   spiffs_block_ix cur_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",243
0000048E 3D0900                  		MOV.W #0000H, 12H[R0]
00000491                         L173:	; entry.split2
                                 ;     244   u32_t cur_block_addr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",244
00000491 3E0500                  		MOV.L #00000000H, 14H[R0]
00000494                         L174:	; entry.split3
                                 ;     245   spiffs_obj_id *obj_lu_buf = (spiffs_obj_id *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",245
00000494 AE01                    		MOV.L 60H[R0], R1
00000496 E5100806                		MOV.L 20H[R1], 18H[R0]
0000049A                         L175:	; entry.split4
                                 ;     246   int cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",246
0000049A 3E0700                  		MOV.L #00000000H, 1CH[R0]
0000049D                         L176:	; entry.split5
                                 ;     247 
                                 ;     248   // using fs->work area as sorted candidate memory, (spiffs_block_ix)cand_bix/(s32_t)score
                                 ;     249   int max_candidates = MIN(fs->block_count, (SPIFFS_CFG_LOG_PAGE_SZ(fs)-8)/(sizeof(spiffs_block_ix) + sizeof(s32_t)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",249
0000049D AE01                    		MOV.L 60H[R0], R1
0000049F A899                    		MOV.L 0CH[R1], R1
000004A1 755128                  		CMP #28H, R1
000004A4 24rr                    		BGTU L178
000004A6                         L177:	; bb
000004A6 AE01                    		MOV.L 60H[R0], R1
000004A8 E11003                  		MOV.L 0CH[R1], [R0]
000004AB 08                   S  		BRA L179
000004AC                         L178:	; bb40
000004AC F80629                  		MOV.L #00000029H, [R0]
000004AF                         L179:	; bb41
000004AF E40008                  		MOV.L [R0], 20H[R0]
                                 ;     250   *candidate_count = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",250
000004B2 AD81                    		MOV.L 58H[R0], R1
000004B4 F81600                  		MOV.L #00000000H, [R1]
000004B7                         L180:	; bb41.split
                                 ;     251   memset(fs->work, 0xff, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",251
000004B7 AE01                    		MOV.L 60H[R0], R1
000004B9 AA19                    		MOV.L 24H[R1], R1
000004BB FB3A0001                		MOV.L #00000100H, R3
000004BF 7542FF                  		MOV.L #000000FFH, R2
000004C2 7F88                    		SSTR.B
000004C4                         L181:	; bb41.split6
                                 ;     252 
                                 ;     253   // divide up work area into block indices and scores
                                 ;     254   spiffs_block_ix *cand_blocks = (spiffs_block_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",254
000004C4 AE01                    		MOV.L 60H[R0], R1
000004C6 E5100909                		MOV.L 24H[R1], 24H[R0]
000004CA                         L182:	; bb41.split7
                                 ;     255   s32_t *cand_scores = (s32_t *)(fs->work + max_candidates * sizeof(spiffs_block_ix));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",255
000004CA AA01                    		MOV.L 20H[R0], R1
000004CC 6C11                    		SHLL #01H, R1
000004CE AE02                    		MOV.L 60H[R0], R2
000004D0 06892109                		ADD 24H[R2].L, R1
000004D4 A281                    		MOV.L R1, 28H[R0]
000004D6                         L183:	; bb41.split8
                                 ;     256 
                                 ;     257    // align cand_scores on s32_t boundary
                                 ;     258   cand_scores = (s32_t*)(((ptrdiff_t)cand_scores + sizeof(ptrdiff_t) - 1) & ~(sizeof(ptrdiff_t) - 1));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",258
000004D6 AA81                    		MOV.L 28H[R0], R1
000004D8 6231                    		ADD #03H, R1
000004DA 7521FC                  		AND #0FFFFFFFCH, R1
000004DD A281                    		MOV.L R1, 28H[R0]
000004DF                         L184:	; bb41.split9
                                 ;     259 
                                 ;     260   *block_candidates = cand_blocks;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",260
000004DF AA09                    		MOV.L 24H[R0], R1
000004E1 AD8A                    		MOV.L 5CH[R0], R2
000004E3 E321                    		MOV.L R1, [R2]
000004E5                         L185:	; bb41.split10
                                 ;     261 
                                 ;     262   int entries_per_page = (SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",262
000004E5 3E0B80                  		MOV.L #00000080H, 2CH[R0]
000004E8 38rrrr               W  		BRA L247
000004EB                         L186:	; bb66
                                 ;     263 
                                 ;     264   // check each block
                                 ;     265   while (res == SPIFFS_OK && blocks--) {
                                 ;     266     u16_t deleted_pages_in_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",266
000004EB 3D8800                  		MOV.W #0000H, 30H[R0]
000004EE                         L187:	; bb66.split
                                 ;     267     u16_t used_pages_in_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",267
000004EE 3D8900                  		MOV.W #0000H, 32H[R0]
000004F1                         L188:	; bb66.split11
                                 ;     268 
                                 ;     269     int obj_lookup_page = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",269
000004F1 3E0D00                  		MOV.L #00000000H, 34H[R0]
000004F4 38rrrr               W  		BRA L208
000004F7                         L189:	; bb67
                                 ;     270     // check each object lookup page
                                 ;     271     while (res == SPIFFS_OK && obj_lookup_page < (int)SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 ;     272       int entry_offset = obj_lookup_page * entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",272
000004F7 AB09                    		MOV.L 34H[R0], R1
000004F9 068D010B                		MUL 2CH[R0].L, R1
000004FD A381                    		MOV.L R1, 38H[R0]
000004FF                         L190:	; bb67.split
                                 ;     273       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",273
000004FF AE01                    		MOV.L 60H[R0], R1
00000501 AB0C                    		MOV.L 34H[R0], R4
00000503 6C84                    		SHLL #08H, R4
00000505 06890405                		ADD 14H[R0].L, R4
00000509 6080                    		SUB #08H, R0
0000050B E5100801                		MOV.L 20H[R1], 04H[R0]
0000050F F80A0001                		MOV.L #00000100H, [R0]
00000513 7344000010              		ADD #00100000H, R4
00000518 6603                    		MOV.L #00000000H, R3
0000051A 754214                  		MOV.L #00000014H, R2
0000051D 05rrrrrr             A  		BSR _spiffs_phys_rd
00000521 6280                    		ADD #08H, R0
00000523 A081                    		MOV.L R1, 08H[R0]
00000525 2Err                 B  		BRA L198
00000527                         L191:	; bb81
                                 ;     274           0, cur_block_addr + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     275       // check each entry
                                 ;     276       while (res == SPIFFS_OK &&
                                 ;     277           cur_entry - entry_offset < entries_per_page &&
                                 ;     278           cur_entry < (int)(SPIFFS_PAGES_PER_BLOCK(fs)-SPIFFS_OBJ_LOOKUP_PAGES(fs))) {
                                 ;     279         spiffs_obj_id obj_id = obj_lu_buf[cur_entry-entry_offset];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",279
00000527 A989                    		MOV.L 1CH[R0], R1
00000529 0681010E                		SUB 38H[R0].L, R1
0000052D A982                    		MOV.L 18H[R0], R2
0000052F FE5121                  		MOV.W [R1,R2], R1
00000532 9789                    		MOV.W R1, 3EH[R0]
00000534                         L192:	; bb81.split
                                 ;     280         if (obj_id == SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",280
00000534 BF89                    		MOVU.W 3EH[R0], R1
00000536 7701FFFF00              		CMP #0FFFFH, R1
0000053B 18                   S  		BNE L194
0000053C                         L193:	; bb89
                                 ;     281           // when a free entry is encountered, scan logic ensures that all following entries are free also
                                 ;     282           res = 1; // kill object lu loop
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",282
0000053C 3E0201                  		MOV.L #00000001H, 08H[R0]
0000053F 2Err                 B  		BRA L207
00000541                         L194:	; bb92
                                 ;     283           break;
                                 ;     284         } else  if (obj_id == SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",284
00000541 BF89                    		MOVU.W 3EH[R0], R1
00000543 6101                    		CMP #00H, R1
00000545 18                   S  		BNE L196
00000546                         L195:	; bb93
                                 ;     285           deleted_pages_in_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",285
00000546 9E01                    		MOV.W 30H[R0], R1
00000548 6211                    		ADD #01H, R1
0000054A 9601                    		MOV.W R1, 30H[R0]
0000054C 08                   S  		BRA L197
0000054D                         L196:	; bb96
                                 ;     286         } else {
                                 ;     287           used_pages_in_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",287
0000054D 9E09                    		MOV.W 32H[R0], R1
0000054F 6211                    		ADD #01H, R1
00000551 9609                    		MOV.W R1, 32H[R0]
00000553                         L197:	; bb110
                                 ;     288         }
                                 ;     289         cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",289
00000553 A989                    		MOV.L 1CH[R0], R1
00000555 6211                    		ADD #01H, R1
00000557 A189                    		MOV.L R1, 1CH[R0]
00000559                         L198:	; bb113
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",276
00000559 A881                    		MOV.L 08H[R0], R1
0000055B 6101                    		CMP #00H, R1
0000055D 21rr                    		BNE L201
0000055F                         L199:	; bb117
0000055F A989                    		MOV.L 1CH[R0], R1
00000561 0681010E                		SUB 38H[R0].L, R1
00000565 0685010B                		CMP 2CH[R0].L, R1
00000569 28rr                    		BGE L201
0000056B                         L200:	; bb124
0000056B F80601                  		MOV.L #00000001H, [R0]
0000056E 08                   S  		BRA L202
0000056F                         L201:	; bb125
0000056F F80600                  		MOV.L #00000000H, [R0]
00000572                         L202:	; bb126
00000572 EC01                    		MOV.L [R0], R1
00000574 6101                    		CMP #00H, R1
00000576 20rr                    		BEQ L205
00000578                         L203:	; bb130
00000578 A989                    		MOV.L 1CH[R0], R1
0000057A 7551FD                  		CMP #0FDH, R1
0000057D 2Arr                    		BGT L205
0000057F                         L204:	; bb134
0000057F F80601                  		MOV.L #00000001H, [R0]
00000582 08                   S  		BRA L206
00000583                         L205:	; bb135
00000583 F80600                  		MOV.L #00000000H, [R0]
00000586                         L206:	; bb136
00000586 EC01                    		MOV.L [R0], R1
00000588 6101                    		CMP #00H, R1
0000058A 21rr                    		BNE L191
0000058C                         L207:	; bb142
                                 ;     290       } // per entry
                                 ;     291       obj_lookup_page++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",291
0000058C AB09                    		MOV.L 34H[R0], R1
0000058E 6211                    		ADD #01H, R1
00000590 A309                    		MOV.L R1, 34H[R0]
00000592                         L208:	; bb145
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",271
00000592 A881                    		MOV.L 08H[R0], R1
00000594 6101                    		CMP #00H, R1
00000596 21rr                    		BNE L211
00000598                         L209:	; bb149
00000598 AB09                    		MOV.L 34H[R0], R1
0000059A 6111                    		CMP #01H, R1
0000059C 2Arr                    		BGT L211
0000059E                         L210:	; bb153
0000059E F80601                  		MOV.L #00000001H, [R0]
000005A1 08                   S  		BRA L212
000005A2                         L211:	; bb154
000005A2 F80600                  		MOV.L #00000000H, [R0]
000005A5                         L212:	; bb155
000005A5 EC01                    		MOV.L [R0], R1
000005A7 6101                    		CMP #00H, R1
000005A9 3Brrrr               W  		BNE L189
000005AC                         L213:	; bb161
                                 ;     292     } // per object lookup page
                                 ;     293     if (res == 1) res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",293
000005AC A881                    		MOV.L 08H[R0], R1
000005AE 6111                    		CMP #01H, R1
000005B0 18                   S  		BNE L215
000005B1                         L214:	; bb162
000005B1 3E0200                  		MOV.L #00000000H, 08H[R0]
000005B4                         L215:	; bb168
                                 ;     294 
                                 ;     295     // calculate score and insert into candidate table
                                 ;     296     // stoneage sort, but probably not so many blocks
                                 ;     297     if (res == SPIFFS_OK && deleted_pages_in_block > 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",297
000005B4 A881                    		MOV.L 08H[R0], R1
000005B6 6101                    		CMP #00H, R1
000005B8 3Arrrr               W  		BEQ L240
000005BB 38rrrr               W  		BRA L242
000005BE                         L216:	; bb169
                                 ;     298       // read erase count
                                 ;     299       spiffs_obj_id erase_count;
                                 ;     300       res = _spiffs_rd(fs, SPIFFS_OP_C_READ | SPIFFS_OP_T_OBJ_LU2, 0,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",300
000005BE 9A0C                    		MOV.W 12H[R0], R4
000005C0 AE01                    		MOV.L 60H[R0], R1
000005C2 6080                    		SUB #08H, R0
000005C4 710248                  		ADD #48H, R0, R2
000005C7 A00A                    		MOV.L R2, 04H[R0]
000005C9 F80602                  		MOV.L #00000002H, [R0]
000005CC 6D04                    		SHLL #10H, R4
000005CE 7344FE0110              		ADD #001001FEH, R4
000005D3 6603                    		MOV.L #00000000H, R3
000005D5 754215                  		MOV.L #00000015H, R2
000005D8 05rrrrrr             A  		BSR _spiffs_phys_rd
000005DC 6280                    		ADD #08H, R0
000005DE A081                    		MOV.L R1, 08H[R0]
000005E0                         L217:	; bb169.split
                                 ;     301           SPIFFS_ERASE_COUNT_PADDR(fs, cur_block),
                                 ;     302           sizeof(spiffs_obj_id), (u8_t *)&erase_count);
                                 ;     303       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",303
000005E0 A881                    		MOV.L 08H[R0], R1
000005E2 69F1                    		SHLR #1FH, R1
000005E4 6101                    		CMP #00H, R1
000005E6 10                   S  		BEQ L219
000005E7                         L218:	; bb181
000005E7 E5000201                		MOV.L 08H[R0], 04H[R0]
000005EB 38rrrr               W  		BRA L253
000005EE                         L219:	; bb190.split
                                 ;     304 
                                 ;     305       spiffs_obj_id erase_age;
                                 ;     306       if (fs->max_erase_count > erase_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",306
000005EE AE01                    		MOV.L 60H[R0], R1
000005F0 5D1E21                  		MOVU.W 42H[R1], R14
000005F3 06C50E20                		CMP 40H[R0].UW, R14
000005F7 2Brr                    		BLE L221
000005F9                         L220:	; bb191
                                 ;     307         erase_age = fs->max_erase_count - erase_count;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",307
000005F9 AE01                    		MOV.L 60H[R0], R1
000005FB 5D1121                  		MOVU.W 42H[R1], R1
000005FE 06C10120                		SUB 40H[R0].UW, R1
00000602 D70121                  		MOV.W R1, 42H[R0]
00000605 2Err                 B  		BRA L222
00000607                         L221:	; bb200
                                 ;     308       } else {
                                 ;     309         erase_age = SPIFFS_OBJ_ID_FREE - (erase_count - fs->max_erase_count);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",309
00000607 5D0120                  		MOVU.W 40H[R0], R1
0000060A AE02                    		MOV.L 60H[R0], R2
0000060C 06C12121                		SUB 42H[R2].UW, R1
00000610 FB2EFFFF00              		MOV.L #0000FFFFH, R2
00000615 4312                    		SUB R1, R2
00000617 D70221                  		MOV.W R2, 42H[R0]
0000061A                         L222:	; bb219
                                 ;     310       }
                                 ;     311 
                                 ;     312       s32_t score =
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",312
0000061A BE01                    		MOVU.W 30H[R0], R1
0000061C 6351                    		MUL #05H, R1
0000061E 06C10119                		SUB 32H[R0].UW, R1
00000622 590257                  		MOVU.B 57H[R0], R2
00000625 6102                    		CMP #00H, R2
00000627 5D0221                  		MOVU.W 42H[R0], R2
0000062A 10                   S  		BEQ L224
0000062B                         L223:	; bb233
0000062B F80600                  		MOV.L #00000000H, [R0]
0000062E 08                   S  		BRA L225
0000062F                         L224:	; bb234
0000062F F80632                  		MOV.L #00000032H, [R0]
00000632                         L225:	; bb235
00000632 068C02                  		MUL [R0].L, R2
00000635 4B21                    		ADD R2, R1
00000637 A409                    		MOV.L R1, 44H[R0]
                                 ;     313           deleted_pages_in_block * SPIFFS_GC_HEUR_W_DELET +
                                 ;     314           used_pages_in_block * SPIFFS_GC_HEUR_W_USED +
                                 ;     315           erase_age * (fs_crammed ? 0 : SPIFFS_GC_HEUR_W_ERASE_AGE);
                                 ;     316       int cand_ix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",316
00000639 3E8200                  		MOV.L #00000000H, 48H[R0]
0000063C 2Err                 B  		BRA L238
0000063E                         L226:	; bb241
                                 ;     317       SPIFFS_GC_DBG("gc_check: bix:%i del:%i use:%i score:%i\n", cur_block, deleted_pages_in_block, used_pages_in_block, score);
                                 ;     318       while (cand_ix < max_candidates) {
                                 ;     319         if (cand_blocks[cand_ix] == (spiffs_block_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",319
0000063E AA09                    		MOV.L 24H[R0], R1
00000640 AC82                    		MOV.L 48H[R0], R2
00000642 FED21E                  		MOVU.W [R2,R1], R14
00000645 770EFFFF00              		CMP #0FFFFH, R14
0000064A 21rr                    		BNE L229
0000064C                         L227:	; bb242
                                 ;     320           cand_blocks[cand_ix] = cur_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",320
0000064C 9A09                    		MOV.W 12H[R0], R1
0000064E AC82                    		MOV.L 48H[R0], R2
00000650 AA0B                    		MOV.L 24H[R0], R3
00000652 FE1231                  		MOV.W R1, [R2,R3]
00000655                         L228:	; bb242.split
                                 ;     321           cand_scores[cand_ix] = score;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",321
00000655 AC09                    		MOV.L 44H[R0], R1
00000657 AC82                    		MOV.L 48H[R0], R2
00000659 AA83                    		MOV.L 28H[R0], R3
0000065B FE2231                  		MOV.L R1, [R2,R3]
0000065E 2Err                 B  		BRA L239
00000660                         L229:	; bb253
                                 ;     322           break;
                                 ;     323         } else if (cand_scores[cand_ix] < score) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",323
00000660 AA81                    		MOV.L 28H[R0], R1
00000662 AC82                    		MOV.L 48H[R0], R2
00000664 FE621E                  		MOV.L [R2,R1], R14
00000667 06850E11                		CMP 44H[R0].L, R14
0000066B 28rr                    		BGE L237
0000066D                         L230:	; bb254
                                 ;     324           int reorder_cand_ix = max_candidates - 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",324
0000066D AA01                    		MOV.L 20H[R0], R1
0000066F 6021                    		SUB #02H, R1
00000671 A489                    		MOV.L R1, 4CH[R0]
00000673 2Err                 B  		BRA L234
00000675                         L231:	; bb257
                                 ;     325           while (reorder_cand_ix >= cand_ix) {
                                 ;     326             cand_blocks[reorder_cand_ix + 1] = cand_blocks[reorder_cand_ix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",326
00000675 AC8A                    		MOV.L 4CH[R0], R2
00000677 AA0B                    		MOV.L 24H[R0], R3
00000679 FE5233                  		MOV.W [R2,R3], R3
0000067C 6C12                    		SHLL #01H, R2
0000067E 4B12                    		ADD R1, R2
00000680 902B                    		MOV.W R3, 02H[R2]
00000682                         L232:	; bb257.split
                                 ;     327             cand_scores[reorder_cand_ix + 1] = cand_scores[reorder_cand_ix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",327
00000682 AA81                    		MOV.L 28H[R0], R1
00000684 AC8A                    		MOV.L 4CH[R0], R2
00000686 FE6213                  		MOV.L [R2,R1], R3
00000689 6C22                    		SHLL #02H, R2
0000068B 4B21                    		ADD R2, R1
0000068D A01B                    		MOV.L R3, 04H[R1]
0000068F                         L233:	; bb257.split13
                                 ;     328             reorder_cand_ix--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",328
0000068F AC89                    		MOV.L 4CH[R0], R1
00000691 6011                    		SUB #01H, R1
00000693 A489                    		MOV.L R1, 4CH[R0]
00000695                         L234:	; bb276
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",325
00000695 AC89                    		MOV.L 4CH[R0], R1
00000697 06850112                		CMP 48H[R0].L, R1
0000069B AA09                    		MOV.L 24H[R0], R1
0000069D 28rr                    		BGE L231
0000069F                         L235:	; bb282
                                 ;     329           }
                                 ;     330           cand_blocks[cand_ix] = cur_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",330
0000069F 9A0A                    		MOV.W 12H[R0], R2
000006A1 AC83                    		MOV.L 48H[R0], R3
000006A3 FE1312                  		MOV.W R2, [R3,R1]
000006A6                         L236:	; bb282.split
                                 ;     331           cand_scores[cand_ix] = score;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",331
000006A6 AC09                    		MOV.L 44H[R0], R1
000006A8 AC82                    		MOV.L 48H[R0], R2
000006AA AA83                    		MOV.L 28H[R0], R3
000006AC FE2231                  		MOV.L R1, [R2,R3]
000006AF 2Err                 B  		BRA L239
000006B1                         L237:	; bb309
                                 ;     332           break;
                                 ;     333         }
                                 ;     334         cand_ix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",334
000006B1 AC81                    		MOV.L 48H[R0], R1
000006B3 6211                    		ADD #01H, R1
000006B5 A481                    		MOV.L R1, 48H[R0]
000006B7                         L238:	; bb312
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",318
000006B7 AC81                    		MOV.L 48H[R0], R1
000006B9 06850108                		CMP 20H[R0].L, R1
000006BD 29rr                    		BLT L226
000006BF                         L239:	; bb319
                                 ;     335       }
                                 ;     336       (*candidate_count)++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",336
000006BF AD81                    		MOV.L 58H[R0], R1
000006C1 EC1E                    		MOV.L [R1], R14
000006C3 621E                    		ADD #01H, R14
000006C5 E31E                    		MOV.L R14, [R1]
000006C7 2Err                 B  		BRA L244
000006C9                         L240:	; bb326
000006C9 BE01                    		MOVU.W 30H[R0], R1
000006CB 6101                    		CMP #00H, R1
000006CD 2Brr                    		BLE L242
000006CF                         L241:	; bb331
000006CF F80601                  		MOV.L #00000001H, [R0]
000006D2 08                   S  		BRA L243
000006D3                         L242:	; bb332
000006D3 F80600                  		MOV.L #00000000H, [R0]
000006D6                         L243:	; bb333
000006D6 EC01                    		MOV.L [R0], R1
000006D8 6101                    		CMP #00H, R1
000006DA 3Brrrr               W  		BNE L216
000006DD                         L244:	; bb338
                                 ;     337     }
                                 ;     338 
                                 ;     339     cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",339
000006DD 3E0700                  		MOV.L #00000000H, 1CH[R0]
000006E0                         L245:	; bb338.split
                                 ;     340     cur_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",340
000006E0 9A09                    		MOV.W 12H[R0], R1
000006E2 6211                    		ADD #01H, R1
000006E4 9209                    		MOV.W R1, 12H[R0]
000006E6                         L246:	; bb338.split15
                                 ;     341     cur_block_addr += SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",341
000006E6 A909                    		MOV.L 14H[R0], R1
000006E8 7311000001              		ADD #00010000H, R1
000006ED A109                    		MOV.L R1, 14H[R0]
000006EF                         L247:	; bb343
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",265
000006EF A881                    		MOV.L 08H[R0], R1
000006F1 6101                    		CMP #00H, R1
000006F3 21rr                    		BNE L250
000006F5                         L248:	; bb347
000006F5 A889                    		MOV.L 0CH[R0], R1
000006F7 7112FF                  		ADD #0FFFFFFFFH, R1, R2
000006FA A08A                    		MOV.L R2, 0CH[R0]
000006FC 6101                    		CMP #00H, R1
000006FE 10                   S  		BEQ L250
000006FF                         L249:	; bb353
000006FF F80601                  		MOV.L #00000001H, [R0]
00000702 08                   S  		BRA L251
00000703                         L250:	; bb354
00000703 F80600                  		MOV.L #00000000H, [R0]
00000706                         L251:	; bb355
00000706 EC01                    		MOV.L [R0], R1
00000708 6101                    		CMP #00H, R1
0000070A 3Brrrr               W  		BNE L186
0000070D                         L252:	; bb360
                                 ;     342   } // per block
                                 ;     343 
                                 ;     344   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",344
0000070D E5000201                		MOV.L 08H[R0], 04H[R0]
00000711                         L253:	; bb363
00000711 A809                    		MOV.L 04H[R0], R1
00000713 A501                    		MOV.L R1, 50H[R0]
                                 ;     345 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",345
00000715 6719                    		RTSD #64H
00000717                         _spiffs_gc_clean:
                                 		.STACK	_spiffs_gc_clean=128
                                 ;     346 
                                 ;     347 typedef enum {
                                 ;     348   FIND_OBJ_DATA,
                                 ;     349   MOVE_OBJ_DATA,
                                 ;     350   MOVE_OBJ_IX,
                                 ;     351   FINISHED
                                 ;     352 } spiffs_gc_clean_state;
                                 ;     353 
                                 ;     354 typedef struct {
                                 ;     355   spiffs_gc_clean_state state;
                                 ;     356   spiffs_obj_id cur_obj_id;
                                 ;     357   spiffs_span_ix cur_objix_spix;
                                 ;     358   spiffs_page_ix cur_objix_pix;
                                 ;     359   int stored_scan_entry_index;
                                 ;     360   u8_t obj_id_found;
                                 ;     361 } spiffs_gc;
                                 ;     362 
                                 ;     363 // Empties given block by moving all data into free pages of another block
                                 ;     364 // Strategy:
                                 ;     365 //   loop:
                                 ;     366 //   scan object lookup for object data pages
                                 ;     367 //   for first found id, check spix and load corresponding object index page to memory
                                 ;     368 //   push object scan lookup entry index
                                 ;     369 //     rescan object lookup, find data pages with same id and referenced by same object index
                                 ;     370 //     move data page, update object index in memory
                                 ;     371 //     when reached end of lookup, store updated object index
                                 ;     372 //   pop object scan lookup entry index
                                 ;     373 //   repeat loop until end of object lookup
                                 ;     374 //   scan object lookup again for remaining object index pages, move to new page in other block
                                 ;     375 //
                                 ;     376 s32_t spiffs_gc_clean(spiffs *fs, spiffs_block_ix bix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",376
00000717 710094                  		ADD #0FFFFFF94H, R0
0000071A A681                    		MOV.L R1, 68H[R0]
0000071C D70233                  		MOV.W R2, 66H[R0]
                                 ;     377   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",377
0000071F 3E0200                  		MOV.L #00000000H, 08H[R0]
00000722                         L255:	; entry.split
                                 ;     378   int entries_per_page = (SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",378
00000722 3E0380                  		MOV.L #00000080H, 0CH[R0]
00000725                         L256:	; entry.split1
                                 ;     379   int cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",379
00000725 3E0400                  		MOV.L #00000000H, 10H[R0]
00000728                         L257:	; entry.split2
                                 ;     380   spiffs_obj_id *obj_lu_buf = (spiffs_obj_id *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",380
00000728 AE81                    		MOV.L 68H[R0], R1
0000072A E5100805                		MOV.L 20H[R1], 14H[R0]
0000072E                         L258:	; entry.split3
                                 ;     381   spiffs_gc gc;
                                 ;     382   spiffs_page_ix cur_pix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",382
0000072E 3D8700                  		MOV.W #0000H, 2EH[R0]
00000731                         L259:	; entry.split4
                                 ;     383   spiffs_page_object_ix_header *objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",383
00000731 AE81                    		MOV.L 68H[R0], R1
00000733 E510090C                		MOV.L 24H[R1], 30H[R0]
00000737                         L260:	; entry.split5
                                 ;     384   spiffs_page_object_ix *objix = (spiffs_page_object_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",384
00000737 AE81                    		MOV.L 68H[R0], R1
00000739 E510090D                		MOV.L 24H[R1], 34H[R0]
0000073D                         L261:	; entry.split6
0000073D 6601                    		MOV.L #00000000H, R1
                                 ;     385 
                                 ;     386   SPIFFS_GC_DBG("gc_clean: cleaning block %i\n", bix);
                                 ;     387 
                                 ;     388   memset(&gc, 0, sizeof(spiffs_gc));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",388
0000073F A281                    		MOV.L R1, 28H[R0]
00000741 A209                    		MOV.L R1, 24H[R0]
00000743 A201                    		MOV.L R1, 20H[R0]
00000745 A189                    		MOV.L R1, 1CH[R0]
00000747 A181                    		MOV.L R1, 18H[R0]
00000749                         L262:	; entry.split7
                                 ;     389   gc.state = FIND_OBJ_DATA;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",389
00000749 3E0600                  		MOV.L #00000000H, 18H[R0]
0000074C                         L263:	; entry.split8
                                 ;     390 
                                 ;     391   if (fs->free_cursor_block_ix == bix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",391
0000074C AE81                    		MOV.L 68H[R0], R1
0000074E BA11                    		MOVU.W 10H[R1], R1
00000750 06C50133                		CMP 66H[R0].UW, R1
00000754 3Brrrr               W  		BNE L409
00000757                         L264:	; bb38
                                 ;     392     // move free cursor to next block, cannot use free pages from the block we want to clean
                                 ;     393     fs->free_cursor_block_ix = (bix+1)%fs->block_count;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",393
00000757 5D0133                  		MOVU.W 66H[R0], R1
0000075A 6211                    		ADD #01H, R1
0000075C AE82                    		MOV.L 68H[R0], R2
0000075E A8AB                    		MOV.L 0CH[R2], R3
00000760 EF1E                    		MOV.L R1, R14
00000762 FC273E                  		DIVU R3, R14
00000765 4F3E                    		MUL R3, R14
00000767 43E1                    		SUB R14, R1
00000769 9221                    		MOV.W R1, 10H[R2]
0000076B                         L265:	; bb38.split
                                 ;     394     fs->free_cursor_obj_lu_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",394
0000076B AE81                    		MOV.L 68H[R0], R1
0000076D 3E1500                  		MOV.L #00000000H, 14H[R1]
00000770 38rrrr               W  		BRA L409
00000773                         L266:	; bb60
                                 ;     395     SPIFFS_GC_DBG("gc_clean: move free cursor to block %i\n", fs->free_cursor_block_ix);
                                 ;     396   }
                                 ;     397 
                                 ;     398   while (res == SPIFFS_OK && gc.state != FINISHED) {
                                 ;     399     SPIFFS_GC_DBG("gc_clean: state = %i entry:%i\n", gc.state, cur_entry);
                                 ;     400     gc.obj_id_found = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",400
00000773 F9042800                		MOV.B #00H, 28H[R0]
00000777                         L267:	; bb60.split
                                 ;     401 
                                 ;     402     // scan through lookup pages
                                 ;     403     int obj_lookup_page = cur_entry / entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",403
00000777 A901                    		MOV.L 10H[R0], R1
00000779 06A1080103              		DIV 0CH[R0].L, R1
0000077E A381                    		MOV.L R1, 38H[R0]
00000780                         L268:	; bb60.split9
                                 ;     404     u8_t scan = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",404
00000780 F9043F01                		MOV.B #01H, 3FH[R0]
00000784 38rrrr               W  		BRA L354
00000787                         L269:	; bb65
                                 ;     405     // check each object lookup page
                                 ;     406     while (scan && res == SPIFFS_OK && obj_lookup_page < (int)SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 ;     407       int entry_offset = obj_lookup_page * entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",407
00000787 AB81                    		MOV.L 38H[R0], R1
00000789 068D0103                		MUL 0CH[R0].L, R1
0000078D A401                    		MOV.L R1, 40H[R0]
0000078F                         L270:	; bb65.split
                                 ;     408       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",408
0000078F AE81                    		MOV.L 68H[R0], R1
00000791 AB84                    		MOV.L 38H[R0], R4
00000793 DD0233                  		MOV.W 66H[R0], R2
00000796 6080                    		SUB #08H, R0
00000798 E5100801                		MOV.L 20H[R1], 04H[R0]
0000079C F80A0001                		MOV.L #00000100H, [R0]
000007A0 6C84                    		SHLL #08H, R4
000007A2 6D02                    		SHLL #10H, R2
000007A4 4B24                    		ADD R2, R4
000007A6 7344000010              		ADD #00100000H, R4
000007AB 6603                    		MOV.L #00000000H, R3
000007AD 754214                  		MOV.L #00000014H, R2
000007B0 05rrrrrr             A  		BSR _spiffs_phys_rd
000007B4 6280                    		ADD #08H, R0
000007B6 A081                    		MOV.L R1, 08H[R0]
000007B8 38rrrr               W  		BRA L340
000007BB                         L271:	; bb81
                                 ;     409           0, bix * SPIFFS_CFG_LOG_BLOCK_SZ(fs) + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page),
                                 ;     410           SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     411       // check each entry
                                 ;     412       while (scan && res == SPIFFS_OK &&
                                 ;     413           cur_entry - entry_offset < entries_per_page && cur_entry < (int)(SPIFFS_PAGES_PER_BLOCK(fs)-SPIFFS_OBJ_LOOKUP_PAGES(fs))) {
                                 ;     414         spiffs_obj_id obj_id = obj_lu_buf[cur_entry-entry_offset];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",414
000007BB A901                    		MOV.L 10H[R0], R1
000007BD 06810110                		SUB 40H[R0].L, R1
000007C1 A90A                    		MOV.L 14H[R0], R2
000007C3 FE5121                  		MOV.W [R1,R2], R1
000007C6 D70122                  		MOV.W R1, 44H[R0]
000007C9                         L272:	; bb81.split
                                 ;     415         cur_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, cur_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",415
000007C9 5D0133                  		MOVU.W 66H[R0], R1
000007CC 6C81                    		SHLL #08H, R1
000007CE 06890104                		ADD 10H[R0].L, R1
000007D2 6221                    		ADD #02H, R1
000007D4 9589                    		MOV.W R1, 2EH[R0]
000007D6                         L273:	; bb81.split10
                                 ;     416 
                                 ;     417         // act upon object id depending on gc state
                                 ;     418         switch (gc.state) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",418
000007D6 A981                    		MOV.L 18H[R0], R1
000007D8 6121                    		CMP #02H, R1
000007DA 3Arrrr               W  		BEQ L313
000007DD                         L274:	; bb81.split10
000007DD 6111                    		CMP #01H, R1
000007DF 20rr                    		BEQ L288
000007E1                         L275:	; bb81.split10
000007E1 6101                    		CMP #00H, R1
000007E3 3Brrrr               W  		BNE L338
000007E6                         L276:	; bb98
                                 ;     419         case FIND_OBJ_DATA:
                                 ;     420           if (obj_id != SPIFFS_OBJ_ID_DELETED && obj_id != SPIFFS_OBJ_ID_FREE &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",420
000007E6 5D0122                  		MOVU.W 44H[R0], R1
000007E9 6101                    		CMP #00H, R1
000007EB 21rr                    		BNE L280
000007ED 2Err                 B  		BRA L282
000007EF                         L277:	; bb99
                                 ;     421               ((obj_id & SPIFFS_OBJ_ID_IX_FLAG) == 0)) {
                                 ;     422             SPIFFS_GC_DBG("gc_clean: FIND_DATA state:%i - found obj id %04x\n", gc.state, obj_id);
                                 ;     423             gc.obj_id_found = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",423
000007EF F9042801                		MOV.B #01H, 28H[R0]
000007F3                         L278:	; bb99.split
                                 ;     424             gc.cur_obj_id = obj_id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",424
000007F3 D500220E                		MOV.W 44H[R0], 1CH[R0]
000007F7                         L279:	; bb99.split11
                                 ;     425             scan = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",425
000007F7 F9043F00                		MOV.B #00H, 3FH[R0]
000007FB 38rrrr               W  		BRA L339
000007FE                         L280:	; bb107
000007FE 5D0122                  		MOVU.W 44H[R0], R1
00000801 7701FFFF00              		CMP #0FFFFH, R1
00000806 10                   S  		BEQ L282
00000807                         L281:	; bb112
00000807 F80601                  		MOV.L #00000001H, [R0]
0000080A 08                   S  		BRA L283
0000080B                         L282:	; bb113
0000080B F80600                  		MOV.L #00000000H, [R0]
0000080E                         L283:	; bb114
0000080E EC01                    		MOV.L [R0], R1
00000810 6101                    		CMP #00H, R1
00000812 20rr                    		BEQ L286
00000814                         L284:	; bb118
00000814 5D0122                  		MOVU.W 44H[R0], R1
00000817 7CF1                    		BTST #0FH, R1
00000819 18                   S  		BNE L286
0000081A                         L285:	; bb124
0000081A F80601                  		MOV.L #00000001H, [R0]
0000081D 08                   S  		BRA L287
0000081E                         L286:	; bb125
0000081E F80600                  		MOV.L #00000000H, [R0]
00000821                         L287:	; bb126
00000821 EC01                    		MOV.L [R0], R1
00000823 6101                    		CMP #00H, R1
00000825 21rr                    		BNE L277
00000827 38rrrr               W  		BRA L339
0000082A                         L288:	; bb133
                                 ;     426           }
                                 ;     427           break;
                                 ;     428         case MOVE_OBJ_DATA:
                                 ;     429           if (obj_id == gc.cur_obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",429
0000082A 5D0122                  		MOVU.W 44H[R0], R1
0000082D 06C5010E                		CMP 1CH[R0].UW, R1
00000831 3Brrrr               W  		BNE L339
00000834                         L289:	; bb134
                                 ;     430             spiffs_page_header p_hdr;
                                 ;     431             res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",431
00000834 BD8C                    		MOVU.W 2EH[R0], R4
00000836 AE81                    		MOV.L 68H[R0], R1
00000838 6080                    		SUB #08H, R0
0000083A 71024E                  		ADD #4EH, R0, R2
0000083D A00A                    		MOV.L R2, 04H[R0]
0000083F F80606                  		MOV.L #00000006H, [R0]
00000842 6C84                    		SHLL #08H, R4
00000844 7344000010              		ADD #00100000H, R4
00000849 6603                    		MOV.L #00000000H, R3
0000084B 754215                  		MOV.L #00000015H, R2
0000084E 05rrrrrr             A  		BSR _spiffs_phys_rd
00000852 6280                    		ADD #08H, R0
00000854 A081                    		MOV.L R1, 08H[R0]
00000856                         L290:	; bb134.split
                                 ;     432                 0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     433             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",433
00000856 A881                    		MOV.L 08H[R0], R1
00000858 69F1                    		SHLR #1FH, R1
0000085A 6101                    		CMP #00H, R1
0000085C 10                   S  		BEQ L292
0000085D                         L291:	; bb144
0000085D E5000201                		MOV.L 08H[R0], 04H[R0]
00000861 38rrrr               W  		BRA L415
00000864                         L292:	; bb153.split
                                 ;     434             SPIFFS_GC_DBG("gc_clean: MOVE_DATA found data page %04x:%04x @ %04x\n", gc.cur_obj_id, p_hdr.span_ix, cur_pix);
                                 ;     435             if (SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, p_hdr.span_ix) != gc.cur_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",435
00000864 5D0124                  		MOVU.W 48H[R0], R1
00000867 755168                  		CMP #68H, R1
0000086A 22rr                  * 		BLTU L310
         38rrrr                  
0000086F 38rrrr               W  		BRA L311
00000872                         L293:	; bb156
                                 ;     436               SPIFFS_GC_DBG("gc_clean: MOVE_DATA no objix spix match, take in another run\n");
                                 ;     437             } else {
                                 ;     438               spiffs_page_ix new_data_pix;
                                 ;     439               if (p_hdr.flags & SPIFFS_PH_FLAG_DELET) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",439
00000872 F5074A                  		BTST #07H, 4AH[R0].B
00000875 AE81                    		MOV.L 68H[R0], R1
00000877 20rr                    		BEQ L300
00000879                         L294:	; bb157
                                 ;     440                 // move page
                                 ;     441                 res = spiffs_page_move(fs, 0, 0, obj_id, &p_hdr, cur_pix, &new_data_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",441
00000879 9D8A                    		MOV.W 2EH[R0], R2
0000087B 5D0422                  		MOVU.W 44H[R0], R4
0000087E 60C0                    		SUB #0CH, R0
00000880 710358                  		ADD #58H, R0, R3
00000883 A083                    		MOV.L R3, 08H[R0]
00000885 9082                    		MOV.W R2, 04H[R0]
00000887 710E52                  		ADD #52H, R0, R14
0000088A E30E                    		MOV.L R14, [R0]
0000088C 6602                    		MOV.L #00000000H, R2
0000088E EF23                    		MOV.L R2, R3
00000890 05rrrrrr             A  		BSR _spiffs_page_move
00000894 62C0                    		ADD #0CH, R0
00000896 A081                    		MOV.L R1, 08H[R0]
00000898                         L295:	; bb157.split
                                 ;     442                 SPIFFS_GC_DBG("gc_clean: MOVE_DATA move objix %04x:%04x page %04x to %04x\n", gc.cur_obj_id, p_hdr.span_ix, cur_pix, new_data_pix);
                                 ;     443                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",443
00000898 A881                    		MOV.L 08H[R0], R1
0000089A 69F1                    		SHLR #1FH, R1
0000089C 6101                    		CMP #00H, R1
0000089E 10                   S  		BEQ L297
0000089F                         L296:	; bb164
0000089F E5000201                		MOV.L 08H[R0], 04H[R0]
000008A3 38rrrr               W  		BRA L415
000008A6                         L297:	; bb172.split
                                 ;     444                 // move wipes obj_lu, reload it
                                 ;     445                 res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",445
000008A6 AE81                    		MOV.L 68H[R0], R1
000008A8 AB84                    		MOV.L 38H[R0], R4
000008AA DD0233                  		MOV.W 66H[R0], R2
000008AD 6080                    		SUB #08H, R0
000008AF E5100801                		MOV.L 20H[R1], 04H[R0]
000008B3 F80A0001                		MOV.L #00000100H, [R0]
000008B7 6C84                    		SHLL #08H, R4
000008B9 6D02                    		SHLL #10H, R2
000008BB 4B24                    		ADD R2, R4
000008BD 7344000010              		ADD #00100000H, R4
000008C2 6603                    		MOV.L #00000000H, R3
000008C4 754214                  		MOV.L #00000014H, R2
000008C7 05rrrrrr             A  		BSR _spiffs_phys_rd
000008CB 6280                    		ADD #08H, R0
000008CD A081                    		MOV.L R1, 08H[R0]
000008CF                         L298:	; bb172.split12
                                 ;     446                     0, bix * SPIFFS_CFG_LOG_BLOCK_SZ(fs) + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page),
                                 ;     447                     SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     448                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",448
000008CF A881                    		MOV.L 08H[R0], R1
000008D1 69F1                    		SHLR #1FH, R1
000008D3 6101                    		CMP #00H, R1
000008D5 20rr                    		BEQ L304
000008D7                         L299:	; bb187
000008D7 E5000201                		MOV.L 08H[R0], 04H[R0]
000008DB 38rrrr               W  		BRA L415
000008DE                         L300:	; bb196
                                 ;     449               } else {
                                 ;     450                 // page is deleted but not deleted in lookup, scrap it
                                 ;     451                 SPIFFS_GC_DBG("gc_clean: MOVE_DATA wipe objix %04x:%04x page %04x\n", obj_id, p_hdr.span_ix, cur_pix);
                                 ;     452                 res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",452
000008DE BD8A                    		MOVU.W 2EH[R0], R2
000008E0 05rrrrrr             A  		BSR _spiffs_page_delete
000008E4 A081                    		MOV.L R1, 08H[R0]
000008E6                         L301:	; bb196.split
                                 ;     453                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",453
000008E6 A881                    		MOV.L 08H[R0], R1
000008E8 69F1                    		SHLR #1FH, R1
000008EA 6101                    		CMP #00H, R1
000008EC 10                   S  		BEQ L303
000008ED                         L302:	; bb202
000008ED E5000201                		MOV.L 08H[R0], 04H[R0]
000008F1 38rrrr               W  		BRA L415
000008F4                         L303:	; bb210.split
                                 ;     454                 new_data_pix = SPIFFS_OBJ_ID_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",454
000008F4 F90926FFFF              		MOV.W #0FFFFH, 4CH[R0]
000008F9                         L304:	; bb219
                                 ;     455               }
                                 ;     456               // update memory representation of object index page with new data page
                                 ;     457               if (gc.cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",457
000008F9 BB89                    		MOVU.W 1EH[R0], R1
000008FB 6101                    		CMP #00H, R1
000008FD 21rr                    		BNE L306
000008FF                         L305:	; bb220
                                 ;     458                 // update object index header page
                                 ;     459                 ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[p_hdr.span_ix] = new_data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",459
000008FF 5D0124                  		MOVU.W 48H[R0], R1
00000902 6C11                    		SHLL #01H, R1
00000904 0689010C                		ADD 30H[R0].L, R1
00000908 D5012618                		MOV.W 4CH[R0], 30H[R1]
0000090C 38rrrr               W  		BRA L339
0000090F                         L306:	; bb230
                                 ;     460                 SPIFFS_GC_DBG("gc_clean: MOVE_DATA wrote page %04x to objix_hdr entry %02x in mem\n", new_data_pix, SPIFFS_OBJ_IX_ENTRY(fs, p_hdr.span_ix));
                                 ;     461               } else {
                                 ;     462                 // update object index page
                                 ;     463                 ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, p_hdr.span_ix)] = new_data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",463
0000090F AB09                    		MOV.L 34H[R0], R1
00000911 6281                    		ADD #08H, R1
00000913 5D0224                  		MOVU.W 48H[R0], R2
00000916 755267                  		CMP #67H, R2
00000919 24rr                    		BGTU L308
0000091B                         L307:	; bb240
0000091B E302                    		MOV.L R2, [R0]
0000091D 2Err                 B  		BRA L309
0000091F                         L308:	; bb244
0000091F 712298                  		ADD #0FFFFFF98H, R2
00000922 EF2E                    		MOV.L R2, R14
00000924 FD749E7C                		DIVU #7CH, R14
00000928 751E7C                  		MUL #7CH, R14
0000092B 43E2                    		SUB R14, R2
0000092D E302                    		MOV.L R2, [R0]
0000092F                         L309:	; bb250
0000092F DD0226                  		MOV.W 4CH[R0], R2
00000932 EC03                    		MOV.L [R0], R3
00000934 FE1312                  		MOV.W R2, [R3,R1]
00000937 38rrrr               W  		BRA L339
0000093A                         L310:	; bb267
0000093A F80600                  		MOV.L #00000000H, [R0]
0000093D 2Err                 B  		BRA L312
0000093F                         L311:	; bb268
0000093F 5D0124                  		MOVU.W 48H[R0], R1
00000942 711198                  		ADD #0FFFFFF98H, R1
00000945 FD74917C                		DIVU #7CH, R1
00000949 6211                    		ADD #01H, R1
0000094B E301                    		MOV.L R1, [R0]
0000094D                         L312:	; bb275
0000094D BB89                    		MOVU.W 1EH[R0], R1
0000094F 068401                  		CMP [R0].L, R1
00000952 3Brrrr               W  		BNE L339
00000955 38rrrr               W  		BRA L293
00000958                         L313:	; bb295
                                 ;     464                 SPIFFS_GC_DBG("gc_clean: MOVE_DATA wrote page %04x to objix entry %02x in mem\n", new_data_pix, SPIFFS_OBJ_IX_ENTRY(fs, p_hdr.span_ix));
                                 ;     465               }
                                 ;     466             }
                                 ;     467           }
                                 ;     468           break;
                                 ;     469         case MOVE_OBJ_IX:
                                 ;     470           if (obj_id != SPIFFS_OBJ_ID_DELETED && obj_id != SPIFFS_OBJ_ID_FREE &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",470
00000958 5D0122                  		MOVU.W 44H[R0], R1
0000095B 6101                    		CMP #00H, R1
0000095D 3Brrrr               W  		BNE L330
00000960 38rrrr               W  		BRA L332
00000963                         L314:	; bb296
                                 ;     471               (obj_id & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 ;     472             // found an index object id
                                 ;     473             spiffs_page_header p_hdr;
                                 ;     474             spiffs_page_ix new_pix;
                                 ;     475             // load header
                                 ;     476             res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",476
00000963 BD8C                    		MOVU.W 2EH[R0], R4
00000965 AE81                    		MOV.L 68H[R0], R1
00000967 6080                    		SUB #08H, R0
00000969 710256                  		ADD #56H, R0, R2
0000096C A00A                    		MOV.L R2, 04H[R0]
0000096E F80606                  		MOV.L #00000006H, [R0]
00000971 6C84                    		SHLL #08H, R4
00000973 7344000010              		ADD #00100000H, R4
00000978 6603                    		MOV.L #00000000H, R3
0000097A 754215                  		MOV.L #00000015H, R2
0000097D 05rrrrrr             A  		BSR _spiffs_phys_rd
00000981 6280                    		ADD #08H, R0
00000983 A081                    		MOV.L R1, 08H[R0]
00000985                         L315:	; bb296.split
                                 ;     477                 0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     478             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",478
00000985 A881                    		MOV.L 08H[R0], R1
00000987 69F1                    		SHLR #1FH, R1
00000989 6101                    		CMP #00H, R1
0000098B 10                   S  		BEQ L317
0000098C                         L316:	; bb306
0000098C E5000201                		MOV.L 08H[R0], 04H[R0]
00000990 38rrrr               W  		BRA L415
00000993                         L317:	; bb315.split
                                 ;     479             if (p_hdr.flags & SPIFFS_PH_FLAG_DELET) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",479
00000993 F50752                  		BTST #07H, 52H[R0].B
00000996 AE81                    		MOV.L 68H[R0], R1
00000998 3Arrrr               W  		BEQ L325
0000099B                         L318:	; bb316
                                 ;     480               // move page
                                 ;     481               res = spiffs_page_move(fs, 0, 0, obj_id, &p_hdr, cur_pix, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",481
0000099B 9D8A                    		MOV.W 2EH[R0], R2
0000099D 5D0422                  		MOVU.W 44H[R0], R4
000009A0 60C0                    		SUB #0CH, R0
000009A2 710360                  		ADD #60H, R0, R3
000009A5 A083                    		MOV.L R3, 08H[R0]
000009A7 9082                    		MOV.W R2, 04H[R0]
000009A9 710E5A                  		ADD #5AH, R0, R14
000009AC E30E                    		MOV.L R14, [R0]
000009AE 6602                    		MOV.L #00000000H, R2
000009B0 EF23                    		MOV.L R2, R3
000009B2 05rrrrrr             A  		BSR _spiffs_page_move
000009B6 62C0                    		ADD #0CH, R0
000009B8 A081                    		MOV.L R1, 08H[R0]
000009BA                         L319:	; bb316.split
                                 ;     482               SPIFFS_GC_DBG("gc_clean: MOVE_OBJIX move objix %04x:%04x page %04x to %04x\n", obj_id, p_hdr.span_ix, cur_pix, new_pix);
                                 ;     483               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",483
000009BA A881                    		MOV.L 08H[R0], R1
000009BC 69F1                    		SHLR #1FH, R1
000009BE 6101                    		CMP #00H, R1
000009C0 10                   S  		BEQ L321
000009C1                         L320:	; bb323
000009C1 E5000201                		MOV.L 08H[R0], 04H[R0]
000009C5 38rrrr               W  		BRA L415
000009C8                         L321:	; bb331.split
                                 ;     484               spiffs_cb_object_event(fs, 0, SPIFFS_EV_IX_UPD, obj_id, p_hdr.span_ix, new_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",484
000009C8 DD022A                  		MOV.W 54H[R0], R2
000009CB DD0328                  		MOV.W 50H[R0], R3
000009CE 5D0422                  		MOVU.W 44H[R0], R4
000009D1 AE81                    		MOV.L 68H[R0], R1
000009D3 6080                    		SUB #08H, R0
000009D5 900A                    		MOV.W R2, 02H[R0]
000009D7 D303                    		MOV.W R3, [R0]
000009D9 3E0100                  		MOV.L #00000000H, 04H[R0]
000009DC 6602                    		MOV.L #00000000H, R2
000009DE EF23                    		MOV.L R2, R3
000009E0 05rrrrrr             A  		BSR _spiffs_cb_object_event
000009E4 6280                    		ADD #08H, R0
000009E6                         L322:	; bb331.split13
                                 ;     485               // move wipes obj_lu, reload it
                                 ;     486               res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",486
000009E6 AE81                    		MOV.L 68H[R0], R1
000009E8 AB84                    		MOV.L 38H[R0], R4
000009EA DD0233                  		MOV.W 66H[R0], R2
000009ED 6080                    		SUB #08H, R0
000009EF E5100801                		MOV.L 20H[R1], 04H[R0]
000009F3 F80A0001                		MOV.L #00000100H, [R0]
000009F7 6C84                    		SHLL #08H, R4
000009F9 6D02                    		SHLL #10H, R2
000009FB 4B24                    		ADD R2, R4
000009FD 7344000010              		ADD #00100000H, R4
00000A02 6603                    		MOV.L #00000000H, R3
00000A04 754214                  		MOV.L #00000014H, R2
00000A07 05rrrrrr             A  		BSR _spiffs_phys_rd
00000A0B 6280                    		ADD #08H, R0
00000A0D A081                    		MOV.L R1, 08H[R0]
00000A0F                         L323:	; bb331.split14
                                 ;     487                   0, bix * SPIFFS_CFG_LOG_BLOCK_SZ(fs) + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page),
                                 ;     488                   SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     489               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",489
00000A0F A881                    		MOV.L 08H[R0], R1
00000A11 69F1                    		SHLR #1FH, R1
00000A13 6101                    		CMP #00H, R1
00000A15 20rr                    		BEQ L328
00000A17                         L324:	; bb351
00000A17 E5000201                		MOV.L 08H[R0], 04H[R0]
00000A1B 38rrrr               W  		BRA L415
00000A1E                         L325:	; bb360
                                 ;     490             } else {
                                 ;     491               // page is deleted but not deleted in lookup, scrap it
                                 ;     492               SPIFFS_GC_DBG("gc_clean: MOVE_OBJIX wipe objix %04x:%04x page %04x\n", obj_id, p_hdr.span_ix, cur_pix);
                                 ;     493               res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",493
00000A1E BD8A                    		MOVU.W 2EH[R0], R2
00000A20 05rrrrrr             A  		BSR _spiffs_page_delete
00000A24 A081                    		MOV.L R1, 08H[R0]
00000A26                         L326:	; bb360.split
                                 ;     494               if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",494
00000A26 A881                    		MOV.L 08H[R0], R1
00000A28 6101                    		CMP #00H, R1
00000A2A 21rr                    		BNE L328
00000A2C                         L327:	; bb365
                                 ;     495                 spiffs_cb_object_event(fs, 0, SPIFFS_EV_IX_DEL, obj_id, p_hdr.span_ix, cur_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",495
00000A2C 9D8A                    		MOV.W 2EH[R0], R2
00000A2E DD0328                  		MOV.W 50H[R0], R3
00000A31 5D0422                  		MOVU.W 44H[R0], R4
00000A34 AE81                    		MOV.L 68H[R0], R1
00000A36 6080                    		SUB #08H, R0
00000A38 900A                    		MOV.W R2, 02H[R0]
00000A3A D303                    		MOV.W R3, [R0]
00000A3C 3E0100                  		MOV.L #00000000H, 04H[R0]
00000A3F 6623                    		MOV.L #00000002H, R3
00000A41 6602                    		MOV.L #00000000H, R2
00000A43 05rrrrrr             A  		BSR _spiffs_cb_object_event
00000A47 6280                    		ADD #08H, R0
00000A49                         L328:	; bb385
                                 ;     496               }
                                 ;     497             }
                                 ;     498             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",498
00000A49 A881                    		MOV.L 08H[R0], R1
00000A4B 69F1                    		SHLR #1FH, R1
00000A4D 6101                    		CMP #00H, R1
00000A4F 20rr                    		BEQ L339
00000A51                         L329:	; bb386
00000A51 E5000201                		MOV.L 08H[R0], 04H[R0]
00000A55 38rrrr               W  		BRA L415
00000A58                         L330:	; bb399
00000A58 5D0122                  		MOVU.W 44H[R0], R1
00000A5B 7701FFFF00              		CMP #0FFFFH, R1
00000A60 10                   S  		BEQ L332
00000A61                         L331:	; bb404
00000A61 F80601                  		MOV.L #00000001H, [R0]
00000A64 08                   S  		BRA L333
00000A65                         L332:	; bb405
00000A65 F80600                  		MOV.L #00000000H, [R0]
00000A68                         L333:	; bb406
00000A68 EC01                    		MOV.L [R0], R1
00000A6A 6101                    		CMP #00H, R1
00000A6C 20rr                    		BEQ L336
00000A6E                         L334:	; bb410
00000A6E 5D0122                  		MOVU.W 44H[R0], R1
00000A71 7CF1                    		BTST #0FH, R1
00000A73 10                   S  		BEQ L336
00000A74                         L335:	; bb416
00000A74 F80601                  		MOV.L #00000001H, [R0]
00000A77 08                   S  		BRA L337
00000A78                         L336:	; bb417
00000A78 F80600                  		MOV.L #00000000H, [R0]
00000A7B                         L337:	; bb418
00000A7B EC01                    		MOV.L [R0], R1
00000A7D 6101                    		CMP #00H, R1
00000A7F 3Brrrr               W  		BNE L314
00000A82 08                   S  		BRA L339
00000A83                         L338:	; bb424
                                 ;     499           }
                                 ;     500           break;
                                 ;     501         default:
                                 ;     502           scan = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",502
00000A83 F9043F00                		MOV.B #00H, 3FH[R0]
00000A87                         L339:	; bb425
                                 ;     503           break;
                                 ;     504         }
                                 ;     505         cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",505
00000A87 A901                    		MOV.L 10H[R0], R1
00000A89 6211                    		ADD #01H, R1
00000A8B A101                    		MOV.L R1, 10H[R0]
00000A8D                         L340:	; bb428
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",412
00000A8D 59013F                  		MOVU.B 3FH[R0], R1
00000A90 6101                    		CMP #00H, R1
00000A92 10                   S  		BEQ L343
00000A93                         L341:	; bb433
00000A93 A881                    		MOV.L 08H[R0], R1
00000A95 6101                    		CMP #00H, R1
00000A97 18                   S  		BNE L343
00000A98                         L342:	; bb437
00000A98 F80601                  		MOV.L #00000001H, [R0]
00000A9B 08                   S  		BRA L344
00000A9C                         L343:	; bb438
00000A9C F80600                  		MOV.L #00000000H, [R0]
00000A9F                         L344:	; bb439
00000A9F EC01                    		MOV.L [R0], R1
00000AA1 6101                    		CMP #00H, R1
00000AA3 20rr                    		BEQ L347
00000AA5                         L345:	; bb443
00000AA5 A901                    		MOV.L 10H[R0], R1
00000AA7 06810110                		SUB 40H[R0].L, R1
00000AAB 06850103                		CMP 0CH[R0].L, R1
00000AAF 28rr                    		BGE L347
00000AB1                         L346:	; bb450
00000AB1 F80601                  		MOV.L #00000001H, [R0]
00000AB4 08                   S  		BRA L348
00000AB5                         L347:	; bb451
00000AB5 F80600                  		MOV.L #00000000H, [R0]
00000AB8                         L348:	; bb452
00000AB8 EC01                    		MOV.L [R0], R1
00000ABA 6101                    		CMP #00H, R1
00000ABC 20rr                    		BEQ L351
00000ABE                         L349:	; bb456
00000ABE A901                    		MOV.L 10H[R0], R1
00000AC0 7551FD                  		CMP #0FDH, R1
00000AC3 2Arr                    		BGT L351
00000AC5                         L350:	; bb460
00000AC5 F80601                  		MOV.L #00000001H, [R0]
00000AC8 08                   S  		BRA L352
00000AC9                         L351:	; bb461
00000AC9 F80600                  		MOV.L #00000000H, [R0]
00000ACC                         L352:	; bb462
00000ACC EC01                    		MOV.L [R0], R1
00000ACE 6101                    		CMP #00H, R1
00000AD0 3Brrrr               W  		BNE L271
00000AD3                         L353:	; bb467
                                 ;     506       } // per entry
                                 ;     507       obj_lookup_page++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",507
00000AD3 AB81                    		MOV.L 38H[R0], R1
00000AD5 6211                    		ADD #01H, R1
00000AD7 A381                    		MOV.L R1, 38H[R0]
00000AD9                         L354:	; bb470
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",406
00000AD9 59013F                  		MOVU.B 3FH[R0], R1
00000ADC 6101                    		CMP #00H, R1
00000ADE 10                   S  		BEQ L357
00000ADF                         L355:	; bb475
00000ADF A881                    		MOV.L 08H[R0], R1
00000AE1 6101                    		CMP #00H, R1
00000AE3 18                   S  		BNE L357
00000AE4                         L356:	; bb479
00000AE4 F80601                  		MOV.L #00000001H, [R0]
00000AE7 08                   S  		BRA L358
00000AE8                         L357:	; bb480
00000AE8 F80600                  		MOV.L #00000000H, [R0]
00000AEB                         L358:	; bb481
00000AEB EC01                    		MOV.L [R0], R1
00000AED 6101                    		CMP #00H, R1
00000AEF 20rr                    		BEQ L361
00000AF1                         L359:	; bb485
00000AF1 AB81                    		MOV.L 38H[R0], R1
00000AF3 6111                    		CMP #01H, R1
00000AF5 2Arr                    		BGT L361
00000AF7                         L360:	; bb489
00000AF7 F80601                  		MOV.L #00000001H, [R0]
00000AFA 08                   S  		BRA L362
00000AFB                         L361:	; bb490
00000AFB F80600                  		MOV.L #00000000H, [R0]
00000AFE                         L362:	; bb491
00000AFE EC01                    		MOV.L [R0], R1
00000B00 6101                    		CMP #00H, R1
00000B02 3Brrrr               W  		BNE L269
00000B05                         L363:	; bb497
                                 ;     508     } // per object lookup page
                                 ;     509 
                                 ;     510     if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",510
00000B05 A881                    		MOV.L 08H[R0], R1
00000B07 6101                    		CMP #00H, R1
00000B09 3Brrrr               W  		BNE L414
00000B0C                         L364:	; bb504
                                 ;     511 
                                 ;     512     // state finalization and switch
                                 ;     513     switch (gc.state) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",513
00000B0C A981                    		MOV.L 18H[R0], R1
00000B0E 6121                    		CMP #02H, R1
00000B10 3Arrrr               W  		BEQ L407
00000B13                         L365:	; bb504
00000B13 6111                    		CMP #01H, R1
00000B15 3Arrrr               W  		BEQ L397
00000B18                         L366:	; bb504
00000B18 6101                    		CMP #00H, R1
00000B1A 3Brrrr               W  		BNE L408
00000B1D                         L367:	; bb508
                                 ;     514     case FIND_OBJ_DATA:
                                 ;     515       if (gc.obj_id_found) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",515
00000B1D 590128                  		MOVU.B 28H[R0], R1
00000B20 6101                    		CMP #00H, R1
00000B22 3Arrrr               W  		BEQ L395
00000B25                         L368:	; bb509
                                 ;     516         // find out corresponding obj ix page and load it to memory
                                 ;     517         spiffs_page_header p_hdr;
                                 ;     518         spiffs_page_ix objix_pix;
                                 ;     519         gc.stored_scan_entry_index = cur_entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",519
00000B25 E5000409                		MOV.L 10H[R0], 24H[R0]
00000B29                         L369:	; bb509.split
                                 ;     520         cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",520
00000B29 3E0400                  		MOV.L #00000000H, 10H[R0]
00000B2C                         L370:	; bb509.split15
                                 ;     521         gc.state = MOVE_OBJ_DATA;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",521
00000B2C 3E0601                  		MOV.L #00000001H, 18H[R0]
00000B2F                         L371:	; bb509.split16
                                 ;     522         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",522
00000B2F BD8C                    		MOVU.W 2EH[R0], R4
00000B31 AE81                    		MOV.L 68H[R0], R1
00000B33 6080                    		SUB #08H, R0
00000B35 71025E                  		ADD #5EH, R0, R2
00000B38 A00A                    		MOV.L R2, 04H[R0]
00000B3A F80606                  		MOV.L #00000006H, [R0]
00000B3D 6C84                    		SHLL #08H, R4
00000B3F 7344000010              		ADD #00100000H, R4
00000B44 6603                    		MOV.L #00000000H, R3
00000B46 754215                  		MOV.L #00000015H, R2
00000B49 05rrrrrr             A  		BSR _spiffs_phys_rd
00000B4D 6280                    		ADD #08H, R0
00000B4F A081                    		MOV.L R1, 08H[R0]
00000B51                         L372:	; bb509.split17
                                 ;     523             0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     524         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",524
00000B51 A881                    		MOV.L 08H[R0], R1
00000B53 69F1                    		SHLR #1FH, R1
00000B55 6101                    		CMP #00H, R1
00000B57 10                   S  		BEQ L374
00000B58                         L373:	; bb522
00000B58 E5000201                		MOV.L 08H[R0], 04H[R0]
00000B5C 38rrrr               W  		BRA L415
00000B5F                         L374:	; bb530.split
                                 ;     525         gc.cur_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, p_hdr.span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",525
00000B5F 5D012C                  		MOVU.W 58H[R0], R1
00000B62 755167                  		CMP #67H, R1
00000B65 24rr                    		BGTU L376
00000B67                         L375:	; bb537
00000B67 F80600                  		MOV.L #00000000H, [R0]
00000B6A 2Err                 B  		BRA L377
00000B6C                         L376:	; bb538
00000B6C 5D012C                  		MOVU.W 58H[R0], R1
00000B6F 711198                  		ADD #0FFFFFF98H, R1
00000B72 FD74917C                		DIVU #7CH, R1
00000B76 6211                    		ADD #01H, R1
00000B78 E301                    		MOV.L R1, [R0]
00000B7A                         L377:	; bb545
00000B7A EC01                    		MOV.L [R0], R1
00000B7C 9389                    		MOV.W R1, 1EH[R0]
                                 ;     526         SPIFFS_GC_DBG("gc_clean: FIND_DATA find objix span_ix:%04x\n", gc.cur_objix_spix);
                                 ;     527         res = spiffs_obj_lu_find_id_and_span(fs, gc.cur_obj_id | SPIFFS_OBJ_ID_IX_FLAG, gc.cur_objix_spix, 0, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",527
00000B7E BB8B                    		MOVU.W 1EH[R0], R3
00000B80 BB82                    		MOVU.W 1CH[R0], R2
00000B82 AE81                    		MOV.L 68H[R0], R1
00000B84 6040                    		SUB #04H, R0
00000B86 710E60                  		ADD #60H, R0, R14
00000B89 E30E                    		MOV.L R14, [R0]
00000B8B 78F2                    		BSET #0FH, R2
00000B8D 6604                    		MOV.L #00000000H, R4
00000B8F 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000B93 6240                    		ADD #04H, R0
00000B95 A081                    		MOV.L R1, 08H[R0]
00000B97                         L378:	; bb545.split
                                 ;     528         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",528
00000B97 A881                    		MOV.L 08H[R0], R1
00000B99 69F1                    		SHLR #1FH, R1
00000B9B 6101                    		CMP #00H, R1
00000B9D 10                   S  		BEQ L380
00000B9E                         L379:	; bb560
00000B9E E5000201                		MOV.L 08H[R0], 04H[R0]
00000BA2 38rrrr               W  		BRA L415
00000BA5                         L380:	; bb568.split
                                 ;     529         SPIFFS_GC_DBG("gc_clean: FIND_DATA found object index at page %04x\n", objix_pix);
                                 ;     530         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",530
00000BA5 AE81                    		MOV.L 68H[R0], R1
00000BA7 5D042E                  		MOVU.W 5CH[R0], R4
00000BAA 6080                    		SUB #08H, R0
00000BAC E5100901                		MOV.L 24H[R1], 04H[R0]
00000BB0 F80A0001                		MOV.L #00000100H, [R0]
00000BB4 6C84                    		SHLL #08H, R4
00000BB6 7344000010              		ADD #00100000H, R4
00000BBB 6603                    		MOV.L #00000000H, R3
00000BBD 754215                  		MOV.L #00000015H, R2
00000BC0 05rrrrrr             A  		BSR _spiffs_phys_rd
00000BC4 6280                    		ADD #08H, R0
00000BC6 A081                    		MOV.L R1, 08H[R0]
00000BC8                         L381:	; bb568.split18
                                 ;     531             0, SPIFFS_PAGE_TO_PADDR(fs, objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;     532         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",532
00000BC8 A881                    		MOV.L 08H[R0], R1
00000BCA 69F1                    		SHLR #1FH, R1
00000BCC 6101                    		CMP #00H, R1
00000BCE 10                   S  		BEQ L383
00000BCF                         L382:	; bb580
00000BCF E5000201                		MOV.L 08H[R0], 04H[R0]
00000BD3 38rrrr               W  		BRA L415
00000BD6                         L383:	; bb589.split
                                 ;     533         SPIFFS_VALIDATE_OBJIX(objix->p_hdr, gc.cur_obj_id | SPIFFS_OBJ_ID_IX_FLAG, gc.cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",533
00000BD6 AB09                    		MOV.L 34H[R0], R1
00000BD8 F51004                  		BTST #00H, 04H[R1].B
00000BDB 10                   S  		BEQ L385
00000BDC                         L384:	; bb590
00000BDC F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00000BE1 38rrrr               W  		BRA L415
00000BE4                         L385:	; bb602
00000BE4 AB09                    		MOV.L 34H[R0], R1
00000BE6 F51704                  		BTST #07H, 04H[R1].B
00000BE9 18                   S  		BNE L387
00000BEA                         L386:	; bb603
00000BEA F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00000BEF 38rrrr               W  		BRA L415
00000BF2                         L387:	; bb615
00000BF2 AB09                    		MOV.L 34H[R0], R1
00000BF4 F51104                  		BTST #01H, 04H[R1].B
00000BF7 10                   S  		BEQ L389
00000BF8                         L388:	; bb616
00000BF8 F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00000BFD 38rrrr               W  		BRA L415
00000C00                         L389:	; bb628
00000C00 AB09                    		MOV.L 34H[R0], R1
00000C02 F51204                  		BTST #02H, 04H[R1].B
00000C05 10                   S  		BEQ L391
00000C06                         L390:	; bb629
00000C06 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00000C0B 38rrrr               W  		BRA L415
00000C0E                         L391:	; bb641
00000C0E 2Err                 B  		BRA L392
00000C10                         L392:	; bb653
00000C10 AB09                    		MOV.L 34H[R0], R1
00000C12 B819                    		MOVU.W 02H[R1], R1
00000C14 06C5010F                		CMP 1EH[R0].UW, R1
00000C18 10                   S  		BEQ L394
00000C19                         L393:	; bb654
00000C19 F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00000C1E 38rrrr               W  		BRA L415
00000C21                         L394:	; bb667
                                 ;     534         gc.cur_objix_pix = objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",534
00000C21 D5002E10                		MOV.W 5CH[R0], 20H[R0]
00000C25 38rrrr               W  		BRA L409
00000C28                         L395:	; bb670
                                 ;     535       } else {
                                 ;     536         gc.state = MOVE_OBJ_IX;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",536
00000C28 3E0602                  		MOV.L #00000002H, 18H[R0]
00000C2B                         L396:	; bb670.split
                                 ;     537         cur_entry = 0; // restart entry scan index
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",537
00000C2B 3E0400                  		MOV.L #00000000H, 10H[R0]
00000C2E 38rrrr               W  		BRA L409
00000C31                         L397:	; bb679
                                 ;     538       }
                                 ;     539       break;
                                 ;     540     case MOVE_OBJ_DATA: {
                                 ;     541       // store modified objix (hdr) page
                                 ;     542       spiffs_page_ix new_objix_pix;
                                 ;     543       gc.state = FIND_OBJ_DATA;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",543
00000C31 3E0600                  		MOV.L #00000000H, 18H[R0]
00000C34                         L398:	; bb679.split
                                 ;     544       cur_entry = gc.stored_scan_entry_index;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",544
00000C34 E5000904                		MOV.L 24H[R0], 10H[R0]
00000C38                         L399:	; bb679.split19
                                 ;     545       if (gc.cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",545
00000C38 BB89                    		MOVU.W 1EH[R0], R1
00000C3A 6101                    		CMP #00H, R1
00000C3C AE81                    		MOV.L 68H[R0], R1
00000C3E 21rr                    		BNE L403
00000C40                         L400:	; bb684
                                 ;     546         // store object index header page
                                 ;     547         res = spiffs_object_update_index_hdr(fs, 0, gc.cur_obj_id | SPIFFS_OBJ_ID_IX_FLAG, gc.cur_objix_pix, fs->work, 0, 0, &new_objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",547
00000C40 AE82                    		MOV.L 68H[R0], R2
00000C42 AA2A                    		MOV.L 24H[R2], R2
00000C44 BC04                    		MOVU.W 20H[R0], R4
00000C46 BB83                    		MOVU.W 1CH[R0], R3
00000C48 7100F0                  		ADD #0FFFFFFF0H, R0
00000C4B 71056E                  		ADD #6EH, R0, R5
00000C4E A08D                    		MOV.L R5, 0CH[R0]
00000C50 E302                    		MOV.L R2, [R0]
00000C52 3E0200                  		MOV.L #00000000H, 08H[R0]
00000C55 3E0100                  		MOV.L #00000000H, 04H[R0]
00000C58 78F3                    		BSET #0FH, R3
00000C5A 6602                    		MOV.L #00000000H, R2
00000C5C 05rrrrrr             A  		BSR _spiffs_object_update_index_hdr
00000C60 710010                  		ADD #10H, R0
00000C63 A081                    		MOV.L R1, 08H[R0]
00000C65                         L401:	; bb684.split
                                 ;     548         SPIFFS_GC_DBG("gc_clean: MOVE_DATA store modified objix_hdr page, %04x:%04x\n", new_objix_pix, 0);
                                 ;     549         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",549
00000C65 A881                    		MOV.L 08H[R0], R1
00000C67 69F1                    		SHLR #1FH, R1
00000C69 6101                    		CMP #00H, R1
00000C6B 20rr                    		BEQ L409
00000C6D                         L402:	; bb699
00000C6D E5000201                		MOV.L 08H[R0], 04H[R0]
00000C71 2Err                 B  		BRA L415
00000C73                         L403:	; bb708
                                 ;     550       } else {
                                 ;     551         // store object index page
                                 ;     552         res = spiffs_page_move(fs, 0, fs->work, gc.cur_obj_id | SPIFFS_OBJ_ID_IX_FLAG, 0, gc.cur_objix_pix, &new_objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",552
00000C73 AE82                    		MOV.L 68H[R0], R2
00000C75 AA2B                    		MOV.L 24H[R2], R3
00000C77 9C02                    		MOV.W 20H[R0], R2
00000C79 BB84                    		MOVU.W 1CH[R0], R4
00000C7B 60C0                    		SUB #0CH, R0
00000C7D 71056A                  		ADD #6AH, R0, R5
00000C80 A085                    		MOV.L R5, 08H[R0]
00000C82 9082                    		MOV.W R2, 04H[R0]
00000C84 F80600                  		MOV.L #00000000H, [R0]
00000C87 78F4                    		BSET #0FH, R4
00000C89 6602                    		MOV.L #00000000H, R2
00000C8B 05rrrrrr             A  		BSR _spiffs_page_move
00000C8F 62C0                    		ADD #0CH, R0
00000C91 A081                    		MOV.L R1, 08H[R0]
00000C93                         L404:	; bb708.split
                                 ;     553         SPIFFS_GC_DBG("gc_clean: MOVE_DATA store modified objix page, %04x:%04x\n", new_objix_pix, objix->p_hdr.span_ix);
                                 ;     554         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",554
00000C93 A881                    		MOV.L 08H[R0], R1
00000C95 69F1                    		SHLR #1FH, R1
00000C97 6101                    		CMP #00H, R1
00000C99 10                   S  		BEQ L406
00000C9A                         L405:	; bb723
00000C9A E5000201                		MOV.L 08H[R0], 04H[R0]
00000C9E 2Err                 B  		BRA L415
00000CA0                         L406:	; bb731.split
                                 ;     555         spiffs_cb_object_event(fs, 0, SPIFFS_EV_IX_UPD, gc.cur_obj_id, objix->p_hdr.span_ix, new_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",555
00000CA0 AB09                    		MOV.L 34H[R0], R1
00000CA2 981A                    		MOV.W 02H[R1], R2
00000CA4 DD032F                  		MOV.W 5EH[R0], R3
00000CA7 BB84                    		MOVU.W 1CH[R0], R4
00000CA9 AE81                    		MOV.L 68H[R0], R1
00000CAB 6080                    		SUB #08H, R0
00000CAD 900B                    		MOV.W R3, 02H[R0]
00000CAF D302                    		MOV.W R2, [R0]
00000CB1 3E0100                  		MOV.L #00000000H, 04H[R0]
00000CB4 6602                    		MOV.L #00000000H, R2
00000CB6 EF23                    		MOV.L R2, R3
00000CB8 05rrrrrr             A  		BSR _spiffs_cb_object_event
00000CBC 6280                    		ADD #08H, R0
00000CBE 08                   S  		BRA L409
00000CBF                         L407:	; bb747
                                 ;     556       }
                                 ;     557     }
                                 ;     558     break;
                                 ;     559     case MOVE_OBJ_IX:
                                 ;     560       gc.state = FINISHED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",560
00000CBF 3E0603                  		MOV.L #00000003H, 18H[R0]
00000CC2 08                   S  		BRA L409
00000CC3                         L408:	; bb749
                                 ;     561       break;
                                 ;     562     default:
                                 ;     563       cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",563
00000CC3 3E0400                  		MOV.L #00000000H, 10H[R0]
00000CC6                         L409:	; bb751
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",398
00000CC6 A881                    		MOV.L 08H[R0], R1
00000CC8 6101                    		CMP #00H, R1
00000CCA 18                   S  		BNE L412
00000CCB                         L410:	; bb755
00000CCB A981                    		MOV.L 18H[R0], R1
00000CCD 6131                    		CMP #03H, R1
00000CCF 10                   S  		BEQ L412
00000CD0                         L411:	; bb760
00000CD0 F80601                  		MOV.L #00000001H, [R0]
00000CD3 08                   S  		BRA L413
00000CD4                         L412:	; bb761
00000CD4 F80600                  		MOV.L #00000000H, [R0]
00000CD7                         L413:	; bb762
00000CD7 EC01                    		MOV.L [R0], R1
00000CD9 6101                    		CMP #00H, R1
00000CDB 3Brrrr               W  		BNE L266
00000CDE                         L414:	; bb768
                                 ;     564       break;
                                 ;     565     }
                                 ;     566     SPIFFS_GC_DBG("gc_clean: state-> %i\n", gc.state);
                                 ;     567   } // while state != FINISHED
                                 ;     568 
                                 ;     569 
                                 ;     570   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",570
00000CDE E5000201                		MOV.L 08H[R0], 04H[R0]
00000CE2                         L415:	; bb771
00000CE2 A809                    		MOV.L 04H[R0], R1
00000CE4 A601                    		MOV.L R1, 60H[R0]
                                 ;     571 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\spiffs\spiffs_gc.c",571
00000CE6 671B                    		RTSD #6CH
                                 ;     572 
                                 ;     573 #endif // !SPIFFS_READ_ONLY
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     02614   LINES

Section List

Attr         Size               Name
CODE     0000003304(00000CE8H)  P

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx4DB7\$ccrx\spiffs_gc.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01_master\MT01_build\spiffs_gc.lst
-output=C:\Workspace\e2studio\git\MT01_master\MT01_build\spiffs\spiffs_gc.obj
