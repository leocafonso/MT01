* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Sun Feb 19 10:54:20 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  19-Feb-2017 10:54:20
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=spiffs_nucleus.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01\r_lvd_rx,C:\Workspace\e2studio\git\MT01\r_lvd_rx\src,C:/Workspace/e2studio/git/MT01/r_tfa
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=spiffs_nucleus.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=0,EASYMAK=0,MOBILE=1,FREE_RTOS_PP
                                 ;spiffs_nucleus.c
                                 
                                 		.glb	_spiffs_phys_rd
                                 		.glb	_spiffs_phys_cpy
                                 		.glb	_spiffs_phys_wr
                                 		.glb	_spiffs_obj_lu_find_entry_visitor
                                 		.glb	_spiffs_erase_block
                                 		.glb	_spiffs_obj_lu_scan
                                 		.glb	_spiffs_obj_lu_find_free
                                 		.glb	_spiffs_obj_lu_find_id
                                 		.glb	_spiffs_gc_quick
                                 		.glb	_spiffs_obj_lu_find_id_and_span
                                 		.glb	_spiffs_obj_lu_find_id_and_span_by_phdr
                                 		.glb	_spiffs_page_allocate_data
                                 		.glb	_spiffs_page_move
                                 		.glb	_spiffs_page_delete
                                 		.glb	_spiffs_object_create
                                 		.glb	_spiffs_gc_check
                                 		.glb	_spiffs_object_update_index_hdr
                                 		.glb	_spiffs_cb_object_event
                                 		.glb	_spiffs_object_open_by_id
                                 		.glb	_spiffs_object_open_by_page
                                 		.glb	_spiffs_object_append
                                 		.glb	_spiffs_object_modify
                                 		.glb	_spiffs_object_find_object_index_header_by_name
                                 		.glb	_spiffs_object_truncate
                                 		.glb	_spiffs_object_read
                                 		.glb	_spiffs_obj_lu_find_free_obj_id
                                 		.glb	_spiffs_fd_find_new
                                 		.glb	_spiffs_fd_return
                                 		.glb	_spiffs_fd_get
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         __$spiffs_page_data_check:
                                 		.STACK	__$spiffs_page_data_check=44
                                 ;       1 #include "spiffs.h"
                                 ;       2 #include "spiffs_nucleus.h"
                                 ;       3 
                                 ;       4 static s32_t spiffs_page_data_check(spiffs *fs, spiffs_fd *fd, spiffs_page_ix pix, spiffs_span_ix spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",4
00000000 7100E0                  		ADD #0FFFFFFE0H, R0
00000003 A189                    		MOV.L R1, 1CH[R0]
00000005 A182                    		MOV.L R2, 18H[R0]
00000007 928B                    		MOV.W R3, 16H[R0]
00000009 9284                    		MOV.W R4, 14H[R0]
                                 ;       5   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",5
0000000B 3E0100                  		MOV.L #00000000H, 04H[R0]
0000000E                         L11:	; entry.split
                                 ;       6   if (pix == (spiffs_page_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",6
0000000E BA89                    		MOVU.W 16H[R0], R1
00000010 7701FFFF00              		CMP #0FFFFH, R1
00000015 18                   S  		BNE L13
00000016                         L12:	; bb7
                                 ;       7     // referring to page 0xffff...., bad object index
                                 ;       8     return SPIFFS_ERR_INDEX_REF_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",8
00000016 F80AE1D8                		MOV.L #0FFFFD8E1H, [R0]
0000001A 38rrrr               W  		BRA L32
0000001D                         L13:	; bb14
                                 ;       9   }
                                 ;      10   if (pix % SPIFFS_PAGES_PER_BLOCK(fs) < SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",10
0000001D B581                    		MOVU.B 16H[R0], R1
0000001F 6111                    		CMP #01H, R1
00000021 24rr                    		BGTU L15
00000023                         L14:	; bb15
                                 ;      11     // referring to an object lookup page, bad object index
                                 ;      12     return SPIFFS_ERR_INDEX_REF_LU;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",12
00000023 F80AE0D8                		MOV.L #0FFFFD8E0H, [R0]
00000027 38rrrr               W  		BRA L32
0000002A                         L15:	; bb24
                                 ;      13   }
                                 ;      14   if (pix > SPIFFS_MAX_PAGES(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",14
0000002A BA89                    		MOVU.W 16H[R0], R1
0000002C 76010170                		CMP #7001H, R1
00000030 29rr                    		BLT L17
00000032                         L16:	; bb25
                                 ;      15     // referring to a bad page
                                 ;      16     return SPIFFS_ERR_INDEX_REF_INVALID;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",16
00000032 F80ADFD8                		MOV.L #0FFFFD8DFH, [R0]
00000036 2Err                 B  		BRA L32
00000038                         L17:	; bb32
                                 ;      17   }
                                 ;      18 #if SPIFFS_PAGE_CHECK
                                 ;      19   spiffs_page_header ph;
                                 ;      20   res = _spiffs_rd(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",20
00000038 A981                    		MOV.L 18H[R0], R1
0000003A 9893                    		MOV.W 04H[R1], R3
0000003C BA8C                    		MOVU.W 16H[R0], R4
0000003E A989                    		MOV.L 1CH[R0], R1
00000040 6080                    		SUB #08H, R0
00000042 710212                  		ADD #12H, R0, R2
00000045 A00A                    		MOV.L R2, 04H[R0]
00000047 F80606                  		MOV.L #00000006H, [R0]
0000004A 6C84                    		SHLL #08H, R4
0000004C 7344000010              		ADD #00100000H, R4
00000051 754217                  		MOV.L #00000017H, R2
00000054 05rrrrrr             A  		BSR _spiffs_phys_rd
00000058 6280                    		ADD #08H, R0
0000005A A009                    		MOV.L R1, 04H[R0]
0000005C                         L18:	; bb32.split
                                 ;      21       fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_READ,
                                 ;      22       fd->file_nbr,
                                 ;      23       SPIFFS_PAGE_TO_PADDR(fs, pix),
                                 ;      24       sizeof(spiffs_page_header),
                                 ;      25       (u8_t *)&ph);
                                 ;      26   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",26
0000005C A809                    		MOV.L 04H[R0], R1
0000005E 69F1                    		SHLR #1FH, R1
00000060 6101                    		CMP #00H, R1
00000062 10                   S  		BEQ L20
00000063                         L19:	; bb45
00000063 E10001                  		MOV.L 04H[R0], [R0]
00000066 2Err                 B  		BRA L32
00000068                         L20:	; bb54
                                 ;      27   SPIFFS_VALIDATE_DATA(ph, fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG, spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",27
00000068 F5000E                  		BTST #00H, 0EH[R0].B
0000006B 10                   S  		BEQ L22
0000006C                         L21:	; bb55
0000006C F80AE4D8                		MOV.L #0FFFFD8E4H, [R0]
00000070 2Err                 B  		BRA L32
00000072                         L22:	; bb65
00000072 F5070E                  		BTST #07H, 0EH[R0].B
00000075 18                   S  		BNE L24
00000076                         L23:	; bb66
00000076 F80AECD8                		MOV.L #0FFFFD8ECH, [R0]
0000007A 2Err                 B  		BRA L32
0000007C                         L24:	; bb76
0000007C F5010E                  		BTST #01H, 0EH[R0].B
0000007F 10                   S  		BEQ L26
00000080                         L25:	; bb77
00000080 F80AEBD8                		MOV.L #0FFFFD8EBH, [R0]
00000084 2Err                 B  		BRA L32
00000086                         L26:	; bb87
00000086 F5020E                  		BTST #02H, 0EH[R0].B
00000089 18                   S  		BNE L28
0000008A                         L27:	; bb88
0000008A F80AE5D8                		MOV.L #0FFFFD8E5H, [R0]
0000008E 2Err                 B  		BRA L32
00000090                         L28:	; bb98
00000090 2Err                 B  		BRA L29
00000092                         L29:	; bb111
00000092 B981                    		MOVU.W 0CH[R0], R1
00000094 06C5010A                		CMP 14H[R0].UW, R1
00000098 10                   S  		BEQ L31
00000099                         L30:	; bb112
00000099 F80AE2D8                		MOV.L #0FFFFD8E2H, [R0]
0000009D 08                   S  		BRA L32
0000009E                         L31:	; bb122
                                 ;      28 #endif
                                 ;      29   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",29
0000009E E10001                  		MOV.L 04H[R0], [R0]
000000A1                         L32:	; bb125
000000A1 EC01                    		MOV.L [R0], R1
000000A3 A101                    		MOV.L R1, 10H[R0]
                                 ;      30 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",30
000000A5 6708                    		RTSD #20H
000000A7                         __$spiffs_page_index_check:
                                 		.STACK	__$spiffs_page_index_check=44
                                 ;      31 
                                 ;      32 #if !SPIFFS_READ_ONLY
                                 ;      33 static s32_t spiffs_page_index_check(spiffs *fs, spiffs_fd *fd, spiffs_page_ix pix, spiffs_span_ix spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",33
000000A7 7100E0                  		ADD #0FFFFFFE0H, R0
000000AA A189                    		MOV.L R1, 1CH[R0]
000000AC A182                    		MOV.L R2, 18H[R0]
000000AE 928B                    		MOV.W R3, 16H[R0]
000000B0 9284                    		MOV.W R4, 14H[R0]
                                 ;      34   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",34
000000B2 3E0100                  		MOV.L #00000000H, 04H[R0]
000000B5                         L34:	; entry.split
                                 ;      35   if (pix == (spiffs_page_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",35
000000B5 BA89                    		MOVU.W 16H[R0], R1
000000B7 7701FFFF00              		CMP #0FFFFH, R1
000000BC 18                   S  		BNE L36
000000BD                         L35:	; bb7
                                 ;      36     // referring to page 0xffff...., bad object index
                                 ;      37     return SPIFFS_ERR_INDEX_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",37
000000BD F80ADED8                		MOV.L #0FFFFD8DEH, [R0]
000000C1 38rrrr               W  		BRA L56
000000C4                         L36:	; bb14
                                 ;      38   }
                                 ;      39   if (pix % SPIFFS_PAGES_PER_BLOCK(fs) < SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",39
000000C4 B581                    		MOVU.B 16H[R0], R1
000000C6 6111                    		CMP #01H, R1
000000C8 24rr                    		BGTU L38
000000CA                         L37:	; bb15
                                 ;      40     // referring to an object lookup page, bad object index
                                 ;      41     return SPIFFS_ERR_INDEX_LU;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",41
000000CA F80ADDD8                		MOV.L #0FFFFD8DDH, [R0]
000000CE 38rrrr               W  		BRA L56
000000D1                         L38:	; bb24
                                 ;      42   }
                                 ;      43   if (pix > SPIFFS_MAX_PAGES(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",43
000000D1 BA89                    		MOVU.W 16H[R0], R1
000000D3 76010170                		CMP #7001H, R1
000000D7 29rr                    		BLT L40
000000D9                         L39:	; bb25
                                 ;      44     // referring to a bad page
                                 ;      45     return SPIFFS_ERR_INDEX_INVALID;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",45
000000D9 F80ADCD8                		MOV.L #0FFFFD8DCH, [R0]
000000DD 2Err                 B  		BRA L56
000000DF                         L40:	; bb32
                                 ;      46   }
                                 ;      47 #if SPIFFS_PAGE_CHECK
                                 ;      48   spiffs_page_header ph;
                                 ;      49   res = _spiffs_rd(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",49
000000DF A981                    		MOV.L 18H[R0], R1
000000E1 9893                    		MOV.W 04H[R1], R3
000000E3 BA8C                    		MOVU.W 16H[R0], R4
000000E5 A989                    		MOV.L 1CH[R0], R1
000000E7 6080                    		SUB #08H, R0
000000E9 710212                  		ADD #12H, R0, R2
000000EC A00A                    		MOV.L R2, 04H[R0]
000000EE F80606                  		MOV.L #00000006H, [R0]
000000F1 6C84                    		SHLL #08H, R4
000000F3 7344000010              		ADD #00100000H, R4
000000F8 754216                  		MOV.L #00000016H, R2
000000FB 05rrrrrr             A  		BSR _spiffs_phys_rd
000000FF 6280                    		ADD #08H, R0
00000101 A009                    		MOV.L R1, 04H[R0]
00000103                         L41:	; bb32.split
                                 ;      50       fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 ;      51       fd->file_nbr,
                                 ;      52       SPIFFS_PAGE_TO_PADDR(fs, pix),
                                 ;      53       sizeof(spiffs_page_header),
                                 ;      54       (u8_t *)&ph);
                                 ;      55   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",55
00000103 A809                    		MOV.L 04H[R0], R1
00000105 69F1                    		SHLR #1FH, R1
00000107 6101                    		CMP #00H, R1
00000109 10                   S  		BEQ L43
0000010A                         L42:	; bb45
0000010A E10001                  		MOV.L 04H[R0], [R0]
0000010D 2Err                 B  		BRA L56
0000010F                         L43:	; bb54
                                 ;      56   SPIFFS_VALIDATE_OBJIX(ph, fd->obj_id, spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",56
0000010F F5000E                  		BTST #00H, 0EH[R0].B
00000112 10                   S  		BEQ L45
00000113                         L44:	; bb55
00000113 F80AE4D8                		MOV.L #0FFFFD8E4H, [R0]
00000117 2Err                 B  		BRA L56
00000119                         L45:	; bb65
00000119 F5070E                  		BTST #07H, 0EH[R0].B
0000011C 18                   S  		BNE L47
0000011D                         L46:	; bb66
0000011D F80AECD8                		MOV.L #0FFFFD8ECH, [R0]
00000121 2Err                 B  		BRA L56
00000123                         L47:	; bb76
00000123 F5010E                  		BTST #01H, 0EH[R0].B
00000126 10                   S  		BEQ L49
00000127                         L48:	; bb77
00000127 F80AEBD8                		MOV.L #0FFFFD8EBH, [R0]
0000012B 2Err                 B  		BRA L56
0000012D                         L49:	; bb87
0000012D F5020E                  		BTST #02H, 0EH[R0].B
00000130 10                   S  		BEQ L51
00000131                         L50:	; bb88
00000131 F80AEAD8                		MOV.L #0FFFFD8EAH, [R0]
00000135 2Err                 B  		BRA L56
00000137                         L51:	; bb98
00000137 A981                    		MOV.L 18H[R0], R1
00000139 B899                    		MOVU.W 06H[R1], R1
0000013B 7CF1                    		BTST #0FH, R1
0000013D 18                   S  		BNE L53
0000013E                         L52:	; bb99
0000013E F80AEAD8                		MOV.L #0FFFFD8EAH, [R0]
00000142 2Err                 B  		BRA L56
00000144                         L53:	; bb110
00000144 B981                    		MOVU.W 0CH[R0], R1
00000146 06C5010A                		CMP 14H[R0].UW, R1
0000014A 10                   S  		BEQ L55
0000014B                         L54:	; bb111
0000014B F80AE3D8                		MOV.L #0FFFFD8E3H, [R0]
0000014F 08                   S  		BRA L56
00000150                         L55:	; bb121
                                 ;      57 #endif
                                 ;      58   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",58
00000150 E10001                  		MOV.L 04H[R0], [R0]
00000153                         L56:	; bb124
00000153 EC01                    		MOV.L [R0], R1
00000155 A101                    		MOV.L R1, 10H[R0]
                                 ;      59 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",59
00000157 6708                    		RTSD #20H
00000159                         _spiffs_phys_cpy:
                                 		.STACK	_spiffs_phys_cpy=116
                                 ;      60 #endif // !SPIFFS_READ_ONLY
                                 ;      61 
                                 ;      62 #if !SPIFFS_CACHE
                                 ;      63 
                                 ;      64 s32_t spiffs_phys_rd(
                                 ;      65     spiffs *fs,
                                 ;      66     u32_t addr,
                                 ;      67     u32_t len,
                                 ;      68     u8_t *dst) {
                                 ;      69   return SPIFFS_HAL_READ(fs, addr, len, dst);
                                 ;      70 }
                                 ;      71 
                                 ;      72 s32_t spiffs_phys_wr(
                                 ;      73     spiffs *fs,
                                 ;      74     u32_t addr,
                                 ;      75     u32_t len,
                                 ;      76     u8_t *src) {
                                 ;      77   return SPIFFS_HAL_WRITE(fs, addr, len, src);
                                 ;      78 }
                                 ;      79 
                                 ;      80 #endif
                                 ;      81 
                                 ;      82 #if !SPIFFS_READ_ONLY
                                 ;      83 s32_t spiffs_phys_cpy(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",83
00000159 710098                  		ADD #0FFFFFF98H, R0
0000015C A609                    		MOV.L R1, 64H[R0]
0000015E D70231                  		MOV.W R2, 62H[R0]
00000161 A58B                    		MOV.L R3, 5CH[R0]
00000163 A584                    		MOV.L R4, 58H[R0]
00000165 E5001B15                		MOV.L 6CH[R0], 54H[R0]
                                 ;      84     spiffs *fs,
                                 ;      85     spiffs_file fh,
                                 ;      86     u32_t dst,
                                 ;      87     u32_t src,
                                 ;      88     u32_t len) {
                                 ;      89   (void)fh;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",89
00000169 2Err                 B  		BRA L70
0000016B                         L58:	; bb
                                 ;      90   s32_t res;
                                 ;      91   u8_t b[SPIFFS_COPY_BUFFER_STACK];
                                 ;      92   while (len > 0) {
                                 ;      93     u32_t chunk_size = MIN(SPIFFS_COPY_BUFFER_STACK, len);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",93
0000016B AD09                    		MOV.L 54H[R0], R1
0000016D 755141                  		CMP #41H, R1
00000170 23rr                    		BLTU L60
00000172                         L59:	; bb13
00000172 F80640                  		MOV.L #00000040H, [R0]
00000175 08                   S  		BRA L61
00000176                         L60:	; bb14
00000176 E10015                  		MOV.L 54H[R0], [R0]
00000179                         L61:	; bb16
00000179 EC02                    		MOV.L [R0], R2
0000017B A48A                    		MOV.L R2, 4CH[R0]
                                 ;      94     res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_MOVS, fh, src, chunk_size, b);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",94
0000017D AD84                    		MOV.L 58H[R0], R4
0000017F DD0331                  		MOV.W 62H[R0], R3
00000182 AE09                    		MOV.L 64H[R0], R1
00000184 6080                    		SUB #08H, R0
00000186 710514                  		ADD #14H, R0, R5
00000189 A00D                    		MOV.L R5, 04H[R0]
0000018B E302                    		MOV.L R2, [R0]
0000018D 66B2                    		MOV.L #0000000BH, R2
0000018F 05rrrrrr             A  		BSR _spiffs_phys_rd
00000193 6280                    		ADD #08H, R0
00000195 A081                    		MOV.L R1, 08H[R0]
00000197                         L62:	; bb16.split
                                 ;      95     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",95
00000197 A881                    		MOV.L 08H[R0], R1
00000199 69F1                    		SHLR #1FH, R1
0000019B 6101                    		CMP #00H, R1
0000019D 10                   S  		BEQ L64
0000019E                         L63:	; bb26
0000019E E5000201                		MOV.L 08H[R0], 04H[R0]
000001A2 2Err                 B  		BRA L72
000001A4                         L64:	; bb34.split
                                 ;      96     res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_MOVD,  fh, dst, chunk_size, b);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",96
000001A4 AC8A                    		MOV.L 4CH[R0], R2
000001A6 AD8C                    		MOV.L 5CH[R0], R4
000001A8 DD0331                  		MOV.W 62H[R0], R3
000001AB AE09                    		MOV.L 64H[R0], R1
000001AD 6080                    		SUB #08H, R0
000001AF 710514                  		ADD #14H, R0, R5
000001B2 A00D                    		MOV.L R5, 04H[R0]
000001B4 E302                    		MOV.L R2, [R0]
000001B6 66F2                    		MOV.L #0000000FH, R2
000001B8 05rrrrrr             A  		BSR _spiffs_phys_wr
000001BC 6280                    		ADD #08H, R0
000001BE A081                    		MOV.L R1, 08H[R0]
000001C0                         L65:	; bb34.split1
                                 ;      97     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",97
000001C0 A881                    		MOV.L 08H[R0], R1
000001C2 69F1                    		SHLR #1FH, R1
000001C4 6101                    		CMP #00H, R1
000001C6 10                   S  		BEQ L67
000001C7                         L66:	; bb43
000001C7 E5000201                		MOV.L 08H[R0], 04H[R0]
000001CB 2Err                 B  		BRA L72
000001CD                         L67:	; bb51.split
                                 ;      98     len -= chunk_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",98
000001CD AD09                    		MOV.L 54H[R0], R1
000001CF 06810113                		SUB 4CH[R0].L, R1
000001D3 A509                    		MOV.L R1, 54H[R0]
000001D5                         L68:	; bb51.split2
                                 ;      99     src += chunk_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",99
000001D5 AD81                    		MOV.L 58H[R0], R1
000001D7 06890113                		ADD 4CH[R0].L, R1
000001DB A581                    		MOV.L R1, 58H[R0]
000001DD                         L69:	; bb51.split3
                                 ;     100     dst += chunk_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",100
000001DD AD89                    		MOV.L 5CH[R0], R1
000001DF 06890113                		ADD 4CH[R0].L, R1
000001E3 A589                    		MOV.L R1, 5CH[R0]
000001E5                         L70:	; bb61
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",92
000001E5 AD09                    		MOV.L 54H[R0], R1
000001E7 6101                    		CMP #00H, R1
000001E9 3Brrrr               W  		BNE L58
000001EC                         L71:	; bb66
                                 ;     101   }
                                 ;     102   return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",102
000001EC 3E0100                  		MOV.L #00000000H, 04H[R0]
000001EF                         L72:	; bb68
000001EF A809                    		MOV.L 04H[R0], R1
000001F1 A501                    		MOV.L R1, 50H[R0]
                                 ;     103 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",103
000001F3 671A                    		RTSD #68H
000001F5                         _spiffs_obj_lu_find_entry_visitor:
                                 		.STACK	_spiffs_obj_lu_find_entry_visitor=96
                                 ;     104 #endif // !SPIFFS_READ_ONLY
                                 ;     105 
                                 ;     106 // Find object lookup entry containing given id with visitor.
                                 ;     107 // Iterate over object lookup pages in each block until a given object id entry is found.
                                 ;     108 // When found, the visitor function is called with block index, entry index and user data.
                                 ;     109 // If visitor returns SPIFFS_VIS_CONTINUE, the search goes on. Otherwise, the search will be
                                 ;     110 // ended and visitor's return code is returned to caller.
                                 ;     111 // If no visitor is given (0) the search returns on first entry with matching object id.
                                 ;     112 // If no match is found in all look up, SPIFFS_VIS_END is returned.
                                 ;     113 // @param fs                    the file system
                                 ;     114 // @param starting_block        the starting block to start search in
                                 ;     115 // @param starting_lu_entry     the look up index entry to start search in
                                 ;     116 // @param flags                 ored combination of SPIFFS_VIS_CHECK_ID, SPIFFS_VIS_CHECK_PH,
                                 ;     117 //                              SPIFFS_VIS_NO_WRAP
                                 ;     118 // @param obj_id                argument object id
                                 ;     119 // @param v                     visitor callback function
                                 ;     120 // @param user_const_p          any const pointer, passed to the callback visitor function
                                 ;     121 // @param user_var_p            any pointer, passed to the callback visitor function
                                 ;     122 // @param block_ix              reported block index where match was found
                                 ;     123 // @param lu_entry              reported look up index where match was found
                                 ;     124 s32_t spiffs_obj_lu_find_entry_visitor(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",124
000001F5 7100AC                  		ADD #0FFFFFFACH, R0
000001F8 A501                    		MOV.L R1, 50H[R0]
000001FA D70227                  		MOV.W R2, 4EH[R0]
000001FD A483                    		MOV.L R3, 48H[R0]
000001FF C70447                  		MOV.B R4, 47H[R0]
00000202 D5002C22                		MOV.W 58H[R0], 44H[R0]
00000206 E5001710                		MOV.L 5CH[R0], 40H[R0]
0000020A E500180F                		MOV.L 60H[R0], 3CH[R0]
0000020E E500190E                		MOV.L 64H[R0], 38H[R0]
00000212 E5001A0D                		MOV.L 68H[R0], 34H[R0]
00000216 E5001B0C                		MOV.L 6CH[R0], 30H[R0]
                                 ;     125     spiffs *fs,
                                 ;     126     spiffs_block_ix starting_block,
                                 ;     127     int starting_lu_entry,
                                 ;     128     u8_t flags,
                                 ;     129     spiffs_obj_id obj_id,
                                 ;     130     spiffs_visitor_f v,
                                 ;     131     const void *user_const_p,
                                 ;     132     void *user_var_p,
                                 ;     133     spiffs_block_ix *block_ix,
                                 ;     134     int *lu_entry) {
                                 ;     135   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",135
0000021A 3E0200                  		MOV.L #00000000H, 08H[R0]
0000021D                         L74:	; entry.split
                                 ;     136   s32_t entry_count = fs->block_count * SPIFFS_OBJ_LOOKUP_MAX_ENTRIES(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",136
0000021D AD01                    		MOV.L 50H[R0], R1
0000021F A899                    		MOV.L 0CH[R1], R1
00000221 7611FE00                		MUL #0FEH, R1
00000225 A089                    		MOV.L R1, 0CH[R0]
00000227                         L75:	; entry.split1
                                 ;     137   spiffs_block_ix cur_block = starting_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",137
00000227 D5002709                		MOV.W 4EH[R0], 12H[R0]
0000022B                         L76:	; entry.split2
                                 ;     138   u32_t cur_block_addr = starting_block * SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",138
0000022B DD0127                  		MOV.W 4EH[R0], R1
0000022E 6D01                    		SHLL #10H, R1
00000230 A109                    		MOV.L R1, 14H[R0]
00000232                         L77:	; entry.split3
                                 ;     139 
                                 ;     140   spiffs_obj_id *obj_lu_buf = (spiffs_obj_id *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",140
00000232 AD01                    		MOV.L 50H[R0], R1
00000234 E5100806                		MOV.L 20H[R1], 18H[R0]
00000238                         L78:	; entry.split4
                                 ;     141   int cur_entry = starting_lu_entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",141
00000238 E5001207                		MOV.L 48H[R0], 1CH[R0]
0000023C                         L79:	; entry.split5
                                 ;     142   int entries_per_page = (SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",142
0000023C 3E0880                  		MOV.L #00000080H, 20H[R0]
0000023F                         L80:	; entry.split6
                                 ;     143 
                                 ;     144   // wrap initial
                                 ;     145   if (cur_entry > (int)SPIFFS_OBJ_LOOKUP_MAX_ENTRIES(fs) - 1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",145
0000023F A989                    		MOV.L 1CH[R0], R1
00000241 7551FE                  		CMP #0FEH, R1
00000244 28rr                  * 		BLT L144
         38rrrr                  
00000249                         L81:	; bb33
                                 ;     146     cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",146
00000249 3E0700                  		MOV.L #00000000H, 1CH[R0]
0000024C                         L82:	; bb33.split
                                 ;     147     cur_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",147
0000024C 9A09                    		MOV.W 12H[R0], R1
0000024E 6211                    		ADD #01H, R1
00000250 9209                    		MOV.W R1, 12H[R0]
00000252                         L83:	; bb33.split7
                                 ;     148     cur_block_addr = cur_block * SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",148
00000252 9A09                    		MOV.W 12H[R0], R1
00000254 6D01                    		SHLL #10H, R1
00000256 A109                    		MOV.L R1, 14H[R0]
00000258                         L84:	; bb33.split8
                                 ;     149     if (cur_block >= fs->block_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",149
00000258 AD01                    		MOV.L 50H[R0], R1
0000025A BA0A                    		MOVU.W 12H[R0], R2
0000025C 06851203                		CMP 0CH[R1].L, R2
00000260 22rr                  * 		BLTU L144
         38rrrr                  
00000265                         L85:	; bb41
                                 ;     150       if (flags & SPIFFS_VIS_NO_WRAP) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",150
00000265 F50247                  		BTST #02H, 47H[R0].B
00000268 10                   S  		BEQ L87
00000269                         L86:	; bb42
                                 ;     151         return SPIFFS_VIS_END;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",151
00000269 F90A01A8D8              		MOV.L #0FFFFD8A8H, 04H[R0]
0000026E 38rrrr               W  		BRA L152
00000271                         L87:	; bb44
                                 ;     152       } else {
                                 ;     153         // block wrap
                                 ;     154         cur_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",154
00000271 3D0900                  		MOV.W #0000H, 12H[R0]
00000274                         L88:	; bb44.split
                                 ;     155         cur_block_addr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",155
00000274 3E0500                  		MOV.L #00000000H, 14H[R0]
00000277 38rrrr               W  		BRA L144
0000027A                         L89:	; bb65
                                 ;     156       }
                                 ;     157     }
                                 ;     158   }
                                 ;     159 
                                 ;     160   // check each block
                                 ;     161   while (res == SPIFFS_OK && entry_count > 0) {
                                 ;     162     int obj_lookup_page = cur_entry / entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",162
0000027A A989                    		MOV.L 1CH[R0], R1
0000027C 06A1080108              		DIV 20H[R0].L, R1
00000281 A209                    		MOV.L R1, 24H[R0]
00000283 38rrrr               W  		BRA L131
00000286                         L90:	; bb69
                                 ;     163     // check each object lookup page
                                 ;     164     while (res == SPIFFS_OK && obj_lookup_page < (int)SPIFFS_OBJ_LOOKUP_PAGES(fs)) {
                                 ;     165       int entry_offset = obj_lookup_page * entries_per_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",165
00000286 AA09                    		MOV.L 24H[R0], R1
00000288 068D0108                		MUL 20H[R0].L, R1
0000028C A281                    		MOV.L R1, 28H[R0]
0000028E                         L91:	; bb69.split
                                 ;     166       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",166
0000028E AD01                    		MOV.L 50H[R0], R1
00000290 AA0C                    		MOV.L 24H[R0], R4
00000292 6C84                    		SHLL #08H, R4
00000294 06890405                		ADD 14H[R0].L, R4
00000298 6080                    		SUB #08H, R0
0000029A E5100801                		MOV.L 20H[R1], 04H[R0]
0000029E F80A0001                		MOV.L #00000100H, [R0]
000002A2 7344000010              		ADD #00100000H, R4
000002A7 6603                    		MOV.L #00000000H, R3
000002A9 754214                  		MOV.L #00000014H, R2
000002AC 05rrrrrr             A  		BSR _spiffs_phys_rd
000002B0 6280                    		ADD #08H, R0
000002B2 A081                    		MOV.L R1, 08H[R0]
000002B4 38rrrr               W  		BRA L121
000002B7                         L92:	; bb84
                                 ;     167           0, cur_block_addr + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     168       // check each entry
                                 ;     169       while (res == SPIFFS_OK &&
                                 ;     170           cur_entry - entry_offset < entries_per_page && // for non-last obj lookup pages
                                 ;     171           cur_entry < (int)SPIFFS_OBJ_LOOKUP_MAX_ENTRIES(fs)) // for last obj lookup page
                                 ;     172       {
                                 ;     173         if ((flags & SPIFFS_VIS_CHECK_ID) == 0 || obj_lu_buf[cur_entry-entry_offset] == obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",173
000002B7 F50047                  		BTST #00H, 47H[R0].B
000002BA 3Arrrr               W  		BEQ L116
000002BD 38rrrr               W  		BRA L115
000002C0                         L93:	; bb86
                                 ;     174           if (block_ix) *block_ix = cur_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",174
000002C0 AB09                    		MOV.L 34H[R0], R1
000002C2 6101                    		CMP #00H, R1
000002C4 10                   S  		BEQ L95
000002C5                         L94:	; bb87
000002C5 9A09                    		MOV.W 12H[R0], R1
000002C7 AB0A                    		MOV.L 34H[R0], R2
000002C9 D321                    		MOV.W R1, [R2]
000002CB                         L95:	; bb95
                                 ;     175           if (lu_entry) *lu_entry = cur_entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",175
000002CB AB01                    		MOV.L 30H[R0], R1
000002CD 6101                    		CMP #00H, R1
000002CF 10                   S  		BEQ L97
000002D0                         L96:	; bb96
000002D0 A989                    		MOV.L 1CH[R0], R1
000002D2 AB02                    		MOV.L 30H[R0], R2
000002D4 E321                    		MOV.L R1, [R2]
000002D6                         L97:	; bb104
                                 ;     176           if (v) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",176
000002D6 AC01                    		MOV.L 40H[R0], R1
000002D8 6101                    		CMP #00H, R1
000002DA 3Arrrr               W  		BEQ L114
000002DD                         L98:	; bb105
                                 ;     177             res = v(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",177
000002DD F50147                  		BTST #01H, 47H[R0].B
000002E0 AD01                    		MOV.L 50H[R0], R1
000002E2 AC05                    		MOV.L 40H[R0], R5
000002E4 10                   S  		BEQ L100
000002E5                         L99:	; bb113
000002E5 5D0222                  		MOVU.W 44H[R0], R2
000002E8 E302                    		MOV.L R2, [R0]
000002EA 2Err                 B  		BRA L101
000002EC                         L100:	; bb116
000002EC A98A                    		MOV.L 1CH[R0], R2
000002EE 0681020A                		SUB 28H[R0].L, R2
000002F2 A983                    		MOV.L 18H[R0], R3
000002F4 FED232                  		MOVU.W [R2,R3], R2
000002F7 E302                    		MOV.L R2, [R0]
000002F9                         L101:	; bb124
000002F9 ED0F0E                  		MOV.L 38H[R0], R15
000002FC ED0E0F                  		MOV.L 3CH[R0], R14
000002FF A98C                    		MOV.L 1CH[R0], R4
00000301 BA0B                    		MOVU.W 12H[R0], R3
00000303 5C02                    		MOVU.W [R0], R2
00000305 6080                    		SUB #08H, R0
00000307 E70F01                  		MOV.L R15, 04H[R0]
0000030A E30E                    		MOV.L R14, [R0]
0000030C 7F15                    		JSR R5
0000030E 6280                    		ADD #08H, R0
00000310 A081                    		MOV.L R1, 08H[R0]
                                 ;     178                 fs,
                                 ;     179                 (flags & SPIFFS_VIS_CHECK_PH) ? obj_id : obj_lu_buf[cur_entry-entry_offset],
                                 ;     180                 cur_block,
                                 ;     181                 cur_entry,
                                 ;     182                 user_const_p,
                                 ;     183                 user_var_p);
                                 ;     184             if (res == SPIFFS_VIS_COUNTINUE || res == SPIFFS_VIS_COUNTINUE_RELOAD) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",184
00000312 7601AAD8                		CMP #0FFFFD8AAH, R1
00000316 20rr                    		BEQ L111
00000318 2Err                 B  		BRA L110
0000031A                         L102:	; bb135
                                 ;     185               if (res == SPIFFS_VIS_COUNTINUE_RELOAD) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",185
0000031A 7601A9D8                		CMP #0FFFFD8A9H, R1
0000031E 21rr                    		BNE L106
00000320                         L103:	; bb136
                                 ;     186                 res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",186
00000320 AD01                    		MOV.L 50H[R0], R1
00000322 AA0C                    		MOV.L 24H[R0], R4
00000324 6C84                    		SHLL #08H, R4
00000326 06890405                		ADD 14H[R0].L, R4
0000032A 6080                    		SUB #08H, R0
0000032C E5100801                		MOV.L 20H[R1], 04H[R0]
00000330 F80A0001                		MOV.L #00000100H, [R0]
00000334 7344000010              		ADD #00100000H, R4
00000339 6603                    		MOV.L #00000000H, R3
0000033B 754214                  		MOV.L #00000014H, R2
0000033E 05rrrrrr             A  		BSR _spiffs_phys_rd
00000342 6280                    		ADD #08H, R0
00000344 A081                    		MOV.L R1, 08H[R0]
00000346                         L104:	; bb136.split
                                 ;     187                     0, cur_block_addr + SPIFFS_PAGE_TO_PADDR(fs, obj_lookup_page), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     188                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",188
00000346 A881                    		MOV.L 08H[R0], R1
00000348 69F1                    		SHLR #1FH, R1
0000034A 6101                    		CMP #00H, R1
0000034C 10                   S  		BEQ L106
0000034D                         L105:	; bb149
0000034D E5000201                		MOV.L 08H[R0], 04H[R0]
00000351 38rrrr               W  		BRA L152
00000354                         L106:	; bb162
                                 ;     189               }
                                 ;     190               res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",190
00000354 3E0200                  		MOV.L #00000000H, 08H[R0]
00000357                         L107:	; bb162.split
                                 ;     191               cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",191
00000357 A989                    		MOV.L 1CH[R0], R1
00000359 6211                    		ADD #01H, R1
0000035B A189                    		MOV.L R1, 1CH[R0]
0000035D                         L108:	; bb162.split9
                                 ;     192               entry_count--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",192
0000035D A889                    		MOV.L 0CH[R0], R1
0000035F 6011                    		SUB #01H, R1
00000361 A089                    		MOV.L R1, 0CH[R0]
00000363 2Err                 B  		BRA L121
00000365                         L109:	; bb168
                                 ;     193               continue;
                                 ;     194             } else {
                                 ;     195               return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",195
00000365 A009                    		MOV.L R1, 04H[R0]
00000367 38rrrr               W  		BRA L152
0000036A                         L110:	; bb174
0000036A A881                    		MOV.L 08H[R0], R1
0000036C 7601A9D8                		CMP #0FFFFD8A9H, R1
00000370 18                   S  		BNE L112
00000371                         L111:	; bb178
00000371 F80601                  		MOV.L #00000001H, [R0]
00000374 08                   S  		BRA L113
00000375                         L112:	; bb179
00000375 F80600                  		MOV.L #00000000H, [R0]
00000378                         L113:	; bb180
00000378 EC01                    		MOV.L [R0], R1
0000037A 6101                    		CMP #00H, R1
0000037C A881                    		MOV.L 08H[R0], R1
0000037E 21rr                    		BNE L102
00000380 2Err                 B  		BRA L109
00000382                         L114:	; bb186
                                 ;     196             }
                                 ;     197           } else {
                                 ;     198             return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",198
00000382 3E0100                  		MOV.L #00000000H, 04H[R0]
00000385 38rrrr               W  		BRA L152
00000388                         L115:	; bb198
00000388 A989                    		MOV.L 1CH[R0], R1
0000038A 0681010A                		SUB 28H[R0].L, R1
0000038E A982                    		MOV.L 18H[R0], R2
00000390 FED12E                  		MOVU.W [R1,R2], R14
00000393 06C50E22                		CMP 44H[R0].UW, R14
00000397 18                   S  		BNE L117
00000398                         L116:	; bb210
00000398 F80601                  		MOV.L #00000001H, [R0]
0000039B 08                   S  		BRA L118
0000039C                         L117:	; bb211
0000039C F80600                  		MOV.L #00000000H, [R0]
0000039F                         L118:	; bb212
0000039F EC01                    		MOV.L [R0], R1
000003A1 6101                    		CMP #00H, R1
000003A3 3Brrrr               W  		BNE L93
000003A6                         L119:	; bb217
                                 ;     199           }
                                 ;     200         }
                                 ;     201         entry_count--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",201
000003A6 A889                    		MOV.L 0CH[R0], R1
000003A8 6011                    		SUB #01H, R1
000003AA A089                    		MOV.L R1, 0CH[R0]
000003AC                         L120:	; bb217.split
                                 ;     202         cur_entry++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",202
000003AC A989                    		MOV.L 1CH[R0], R1
000003AE 6211                    		ADD #01H, R1
000003B0 A189                    		MOV.L R1, 1CH[R0]
000003B2                         L121:	; bb223
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",169
000003B2 A881                    		MOV.L 08H[R0], R1
000003B4 6101                    		CMP #00H, R1
000003B6 21rr                    		BNE L124
000003B8                         L122:	; bb227
000003B8 A989                    		MOV.L 1CH[R0], R1
000003BA 0681010A                		SUB 28H[R0].L, R1
000003BE 06850108                		CMP 20H[R0].L, R1
000003C2 28rr                    		BGE L124
000003C4                         L123:	; bb234
000003C4 F80601                  		MOV.L #00000001H, [R0]
000003C7 08                   S  		BRA L125
000003C8                         L124:	; bb235
000003C8 F80600                  		MOV.L #00000000H, [R0]
000003CB                         L125:	; bb236
000003CB EC01                    		MOV.L [R0], R1
000003CD 6101                    		CMP #00H, R1
000003CF 20rr                    		BEQ L128
000003D1                         L126:	; bb240
000003D1 A989                    		MOV.L 1CH[R0], R1
000003D3 7551FD                  		CMP #0FDH, R1
000003D6 2Arr                    		BGT L128
000003D8                         L127:	; bb244
000003D8 F80601                  		MOV.L #00000001H, [R0]
000003DB 08                   S  		BRA L129
000003DC                         L128:	; bb245
000003DC F80600                  		MOV.L #00000000H, [R0]
000003DF                         L129:	; bb246
000003DF EC01                    		MOV.L [R0], R1
000003E1 6101                    		CMP #00H, R1
000003E3 3Brrrr               W  		BNE L92
000003E6                         L130:	; bb251
                                 ;     203       } // per entry
                                 ;     204       obj_lookup_page++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",204
000003E6 AA09                    		MOV.L 24H[R0], R1
000003E8 6211                    		ADD #01H, R1
000003EA A209                    		MOV.L R1, 24H[R0]
000003EC                         L131:	; bb254
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",164
000003EC A881                    		MOV.L 08H[R0], R1
000003EE 6101                    		CMP #00H, R1
000003F0 21rr                    		BNE L134
000003F2                         L132:	; bb258
000003F2 AA09                    		MOV.L 24H[R0], R1
000003F4 6111                    		CMP #01H, R1
000003F6 2Arr                    		BGT L134
000003F8                         L133:	; bb262
000003F8 F80601                  		MOV.L #00000001H, [R0]
000003FB 08                   S  		BRA L135
000003FC                         L134:	; bb263
000003FC F80600                  		MOV.L #00000000H, [R0]
000003FF                         L135:	; bb264
000003FF EC01                    		MOV.L [R0], R1
00000401 6101                    		CMP #00H, R1
00000403 3Brrrr               W  		BNE L90
00000406                         L136:	; bb269
                                 ;     205     } // per object lookup page
                                 ;     206     cur_entry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",206
00000406 3E0700                  		MOV.L #00000000H, 1CH[R0]
00000409                         L137:	; bb269.split
                                 ;     207     cur_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",207
00000409 9A09                    		MOV.W 12H[R0], R1
0000040B 6211                    		ADD #01H, R1
0000040D 9209                    		MOV.W R1, 12H[R0]
0000040F                         L138:	; bb269.split11
                                 ;     208     cur_block_addr += SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",208
0000040F A909                    		MOV.L 14H[R0], R1
00000411 7311000001              		ADD #00010000H, R1
00000416 A109                    		MOV.L R1, 14H[R0]
00000418                         L139:	; bb269.split12
                                 ;     209     if (cur_block >= fs->block_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",209
00000418 AD01                    		MOV.L 50H[R0], R1
0000041A BA0A                    		MOVU.W 12H[R0], R2
0000041C 06851203                		CMP 0CH[R1].L, R2
00000420 23rr                    		BLTU L144
00000422                         L140:	; bb276
                                 ;     210       if (flags & SPIFFS_VIS_NO_WRAP) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",210
00000422 F50247                  		BTST #02H, 47H[R0].B
00000425 10                   S  		BEQ L142
00000426                         L141:	; bb277
                                 ;     211         return SPIFFS_VIS_END;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",211
00000426 F90A01A8D8              		MOV.L #0FFFFD8A8H, 04H[R0]
0000042B 2Err                 B  		BRA L152
0000042D                         L142:	; bb279
                                 ;     212       } else {
                                 ;     213         // block wrap
                                 ;     214         cur_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",214
0000042D 3D0900                  		MOV.W #0000H, 12H[R0]
00000430                         L143:	; bb279.split
                                 ;     215         cur_block_addr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",215
00000430 3E0500                  		MOV.L #00000000H, 14H[R0]
00000433                         L144:	; bb296
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",161
00000433 A881                    		MOV.L 08H[R0], R1
00000435 6101                    		CMP #00H, R1
00000437 21rr                    		BNE L147
00000439                         L145:	; bb300
00000439 A889                    		MOV.L 0CH[R0], R1
0000043B 6101                    		CMP #00H, R1
0000043D 2Brr                    		BLE L147
0000043F                         L146:	; bb304
0000043F F80601                  		MOV.L #00000001H, [R0]
00000442 08                   S  		BRA L148
00000443                         L147:	; bb305
00000443 F80600                  		MOV.L #00000000H, [R0]
00000446                         L148:	; bb306
00000446 EC01                    		MOV.L [R0], R1
00000448 6101                    		CMP #00H, R1
0000044A 3Brrrr               W  		BNE L89
0000044D                         L149:	; bb313
                                 ;     216       }
                                 ;     217     }
                                 ;     218   } // per block
                                 ;     219 
                                 ;     220   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",220
0000044D A881                    		MOV.L 08H[R0], R1
0000044F 69F1                    		SHLR #1FH, R1
00000451 6101                    		CMP #00H, R1
00000453 10                   S  		BEQ L151
00000454                         L150:	; bb314
00000454 E5000201                		MOV.L 08H[R0], 04H[R0]
00000458 08                   S  		BRA L152
00000459                         L151:	; bb322
                                 ;     221 
                                 ;     222   return SPIFFS_VIS_END;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",222
00000459 F90A01A8D8              		MOV.L #0FFFFD8A8H, 04H[R0]
0000045E                         L152:	; bb324
0000045E A809                    		MOV.L 04H[R0], R1
00000460 A289                    		MOV.L R1, 2CH[R0]
                                 ;     223 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",223
00000462 6715                    		RTSD #54H
00000464                         _spiffs_erase_block:
                                 		.STACK	_spiffs_erase_block=44
                                 ;     224 
                                 ;     225 #if !SPIFFS_READ_ONLY
                                 ;     226 s32_t spiffs_erase_block(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",226
00000464 7100E0                  		ADD #0FFFFFFE0H, R0
00000467 A189                    		MOV.L R1, 1CH[R0]
00000469 930A                    		MOV.W R2, 1AH[R0]
                                 ;     227     spiffs *fs,
                                 ;     228     spiffs_block_ix bix) {
                                 ;     229   s32_t res;
                                 ;     230   u32_t addr = SPIFFS_BLOCK_TO_PADDR(fs, bix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",230
0000046B 9B09                    		MOV.W 1AH[R0], R1
0000046D 6D01                    		SHLL #10H, R1
0000046F 7311000010              		ADD #00100000H, R1
00000474 A081                    		MOV.L R1, 08H[R0]
00000476                         L154:	; entry.split
                                 ;     231   s32_t size = SPIFFS_CFG_LOG_BLOCK_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",231
00000476 F90E03000001            		MOV.L #00010000H, 0CH[R0]
0000047C 2Err                 B  		BRA L158
0000047E                         L155:	; bb
                                 ;     232 
                                 ;     233   // here we ignore res, just try erasing the block
                                 ;     234   while (size > 0) {
                                 ;     235     SPIFFS_DBG("erase %08x:%08x\n", addr,  SPIFFS_CFG_PHYS_ERASE_SZ(fs));
                                 ;     236     SPIFFS_HAL_ERASE(fs, addr, SPIFFS_CFG_PHYS_ERASE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",236
0000047E A893                    		MOV.L 08H[R1], R3
00000480 A881                    		MOV.L 08H[R0], R1
00000482 FB2E000001              		MOV.L #00010000H, R2
00000487 7F13                    		JSR R3
00000489                         L156:	; bb.split
                                 ;     237 
                                 ;     238     addr += SPIFFS_CFG_PHYS_ERASE_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",238
00000489 A881                    		MOV.L 08H[R0], R1
0000048B 7311000001              		ADD #00010000H, R1
00000490 A081                    		MOV.L R1, 08H[R0]
00000492                         L157:	; bb.split1
                                 ;     239     size -= SPIFFS_CFG_PHYS_ERASE_SZ(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",239
00000492 A889                    		MOV.L 0CH[R0], R1
00000494 73110000FF              		ADD #0FFFF0000H, R1
00000499 A089                    		MOV.L R1, 0CH[R0]
0000049B                         L158:	; bb21
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",234
0000049B A889                    		MOV.L 0CH[R0], R1
0000049D 6101                    		CMP #00H, R1
0000049F A989                    		MOV.L 1CH[R0], R1
000004A1 2Arr                    		BGT L155
000004A3                         L159:	; bb25
                                 ;     240   }
                                 ;     241   fs->free_blocks++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",241
000004A3 AB1A                    		MOV.L 34H[R1], R2
000004A5 6212                    		ADD #01H, R2
000004A7 A31A                    		MOV.L R2, 34H[R1]
000004A9                         L160:	; bb25.split
                                 ;     242 
                                 ;     243   // register erase count for this block
                                 ;     244   res = _spiffs_wr(fs, SPIFFS_OP_C_WRTHRU | SPIFFS_OP_T_OBJ_LU2, 0,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",244
000004A9 A989                    		MOV.L 1CH[R0], R1
000004AB 9B0C                    		MOV.W 1AH[R0], R4
000004AD 6080                    		SUB #08H, R0
000004AF 711242                  		ADD #42H, R1, R2
000004B2 A00A                    		MOV.L R2, 04H[R0]
000004B4 F80602                  		MOV.L #00000002H, [R0]
000004B7 6D04                    		SHLL #10H, R4
000004B9 7344FE0110              		ADD #001001FEH, R4
000004BE 6603                    		MOV.L #00000000H, R3
000004C0 754219                  		MOV.L #00000019H, R2
000004C3 05rrrrrr             A  		BSR _spiffs_phys_wr
000004C7 6280                    		ADD #08H, R0
000004C9 A009                    		MOV.L R1, 04H[R0]
000004CB                         L161:	; bb25.split2
                                 ;     245       SPIFFS_ERASE_COUNT_PADDR(fs, bix),
                                 ;     246       sizeof(spiffs_obj_id), (u8_t *)&fs->max_erase_count);
                                 ;     247   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",247
000004CB A809                    		MOV.L 04H[R0], R1
000004CD 69F1                    		SHLR #1FH, R1
000004CF 6101                    		CMP #00H, R1
000004D1 10                   S  		BEQ L163
000004D2                         L162:	; bb43
000004D2 E10001                  		MOV.L 04H[R0], [R0]
000004D5 2Err                 B  		BRA L171
000004D7                         L163:	; bb51
                                 ;     248 
                                 ;     249 #if SPIFFS_USE_MAGIC
                                 ;     250   // finally, write magic
                                 ;     251   spiffs_obj_id magic = SPIFFS_MAGIC(fs, bix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",251
000004D7 F909092904              		MOV.W #0429H, 12H[R0]
000004DC                         L164:	; bb51.split
                                 ;     252   res = _spiffs_wr(fs, SPIFFS_OP_C_WRTHRU | SPIFFS_OP_T_OBJ_LU2, 0,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",252
000004DC 9B0C                    		MOV.W 1AH[R0], R4
000004DE A989                    		MOV.L 1CH[R0], R1
000004E0 6080                    		SUB #08H, R0
000004E2 71021A                  		ADD #1AH, R0, R2
000004E5 A00A                    		MOV.L R2, 04H[R0]
000004E7 F80602                  		MOV.L #00000002H, [R0]
000004EA 6D04                    		SHLL #10H, R4
000004EC 7344FC0110              		ADD #001001FCH, R4
000004F1 6603                    		MOV.L #00000000H, R3
000004F3 754219                  		MOV.L #00000019H, R2
000004F6 05rrrrrr             A  		BSR _spiffs_phys_wr
000004FA 6280                    		ADD #08H, R0
000004FC A009                    		MOV.L R1, 04H[R0]
000004FE                         L165:	; bb51.split3
                                 ;     253       SPIFFS_MAGIC_PADDR(fs, bix),
                                 ;     254       sizeof(spiffs_obj_id), (u8_t *)&magic);
                                 ;     255   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",255
000004FE A809                    		MOV.L 04H[R0], R1
00000500 69F1                    		SHLR #1FH, R1
00000502 6101                    		CMP #00H, R1
00000504 10                   S  		BEQ L167
00000505                         L166:	; bb63
00000505 E10001                  		MOV.L 04H[R0], [R0]
00000508 2Err                 B  		BRA L171
0000050A                         L167:	; bb71
                                 ;     256 #endif
                                 ;     257 
                                 ;     258   fs->max_erase_count++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",258
0000050A A989                    		MOV.L 1CH[R0], R1
0000050C DD1E21                  		MOV.W 42H[R1], R14
0000050F 621E                    		ADD #01H, R14
00000511 D71E21                  		MOV.W R14, 42H[R1]
00000514                         L168:	; bb71.split
                                 ;     259   if (fs->max_erase_count == SPIFFS_OBJ_ID_IX_FLAG) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",259
00000514 A989                    		MOV.L 1CH[R0], R1
00000516 5D1E21                  		MOVU.W 42H[R1], R14
00000519 770E008000              		CMP #8000H, R14
0000051E 18                   S  		BNE L170
0000051F                         L169:	; bb77
                                 ;     260     fs->max_erase_count = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",260
0000051F A989                    		MOV.L 1CH[R0], R1
00000521 F9152100                		MOV.W #0000H, 42H[R1]
00000525                         L170:	; bb88
                                 ;     261   }
                                 ;     262 
                                 ;     263   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",263
00000525 E10001                  		MOV.L 04H[R0], [R0]
00000528                         L171:	; bb91
00000528 EC01                    		MOV.L [R0], R1
0000052A A109                    		MOV.L R1, 14H[R0]
                                 ;     264 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",264
0000052C 6708                    		RTSD #20H
0000052E                         __$spiffs_obj_lu_scan_v:
                                 		.STACK	__$spiffs_obj_lu_scan_v=28
                                 ;     265 #endif // !SPIFFS_READ_ONLY
                                 ;     266 
                                 ;     267 #if SPIFFS_USE_MAGIC && SPIFFS_USE_MAGIC_LENGTH && SPIFFS_SINGLETON==0
                                 ;     268 s32_t spiffs_probe(
                                 ;     269     spiffs_config *cfg) {
                                 ;     270   s32_t res;
                                 ;     271   u32_t paddr;
                                 ;     272   spiffs dummy_fs; // create a dummy fs struct just to be able to use macros
                                 ;     273   memcpy(&dummy_fs.cfg, cfg, sizeof(spiffs_config));
                                 ;     274   dummy_fs.block_count = 0;
                                 ;     275 
                                 ;     276   // Read three magics, as one block may be in an aborted erase state.
                                 ;     277   // At least two of these must contain magic and be in decreasing order.
                                 ;     278   spiffs_obj_id magic[3];
                                 ;     279   spiffs_obj_id bix_count[3];
                                 ;     280 
                                 ;     281   spiffs_block_ix bix;
                                 ;     282   for (bix = 0; bix < 3; bix++) {
                                 ;     283     paddr = SPIFFS_MAGIC_PADDR(&dummy_fs, bix);
                                 ;     284 #if SPIFFS_HAL_CALLBACK_EXTRA
                                 ;     285     // not any proper fs to report here, so callback with null
                                 ;     286     // (cross fingers that no-one gets angry)
                                 ;     287     res = cfg->hal_read_f((void *)0, paddr, sizeof(spiffs_obj_id), (u8_t *)&magic[bix]);
                                 ;     288 #else
                                 ;     289     res = cfg->hal_read_f(paddr, sizeof(spiffs_obj_id), (u8_t *)&magic[bix]);
                                 ;     290 #endif
                                 ;     291     bix_count[bix] = magic[bix] ^ SPIFFS_MAGIC(&dummy_fs, 0);
                                 ;     292     SPIFFS_CHECK_RES(res);
                                 ;     293   }
                                 ;     294 
                                 ;     295   // check that we have sane number of blocks
                                 ;     296   if (bix_count[0] < 3) return SPIFFS_ERR_PROBE_TOO_FEW_BLOCKS;
                                 ;     297   // check that the order is correct, take aborted erases in calculation
                                 ;     298   // first block aborted erase
                                 ;     299   if (magic[0] == (spiffs_obj_id)(-1) && bix_count[1] - bix_count[2] == 1) {
                                 ;     300     return (bix_count[1]+1) * cfg->log_block_size;
                                 ;     301   }
                                 ;     302   // second block aborted erase
                                 ;     303   if (magic[1] == (spiffs_obj_id)(-1) && bix_count[0] - bix_count[2] == 2) {
                                 ;     304     return bix_count[0] * cfg->log_block_size;
                                 ;     305   }
                                 ;     306   // third block aborted erase
                                 ;     307   if (magic[2] == (spiffs_obj_id)(-1) && bix_count[0] - bix_count[1] == 1) {
                                 ;     308     return bix_count[0] * cfg->log_block_size;
                                 ;     309   }
                                 ;     310   // no block has aborted erase
                                 ;     311   if (bix_count[0] - bix_count[1] == 1 && bix_count[1] - bix_count[2] == 1) {
                                 ;     312     return bix_count[0] * cfg->log_block_size;
                                 ;     313   }
                                 ;     314 
                                 ;     315   return SPIFFS_ERR_PROBE_NOT_A_FS;
                                 ;     316 }
                                 ;     317 #endif // SPIFFS_USE_MAGIC && SPIFFS_USE_MAGIC_LENGTH && SPIFFS_SINGLETON==0
                                 ;     318 
                                 ;     319 
                                 ;     320 static s32_t spiffs_obj_lu_scan_v(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",320
0000052E 7100E8                  		ADD #0FFFFFFE8H, R0
00000531 A109                    		MOV.L R1, 14H[R0]
00000533 920A                    		MOV.W R2, 12H[R0]
00000535 9203                    		MOV.W R3, 10H[R0]
00000537 A08C                    		MOV.L R4, 0CH[R0]
00000539 E5000702                		MOV.L 1CH[R0], 08H[R0]
0000053D E5000801                		MOV.L 20H[R0], 04H[R0]
00000541                         L173:	; entry.split2
                                 ;     321     spiffs *fs,
                                 ;     322     spiffs_obj_id obj_id,
                                 ;     323     spiffs_block_ix bix,
                                 ;     324     int ix_entry,
                                 ;     325     const void *user_const_p,
                                 ;     326     void *user_var_p) {
                                 ;     327   (void)bix;
                                 ;     328   (void)user_const_p;
                                 ;     329   (void)user_var_p;
                                 ;     330   if (obj_id == SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",330
00000541 BA09                    		MOVU.W 12H[R0], R1
00000543 7701FFFF00              		CMP #0FFFFH, R1
00000548 21rr                    		BNE L176
0000054A                         L174:	; bb11
                                 ;     331     if (ix_entry == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",331
0000054A A889                    		MOV.L 0CH[R0], R1
0000054C 6101                    		CMP #00H, R1
0000054E 21rr                    		BNE L179
00000550                         L175:	; bb12
                                 ;     332       fs->free_blocks++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",332
00000550 A909                    		MOV.L 14H[R0], R1
00000552 AB1A                    		MOV.L 34H[R1], R2
00000554 6212                    		ADD #01H, R2
00000556 A31A                    		MOV.L R2, 34H[R1]
00000558 2Err                 B  		BRA L179
0000055A                         L176:	; bb22
                                 ;     333       // todo optimize further, return SPIFFS_NEXT_BLOCK
                                 ;     334     }
                                 ;     335   } else if (obj_id == SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",335
0000055A BA09                    		MOVU.W 12H[R0], R1
0000055C 6101                    		CMP #00H, R1
0000055E A909                    		MOV.L 14H[R0], R1
00000560 18                   S  		BNE L178
00000561                         L177:	; bb23
                                 ;     336     fs->stats_p_deleted++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",336
00000561 AB9A                    		MOV.L 3CH[R1], R2
00000563 6212                    		ADD #01H, R2
00000565 A39A                    		MOV.L R2, 3CH[R1]
00000567 08                   S  		BRA L179
00000568                         L178:	; bb28
                                 ;     337   } else {
                                 ;     338     fs->stats_p_allocated++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",338
00000568 AB92                    		MOV.L 38H[R1], R2
0000056A 6212                    		ADD #01H, R2
0000056C A392                    		MOV.L R2, 38H[R1]
0000056E                         L179:	; bb44
                                 ;     339   }
                                 ;     340 
                                 ;     341   return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",341
0000056E F80AAAD8                		MOV.L #0FFFFD8AAH, [R0]
00000572 FB1AAAD8                		MOV.L #0FFFFD8AAH, R1
00000576                         L180:	; bb44.split
                                 ;     342 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",342
00000576 6706                    		RTSD #18H
00000578                         _spiffs_obj_lu_scan:
                                 		.STACK	_spiffs_obj_lu_scan=68
                                 ;     343 
                                 ;     344 
                                 ;     345 // Scans thru all obj lu and counts free, deleted and used pages
                                 ;     346 // Find the maximum block erase count
                                 ;     347 // Checks magic if enabled
                                 ;     348 s32_t spiffs_obj_lu_scan(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",348
00000578 7100D8                  		ADD #0FFFFFFD8H, R0
0000057B A209                    		MOV.L R1, 24H[R0]
                                 ;     349     spiffs *fs) {
                                 ;     350   s32_t res;
                                 ;     351   spiffs_block_ix bix;
                                 ;     352   int entry;
                                 ;     353 #if SPIFFS_USE_MAGIC
                                 ;     354   spiffs_block_ix unerased_bix = (spiffs_block_ix)-1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",354
0000057D F9090AFFFF              		MOV.W #0FFFFH, 14H[R0]
00000582                         L182:	; entry.split
                                 ;     355 #endif
                                 ;     356 
                                 ;     357   // find out erase count
                                 ;     358   // if enabled, check magic
                                 ;     359   bix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",359
00000582 3D0700                  		MOV.W #0000H, 0EH[R0]
00000585                         L183:	; entry.split1
                                 ;     360   spiffs_obj_id erase_count_final;
                                 ;     361   spiffs_obj_id erase_count_min = SPIFFS_OBJ_ID_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",361
00000585 F9090CFFFF              		MOV.W #0FFFFH, 18H[R0]
0000058A                         L184:	; entry.split2
                                 ;     362   spiffs_obj_id erase_count_max = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",362
0000058A 3D0D00                  		MOV.W #0000H, 1AH[R0]
0000058D 38rrrr               W  		BRA L204
00000590                         L185:	; bb
                                 ;     363   while (bix < fs->block_count) {
                                 ;     364 #if SPIFFS_USE_MAGIC
                                 ;     365     spiffs_obj_id magic;
                                 ;     366     res = _spiffs_rd(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",366
00000590 998C                    		MOV.W 0EH[R0], R4
00000592 AA09                    		MOV.L 24H[R0], R1
00000594 6080                    		SUB #08H, R0
00000596 710224                  		ADD #24H, R0, R2
00000599 A00A                    		MOV.L R2, 04H[R0]
0000059B F80602                  		MOV.L #00000002H, [R0]
0000059E 6D04                    		SHLL #10H, R4
000005A0 7344FC0110              		ADD #001001FCH, R4
000005A5 6603                    		MOV.L #00000000H, R3
000005A7 754215                  		MOV.L #00000015H, R2
000005AA 05rrrrrr             A  		BSR _spiffs_phys_rd
000005AE 6280                    		ADD #08H, R0
000005B0 A081                    		MOV.L R1, 08H[R0]
000005B2                         L186:	; bb.split
                                 ;     367         SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 ;     368         0, SPIFFS_MAGIC_PADDR(fs, bix) ,
                                 ;     369         sizeof(spiffs_obj_id), (u8_t *)&magic);
                                 ;     370 
                                 ;     371     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",371
000005B2 A881                    		MOV.L 08H[R0], R1
000005B4 69F1                    		SHLR #1FH, R1
000005B6 6101                    		CMP #00H, R1
000005B8 10                   S  		BEQ L188
000005B9                         L187:	; bb23
000005B9 E5000201                		MOV.L 08H[R0], 04H[R0]
000005BD 38rrrr               W  		BRA L226
000005C0                         L188:	; bb31.split
                                 ;     372     if (magic != SPIFFS_MAGIC(fs, bix)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",372
000005C0 BB81                    		MOVU.W 1CH[R0], R1
000005C2 76012904                		CMP #0429H, R1
000005C6 20rr                    		BEQ L192
000005C8                         L189:	; bb33
                                 ;     373       if (unerased_bix == (spiffs_block_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",373
000005C8 BA81                    		MOVU.W 14H[R0], R1
000005CA 7701FFFF00              		CMP #0FFFFH, R1
000005CF 18                   S  		BNE L191
000005D0                         L190:	; bb34
                                 ;     374         // allow one unerased block as it might be powered down during an erase
                                 ;     375         unerased_bix = bix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",375
000005D0 D500070A                		MOV.W 0EH[R0], 14H[R0]
000005D4 08                   S  		BRA L192
000005D5                         L191:	; bb39
                                 ;     376       } else {
                                 ;     377         // more than one unerased block, bail out
                                 ;     378         SPIFFS_CHECK_RES(SPIFFS_ERR_NOT_A_FS);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",378
000005D5 F90A01D7D8              		MOV.L #0FFFFD8D7H, 04H[R0]
000005DA 38rrrr               W  		BRA L226
000005DD                         L192:	; bb54
                                 ;     379       }
                                 ;     380     }
                                 ;     381 #endif
                                 ;     382     spiffs_obj_id erase_count;
                                 ;     383     res = _spiffs_rd(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",383
000005DD 998C                    		MOV.W 0EH[R0], R4
000005DF AA09                    		MOV.L 24H[R0], R1
000005E1 6080                    		SUB #08H, R0
000005E3 710226                  		ADD #26H, R0, R2
000005E6 A00A                    		MOV.L R2, 04H[R0]
000005E8 F80602                  		MOV.L #00000002H, [R0]
000005EB 6D04                    		SHLL #10H, R4
000005ED 7344FE0110              		ADD #001001FEH, R4
000005F2 6603                    		MOV.L #00000000H, R3
000005F4 754215                  		MOV.L #00000015H, R2
000005F7 05rrrrrr             A  		BSR _spiffs_phys_rd
000005FB 6280                    		ADD #08H, R0
000005FD A081                    		MOV.L R1, 08H[R0]
000005FF                         L193:	; bb54.split
                                 ;     384         SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 ;     385         0, SPIFFS_ERASE_COUNT_PADDR(fs, bix) ,
                                 ;     386         sizeof(spiffs_obj_id), (u8_t *)&erase_count);
                                 ;     387     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",387
000005FF A881                    		MOV.L 08H[R0], R1
00000601 69F1                    		SHLR #1FH, R1
00000603 6101                    		CMP #00H, R1
00000605 10                   S  		BEQ L195
00000606                         L194:	; bb66
00000606 E5000201                		MOV.L 08H[R0], 04H[R0]
0000060A 38rrrr               W  		BRA L226
0000060D                         L195:	; bb75.split
                                 ;     388     if (erase_count != SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",388
0000060D BB89                    		MOVU.W 1EH[R0], R1
0000060F 7701FFFF00              		CMP #0FFFFH, R1
00000614 20rr                    		BEQ L203
00000616                         L196:	; bb76
                                 ;     389       erase_count_min = MIN(erase_count_min, erase_count);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",389
00000616 BB01                    		MOVU.W 18H[R0], R1
00000618 06C5010F                		CMP 1EH[R0].UW, R1
0000061C 28rr                    		BGE L198
0000061E                         L197:	; bb83
0000061E BB01                    		MOVU.W 18H[R0], R1
00000620 E301                    		MOV.L R1, [R0]
00000622 08                   S  		BRA L199
00000623                         L198:	; bb86
00000623 BB89                    		MOVU.W 1EH[R0], R1
00000625 E301                    		MOV.L R1, [R0]
00000627                         L199:	; bb89
00000627 EC01                    		MOV.L [R0], R1
00000629 9301                    		MOV.W R1, 18H[R0]
                                 ;     390       erase_count_max = MAX(erase_count_max, erase_count);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",390
0000062B BB09                    		MOVU.W 1AH[R0], R1
0000062D 06C5010F                		CMP 1EH[R0].UW, R1
00000631 2Brr                    		BLE L201
00000633                         L200:	; bb99
00000633 BB09                    		MOVU.W 1AH[R0], R1
00000635 E301                    		MOV.L R1, [R0]
00000637 08                   S  		BRA L202
00000638                         L201:	; bb102
00000638 BB89                    		MOVU.W 1EH[R0], R1
0000063A E301                    		MOV.L R1, [R0]
0000063C                         L202:	; bb105
0000063C EC01                    		MOV.L [R0], R1
0000063E 9309                    		MOV.W R1, 1AH[R0]
00000640                         L203:	; bb114
                                 ;     391     }
                                 ;     392     bix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",392
00000640 9989                    		MOV.W 0EH[R0], R1
00000642 6211                    		ADD #01H, R1
00000644 9189                    		MOV.W R1, 0EH[R0]
00000646                         L204:	; bb117
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",363
00000646 AA09                    		MOV.L 24H[R0], R1
00000648 B98A                    		MOVU.W 0EH[R0], R2
0000064A 06851203                		CMP 0CH[R1].L, R2
0000064E 22rr                  * 		BLTU L185
         38rrrr                  
00000653                         L205:	; bb127
                                 ;     393   }
                                 ;     394 
                                 ;     395   if (erase_count_min == 0 && erase_count_max == SPIFFS_OBJ_ID_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",395
00000653 BB01                    		MOVU.W 18H[R0], R1
00000655 6101                    		CMP #00H, R1
00000657 20rr                    		BEQ L210
00000659 2Err                 B  		BRA L212
0000065B                         L206:	; bb128
                                 ;     396     // clean system, set counter to zero
                                 ;     397     erase_count_final = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",397
0000065B 3D0B00                  		MOV.W #0000H, 16H[R0]
0000065E 2Err                 B  		BRA L214
00000660                         L207:	; bb130
                                 ;     398   } else if (erase_count_max - erase_count_min > (SPIFFS_OBJ_ID_FREE)/2) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",398
00000660 BB09                    		MOVU.W 1AH[R0], R1
00000662 06C1010C                		SUB 18H[R0].UW, R1
00000666 7701008000              		CMP #8000H, R1
0000066B 29rr                    		BLT L209
0000066D                         L208:	; bb131
                                 ;     399     // wrap, take min
                                 ;     400     erase_count_final = erase_count_min+1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",400
0000066D BB01                    		MOVU.W 18H[R0], R1
0000066F 6211                    		ADD #01H, R1
00000671 9289                    		MOV.W R1, 16H[R0]
00000673 2Err                 B  		BRA L214
00000675                         L209:	; bb136
                                 ;     401   } else {
                                 ;     402     erase_count_final = erase_count_max+1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",402
00000675 BB09                    		MOVU.W 1AH[R0], R1
00000677 6211                    		ADD #01H, R1
00000679 9289                    		MOV.W R1, 16H[R0]
0000067B 2Err                 B  		BRA L214
0000067D                         L210:	; bb154
0000067D BB09                    		MOVU.W 1AH[R0], R1
0000067F 7701FFFF00              		CMP #0FFFFH, R1
00000684 18                   S  		BNE L212
00000685                         L211:	; bb159
00000685 F80601                  		MOV.L #00000001H, [R0]
00000688 08                   S  		BRA L213
00000689                         L212:	; bb160
00000689 F80600                  		MOV.L #00000000H, [R0]
0000068C                         L213:	; bb161
0000068C EC01                    		MOV.L [R0], R1
0000068E 6101                    		CMP #00H, R1
00000690 21rr                    		BNE L206
00000692 2Err                 B  		BRA L207
00000694                         L214:	; bb166
                                 ;     403   }
                                 ;     404 
                                 ;     405   fs->max_erase_count = erase_count_final;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",405
00000694 9A89                    		MOV.W 16H[R0], R1
00000696 AA0A                    		MOV.L 24H[R0], R2
00000698 D72121                  		MOV.W R1, 42H[R2]
0000069B                         L215:	; bb166.split
                                 ;     406 
                                 ;     407 #if SPIFFS_USE_MAGIC
                                 ;     408   if (unerased_bix != (spiffs_block_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",408
0000069B BA81                    		MOVU.W 14H[R0], R1
0000069D 7701FFFF00              		CMP #0FFFFH, R1
000006A2 20rr                    		BEQ L219
000006A4                         L216:	; bb171
                                 ;     409     // found one unerased block, remedy
                                 ;     410     SPIFFS_DBG("mount: erase block %i\n", bix);
                                 ;     411 #if SPIFFS_READ_ONLY
                                 ;     412     res = SPIFFS_ERR_RO_ABORTED_OPERATION;
                                 ;     413 #else
                                 ;     414     res = spiffs_erase_block(fs, unerased_bix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",414
000006A4 BA82                    		MOVU.W 14H[R0], R2
000006A6 AA09                    		MOV.L 24H[R0], R1
000006A8 39rrrr               W  		BSR _spiffs_erase_block
000006AB A081                    		MOV.L R1, 08H[R0]
000006AD                         L217:	; bb171.split
                                 ;     415 #endif // SPIFFS_READ_ONLY
                                 ;     416     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",416
000006AD A881                    		MOV.L 08H[R0], R1
000006AF 69F1                    		SHLR #1FH, R1
000006B1 6101                    		CMP #00H, R1
000006B3 10                   S  		BEQ L219
000006B4                         L218:	; bb177
000006B4 E5000201                		MOV.L 08H[R0], 04H[R0]
000006B8 2Err                 B  		BRA L226
000006BA                         L219:	; bb191
                                 ;     417   }
                                 ;     418 #endif
                                 ;     419 
                                 ;     420   // count blocks
                                 ;     421 
                                 ;     422   fs->free_blocks = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",422
000006BA AA09                    		MOV.L 24H[R0], R1
000006BC 3E1D00                  		MOV.L #00000000H, 34H[R1]
000006BF                         L220:	; bb191.split
                                 ;     423   fs->stats_p_allocated = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",423
000006BF AA09                    		MOV.L 24H[R0], R1
000006C1 3E1E00                  		MOV.L #00000000H, 38H[R1]
000006C4                         L221:	; bb191.split3
                                 ;     424   fs->stats_p_deleted = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",424
000006C4 AA09                    		MOV.L 24H[R0], R1
000006C6 3E1F00                  		MOV.L #00000000H, 3CH[R1]
000006C9                         L222:	; bb191.split4
                                 ;     425 
                                 ;     426   res = spiffs_obj_lu_find_entry_visitor(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",426
000006C9 AA09                    		MOV.L 24H[R0], R1
000006CB 7100E8                  		ADD #0FFFFFFE8H, R0
000006CE 710228                  		ADD #28H, R0, R2
000006D1 A10A                    		MOV.L R2, 14H[R0]
000006D3 710226                  		ADD #26H, R0, R2
000006D6 A102                    		MOV.L R2, 10H[R0]
000006D8 6602                    		MOV.L #00000000H, R2
000006DA A08A                    		MOV.L R2, 0CH[R0]
000006DC A082                    		MOV.L R2, 08H[R0]
000006DE FB32rrrrrrrr            		MOV.L #__$spiffs_obj_lu_scan_v, R3
000006E4 A00B                    		MOV.L R3, 04H[R0]
000006E6 D302                    		MOV.W R2, [R0]
000006E8 EF23                    		MOV.L R2, R3
000006EA EF24                    		MOV.L R2, R4
000006EC 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
000006EF 710018                  		ADD #18H, R0
000006F2 A081                    		MOV.L R1, 08H[R0]
000006F4                         L223:	; bb191.split5
                                 ;     427       0,
                                 ;     428       0,
                                 ;     429       0,
                                 ;     430       0,
                                 ;     431       spiffs_obj_lu_scan_v,
                                 ;     432       0,
                                 ;     433       0,
                                 ;     434       &bix,
                                 ;     435       &entry);
                                 ;     436 
                                 ;     437   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",437
000006F4 A881                    		MOV.L 08H[R0], R1
000006F6 7601A8D8                		CMP #0FFFFD8A8H, R1
000006FA 18                   S  		BNE L225
000006FB                         L224:	; bb201
                                 ;     438     res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",438
000006FB 3E0200                  		MOV.L #00000000H, 08H[R0]
000006FE                         L225:	; bb208
                                 ;     439   }
                                 ;     440 
                                 ;     441   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",441
000006FE E5000201                		MOV.L 08H[R0], 04H[R0]
00000702                         L226:	; bb220
00000702 A809                    		MOV.L 04H[R0], R1
00000704 A201                    		MOV.L R1, 20H[R0]
                                 ;     442 
                                 ;     443   return res;
                                 ;     444 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",444
00000706 670A                    		RTSD #28H
00000708                         _spiffs_obj_lu_find_free:
                                 		.STACK	_spiffs_obj_lu_find_free=48
                                 ;     445 
                                 ;     446 #if !SPIFFS_READ_ONLY
                                 ;     447 // Find free object lookup entry
                                 ;     448 // Iterate over object lookup pages in each block until a free object id entry is found
                                 ;     449 s32_t spiffs_obj_lu_find_free(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",449
00000708 7100DC                  		ADD #0FFFFFFDCH, R0
0000070B A201                    		MOV.L R1, 20H[R0]
0000070D 938A                    		MOV.W R2, 1EH[R0]
0000070F A183                    		MOV.L R3, 18H[R0]
00000711 A10C                    		MOV.L R4, 14H[R0]
00000713 E5000A04                		MOV.L 28H[R0], 10H[R0]
                                 ;     450     spiffs *fs,
                                 ;     451     spiffs_block_ix starting_block,
                                 ;     452     int starting_lu_entry,
                                 ;     453     spiffs_block_ix *block_ix,
                                 ;     454     int *lu_entry) {
                                 ;     455   s32_t res;
                                 ;     456   if (!fs->cleaning && fs->free_blocks < 2) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",456
00000717 AA01                    		MOV.L 20H[R0], R1
00000719 591E40                  		MOVU.B 40H[R1], R14
0000071C 610E                    		CMP #00H, R14
0000071E 21rr                    		BNE L235
00000720 2Err                 B  		BRA L236
00000722                         L228:	; bb7
                                 ;     457     res = spiffs_gc_quick(fs, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",457
00000722 AA01                    		MOV.L 20H[R0], R1
00000724 6602                    		MOV.L #00000000H, R2
00000726 05rrrrrr             A  		BSR _spiffs_gc_quick
0000072A A081                    		MOV.L R1, 08H[R0]
0000072C                         L229:	; bb7.split
                                 ;     458     if (res == SPIFFS_ERR_NO_DELETED_BLOCKS) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",458
0000072C A881                    		MOV.L 08H[R0], R1
0000072E 7601D3D8                		CMP #0FFFFD8D3H, R1
00000732 18                   S  		BNE L231
00000733                         L230:	; bb11
                                 ;     459       res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",459
00000733 3E0200                  		MOV.L #00000000H, 08H[R0]
00000736                         L231:	; bb17
                                 ;     460     }
                                 ;     461     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",461
00000736 A881                    		MOV.L 08H[R0], R1
00000738 69F1                    		SHLR #1FH, R1
0000073A 6101                    		CMP #00H, R1
0000073C 10                   S  		BEQ L233
0000073D                         L232:	; bb18
0000073D E5000201                		MOV.L 08H[R0], 04H[R0]
00000741 2Err                 B  		BRA L249
00000743                         L233:	; bb27.split
                                 ;     462     if (fs->free_blocks < 2) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",462
00000743 AA01                    		MOV.L 20H[R0], R1
00000745 AB19                    		MOV.L 34H[R1], R1
00000747 6111                    		CMP #01H, R1
00000749 24rr                    		BGTU L242
0000074B                         L234:	; bb28
                                 ;     463       return SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",463
0000074B F90A01EFD8              		MOV.L #0FFFFD8EFH, 04H[R0]
00000750 2Err                 B  		BRA L249
00000752                         L235:	; bb43
00000752 F80600                  		MOV.L #00000000H, [R0]
00000755 08                   S  		BRA L237
00000756                         L236:	; bb44
00000756 F80601                  		MOV.L #00000001H, [R0]
00000759                         L237:	; bb45
00000759 EC01                    		MOV.L [R0], R1
0000075B 6101                    		CMP #00H, R1
0000075D 20rr                    		BEQ L240
0000075F                         L238:	; bb48
0000075F AA01                    		MOV.L 20H[R0], R1
00000761 AB19                    		MOV.L 34H[R1], R1
00000763 6111                    		CMP #01H, R1
00000765 24rr                    		BGTU L240
00000767                         L239:	; bb54
00000767 F80601                  		MOV.L #00000001H, [R0]
0000076A 08                   S  		BRA L241
0000076B                         L240:	; bb55
0000076B F80600                  		MOV.L #00000000H, [R0]
0000076E                         L241:	; bb56
0000076E EC01                    		MOV.L [R0], R1
00000770 6101                    		CMP #00H, R1
00000772 21rr                    		BNE L228
00000774                         L242:	; bb61
                                 ;     464     }
                                 ;     465   }
                                 ;     466   res = spiffs_obj_lu_find_id(fs, starting_block, starting_lu_entry,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",466
00000774 A904                    		MOV.L 10H[R0], R4
00000776 A90D                    		MOV.L 14H[R0], R5
00000778 A983                    		MOV.L 18H[R0], R3
0000077A BB8A                    		MOVU.W 1EH[R0], R2
0000077C AA01                    		MOV.L 20H[R0], R1
0000077E 6080                    		SUB #08H, R0
00000780 A00C                    		MOV.L R4, 04H[R0]
00000782 E305                    		MOV.L R5, [R0]
00000784 FB4EFFFF00              		MOV.L #0000FFFFH, R4
00000789 39rrrr               W  		BSR _spiffs_obj_lu_find_id
0000078C 6280                    		ADD #08H, R0
0000078E A081                    		MOV.L R1, 08H[R0]
00000790                         L243:	; bb61.split
                                 ;     467       SPIFFS_OBJ_ID_FREE, block_ix, lu_entry);
                                 ;     468   if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",468
00000790 A881                    		MOV.L 08H[R0], R1
00000792 6101                    		CMP #00H, R1
00000794 21rr                    		BNE L248
00000796                         L244:	; bb69
                                 ;     469     fs->free_cursor_block_ix = *block_ix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",469
00000796 A909                    		MOV.L 14H[R0], R1
00000798 AA02                    		MOV.L 20H[R0], R2
0000079A D41208                  		MOV.W [R1], 10H[R2]
0000079D                         L245:	; bb69.split
                                 ;     470     fs->free_cursor_obj_lu_entry = (*lu_entry) + 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",470
0000079D A901                    		MOV.L 10H[R0], R1
0000079F EC11                    		MOV.L [R1], R1
000007A1 6211                    		ADD #01H, R1
000007A3 AA02                    		MOV.L 20H[R0], R2
000007A5 A129                    		MOV.L R1, 14H[R2]
000007A7                         L246:	; bb69.split1
                                 ;     471     if (*lu_entry == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",471
000007A7 A901                    		MOV.L 10H[R0], R1
000007A9 EC1E                    		MOV.L [R1], R14
000007AB 610E                    		CMP #00H, R14
000007AD 18                   S  		BNE L248
000007AE                         L247:	; bb80
                                 ;     472       fs->free_blocks--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",472
000007AE AA01                    		MOV.L 20H[R0], R1
000007B0 AB1A                    		MOV.L 34H[R1], R2
000007B2 6012                    		SUB #01H, R2
000007B4 A31A                    		MOV.L R2, 34H[R1]
000007B6                         L248:	; bb96.split
                                 ;     473     }
                                 ;     474   }
                                 ;     475   if (res == SPIFFS_ERR_FULL) {
                                 ;     476     SPIFFS_DBG("fs full\n");
                                 ;     477   }
                                 ;     478 
                                 ;     479   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",479
000007B6 E5000201                		MOV.L 08H[R0], 04H[R0]
000007BA                         L249:	; bb105
000007BA A809                    		MOV.L 04H[R0], R1
000007BC A089                    		MOV.L R1, 0CH[R0]
                                 ;     480 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",480
000007BE 6709                    		RTSD #24H
000007C0                         _spiffs_obj_lu_find_id:
                                 		.STACK	_spiffs_obj_lu_find_id=60
                                 ;     481 #endif // !SPIFFS_READ_ONLY
                                 ;     482 
                                 ;     483 // Find object lookup entry containing given id
                                 ;     484 // Iterate over object lookup pages in each block until a given object id entry is found
                                 ;     485 s32_t spiffs_obj_lu_find_id(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",485
000007C0 7100E0                  		ADD #0FFFFFFE0H, R0
000007C3 A189                    		MOV.L R1, 1CH[R0]
000007C5 930A                    		MOV.W R2, 1AH[R0]
000007C7 A10B                    		MOV.L R3, 14H[R0]
000007C9 920C                    		MOV.W R4, 12H[R0]
000007CB E5000903                		MOV.L 24H[R0], 0CH[R0]
000007CF AA84                    		MOV.L 28H[R0], R4
000007D1 A084                    		MOV.L R4, 08H[R0]
                                 ;     486     spiffs *fs,
                                 ;     487     spiffs_block_ix starting_block,
                                 ;     488     int starting_lu_entry,
                                 ;     489     spiffs_obj_id obj_id,
                                 ;     490     spiffs_block_ix *block_ix,
                                 ;     491     int *lu_entry) {
                                 ;     492   s32_t res = spiffs_obj_lu_find_entry_visitor(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",492
000007D3 A88D                    		MOV.L 0CH[R0], R5
000007D5 DD0F09                  		MOV.W 12H[R0], R15
000007D8 A90B                    		MOV.L 14H[R0], R3
000007DA BB0A                    		MOVU.W 1AH[R0], R2
000007DC A989                    		MOV.L 1CH[R0], R1
000007DE 7100E8                  		ADD #0FFFFFFE8H, R0
000007E1 A10C                    		MOV.L R4, 14H[R0]
000007E3 A105                    		MOV.L R5, 10H[R0]
000007E5 6604                    		MOV.L #00000000H, R4
000007E7 A08C                    		MOV.L R4, 0CH[R0]
000007E9 A084                    		MOV.L R4, 08H[R0]
000007EB A00C                    		MOV.L R4, 04H[R0]
000007ED D30F                    		MOV.W R15, [R0]
000007EF 6614                    		MOV.L #00000001H, R4
000007F1 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
000007F4 710018                  		ADD #18H, R0
000007F7 E301                    		MOV.L R1, [R0]
000007F9                         L251:	; entry.split
                                 ;     493       fs, starting_block, starting_lu_entry, SPIFFS_VIS_CHECK_ID, obj_id, 0, 0, 0, block_ix, lu_entry);
                                 ;     494   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",494
000007F9 EC01                    		MOV.L [R0], R1
000007FB 7601A8D8                		CMP #0FFFFD8A8H, R1
000007FF 18                   S  		BNE L253
00000800                         L252:	; bb15
                                 ;     495     res = SPIFFS_ERR_NOT_FOUND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",495
00000800 F80AEED8                		MOV.L #0FFFFD8EEH, [R0]
00000804                         L253:	; bb19
                                 ;     496   }
                                 ;     497   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",497
00000804 EC01                    		MOV.L [R0], R1
00000806 A009                    		MOV.L R1, 04H[R0]
00000808                         L254:	; bb19.split
                                 ;     498 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",498
00000808 6708                    		RTSD #20H
0000080A                         __$spiffs_obj_lu_find_id_and_span_v:
                                 		.STACK	__$spiffs_obj_lu_find_id_and_span_v=56
                                 ;     499 
                                 ;     500 
                                 ;     501 static s32_t spiffs_obj_lu_find_id_and_span_v(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",501
0000080A 7100D4                  		ADD #0FFFFFFD4H, R0
0000080D A281                    		MOV.L R1, 28H[R0]
0000080F 948A                    		MOV.W R2, 26H[R0]
00000811 9483                    		MOV.W R3, 24H[R0]
00000813 A204                    		MOV.L R4, 20H[R0]
00000815 E5000C07                		MOV.L 30H[R0], 1CH[R0]
00000819 E5000D06                		MOV.L 34H[R0], 18H[R0]
                                 ;     502     spiffs *fs,
                                 ;     503     spiffs_obj_id obj_id,
                                 ;     504     spiffs_block_ix bix,
                                 ;     505     int ix_entry,
                                 ;     506     const void *user_const_p,
                                 ;     507     void *user_var_p) {
                                 ;     508   s32_t res;
                                 ;     509   spiffs_page_header ph;
                                 ;     510   spiffs_page_ix pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, ix_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",510
0000081D BC81                    		MOVU.W 24H[R0], R1
0000081F 6C81                    		SHLL #08H, R1
00000821 06890108                		ADD 20H[R0].L, R1
00000825 6221                    		ADD #02H, R1
00000827 9209                    		MOV.W R1, 12H[R0]
00000829                         L256:	; entry.split
                                 ;     511   res = _spiffs_rd(fs, 0, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",511
00000829 BA0C                    		MOVU.W 12H[R0], R4
0000082B AA81                    		MOV.L 28H[R0], R1
0000082D 6080                    		SUB #08H, R0
0000082F 710214                  		ADD #14H, R0, R2
00000832 A00A                    		MOV.L R2, 04H[R0]
00000834 F80606                  		MOV.L #00000006H, [R0]
00000837 6C84                    		SHLL #08H, R4
00000839 7344000010              		ADD #00100000H, R4
0000083E 754315                  		MOV.L #00000015H, R3
00000841 6602                    		MOV.L #00000000H, R2
00000843 05rrrrrr             A  		BSR _spiffs_phys_rd
00000847 6280                    		ADD #08H, R0
00000849 A081                    		MOV.L R1, 08H[R0]
0000084B                         L257:	; entry.split1
                                 ;     512       SPIFFS_PAGE_TO_PADDR(fs, pix), sizeof(spiffs_page_header), (u8_t *)&ph);
                                 ;     513   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",513
0000084B A881                    		MOV.L 08H[R0], R1
0000084D 69F1                    		SHLR #1FH, R1
0000084F 6101                    		CMP #00H, R1
00000851 10                   S  		BEQ L259
00000852                         L258:	; bb25
00000852 E5000201                		MOV.L 08H[R0], 04H[R0]
00000856 38rrrr               W  		BRA L293
00000859                         L259:	; bb33
                                 ;     514   if (ph.obj_id == obj_id &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",514
00000859 B981                    		MOVU.W 0CH[R0], R1
0000085B 06C50113                		CMP 26H[R0].UW, R1
0000085F 20rr                    		BEQ L262
00000861 2Err                 B  		BRA L264
00000863                         L260:	; bb34
                                 ;     515       ph.span_ix == *((spiffs_span_ix*)user_var_p) &&
                                 ;     516       (ph.flags & (SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_USED)) == SPIFFS_PH_FLAG_DELET &&
                                 ;     517       !((obj_id & SPIFFS_OBJ_ID_IX_FLAG) && (ph.flags & SPIFFS_PH_FLAG_IXDELE) == 0 && ph.span_ix == 0) &&
                                 ;     518       (user_const_p == 0 || *((const spiffs_page_ix*)user_const_p) != pix)) {
                                 ;     519     return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",519
00000863 3E0100                  		MOV.L #00000000H, 04H[R0]
00000866 38rrrr               W  		BRA L293
00000869                         L261:	; bb36
                                 ;     520   } else {
                                 ;     521     return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",521
00000869 F90A01AAD8              		MOV.L #0FFFFD8AAH, 04H[R0]
0000086E 38rrrr               W  		BRA L293
00000871                         L262:	; bb45
00000871 A981                    		MOV.L 18H[R0], R1
00000873 B98A                    		MOVU.W 0EH[R0], R2
00000875 06C412                  		CMP [R1].UW, R2
00000878 18                   S  		BNE L264
00000879                         L263:	; bb55
00000879 F80601                  		MOV.L #00000001H, [R0]
0000087C 08                   S  		BRA L265
0000087D                         L264:	; bb56
0000087D F80600                  		MOV.L #00000000H, [R0]
00000880                         L265:	; bb57
00000880 EC01                    		MOV.L [R0], R1
00000882 6101                    		CMP #00H, R1
00000884 20rr                    		BEQ L268
00000886                         L266:	; bb61
00000886 754E83                  		MOV.L #00000083H, R14
00000889 510E10                  		AND 10H[R0].UB, R14
0000088C 755E80                  		CMP #80H, R14
0000088F 18                   S  		BNE L268
00000890                         L267:	; bb68
00000890 F80601                  		MOV.L #00000001H, [R0]
00000893 08                   S  		BRA L269
00000894                         L268:	; bb69
00000894 F80600                  		MOV.L #00000000H, [R0]
00000897                         L269:	; bb70
00000897 EC01                    		MOV.L [R0], R1
00000899 6101                    		CMP #00H, R1
0000089B 20rr                    		BEQ L283
0000089D                         L270:	; bb74
0000089D BC89                    		MOVU.W 26H[R0], R1
0000089F 7CF1                    		BTST #0FH, R1
000008A1 10                   S  		BEQ L273
000008A2                         L271:	; bb80
000008A2 F50610                  		BTST #06H, 10H[R0].B
000008A5 18                   S  		BNE L273
000008A6                         L272:	; bb87
000008A6 F80601                  		MOV.L #00000001H, [R0]
000008A9 08                   S  		BRA L274
000008AA                         L273:	; bb88
000008AA F80600                  		MOV.L #00000000H, [R0]
000008AD                         L274:	; bb89
000008AD EC01                    		MOV.L [R0], R1
000008AF 6101                    		CMP #00H, R1
000008B1 10                   S  		BEQ L277
000008B2                         L275:	; bb93
000008B2 B989                    		MOVU.W 0EH[R0], R1
000008B4 6101                    		CMP #00H, R1
000008B6 18                   S  		BNE L277
000008B7                         L276:	; bb99
000008B7 F80601                  		MOV.L #00000001H, [R0]
000008BA 08                   S  		BRA L278
000008BB                         L277:	; bb100
000008BB F80600                  		MOV.L #00000000H, [R0]
000008BE                         L278:	; bb101
000008BE EC01                    		MOV.L [R0], R1
000008C0 6101                    		CMP #00H, R1
000008C2 10                   S  		BEQ L280
000008C3                         L279:	; bb105
000008C3 F80600                  		MOV.L #00000000H, [R0]
000008C6 08                   S  		BRA L281
000008C7                         L280:	; bb106
000008C7 F80601                  		MOV.L #00000001H, [R0]
000008CA                         L281:	; bb107
000008CA EC01                    		MOV.L [R0], R1
000008CC 6101                    		CMP #00H, R1
000008CE 10                   S  		BEQ L283
000008CF                         L282:	; bb110
000008CF F80601                  		MOV.L #00000001H, [R0]
000008D2 08                   S  		BRA L284
000008D3                         L283:	; bb111
000008D3 F80600                  		MOV.L #00000000H, [R0]
000008D6                         L284:	; bb112
000008D6 EC01                    		MOV.L [R0], R1
000008D8 6101                    		CMP #00H, R1
000008DA 20rr                    		BEQ L291
000008DC                         L285:	; bb116
000008DC A989                    		MOV.L 1CH[R0], R1
000008DE 6101                    		CMP #00H, R1
000008E0 10                   S  		BEQ L287
000008E1                         L286:	; bb120
000008E1 A989                    		MOV.L 1CH[R0], R1
000008E3 5C1E                    		MOVU.W [R1], R14
000008E5 06C50E09                		CMP 12H[R0].UW, R14
000008E9 10                   S  		BEQ L288
000008EA                         L287:	; bb129
000008EA F80601                  		MOV.L #00000001H, [R0]
000008ED 08                   S  		BRA L289
000008EE                         L288:	; bb130
000008EE F80600                  		MOV.L #00000000H, [R0]
000008F1                         L289:	; bb131
000008F1 EC01                    		MOV.L [R0], R1
000008F3 6101                    		CMP #00H, R1
000008F5 10                   S  		BEQ L291
000008F6                         L290:	; bb135
000008F6 F80601                  		MOV.L #00000001H, [R0]
000008F9 08                   S  		BRA L292
000008FA                         L291:	; bb136
000008FA F80600                  		MOV.L #00000000H, [R0]
000008FD                         L292:	; bb137
000008FD EC01                    		MOV.L [R0], R1
000008FF 6101                    		CMP #00H, R1
00000901 3Brrrr               W  		BNE L260
00000904 38rrrr               W  		BRA L261
00000907                         L293:	; bb143
00000907 A809                    		MOV.L 04H[R0], R1
00000909 A109                    		MOV.L R1, 14H[R0]
                                 ;     522   }
                                 ;     523 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",523
0000090B 670B                    		RTSD #2CH
0000090D                         _spiffs_obj_lu_find_id_and_span:
                                 		.STACK	_spiffs_obj_lu_find_id_and_span=68
                                 ;     524 
                                 ;     525 // Find object lookup entry containing given id and span index
                                 ;     526 // Iterate over object lookup pages in each block until a given object id entry is found
                                 ;     527 s32_t spiffs_obj_lu_find_id_and_span(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",527
0000090D 7100D8                  		ADD #0FFFFFFD8H, R0
00000910 A209                    		MOV.L R1, 24H[R0]
00000912 940A                    		MOV.W R2, 22H[R0]
00000914 9403                    		MOV.W R3, 20H[R0]
00000916 938C                    		MOV.W R4, 1EH[R0]
00000918 E5000B06                		MOV.L 2CH[R0], 18H[R0]
                                 ;     528     spiffs *fs,
                                 ;     529     spiffs_obj_id obj_id,
                                 ;     530     spiffs_span_ix spix,
                                 ;     531     spiffs_page_ix exclusion_pix,
                                 ;     532     spiffs_page_ix *pix) {
                                 ;     533   s32_t res;
                                 ;     534   spiffs_block_ix bix;
                                 ;     535   int entry;
                                 ;     536 
                                 ;     537   res = spiffs_obj_lu_find_entry_visitor(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",537
0000091C BB89                    		MOVU.W 1EH[R0], R1
0000091E 6101                    		CMP #00H, R1
00000920 AA09                    		MOV.L 24H[R0], R1
00000922 A99B                    		MOV.L 1CH[R1], R3
00000924 9B12                    		MOV.W 18H[R1], R2
00000926 9C0C                    		MOV.W 22H[R0], R4
00000928 10                   S  		BEQ L296
00000929                         L295:	; bb
00000929 71051E                  		ADD #1EH, R0, R5
0000092C E305                    		MOV.L R5, [R0]
0000092E 08                   S  		BRA L297
0000092F                         L296:	; bb22
0000092F F80600                  		MOV.L #00000000H, [R0]
00000932                         L297:	; bb23
00000932 EC05                    		MOV.L [R0], R5
00000934 7100E8                  		ADD #0FFFFFFE8H, R0
00000937 710F28                  		ADD #28H, R0, R15
0000093A E70F05                  		MOV.L R15, 14H[R0]
0000093D 710F26                  		ADD #26H, R0, R15
00000940 E70F04                  		MOV.L R15, 10H[R0]
00000943 710F38                  		ADD #38H, R0, R15
00000946 E70F03                  		MOV.L R15, 0CH[R0]
00000949 A085                    		MOV.L R5, 08H[R0]
0000094B FB52rrrrrrrr            		MOV.L #__$spiffs_obj_lu_find_id_and_span_v, R5
00000951 A00D                    		MOV.L R5, 04H[R0]
00000953 D304                    		MOV.W R4, [R0]
00000955 5F22                    		MOVU.W R2, R2
00000957 6614                    		MOV.L #00000001H, R4
00000959 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
0000095C 710018                  		ADD #18H, R0
0000095F A081                    		MOV.L R1, 08H[R0]
                                 ;     538       fs->cursor_block_ix,
                                 ;     539       fs->cursor_obj_lu_entry,
                                 ;     540       SPIFFS_VIS_CHECK_ID,
                                 ;     541       obj_id,
                                 ;     542       spiffs_obj_lu_find_id_and_span_v,
                                 ;     543       exclusion_pix ? &exclusion_pix : 0,
                                 ;     544       &spix,
                                 ;     545       &bix,
                                 ;     546       &entry);
                                 ;     547 
                                 ;     548   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",548
00000961 7601A8D8                		CMP #0FFFFD8A8H, R1
00000965 18                   S  		BNE L299
00000966                         L298:	; bb29
                                 ;     549     res = SPIFFS_ERR_NOT_FOUND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",549
00000966 F90A02EED8              		MOV.L #0FFFFD8EEH, 08H[R0]
0000096B                         L299:	; bb36
                                 ;     550   }
                                 ;     551 
                                 ;     552   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",552
0000096B A881                    		MOV.L 08H[R0], R1
0000096D 69F1                    		SHLR #1FH, R1
0000096F 6101                    		CMP #00H, R1
00000971 10                   S  		BEQ L301
00000972                         L300:	; bb37
00000972 E5000201                		MOV.L 08H[R0], 04H[R0]
00000976 2Err                 B  		BRA L306
00000978                         L301:	; bb46
                                 ;     553 
                                 ;     554   if (pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",554
00000978 A981                    		MOV.L 18H[R0], R1
0000097A 6101                    		CMP #00H, R1
0000097C 20rr                    		BEQ L303
0000097E                         L302:	; bb47
                                 ;     555     *pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",555
0000097E B989                    		MOVU.W 0EH[R0], R1
00000980 6C81                    		SHLL #08H, R1
00000982 06890104                		ADD 10H[R0].L, R1
00000986 6221                    		ADD #02H, R1
00000988 A982                    		MOV.L 18H[R0], R2
0000098A D321                    		MOV.W R1, [R2]
0000098C                         L303:	; bb60
                                 ;     556   }
                                 ;     557 
                                 ;     558   fs->cursor_block_ix = bix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",558
0000098C 9989                    		MOV.W 0EH[R0], R1
0000098E AA0A                    		MOV.L 24H[R0], R2
00000990 9321                    		MOV.W R1, 18H[R2]
00000992                         L304:	; bb60.split
                                 ;     559   fs->cursor_obj_lu_entry = entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",559
00000992 A901                    		MOV.L 10H[R0], R1
00000994 AA0A                    		MOV.L 24H[R0], R2
00000996 A1A9                    		MOV.L R1, 1CH[R2]
00000998                         L305:	; bb60.split1
                                 ;     560 
                                 ;     561   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",561
00000998 E5000201                		MOV.L 08H[R0], 04H[R0]
0000099C                         L306:	; bb69
0000099C A809                    		MOV.L 04H[R0], R1
0000099E A109                    		MOV.L R1, 14H[R0]
                                 ;     562 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",562
000009A0 670A                    		RTSD #28H
000009A2                         _spiffs_obj_lu_find_id_and_span_by_phdr:
                                 		.STACK	_spiffs_obj_lu_find_id_and_span_by_phdr=68
                                 ;     563 
                                 ;     564 // Find object lookup entry containing given id and span index in page headers only
                                 ;     565 // Iterate over object lookup pages in each block until a given object id entry is found
                                 ;     566 s32_t spiffs_obj_lu_find_id_and_span_by_phdr(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",566
000009A2 7100D8                  		ADD #0FFFFFFD8H, R0
000009A5 A209                    		MOV.L R1, 24H[R0]
000009A7 940A                    		MOV.W R2, 22H[R0]
000009A9 9403                    		MOV.W R3, 20H[R0]
000009AB 938C                    		MOV.W R4, 1EH[R0]
000009AD E5000B06                		MOV.L 2CH[R0], 18H[R0]
                                 ;     567     spiffs *fs,
                                 ;     568     spiffs_obj_id obj_id,
                                 ;     569     spiffs_span_ix spix,
                                 ;     570     spiffs_page_ix exclusion_pix,
                                 ;     571     spiffs_page_ix *pix) {
                                 ;     572   s32_t res;
                                 ;     573   spiffs_block_ix bix;
                                 ;     574   int entry;
                                 ;     575 
                                 ;     576   res = spiffs_obj_lu_find_entry_visitor(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",576
000009B1 BB89                    		MOVU.W 1EH[R0], R1
000009B3 6101                    		CMP #00H, R1
000009B5 AA09                    		MOV.L 24H[R0], R1
000009B7 A99B                    		MOV.L 1CH[R1], R3
000009B9 9B12                    		MOV.W 18H[R1], R2
000009BB 9C0C                    		MOV.W 22H[R0], R4
000009BD 10                   S  		BEQ L309
000009BE                         L308:	; bb
000009BE 71051E                  		ADD #1EH, R0, R5
000009C1 E305                    		MOV.L R5, [R0]
000009C3 08                   S  		BRA L310
000009C4                         L309:	; bb22
000009C4 F80600                  		MOV.L #00000000H, [R0]
000009C7                         L310:	; bb23
000009C7 EC05                    		MOV.L [R0], R5
000009C9 7100E8                  		ADD #0FFFFFFE8H, R0
000009CC 710F28                  		ADD #28H, R0, R15
000009CF E70F05                  		MOV.L R15, 14H[R0]
000009D2 710F26                  		ADD #26H, R0, R15
000009D5 E70F04                  		MOV.L R15, 10H[R0]
000009D8 710F38                  		ADD #38H, R0, R15
000009DB E70F03                  		MOV.L R15, 0CH[R0]
000009DE A085                    		MOV.L R5, 08H[R0]
000009E0 FB52rrrrrrrr            		MOV.L #__$spiffs_obj_lu_find_id_and_span_v, R5
000009E6 A00D                    		MOV.L R5, 04H[R0]
000009E8 D304                    		MOV.W R4, [R0]
000009EA 5F22                    		MOVU.W R2, R2
000009EC 6624                    		MOV.L #00000002H, R4
000009EE 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
000009F1 710018                  		ADD #18H, R0
000009F4 A081                    		MOV.L R1, 08H[R0]
                                 ;     577       fs->cursor_block_ix,
                                 ;     578       fs->cursor_obj_lu_entry,
                                 ;     579       SPIFFS_VIS_CHECK_PH,
                                 ;     580       obj_id,
                                 ;     581       spiffs_obj_lu_find_id_and_span_v,
                                 ;     582       exclusion_pix ? &exclusion_pix : 0,
                                 ;     583       &spix,
                                 ;     584       &bix,
                                 ;     585       &entry);
                                 ;     586 
                                 ;     587   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",587
000009F6 7601A8D8                		CMP #0FFFFD8A8H, R1
000009FA 18                   S  		BNE L312
000009FB                         L311:	; bb29
                                 ;     588     res = SPIFFS_ERR_NOT_FOUND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",588
000009FB F90A02EED8              		MOV.L #0FFFFD8EEH, 08H[R0]
00000A00                         L312:	; bb36
                                 ;     589   }
                                 ;     590 
                                 ;     591   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",591
00000A00 A881                    		MOV.L 08H[R0], R1
00000A02 69F1                    		SHLR #1FH, R1
00000A04 6101                    		CMP #00H, R1
00000A06 10                   S  		BEQ L314
00000A07                         L313:	; bb37
00000A07 E5000201                		MOV.L 08H[R0], 04H[R0]
00000A0B 2Err                 B  		BRA L319
00000A0D                         L314:	; bb46
                                 ;     592 
                                 ;     593   if (pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",593
00000A0D A981                    		MOV.L 18H[R0], R1
00000A0F 6101                    		CMP #00H, R1
00000A11 20rr                    		BEQ L316
00000A13                         L315:	; bb47
                                 ;     594     *pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",594
00000A13 B989                    		MOVU.W 0EH[R0], R1
00000A15 6C81                    		SHLL #08H, R1
00000A17 06890104                		ADD 10H[R0].L, R1
00000A1B 6221                    		ADD #02H, R1
00000A1D A982                    		MOV.L 18H[R0], R2
00000A1F D321                    		MOV.W R1, [R2]
00000A21                         L316:	; bb60
                                 ;     595   }
                                 ;     596 
                                 ;     597   fs->cursor_block_ix = bix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",597
00000A21 9989                    		MOV.W 0EH[R0], R1
00000A23 AA0A                    		MOV.L 24H[R0], R2
00000A25 9321                    		MOV.W R1, 18H[R2]
00000A27                         L317:	; bb60.split
                                 ;     598   fs->cursor_obj_lu_entry = entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",598
00000A27 A901                    		MOV.L 10H[R0], R1
00000A29 AA0A                    		MOV.L 24H[R0], R2
00000A2B A1A9                    		MOV.L R1, 1CH[R2]
00000A2D                         L318:	; bb60.split1
                                 ;     599 
                                 ;     600   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",600
00000A2D E5000201                		MOV.L 08H[R0], 04H[R0]
00000A31                         L319:	; bb69
00000A31 A809                    		MOV.L 04H[R0], R1
00000A33 A109                    		MOV.L R1, 14H[R0]
                                 ;     601 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",601
00000A35 670A                    		RTSD #28H
00000A37                         _spiffs_page_allocate_data:
                                 		.STACK	_spiffs_page_allocate_data=68
                                 ;     602 
                                 ;     603 #if !SPIFFS_READ_ONLY
                                 ;     604 // Allocates a free defined page with given obj_id
                                 ;     605 // Occupies object lookup entry and page
                                 ;     606 // data may be NULL; where only page header is stored, len and page_offs is ignored
                                 ;     607 s32_t spiffs_page_allocate_data(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",607
00000A37 7100C8                  		ADD #0FFFFFFC8H, R0
00000A3A A309                    		MOV.L R1, 34H[R0]
00000A3C 960A                    		MOV.W R2, 32H[R0]
00000A3E A28B                    		MOV.L R3, 2CH[R0]
00000A40 A284                    		MOV.L R4, 28H[R0]
00000A42 E5000F09                		MOV.L 3CH[R0], 24H[R0]
00000A46 E5001008                		MOV.L 40H[R0], 20H[R0]
00000A4A C500441F                		MOV.B 44H[R0], 1FH[R0]
00000A4E E5001206                		MOV.L 48H[R0], 18H[R0]
                                 ;     608     spiffs *fs,
                                 ;     609     spiffs_obj_id obj_id,
                                 ;     610     spiffs_page_header *ph,
                                 ;     611     u8_t *data,
                                 ;     612     u32_t len,
                                 ;     613     u32_t page_offs,
                                 ;     614     u8_t finalize,
                                 ;     615     spiffs_page_ix *pix) {
                                 ;     616   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",616
00000A52 3E0200                  		MOV.L #00000000H, 08H[R0]
00000A55                         L321:	; entry.split
                                 ;     617   spiffs_block_ix bix;
                                 ;     618   int entry;
                                 ;     619 
                                 ;     620   // find free entry
                                 ;     621   res = spiffs_obj_lu_find_free(fs, fs->free_cursor_block_ix, fs->free_cursor_obj_lu_entry, &bix, &entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",621
00000A55 AB09                    		MOV.L 34H[R0], R1
00000A57 A91B                    		MOV.L 14H[R1], R3
00000A59 BA12                    		MOVU.W 10H[R1], R2
00000A5B 6040                    		SUB #04H, R0
00000A5D 710E14                  		ADD #14H, R0, R14
00000A60 E30E                    		MOV.L R14, [R0]
00000A62 710412                  		ADD #12H, R0, R4
00000A65 39rrrr               W  		BSR _spiffs_obj_lu_find_free
00000A68 6240                    		ADD #04H, R0
00000A6A A081                    		MOV.L R1, 08H[R0]
00000A6C                         L322:	; entry.split1
                                 ;     622   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",622
00000A6C A881                    		MOV.L 08H[R0], R1
00000A6E 69F1                    		SHLR #1FH, R1
00000A70 6101                    		CMP #00H, R1
00000A72 10                   S  		BEQ L324
00000A73                         L323:	; bb22
00000A73 E5000201                		MOV.L 08H[R0], 04H[R0]
00000A77 38rrrr               W  		BRA L348
00000A7A                         L324:	; bb29
                                 ;     623 
                                 ;     624   // occupy page in object lookup
                                 ;     625   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",625
00000A7A A902                    		MOV.L 10H[R0], R2
00000A7C 998C                    		MOV.W 0EH[R0], R4
00000A7E AB09                    		MOV.L 34H[R0], R1
00000A80 6080                    		SUB #08H, R0
00000A82 71033A                  		ADD #3AH, R0, R3
00000A85 A00B                    		MOV.L R3, 04H[R0]
00000A87 F80602                  		MOV.L #00000002H, [R0]
00000A8A 6D04                    		SHLL #10H, R4
00000A8C 6C12                    		SHLL #01H, R2
00000A8E 4B24                    		ADD R2, R4
00000A90 7344000010              		ADD #00100000H, R4
00000A95 6603                    		MOV.L #00000000H, R3
00000A97 6642                    		MOV.L #00000004H, R2
00000A99 05rrrrrr             A  		BSR _spiffs_phys_wr
00000A9D 6280                    		ADD #08H, R0
00000A9F A081                    		MOV.L R1, 08H[R0]
00000AA1                         L325:	; bb29.split
                                 ;     626       0, SPIFFS_BLOCK_TO_PADDR(fs, bix) + entry * sizeof(spiffs_obj_id), sizeof(spiffs_obj_id), (u8_t*)&obj_id);
                                 ;     627   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",627
00000AA1 A881                    		MOV.L 08H[R0], R1
00000AA3 69F1                    		SHLR #1FH, R1
00000AA5 6101                    		CMP #00H, R1
00000AA7 10                   S  		BEQ L327
00000AA8                         L326:	; bb42
00000AA8 E5000201                		MOV.L 08H[R0], 04H[R0]
00000AAC 38rrrr               W  		BRA L348
00000AAF                         L327:	; bb50
                                 ;     628 
                                 ;     629   fs->stats_p_allocated++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",629
00000AAF AB09                    		MOV.L 34H[R0], R1
00000AB1 AB92                    		MOV.L 38H[R1], R2
00000AB3 6212                    		ADD #01H, R2
00000AB5 A392                    		MOV.L R2, 38H[R1]
00000AB7                         L328:	; bb50.split
                                 ;     630 
                                 ;     631   // write page header
                                 ;     632   ph->flags &= ~SPIFFS_PH_FLAG_USED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",632
00000AB7 AA89                    		MOV.L 2CH[R0], R1
00000AB9 F11804                  		BCLR #00H, 04H[R1].B
00000ABC                         L329:	; bb50.split2
                                 ;     633   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",633
00000ABC AA8A                    		MOV.L 2CH[R0], R2
00000ABE A904                    		MOV.L 10H[R0], R4
00000AC0 998B                    		MOV.W 0EH[R0], R3
00000AC2 AB09                    		MOV.L 34H[R0], R1
00000AC4 6080                    		SUB #08H, R0
00000AC6 A00A                    		MOV.L R2, 04H[R0]
00000AC8 F80606                  		MOV.L #00000006H, [R0]
00000ACB 6C84                    		SHLL #08H, R4
00000ACD 6D03                    		SHLL #10H, R3
00000ACF 4B34                    		ADD R3, R4
00000AD1 7344000210              		ADD #00100200H, R4
00000AD6 6603                    		MOV.L #00000000H, R3
00000AD8 6672                    		MOV.L #00000007H, R2
00000ADA 05rrrrrr             A  		BSR _spiffs_phys_wr
00000ADE 6280                    		ADD #08H, R0
00000AE0 A081                    		MOV.L R1, 08H[R0]
00000AE2                         L330:	; bb50.split3
                                 ;     634       0, SPIFFS_OBJ_LOOKUP_ENTRY_TO_PADDR(fs, bix, entry), sizeof(spiffs_page_header), (u8_t*)ph);
                                 ;     635   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",635
00000AE2 A881                    		MOV.L 08H[R0], R1
00000AE4 69F1                    		SHLR #1FH, R1
00000AE6 6101                    		CMP #00H, R1
00000AE8 10                   S  		BEQ L332
00000AE9                         L331:	; bb75
00000AE9 E5000201                		MOV.L 08H[R0], 04H[R0]
00000AED 38rrrr               W  		BRA L348
00000AF0                         L332:	; bb84
                                 ;     636 
                                 ;     637   // write page data
                                 ;     638   if (data) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",638
00000AF0 AA81                    		MOV.L 28H[R0], R1
00000AF2 6101                    		CMP #00H, R1
00000AF4 20rr                    		BEQ L336
00000AF6                         L333:	; bb85
                                 ;     639     res = _spiffs_wr(fs,  SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",639
00000AF6 A904                    		MOV.L 10H[R0], R4
00000AF8 6C84                    		SHLL #08H, R4
00000AFA 9989                    		MOV.W 0EH[R0], R1
00000AFC 6D01                    		SHLL #10H, R1
00000AFE 4B14                    		ADD R1, R4
00000B00 06890408                		ADD 20H[R0].L, R4
00000B04 AA82                    		MOV.L 28H[R0], R2
00000B06 AA0B                    		MOV.L 24H[R0], R3
00000B08 AB09                    		MOV.L 34H[R0], R1
00000B0A 6080                    		SUB #08H, R0
00000B0C A00A                    		MOV.L R2, 04H[R0]
00000B0E E303                    		MOV.L R3, [R0]
00000B10 7344060210              		ADD #00100206H, R4
00000B15 6603                    		MOV.L #00000000H, R3
00000B17 6672                    		MOV.L #00000007H, R2
00000B19 05rrrrrr             A  		BSR _spiffs_phys_wr
00000B1D 6280                    		ADD #08H, R0
00000B1F A081                    		MOV.L R1, 08H[R0]
00000B21                         L334:	; bb85.split
                                 ;     640         0,SPIFFS_OBJ_LOOKUP_ENTRY_TO_PADDR(fs, bix, entry) + sizeof(spiffs_page_header) + page_offs, len, data);
                                 ;     641     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",641
00000B21 A881                    		MOV.L 08H[R0], R1
00000B23 69F1                    		SHLR #1FH, R1
00000B25 6101                    		CMP #00H, R1
00000B27 10                   S  		BEQ L336
00000B28                         L335:	; bb103
00000B28 E5000201                		MOV.L 08H[R0], 04H[R0]
00000B2C 2Err                 B  		BRA L348
00000B2E                         L336:	; bb117
                                 ;     642   }
                                 ;     643 
                                 ;     644   // finalize header if necessary
                                 ;     645   if (finalize && (ph->flags & SPIFFS_PH_FLAG_FINAL)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",645
00000B2E B789                    		MOVU.B 1FH[R0], R1
00000B30 6101                    		CMP #00H, R1
00000B32 21rr                    		BNE L341
00000B34 2Err                 B  		BRA L343
00000B36                         L337:	; bb118
                                 ;     646     ph->flags &= ~SPIFFS_PH_FLAG_FINAL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",646
00000B36 AA89                    		MOV.L 2CH[R0], R1
00000B38 F11904                  		BCLR #01H, 04H[R1].B
00000B3B                         L338:	; bb118.split
                                 ;     647     res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",647
00000B3B AA8A                    		MOV.L 2CH[R0], R2
00000B3D A904                    		MOV.L 10H[R0], R4
00000B3F 998B                    		MOV.W 0EH[R0], R3
00000B41 AB09                    		MOV.L 34H[R0], R1
00000B43 6080                    		SUB #08H, R0
00000B45 6242                    		ADD #04H, R2
00000B47 A00A                    		MOV.L R2, 04H[R0]
00000B49 F80601                  		MOV.L #00000001H, [R0]
00000B4C 6C84                    		SHLL #08H, R4
00000B4E 6D03                    		SHLL #10H, R3
00000B50 4B34                    		ADD R3, R4
00000B52 7344000210              		ADD #00100200H, R4
00000B57 7824                    		BSET #02H, R4
00000B59 6603                    		MOV.L #00000000H, R3
00000B5B 6672                    		MOV.L #00000007H, R2
00000B5D 05rrrrrr             A  		BSR _spiffs_phys_wr
00000B61 6280                    		ADD #08H, R0
00000B63 A081                    		MOV.L R1, 08H[R0]
00000B65                         L339:	; bb118.split4
                                 ;     648         0, SPIFFS_OBJ_LOOKUP_ENTRY_TO_PADDR(fs, bix, entry) + offsetof(spiffs_page_header, flags),
                                 ;     649         sizeof(u8_t),
                                 ;     650         (u8_t *)&ph->flags);
                                 ;     651     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",651
00000B65 A881                    		MOV.L 08H[R0], R1
00000B67 69F1                    		SHLR #1FH, R1
00000B69 6101                    		CMP #00H, R1
00000B6B 20rr                    		BEQ L345
00000B6D                         L340:	; bb140
00000B6D E5000201                		MOV.L 08H[R0], 04H[R0]
00000B71 2Err                 B  		BRA L348
00000B73                         L341:	; bb153
00000B73 AA89                    		MOV.L 2CH[R0], R1
00000B75 F51104                  		BTST #01H, 04H[R1].B
00000B78 10                   S  		BEQ L343
00000B79                         L342:	; bb161
00000B79 F80601                  		MOV.L #00000001H, [R0]
00000B7C 08                   S  		BRA L344
00000B7D                         L343:	; bb162
00000B7D F80600                  		MOV.L #00000000H, [R0]
00000B80                         L344:	; bb163
00000B80 EC01                    		MOV.L [R0], R1
00000B82 6101                    		CMP #00H, R1
00000B84 21rr                    		BNE L337
00000B86                         L345:	; bb169
                                 ;     652   }
                                 ;     653 
                                 ;     654   // return written page
                                 ;     655   if (pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",655
00000B86 A981                    		MOV.L 18H[R0], R1
00000B88 6101                    		CMP #00H, R1
00000B8A 20rr                    		BEQ L347
00000B8C                         L346:	; bb170
                                 ;     656     *pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",656
00000B8C B989                    		MOVU.W 0EH[R0], R1
00000B8E 6C81                    		SHLL #08H, R1
00000B90 06890104                		ADD 10H[R0].L, R1
00000B94 6221                    		ADD #02H, R1
00000B96 A982                    		MOV.L 18H[R0], R2
00000B98 D321                    		MOV.W R1, [R2]
00000B9A                         L347:	; bb183
                                 ;     657   }
                                 ;     658 
                                 ;     659   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",659
00000B9A E5000201                		MOV.L 08H[R0], 04H[R0]
00000B9E                         L348:	; bb186
00000B9E A809                    		MOV.L 04H[R0], R1
00000BA0 A109                    		MOV.L R1, 14H[R0]
                                 ;     660 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",660
00000BA2 670E                    		RTSD #38H
00000BA4                         _spiffs_page_move:
                                 		.STACK	_spiffs_page_move=76
                                 ;     661 #endif // !SPIFFS_READ_ONLY
                                 ;     662 
                                 ;     663 #if !SPIFFS_READ_ONLY
                                 ;     664 // Moves a page from src to a free page and finalizes it. Updates page index. Page data is given in param page.
                                 ;     665 // If page data is null, provided header is used for metainfo and page data is physically copied.
                                 ;     666 s32_t spiffs_page_move(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",666
00000BA4 7100C0                  		ADD #0FFFFFFC0H, R0
00000BA7 A389                    		MOV.L R1, 3CH[R0]
00000BA9 970A                    		MOV.W R2, 3AH[R0]
00000BAB A30B                    		MOV.L R3, 34H[R0]
00000BAD 960C                    		MOV.W R4, 32H[R0]
00000BAF E500110B                		MOV.L 44H[R0], 2CH[R0]
00000BB3 D5002415                		MOV.W 48H[R0], 2AH[R0]
00000BB7 E5001309                		MOV.L 4CH[R0], 24H[R0]
                                 ;     667     spiffs *fs,
                                 ;     668     spiffs_file fh,
                                 ;     669     u8_t *page_data,
                                 ;     670     spiffs_obj_id obj_id,
                                 ;     671     spiffs_page_header *page_hdr,
                                 ;     672     spiffs_page_ix src_pix,
                                 ;     673     spiffs_page_ix *dst_pix) {
                                 ;     674   s32_t res;
                                 ;     675   u8_t was_final = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",675
00000BBB 3C0F00                  		MOV.B #00H, 0FH[R0]
00000BBE                         L350:	; entry.split
                                 ;     676   spiffs_page_header *p_hdr;
                                 ;     677   spiffs_block_ix bix;
                                 ;     678   int entry;
                                 ;     679   spiffs_page_ix free_pix;
                                 ;     680 
                                 ;     681   // find free entry
                                 ;     682   res = spiffs_obj_lu_find_free(fs, fs->free_cursor_block_ix, fs->free_cursor_obj_lu_entry, &bix, &entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",682
00000BBE AB89                    		MOV.L 3CH[R0], R1
00000BC0 A91B                    		MOV.L 14H[R1], R3
00000BC2 BA12                    		MOVU.W 10H[R1], R2
00000BC4 6040                    		SUB #04H, R0
00000BC6 710E1C                  		ADD #1CH, R0, R14
00000BC9 E30E                    		MOV.L R14, [R0]
00000BCB 71041A                  		ADD #1AH, R0, R4
00000BCE 39rrrr               W  		BSR _spiffs_obj_lu_find_free
00000BD1 6240                    		ADD #04H, R0
00000BD3 A081                    		MOV.L R1, 08H[R0]
00000BD5                         L351:	; entry.split1
                                 ;     683   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",683
00000BD5 A881                    		MOV.L 08H[R0], R1
00000BD7 69F1                    		SHLR #1FH, R1
00000BD9 6101                    		CMP #00H, R1
00000BDB 10                   S  		BEQ L353
00000BDC                         L352:	; bb24
00000BDC E5000201                		MOV.L 08H[R0], 04H[R0]
00000BE0 38rrrr               W  		BRA L378
00000BE3                         L353:	; bb31
                                 ;     684   free_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",684
00000BE3 BA89                    		MOVU.W 16H[R0], R1
00000BE5 6C81                    		SHLL #08H, R1
00000BE7 06890106                		ADD 18H[R0].L, R1
00000BEB 6221                    		ADD #02H, R1
00000BED 9389                    		MOV.W R1, 1EH[R0]
00000BEF                         L354:	; bb31.split
                                 ;     685 
                                 ;     686   if (dst_pix) *dst_pix = free_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",686
00000BEF AA09                    		MOV.L 24H[R0], R1
00000BF1 6101                    		CMP #00H, R1
00000BF3 10                   S  		BEQ L356
00000BF4                         L355:	; bb40
00000BF4 9B89                    		MOV.W 1EH[R0], R1
00000BF6 AA0A                    		MOV.L 24H[R0], R2
00000BF8 D321                    		MOV.W R1, [R2]
00000BFA                         L356:	; bb47
                                 ;     687 
                                 ;     688   p_hdr = page_data ? (spiffs_page_header *)page_data : page_hdr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",688
00000BFA AB09                    		MOV.L 34H[R0], R1
00000BFC 6101                    		CMP #00H, R1
00000BFE 10                   S  		BEQ L358
00000BFF                         L357:	; bb51
00000BFF E1000D                  		MOV.L 34H[R0], [R0]
00000C02 08                   S  		BRA L359
00000C03                         L358:	; bb54
00000C03 E1000B                  		MOV.L 2CH[R0], [R0]
00000C06                         L359:	; bb56
00000C06 E40004                  		MOV.L [R0], 10H[R0]
                                 ;     689   if (page_data) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",689
00000C09 AB09                    		MOV.L 34H[R0], R1
00000C0B 6101                    		CMP #00H, R1
00000C0D 20rr                    		BEQ L364
00000C0F                         L360:	; bb60
                                 ;     690     // got page data
                                 ;     691     was_final = (p_hdr->flags & SPIFFS_PH_FLAG_FINAL) == 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",691
00000C0F A901                    		MOV.L 10H[R0], R1
00000C11 F51104                  		BTST #01H, 04H[R1].B
00000C14 FCD1000F                		SCEQ.B 0FH[R0]
00000C18                         L361:	; bb60.split
                                 ;     692     // write unfinalized page
                                 ;     693     p_hdr->flags |= SPIFFS_PH_FLAG_FINAL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",693
00000C18 A901                    		MOV.L 10H[R0], R1
00000C1A F11104                  		BSET #01H, 04H[R1].B
00000C1D                         L362:	; bb60.split2
                                 ;     694     p_hdr->flags &= ~SPIFFS_PH_FLAG_USED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",694
00000C1D A901                    		MOV.L 10H[R0], R1
00000C1F F11804                  		BCLR #00H, 04H[R1].B
00000C22                         L363:	; bb60.split3
                                 ;     695     res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",695
00000C22 AB0A                    		MOV.L 34H[R0], R2
00000C24 BB8C                    		MOVU.W 1EH[R0], R4
00000C26 AB89                    		MOV.L 3CH[R0], R1
00000C28 6080                    		SUB #08H, R0
00000C2A A00A                    		MOV.L R2, 04H[R0]
00000C2C F80A0001                		MOV.L #00000100H, [R0]
00000C30 6C84                    		SHLL #08H, R4
00000C32 7344000010              		ADD #00100000H, R4
00000C37 6603                    		MOV.L #00000000H, R3
00000C39 6672                    		MOV.L #00000007H, R2
00000C3B 05rrrrrr             A  		BSR _spiffs_phys_wr
00000C3F 6280                    		ADD #08H, R0
00000C41 A081                    		MOV.L R1, 08H[R0]
00000C43 2Err                 B  		BRA L365
00000C45                         L364:	; bb88
                                 ;     696         0, SPIFFS_PAGE_TO_PADDR(fs, free_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), page_data);
                                 ;     697   } else {
                                 ;     698     // copy page data
                                 ;     699     res = spiffs_phys_cpy(fs, fh, SPIFFS_PAGE_TO_PADDR(fs, free_pix), SPIFFS_PAGE_TO_PADDR(fs, src_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",699
00000C45 BD0C                    		MOVU.W 2AH[R0], R4
00000C47 BB8B                    		MOVU.W 1EH[R0], R3
00000C49 9F0A                    		MOV.W 3AH[R0], R2
00000C4B AB89                    		MOV.L 3CH[R0], R1
00000C4D 6040                    		SUB #04H, R0
00000C4F F80A0001                		MOV.L #00000100H, [R0]
00000C53 6C84                    		SHLL #08H, R4
00000C55 7344000010              		ADD #00100000H, R4
00000C5A 6C83                    		SHLL #08H, R3
00000C5C 7333000010              		ADD #00100000H, R3
00000C61 39rrrr               W  		BSR _spiffs_phys_cpy
00000C64 6240                    		ADD #04H, R0
00000C66 A081                    		MOV.L R1, 08H[R0]
00000C68                         L365:	; bb106
                                 ;     700   }
                                 ;     701   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",701
00000C68 A881                    		MOV.L 08H[R0], R1
00000C6A 69F1                    		SHLR #1FH, R1
00000C6C 6101                    		CMP #00H, R1
00000C6E 10                   S  		BEQ L367
00000C6F                         L366:	; bb107
00000C6F E5000201                		MOV.L 08H[R0], 04H[R0]
00000C73 38rrrr               W  		BRA L378
00000C76                         L367:	; bb115
                                 ;     702 
                                 ;     703   // mark entry in destination object lookup
                                 ;     704   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",704
00000C76 BB8A                    		MOVU.W 1EH[R0], R2
00000C78 AB89                    		MOV.L 3CH[R0], R1
00000C7A 6080                    		SUB #08H, R0
00000C7C 71033A                  		ADD #3AH, R0, R3
00000C7F A00B                    		MOV.L R3, 04H[R0]
00000C81 F80602                  		MOV.L #00000002H, [R0]
00000C84 5B24                    		MOVU.B R2, R4
00000C86 6C14                    		SHLL #01H, R4
00000C88 772200FF00              		AND #0FF00H, R2
00000C8D 6C82                    		SHLL #08H, R2
00000C8F 5724                    		OR R2, R4
00000C91 7344FCFF0F              		ADD #000FFFFCH, R4
00000C96 6603                    		MOV.L #00000000H, R3
00000C98 6642                    		MOV.L #00000004H, R2
00000C9A 05rrrrrr             A  		BSR _spiffs_phys_wr
00000C9E 6280                    		ADD #08H, R0
00000CA0 A081                    		MOV.L R1, 08H[R0]
00000CA2                         L368:	; bb115.split
                                 ;     705       0, SPIFFS_BLOCK_TO_PADDR(fs, SPIFFS_BLOCK_FOR_PAGE(fs, free_pix)) + SPIFFS_OBJ_LOOKUP_ENTRY_FOR_PAGE(fs, free_pix) * sizeof(spiffs_page_ix),
                                 ;     706       sizeof(spiffs_obj_id),
                                 ;     707       (u8_t *)&obj_id);
                                 ;     708   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",708
00000CA2 A881                    		MOV.L 08H[R0], R1
00000CA4 69F1                    		SHLR #1FH, R1
00000CA6 6101                    		CMP #00H, R1
00000CA8 10                   S  		BEQ L370
00000CA9                         L369:	; bb132
00000CA9 E5000201                		MOV.L 08H[R0], 04H[R0]
00000CAD 2Err                 B  		BRA L378
00000CAF                         L370:	; bb140
                                 ;     709 
                                 ;     710   fs->stats_p_allocated++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",710
00000CAF AB89                    		MOV.L 3CH[R0], R1
00000CB1 AB92                    		MOV.L 38H[R1], R2
00000CB3 6212                    		ADD #01H, R2
00000CB5 A392                    		MOV.L R2, 38H[R1]
00000CB7                         L371:	; bb140.split
                                 ;     711 
                                 ;     712   if (was_final) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",712
00000CB7 B389                    		MOVU.B 0FH[R0], R1
00000CB9 6101                    		CMP #00H, R1
00000CBB 20rr                    		BEQ L376
00000CBD                         L372:	; bb146
                                 ;     713     // mark finalized in destination page
                                 ;     714     p_hdr->flags &= ~(SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_USED);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",714
00000CBD A901                    		MOV.L 10H[R0], R1
00000CBF 7542FC                  		MOV.L #000000FCH, R2
00000CC2 511204                  		AND 04H[R1].UB, R2
00000CC5 8112                    		MOV.B R2, 04H[R1]
00000CC7                         L373:	; bb146.split
                                 ;     715     res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",715
00000CC7 A902                    		MOV.L 10H[R0], R2
00000CC9 BB8C                    		MOVU.W 1EH[R0], R4
00000CCB 9F0B                    		MOV.W 3AH[R0], R3
00000CCD AB89                    		MOV.L 3CH[R0], R1
00000CCF 6080                    		SUB #08H, R0
00000CD1 6242                    		ADD #04H, R2
00000CD3 A00A                    		MOV.L R2, 04H[R0]
00000CD5 F80601                  		MOV.L #00000001H, [R0]
00000CD8 6C84                    		SHLL #08H, R4
00000CDA 7344040010              		ADD #00100004H, R4
00000CDF 6672                    		MOV.L #00000007H, R2
00000CE1 05rrrrrr             A  		BSR _spiffs_phys_wr
00000CE5 6280                    		ADD #08H, R0
00000CE7 A081                    		MOV.L R1, 08H[R0]
00000CE9                         L374:	; bb146.split4
                                 ;     716         fh,
                                 ;     717         SPIFFS_PAGE_TO_PADDR(fs, free_pix) + offsetof(spiffs_page_header, flags),
                                 ;     718         sizeof(u8_t),
                                 ;     719         (u8_t *)&p_hdr->flags);
                                 ;     720     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",720
00000CE9 A881                    		MOV.L 08H[R0], R1
00000CEB 69F1                    		SHLR #1FH, R1
00000CED 6101                    		CMP #00H, R1
00000CEF 10                   S  		BEQ L376
00000CF0                         L375:	; bb165
00000CF0 E5000201                		MOV.L 08H[R0], 04H[R0]
00000CF4 2Err                 B  		BRA L378
00000CF6                         L376:	; bb179
                                 ;     721   }
                                 ;     722   // mark source deleted
                                 ;     723   res = spiffs_page_delete(fs, src_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",723
00000CF6 BD0A                    		MOVU.W 2AH[R0], R2
00000CF8 AB89                    		MOV.L 3CH[R0], R1
00000CFA 39rrrr               W  		BSR _spiffs_page_delete
00000CFD A081                    		MOV.L R1, 08H[R0]
00000CFF                         L377:	; bb179.split
                                 ;     724   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",724
00000CFF E5000201                		MOV.L 08H[R0], 04H[R0]
00000D03                         L378:	; bb185
00000D03 A809                    		MOV.L 04H[R0], R1
00000D05 A201                    		MOV.L R1, 20H[R0]
                                 ;     725 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",725
00000D07 6710                    		RTSD #40H
00000D09                         _spiffs_page_delete:
                                 		.STACK	_spiffs_page_delete=40
                                 ;     726 #endif // !SPIFFS_READ_ONLY
                                 ;     727 
                                 ;     728 #if !SPIFFS_READ_ONLY
                                 ;     729 // Deletes a page and removes it from object lookup.
                                 ;     730 s32_t spiffs_page_delete(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",730
00000D09 7100E4                  		ADD #0FFFFFFE4H, R0
00000D0C A181                    		MOV.L R1, 18H[R0]
00000D0E 928A                    		MOV.W R2, 16H[R0]
                                 ;     731     spiffs *fs,
                                 ;     732     spiffs_page_ix pix) {
                                 ;     733   s32_t res;
                                 ;     734   spiffs_page_header hdr;
                                 ;     735   hdr.flags = 0xff & ~(SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_USED);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",735
00000D10 3C0C7E                  		MOV.B #7EH, 0CH[R0]
00000D13                         L380:	; entry.split
                                 ;     736   // mark deleted entry in source object lookup
                                 ;     737   spiffs_obj_id d_obj_id = SPIFFS_OBJ_ID_DELETED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",737
00000D13 3D0700                  		MOV.W #0000H, 0EH[R0]
00000D16                         L381:	; entry.split1
                                 ;     738   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_DELE,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",738
00000D16 BA8A                    		MOVU.W 16H[R0], R2
00000D18 A981                    		MOV.L 18H[R0], R1
00000D1A 6080                    		SUB #08H, R0
00000D1C 710316                  		ADD #16H, R0, R3
00000D1F A00B                    		MOV.L R3, 04H[R0]
00000D21 F80602                  		MOV.L #00000002H, [R0]
00000D24 5B24                    		MOVU.B R2, R4
00000D26 6C14                    		SHLL #01H, R4
00000D28 772200FF00              		AND #0FF00H, R2
00000D2D 6C82                    		SHLL #08H, R2
00000D2F 5724                    		OR R2, R4
00000D31 7344FCFF0F              		ADD #000FFFFCH, R4
00000D36 6602                    		MOV.L #00000000H, R2
00000D38 EF23                    		MOV.L R2, R3
00000D3A 05rrrrrr             A  		BSR _spiffs_phys_wr
00000D3E 6280                    		ADD #08H, R0
00000D40 A009                    		MOV.L R1, 04H[R0]
00000D42                         L382:	; entry.split2
                                 ;     739       0,
                                 ;     740       SPIFFS_BLOCK_TO_PADDR(fs, SPIFFS_BLOCK_FOR_PAGE(fs, pix)) + SPIFFS_OBJ_LOOKUP_ENTRY_FOR_PAGE(fs, pix) * sizeof(spiffs_page_ix),
                                 ;     741       sizeof(spiffs_obj_id),
                                 ;     742       (u8_t *)&d_obj_id);
                                 ;     743   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",743
00000D42 A809                    		MOV.L 04H[R0], R1
00000D44 69F1                    		SHLR #1FH, R1
00000D46 6101                    		CMP #00H, R1
00000D48 10                   S  		BEQ L384
00000D49                         L383:	; bb22
00000D49 E10001                  		MOV.L 04H[R0], [R0]
00000D4C 2Err                 B  		BRA L388
00000D4E                         L384:	; bb29
                                 ;     744 
                                 ;     745   fs->stats_p_deleted++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",745
00000D4E A981                    		MOV.L 18H[R0], R1
00000D50 AB9A                    		MOV.L 3CH[R1], R2
00000D52 6212                    		ADD #01H, R2
00000D54 A39A                    		MOV.L R2, 3CH[R1]
00000D56                         L385:	; bb29.split
                                 ;     746   fs->stats_p_allocated--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",746
00000D56 A981                    		MOV.L 18H[R0], R1
00000D58 AB92                    		MOV.L 38H[R1], R2
00000D5A 6012                    		SUB #01H, R2
00000D5C A392                    		MOV.L R2, 38H[R1]
00000D5E                         L386:	; bb29.split3
                                 ;     747 
                                 ;     748   // mark deleted in source page
                                 ;     749   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_DELE,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",749
00000D5E BA8C                    		MOVU.W 16H[R0], R4
00000D60 A981                    		MOV.L 18H[R0], R1
00000D62 6080                    		SUB #08H, R0
00000D64 710214                  		ADD #14H, R0, R2
00000D67 A00A                    		MOV.L R2, 04H[R0]
00000D69 F80601                  		MOV.L #00000001H, [R0]
00000D6C 6C84                    		SHLL #08H, R4
00000D6E 7344040010              		ADD #00100004H, R4
00000D73 6603                    		MOV.L #00000000H, R3
00000D75 6632                    		MOV.L #00000003H, R2
00000D77 05rrrrrr             A  		BSR _spiffs_phys_wr
00000D7B 6280                    		ADD #08H, R0
00000D7D A009                    		MOV.L R1, 04H[R0]
00000D7F                         L387:	; bb29.split4
                                 ;     750       0,
                                 ;     751       SPIFFS_PAGE_TO_PADDR(fs, pix) + offsetof(spiffs_page_header, flags),
                                 ;     752       sizeof(u8_t),
                                 ;     753       (u8_t *)&hdr.flags);
                                 ;     754 
                                 ;     755   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",755
00000D7F E10001                  		MOV.L 04H[R0], [R0]
00000D82                         L388:	; bb48
00000D82 EC01                    		MOV.L [R0], R1
00000D84 A101                    		MOV.L R1, 10H[R0]
                                 ;     756 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",756
00000D86 6707                    		RTSD #1CH
00000D88                         _spiffs_object_create:
                                 		.STACK	_spiffs_object_create=100
                                 ;     757 #endif // !SPIFFS_READ_ONLY
                                 ;     758 
                                 ;     759 #if !SPIFFS_READ_ONLY
                                 ;     760 // Create an object index header page with empty index and undefined length
                                 ;     761 s32_t spiffs_object_create(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",761
00000D88 7100A8                  		ADD #0FFFFFFA8H, R0
00000D8B A509                    		MOV.L R1, 54H[R0]
00000D8D D70229                  		MOV.W R2, 52H[R0]
00000D90 A48B                    		MOV.L R3, 4CH[R0]
00000D92 C7044B                  		MOV.B R4, 4BH[R0]
00000D95 E5001711                		MOV.L 5CH[R0], 44H[R0]
                                 ;     762     spiffs *fs,
                                 ;     763     spiffs_obj_id obj_id,
                                 ;     764     const u8_t name[SPIFFS_OBJ_NAME_LEN],
                                 ;     765     spiffs_obj_type type,
                                 ;     766     spiffs_page_ix *objix_hdr_pix) {
                                 ;     767   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",767
00000D99 3E0100                  		MOV.L #00000000H, 04H[R0]
00000D9C                         L390:	; entry.split
                                 ;     768   spiffs_block_ix bix;
                                 ;     769   spiffs_page_object_ix_header oix_hdr;
                                 ;     770   int entry;
                                 ;     771 
                                 ;     772   res = spiffs_gc_check(fs, SPIFFS_DATA_PAGE_SIZE(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",772
00000D9C AD09                    		MOV.L 54H[R0], R1
00000D9E 7542FA                  		MOV.L #000000FAH, R2
00000DA1 05rrrrrr             A  		BSR _spiffs_gc_check
00000DA5 A009                    		MOV.L R1, 04H[R0]
00000DA7                         L391:	; entry.split1
                                 ;     773   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",773
00000DA7 A809                    		MOV.L 04H[R0], R1
00000DA9 69F1                    		SHLR #1FH, R1
00000DAB 6101                    		CMP #00H, R1
00000DAD 10                   S  		BEQ L393
00000DAE                         L392:	; bb14
00000DAE E10001                  		MOV.L 04H[R0], [R0]
00000DB1 38rrrr               W  		BRA L414
00000DB4                         L393:	; bb21
                                 ;     774 
                                 ;     775   obj_id |= SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",775
00000DB4 DD0129                  		MOV.W 52H[R0], R1
00000DB7 78F1                    		BSET #0FH, R1
00000DB9 D70129                  		MOV.W R1, 52H[R0]
00000DBC                         L394:	; bb21.split
                                 ;     776 
                                 ;     777   // find free entry
                                 ;     778   res = spiffs_obj_lu_find_free(fs, fs->free_cursor_block_ix, fs->free_cursor_obj_lu_entry, &bix, &entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",778
00000DBC AD09                    		MOV.L 54H[R0], R1
00000DBE A91B                    		MOV.L 14H[R1], R3
00000DC0 BA12                    		MOVU.W 10H[R1], R2
00000DC2 6040                    		SUB #04H, R0
00000DC4 710E40                  		ADD #40H, R0, R14
00000DC7 E30E                    		MOV.L R14, [R0]
00000DC9 71040E                  		ADD #0EH, R0, R4
00000DCC 39rrrr               W  		BSR _spiffs_obj_lu_find_free
00000DCF 6240                    		ADD #04H, R0
00000DD1 A009                    		MOV.L R1, 04H[R0]
00000DD3                         L395:	; bb21.split2
                                 ;     779   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",779
00000DD3 A809                    		MOV.L 04H[R0], R1
00000DD5 69F1                    		SHLR #1FH, R1
00000DD7 6101                    		CMP #00H, R1
00000DD9 10                   S  		BEQ L397
00000DDA                         L396:	; bb36
00000DDA E10001                  		MOV.L 04H[R0], [R0]
00000DDD 38rrrr               W  		BRA L414
00000DE0                         L397:	; bb44
                                 ;     780   SPIFFS_DBG("create: found free page @ %04x bix:%i entry:%i\n", SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry), bix, entry);
                                 ;     781 
                                 ;     782   // occupy page in object lookup
                                 ;     783   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",783
00000DE0 AB8A                    		MOV.L 3CH[R0], R2
00000DE2 990C                    		MOV.W 0AH[R0], R4
00000DE4 AD09                    		MOV.L 54H[R0], R1
00000DE6 6080                    		SUB #08H, R0
00000DE8 71035A                  		ADD #5AH, R0, R3
00000DEB A00B                    		MOV.L R3, 04H[R0]
00000DED F80602                  		MOV.L #00000002H, [R0]
00000DF0 6D04                    		SHLL #10H, R4
00000DF2 6C12                    		SHLL #01H, R2
00000DF4 4B24                    		ADD R2, R4
00000DF6 7344000010              		ADD #00100000H, R4
00000DFB 6603                    		MOV.L #00000000H, R3
00000DFD 6642                    		MOV.L #00000004H, R2
00000DFF 05rrrrrr             A  		BSR _spiffs_phys_wr
00000E03 6280                    		ADD #08H, R0
00000E05 A009                    		MOV.L R1, 04H[R0]
00000E07                         L398:	; bb44.split
                                 ;     784       0, SPIFFS_BLOCK_TO_PADDR(fs, bix) + entry * sizeof(spiffs_obj_id), sizeof(spiffs_obj_id), (u8_t*)&obj_id);
                                 ;     785   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",785
00000E07 A809                    		MOV.L 04H[R0], R1
00000E09 69F1                    		SHLR #1FH, R1
00000E0B 6101                    		CMP #00H, R1
00000E0D 10                   S  		BEQ L400
00000E0E                         L399:	; bb57
00000E0E E10001                  		MOV.L 04H[R0], [R0]
00000E11 38rrrr               W  		BRA L414
00000E14                         L400:	; bb65
                                 ;     786 
                                 ;     787   fs->stats_p_allocated++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",787
00000E14 AD09                    		MOV.L 54H[R0], R1
00000E16 AB92                    		MOV.L 38H[R1], R2
00000E18 6212                    		ADD #01H, R2
00000E1A A392                    		MOV.L R2, 38H[R1]
00000E1C                         L401:	; bb65.split
                                 ;     788 
                                 ;     789   // write empty object index page
                                 ;     790   oix_hdr.p_hdr.obj_id = obj_id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",790
00000E1C D5002906                		MOV.W 52H[R0], 0CH[R0]
00000E20                         L402:	; bb65.split3
                                 ;     791   oix_hdr.p_hdr.span_ix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",791
00000E20 3D0700                  		MOV.W #0000H, 0EH[R0]
00000E23                         L403:	; bb65.split4
                                 ;     792   oix_hdr.p_hdr.flags = 0xff & ~(SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_USED);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",792
00000E23 3C80F8                  		MOV.B #0F8H, 10H[R0]
00000E26                         L404:	; bb65.split5
                                 ;     793   oix_hdr.type = type;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",793
00000E26 C5004B18                		MOV.B 4BH[R0], 18H[R0]
00000E2A                         L405:	; bb65.split6
                                 ;     794   oix_hdr.size = SPIFFS_UNDEFINED_LEN; // keep ones so we can update later without wasting this page
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",794
00000E2A F90605FF                		MOV.L #0FFFFFFFFH, 14H[R0]
00000E2E                         L406:	; bb65.split7
00000E2E 754320                  		MOV.L #00000020H, R3
                                 ;     795   strncpy((char*)&oix_hdr.name, (const char*)name, SPIFFS_OBJ_NAME_LEN);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",795
00000E31 AC8A                    		MOV.L 4CH[R0], R2
00000E33 710119                  		ADD #19H, R0, R1
00000E36 7F87                    		SMOVU
00000E38 710139                  		ADD #39H, R0, R1
00000E3B 4331                    		SUB R3, R1
00000E3D 6602                    		MOV.L #00000000H, R2
00000E3F 7F88                    		SSTR.B
00000E41                         L407:	; bb65.split8
                                 ;     796 
                                 ;     797 
                                 ;     798   // update page
                                 ;     799   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",799
00000E41 AB8C                    		MOV.L 3CH[R0], R4
00000E43 990A                    		MOV.W 0AH[R0], R2
00000E45 AD09                    		MOV.L 54H[R0], R1
00000E47 6080                    		SUB #08H, R0
00000E49 710314                  		ADD #14H, R0, R3
00000E4C A00B                    		MOV.L R3, 04H[R0]
00000E4E F80630                  		MOV.L #00000030H, [R0]
00000E51 6C84                    		SHLL #08H, R4
00000E53 6D02                    		SHLL #10H, R2
00000E55 4B24                    		ADD R2, R4
00000E57 7344000210              		ADD #00100200H, R4
00000E5C 6603                    		MOV.L #00000000H, R3
00000E5E 6672                    		MOV.L #00000007H, R2
00000E60 05rrrrrr             A  		BSR _spiffs_phys_wr
00000E64 6280                    		ADD #08H, R0
00000E66 A009                    		MOV.L R1, 04H[R0]
00000E68                         L408:	; bb65.split9
                                 ;     800       0, SPIFFS_OBJ_LOOKUP_ENTRY_TO_PADDR(fs, bix, entry), sizeof(spiffs_page_object_ix_header), (u8_t*)&oix_hdr);
                                 ;     801 
                                 ;     802   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",802
00000E68 A809                    		MOV.L 04H[R0], R1
00000E6A 69F1                    		SHLR #1FH, R1
00000E6C 6101                    		CMP #00H, R1
00000E6E 10                   S  		BEQ L410
00000E6F                         L409:	; bb96
00000E6F E10001                  		MOV.L 04H[R0], [R0]
00000E72 2Err                 B  		BRA L414
00000E74                         L410:	; bb104
                                 ;     803   spiffs_cb_object_event(fs, 0, SPIFFS_EV_IX_NEW, obj_id, 0, SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry), SPIFFS_UNDEFINED_LEN);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",803
00000E74 B90A                    		MOVU.W 0AH[R0], R2
00000E76 6C82                    		SHLL #08H, R2
00000E78 0689020F                		ADD 3CH[R0].L, R2
00000E7C 5D0429                  		MOVU.W 52H[R0], R4
00000E7F AD09                    		MOV.L 54H[R0], R1
00000E81 6080                    		SUB #08H, R0
00000E83 6222                    		ADD #02H, R2
00000E85 900A                    		MOV.W R2, 02H[R0]
00000E87 F90601FF                		MOV.L #0FFFFFFFFH, 04H[R0]
00000E8B F80500                  		MOV.W #0000H, [R0]
00000E8E 6613                    		MOV.L #00000001H, R3
00000E90 6602                    		MOV.L #00000000H, R2
00000E92 39rrrr               W  		BSR _spiffs_cb_object_event
00000E95 6280                    		ADD #08H, R0
00000E97                         L411:	; bb104.split
                                 ;     804 
                                 ;     805   if (objix_hdr_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",805
00000E97 AC09                    		MOV.L 44H[R0], R1
00000E99 6101                    		CMP #00H, R1
00000E9B 20rr                    		BEQ L413
00000E9D                         L412:	; bb115
                                 ;     806     *objix_hdr_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",806
00000E9D B909                    		MOVU.W 0AH[R0], R1
00000E9F 6C81                    		SHLL #08H, R1
00000EA1 0689010F                		ADD 3CH[R0].L, R1
00000EA5 6221                    		ADD #02H, R1
00000EA7 AC0A                    		MOV.L 44H[R0], R2
00000EA9 D321                    		MOV.W R1, [R2]
00000EAB                         L413:	; bb128
                                 ;     807   }
                                 ;     808 
                                 ;     809   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",809
00000EAB E10001                  		MOV.L 04H[R0], [R0]
00000EAE                         L414:	; bb131
00000EAE EC01                    		MOV.L [R0], R1
00000EB0 A401                    		MOV.L R1, 40H[R0]
                                 ;     810 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",810
00000EB2 6716                    		RTSD #58H
00000EB4                         _spiffs_object_update_index_hdr:
                                 		.STACK	_spiffs_object_update_index_hdr=68
                                 ;     811 #endif // !SPIFFS_READ_ONLY
                                 ;     812 
                                 ;     813 #if !SPIFFS_READ_ONLY
                                 ;     814 // update object index header with any combination of name/size/index
                                 ;     815 // new_objix_hdr_data may be null, if so the object index header page is loaded
                                 ;     816 // name may be null, if so name is not changed
                                 ;     817 // size may be null, if so size is not changed
                                 ;     818 s32_t spiffs_object_update_index_hdr(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",818
00000EB4 7100CC                  		ADD #0FFFFFFCCH, R0
00000EB7 A301                    		MOV.L R1, 30H[R0]
00000EB9 A28A                    		MOV.L R2, 2CH[R0]
00000EBB 950B                    		MOV.W R3, 2AH[R0]
00000EBD 9504                    		MOV.W R4, 28H[R0]
00000EBF E5000E09                		MOV.L 38H[R0], 24H[R0]
00000EC3 E5000F08                		MOV.L 3CH[R0], 20H[R0]
00000EC7 E5001007                		MOV.L 40H[R0], 1CH[R0]
00000ECB E5001106                		MOV.L 44H[R0], 18H[R0]
                                 ;     819     spiffs *fs,
                                 ;     820     spiffs_fd *fd,
                                 ;     821     spiffs_obj_id obj_id,
                                 ;     822     spiffs_page_ix objix_hdr_pix,
                                 ;     823     u8_t *new_objix_hdr_data,
                                 ;     824     const u8_t name[SPIFFS_OBJ_NAME_LEN],
                                 ;     825     u32_t size,
                                 ;     826     spiffs_page_ix *new_pix) {
                                 ;     827   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",827
00000ECF 3E0200                  		MOV.L #00000000H, 08H[R0]
00000ED2                         L416:	; entry.split
                                 ;     828   spiffs_page_object_ix_header *objix_hdr;
                                 ;     829   spiffs_page_ix new_objix_hdr_pix;
                                 ;     830 
                                 ;     831   obj_id |=  SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",831
00000ED2 9D09                    		MOV.W 2AH[R0], R1
00000ED4 78F1                    		BSET #0FH, R1
00000ED6 9509                    		MOV.W R1, 2AH[R0]
00000ED8                         L417:	; entry.split1
                                 ;     832 
                                 ;     833   if (new_objix_hdr_data) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",833
00000ED8 AA09                    		MOV.L 24H[R0], R1
00000EDA 6101                    		CMP #00H, R1
00000EDC 10                   S  		BEQ L419
00000EDD                         L418:	; bb16
                                 ;     834     // object index header page already given to us, no need to load it
                                 ;     835     objix_hdr = (spiffs_page_object_ix_header *)new_objix_hdr_data;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",835
00000EDD E5000903                		MOV.L 24H[R0], 0CH[R0]
00000EE1 2Err                 B  		BRA L423
00000EE3                         L419:	; bb19
                                 ;     836   } else {
                                 ;     837     // read object index header page
                                 ;     838     res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",838
00000EE3 AB01                    		MOV.L 30H[R0], R1
00000EE5 AA8A                    		MOV.L 2CH[R0], R2
00000EE7 98A3                    		MOV.W 04H[R2], R3
00000EE9 BD04                    		MOVU.W 28H[R0], R4
00000EEB 6080                    		SUB #08H, R0
00000EED E5100901                		MOV.L 24H[R1], 04H[R0]
00000EF1 F80A0001                		MOV.L #00000100H, [R0]
00000EF5 6C84                    		SHLL #08H, R4
00000EF7 7344000010              		ADD #00100000H, R4
00000EFC 754216                  		MOV.L #00000016H, R2
00000EFF 05rrrrrr             A  		BSR _spiffs_phys_rd
00000F03 6280                    		ADD #08H, R0
00000F05 A081                    		MOV.L R1, 08H[R0]
00000F07                         L420:	; bb19.split
                                 ;     839         fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, objix_hdr_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;     840     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",840
00000F07 A881                    		MOV.L 08H[R0], R1
00000F09 69F1                    		SHLR #1FH, R1
00000F0B 6101                    		CMP #00H, R1
00000F0D 10                   S  		BEQ L422
00000F0E                         L421:	; bb34
00000F0E E5000201                		MOV.L 08H[R0], 04H[R0]
00000F12 38rrrr               W  		BRA L449
00000F15                         L422:	; bb41.split
                                 ;     841     objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",841
00000F15 AB01                    		MOV.L 30H[R0], R1
00000F17 E5100903                		MOV.L 24H[R1], 0CH[R0]
00000F1B                         L423:	; bb51
                                 ;     842   }
                                 ;     843 
                                 ;     844   SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",844
00000F1B A889                    		MOV.L 0CH[R0], R1
00000F1D F51004                  		BTST #00H, 04H[R1].B
00000F20 10                   S  		BEQ L425
00000F21                         L424:	; bb52
00000F21 F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00000F26 38rrrr               W  		BRA L449
00000F29                         L425:	; bb64
00000F29 A889                    		MOV.L 0CH[R0], R1
00000F2B F51704                  		BTST #07H, 04H[R1].B
00000F2E 18                   S  		BNE L427
00000F2F                         L426:	; bb65
00000F2F F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00000F34 38rrrr               W  		BRA L449
00000F37                         L427:	; bb77
00000F37 A889                    		MOV.L 0CH[R0], R1
00000F39 F51104                  		BTST #01H, 04H[R1].B
00000F3C 10                   S  		BEQ L429
00000F3D                         L428:	; bb78
00000F3D F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00000F42 38rrrr               W  		BRA L449
00000F45                         L429:	; bb90
00000F45 A889                    		MOV.L 0CH[R0], R1
00000F47 F51204                  		BTST #02H, 04H[R1].B
00000F4A 10                   S  		BEQ L431
00000F4B                         L430:	; bb91
00000F4B F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00000F50 38rrrr               W  		BRA L449
00000F53                         L431:	; bb103
00000F53 BD09                    		MOVU.W 2AH[R0], R1
00000F55 7CF1                    		BTST #0FH, R1
00000F57 18                   S  		BNE L433
00000F58                         L432:	; bb104
00000F58 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00000F5D 38rrrr               W  		BRA L449
00000F60                         L433:	; bb113
00000F60 A889                    		MOV.L 0CH[R0], R1
00000F62 B819                    		MOVU.W 02H[R1], R1
00000F64 6101                    		CMP #00H, R1
00000F66 10                   S  		BEQ L435
00000F67                         L434:	; bb114
00000F67 F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00000F6C 38rrrr               W  		BRA L449
00000F6F                         L435:	; bb125
                                 ;     845 
                                 ;     846   // change name
                                 ;     847   if (name) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",847
00000F6F AA01                    		MOV.L 20H[R0], R1
00000F71 6101                    		CMP #00H, R1
00000F73 20rr                    		BEQ L437
00000F75                         L436:	; bb126
                                 ;     848     strncpy((char*)objix_hdr->name, (const char*)name, SPIFFS_OBJ_NAME_LEN);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",848
00000F75 A88C                    		MOV.L 0CH[R0], R4
00000F77 71410D                  		ADD #0DH, R4, R1
00000F7A 754320                  		MOV.L #00000020H, R3
00000F7D AA02                    		MOV.L 20H[R0], R2
00000F7F 7F87                    		SMOVU
00000F81 71442D                  		ADD #2DH, R4
00000F84 EF41                    		MOV.L R4, R1
00000F86 4331                    		SUB R3, R1
00000F88 6602                    		MOV.L #00000000H, R2
00000F8A 7F88                    		SSTR.B
00000F8C                         L437:	; bb136
                                 ;     849   }
                                 ;     850   if (size) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",850
00000F8C A989                    		MOV.L 1CH[R0], R1
00000F8E 6101                    		CMP #00H, R1
00000F90 10                   S  		BEQ L439
00000F91                         L438:	; bb137
                                 ;     851     objix_hdr->size = size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",851
00000F91 A989                    		MOV.L 1CH[R0], R1
00000F93 A88A                    		MOV.L 0CH[R0], R2
00000F95 A0A1                    		MOV.L R1, 08H[R2]
00000F97                         L439:	; bb145
                                 ;     852   }
                                 ;     853 
                                 ;     854   // move and update page
                                 ;     855   res = spiffs_page_move(fs, fd == 0 ? 0 : fd->file_nbr, (u8_t*)objix_hdr, obj_id, 0, objix_hdr_pix, &new_objix_hdr_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",855
00000F97 AA89                    		MOV.L 2CH[R0], R1
00000F99 6101                    		CMP #00H, R1
00000F9B AB01                    		MOV.L 30H[R0], R1
00000F9D 18                   S  		BNE L441
00000F9E                         L440:	; bb150
00000F9E F80600                  		MOV.L #00000000H, [R0]
00000FA1 08                   S  		BRA L442
00000FA2                         L441:	; bb151
00000FA2 AA8A                    		MOV.L 2CH[R0], R2
00000FA4 98A2                    		MOV.W 04H[R2], R2
00000FA6 E302                    		MOV.L R2, [R0]
00000FA8                         L442:	; bb156
00000FA8 9D05                    		MOV.W 28H[R0], R5
00000FAA BD0C                    		MOVU.W 2AH[R0], R4
00000FAC A88B                    		MOV.L 0CH[R0], R3
00000FAE DC02                    		MOV.W [R0], R2
00000FB0 60C0                    		SUB #0CH, R0
00000FB2 710F1E                  		ADD #1EH, R0, R15
00000FB5 E70F02                  		MOV.L R15, 08H[R0]
00000FB8 9085                    		MOV.W R5, 04H[R0]
00000FBA F80600                  		MOV.L #00000000H, [R0]
00000FBD 39rrrr               W  		BSR _spiffs_page_move
00000FC0 62C0                    		ADD #0CH, R0
00000FC2 A081                    		MOV.L R1, 08H[R0]
                                 ;     856 
                                 ;     857   if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",857
00000FC4 6101                    		CMP #00H, R1
00000FC6 21rr                    		BNE L448
00000FC8                         L443:	; bb167
                                 ;     858     if (new_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",858
00000FC8 A981                    		MOV.L 18H[R0], R1
00000FCA 6101                    		CMP #00H, R1
00000FCC 10                   S  		BEQ L445
00000FCD                         L444:	; bb168
                                 ;     859       *new_pix = new_objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",859
00000FCD 9A09                    		MOV.W 12H[R0], R1
00000FCF A982                    		MOV.L 18H[R0], R2
00000FD1 D321                    		MOV.W R1, [R2]
00000FD3                         L445:	; bb175
                                 ;     860     }
                                 ;     861     // callback on object index update
                                 ;     862     spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, obj_id, objix_hdr->p_hdr.span_ix, new_objix_hdr_pix, objix_hdr->size);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",862
00000FD3 A88B                    		MOV.L 0CH[R0], R3
00000FD5 983D                    		MOV.W 02H[R3], R5
00000FD7 DD0F09                  		MOV.W 12H[R0], R15
00000FDA BD0C                    		MOVU.W 2AH[R0], R4
00000FDC AA8A                    		MOV.L 2CH[R0], R2
00000FDE AB01                    		MOV.L 30H[R0], R1
00000FE0 6080                    		SUB #08H, R0
00000FE2 E5300201                		MOV.L 08H[R3], 04H[R0]
00000FE6 D70F01                  		MOV.W R15, 02H[R0]
00000FE9 D305                    		MOV.W R5, [R0]
00000FEB 6603                    		MOV.L #00000000H, R3
00000FED 39rrrr               W  		BSR _spiffs_cb_object_event
00000FF0 6280                    		ADD #08H, R0
00000FF2                         L446:	; bb175.split
                                 ;     863     if (fd) fd->objix_hdr_pix = new_objix_hdr_pix; // if this is not in the registered cluster
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",863
00000FF2 AA89                    		MOV.L 2CH[R0], R1
00000FF4 6101                    		CMP #00H, R1
00000FF6 10                   S  		BEQ L448
00000FF7                         L447:	; bb188
00000FF7 9A09                    		MOV.W 12H[R0], R1
00000FF9 AA8A                    		MOV.L 2CH[R0], R2
00000FFB 91A1                    		MOV.W R1, 0CH[R2]
00000FFD                         L448:	; bb201
                                 ;     864   }
                                 ;     865 
                                 ;     866   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",866
00000FFD E5000201                		MOV.L 08H[R0], 04H[R0]
00001001                         L449:	; bb204
00001001 A809                    		MOV.L 04H[R0], R1
00001003 A109                    		MOV.L R1, 14H[R0]
                                 ;     867 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",867
00001005 670D                    		RTSD #34H
00001007                         _spiffs_cb_object_event:
                                 		.STACK	_spiffs_cb_object_event=52
                                 ;     868 #endif // !SPIFFS_READ_ONLY
                                 ;     869 
                                 ;     870 void spiffs_cb_object_event(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",870
00001007 7100D0                  		ADD #0FFFFFFD0H, R0
0000100A A289                    		MOV.L R1, 2CH[R0]
0000100C A282                    		MOV.L R2, 28H[R0]
0000100E A20B                    		MOV.L R3, 24H[R0]
00001010 940C                    		MOV.W R4, 22H[R0]
00001012 D5001A10                		MOV.W 34H[R0], 20H[R0]
00001016 D5001B0F                		MOV.W 36H[R0], 1EH[R0]
0000101A E5000E06                		MOV.L 38H[R0], 18H[R0]
0000101E                         L451:	; entry.split
                                 ;     871     spiffs *fs,
                                 ;     872     spiffs_fd *fd,
                                 ;     873     int ev,
                                 ;     874     spiffs_obj_id obj_id_raw,
                                 ;     875     spiffs_span_ix spix,
                                 ;     876     spiffs_page_ix new_pix,
                                 ;     877     u32_t new_size) {
                                 ;     878   (void)fd;
                                 ;     879   // update index caches in all file descriptors
                                 ;     880   spiffs_obj_id obj_id = obj_id_raw & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",880
0000101E BC09                    		MOVU.W 22H[R0], R1
00001020 7621FF7F                		AND #7FFFH, R1
00001024 9089                    		MOV.W R1, 06H[R0]
00001026                         L452:	; entry.split1
                                 ;     881   u32_t i;
                                 ;     882   spiffs_fd *fds = (spiffs_fd *)fs->fd_space;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",882
00001026 AA89                    		MOV.L 2CH[R0], R1
00001028 E5100A03                		MOV.L 28H[R1], 0CH[R0]
0000102C                         L453:	; entry.split2
                                 ;     883   for (i = 0; i < fs->fd_count; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",883
0000102C 3E0200                  		MOV.L #00000000H, 08H[R0]
0000102F 38rrrr               W  		BRA L481
00001032                         L454:	; bb
                                 ;     884     spiffs_fd *cur_fd = &fds[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",884
00001032 A881                    		MOV.L 08H[R0], R1
00001034 751124                  		MUL #24H, R1
00001037 06890103                		ADD 0CH[R0].L, R1
0000103B A101                    		MOV.L R1, 10H[R0]
0000103D                         L455:	; bb.split
                                 ;     885     if (cur_fd->file_nbr == 0 || (cur_fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG) != obj_id) continue;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",885
0000103D A901                    		MOV.L 10H[R0], R1
0000103F 9891                    		MOV.W 04H[R1], R1
00001041 6101                    		CMP #00H, R1
00001043 20rr                    		BEQ L457
00001045                         L456:	; bb33
00001045 A901                    		MOV.L 10H[R0], R1
00001047 B899                    		MOVU.W 06H[R1], R1
00001049 7621FF7F                		AND #7FFFH, R1
0000104D 06C50103                		CMP 06H[R0].UW, R1
00001051 10                   S  		BEQ L458
00001052                         L457:	; bb43
00001052 F80601                  		MOV.L #00000001H, [R0]
00001055 08                   S  		BRA L459
00001056                         L458:	; bb44
00001056 F80600                  		MOV.L #00000000H, [R0]
00001059                         L459:	; bb45
00001059 EC01                    		MOV.L [R0], R1
0000105B 6101                    		CMP #00H, R1
0000105D 3Brrrr               W  		BNE L480
00001060                         L460:	; bb50
                                 ;     886     if (spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",886
00001060 BC01                    		MOVU.W 20H[R0], R1
00001062 6101                    		CMP #00H, R1
00001064 21rr                    		BNE L472
00001066                         L461:	; bb52
                                 ;     887       if (ev == SPIFFS_EV_IX_NEW || ev == SPIFFS_EV_IX_UPD) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",887
00001066 AA09                    		MOV.L 24H[R0], R1
00001068 6111                    		CMP #01H, R1
0000106A 20rr                    		BEQ L469
0000106C 2Err                 B  		BRA L468
0000106E                         L462:	; bb53
                                 ;     888         SPIFFS_DBG("       callback: setting fd %i:%04x objix_hdr_pix to %04x, size:%i\n", cur_fd->file_nbr, cur_fd->obj_id, new_pix, new_size);
                                 ;     889         cur_fd->objix_hdr_pix = new_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",889
0000106E 9B89                    		MOV.W 1EH[R0], R1
00001070 A902                    		MOV.L 10H[R0], R2
00001072 91A1                    		MOV.W R1, 0CH[R2]
00001074                         L463:	; bb53.split
                                 ;     890         if (new_size != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",890
00001074 A981                    		MOV.L 18H[R0], R1
00001076 6101                    		CMP #00H, R1
00001078 20rr                    		BEQ L472
0000107A                         L464:	; bb58
                                 ;     891           cur_fd->size = new_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",891
0000107A A981                    		MOV.L 18H[R0], R1
0000107C A902                    		MOV.L 10H[R0], R2
0000107E A0A1                    		MOV.L R1, 08H[R2]
00001080 2Err                 B  		BRA L472
00001082                         L465:	; bb68
                                 ;     892         }
                                 ;     893       } else if (ev == SPIFFS_EV_IX_DEL) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",893
00001082 AA09                    		MOV.L 24H[R0], R1
00001084 6121                    		CMP #02H, R1
00001086 21rr                    		BNE L472
00001088                         L466:	; bb69
                                 ;     894         cur_fd->file_nbr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",894
00001088 A901                    		MOV.L 10H[R0], R1
0000108A 3D1200                  		MOV.W #0000H, 04H[R1]
0000108D                         L467:	; bb69.split
                                 ;     895         cur_fd->obj_id = SPIFFS_OBJ_ID_DELETED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",895
0000108D A901                    		MOV.L 10H[R0], R1
0000108F 3D1300                  		MOV.W #0000H, 06H[R1]
00001092 2Err                 B  		BRA L472
00001094                         L468:	; bb82
00001094 AA09                    		MOV.L 24H[R0], R1
00001096 6101                    		CMP #00H, R1
00001098 18                   S  		BNE L470
00001099                         L469:	; bb86
00001099 F80601                  		MOV.L #00000001H, [R0]
0000109C 08                   S  		BRA L471
0000109D                         L470:	; bb87
0000109D F80600                  		MOV.L #00000000H, [R0]
000010A0                         L471:	; bb88
000010A0 EC01                    		MOV.L [R0], R1
000010A2 6101                    		CMP #00H, R1
000010A4 21rr                    		BNE L462
000010A6 2Err                 B  		BRA L465
000010A8                         L472:	; bb100
                                 ;     896       }
                                 ;     897     }
                                 ;     898     if (cur_fd->cursor_objix_spix == spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",898
000010A8 A901                    		MOV.L 10H[R0], R1
000010AA BA11                    		MOVU.W 10H[R1], R1
000010AC 06C50110                		CMP 20H[R0].UW, R1
000010B0 21rr                    		BNE L480
000010B2                         L473:	; bb102
                                 ;     899       if (ev == SPIFFS_EV_IX_NEW || ev == SPIFFS_EV_IX_UPD) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",899
000010B2 AA09                    		MOV.L 24H[R0], R1
000010B4 6111                    		CMP #01H, R1
000010B6 20rr                    		BEQ L477
000010B8 2Err                 B  		BRA L476
000010BA                         L474:	; bb103
                                 ;     900         SPIFFS_DBG("       callback: setting fd %i:%04x span:%04x objix_pix to %04x\n", cur_fd->file_nbr, cur_fd->obj_id, spix, new_pix);
                                 ;     901         cur_fd->cursor_objix_pix = new_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",901
000010BA D5010F07                		MOV.W 1EH[R0], 0EH[R1]
000010BE 2Err                 B  		BRA L480
000010C0                         L475:	; bb107
                                 ;     902       } else {
                                 ;     903         cur_fd->cursor_objix_pix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",903
000010C0 3D1700                  		MOV.W #0000H, 0EH[R1]
000010C3 2Err                 B  		BRA L480
000010C5                         L476:	; bb113
000010C5 AA09                    		MOV.L 24H[R0], R1
000010C7 6101                    		CMP #00H, R1
000010C9 18                   S  		BNE L478
000010CA                         L477:	; bb117
000010CA F80601                  		MOV.L #00000001H, [R0]
000010CD 08                   S  		BRA L479
000010CE                         L478:	; bb118
000010CE F80600                  		MOV.L #00000000H, [R0]
000010D1                         L479:	; bb119
000010D1 EC01                    		MOV.L [R0], R1
000010D3 6101                    		CMP #00H, R1
000010D5 A901                    		MOV.L 10H[R0], R1
000010D7 21rr                    		BNE L474
000010D9 2Err                 B  		BRA L475
000010DB                         L480:	; bb135
000010DB A881                    		MOV.L 08H[R0], R1
000010DD 6211                    		ADD #01H, R1
000010DF A081                    		MOV.L R1, 08H[R0]
000010E1                         L481:	; bb138
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",883
000010E1 AA89                    		MOV.L 2CH[R0], R1
000010E3 A882                    		MOV.L 08H[R0], R2
000010E5 0685120B                		CMP 2CH[R1].L, R2
000010E9 22rr                  * 		BLTU L454
         38rrrr                  
000010EE                         L482:	; bb147
                                 ;     904       }
                                 ;     905     }
                                 ;     906   }
                                 ;     907 
                                 ;     908   // callback to user if object index header
                                 ;     909   if (fs->file_cb_f && spix == 0 && (obj_id_raw & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",909
000010EE AA89                    		MOV.L 2CH[R0], R1
000010F0 AD19                    		MOV.L 54H[R1], R1
000010F2 6101                    		CMP #00H, R1
000010F4 21rr                    		BNE L490
000010F6 2Err                 B  		BRA L492
000010F8                         L483:	; bb149
                                 ;     910     spiffs_fileop_type op;
                                 ;     911     if (ev == SPIFFS_EV_IX_NEW) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",911
000010F8 AA09                    		MOV.L 24H[R0], R1
000010FA 6111                    		CMP #01H, R1
000010FC 18                   S  		BNE L485
000010FD                         L484:	; bb150
                                 ;     912       op = SPIFFS_CB_CREATED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",912
000010FD 3E0500                  		MOV.L #00000000H, 14H[R0]
00001100 2Err                 B  		BRA L489
00001102                         L485:	; bb152
                                 ;     913     } else if (ev == SPIFFS_EV_IX_UPD) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",913
00001102 AA09                    		MOV.L 24H[R0], R1
00001104 6101                    		CMP #00H, R1
00001106 18                   S  		BNE L487
00001107                         L486:	; bb153
                                 ;     914       op = SPIFFS_CB_UPDATED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",914
00001107 3E0501                  		MOV.L #00000001H, 14H[R0]
0000110A 08                   S  		BRA L489
0000110B                         L487:	; bb155
                                 ;     915     } else if (ev == SPIFFS_EV_IX_DEL) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",915
0000110B AA09                    		MOV.L 24H[R0], R1
0000110D 6121                    		CMP #02H, R1
0000110F 21rr                    		BNE L498
00001111                         L488:	; bb156
                                 ;     916       op = SPIFFS_CB_DELETED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",916
00001111 3E0502                  		MOV.L #00000002H, 14H[R0]
00001114                         L489:	; bb173
                                 ;     917     } else {
                                 ;     918       SPIFFS_DBG("       callback: WARNING unknown callback event %02x\n", ev);
                                 ;     919       return; // bail out
                                 ;     920     }
                                 ;     921     fs->file_cb_f(fs, op, obj_id, new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",921
00001114 AA89                    		MOV.L 2CH[R0], R1
00001116 AD1D                    		MOV.L 54H[R1], R5
00001118 BB8C                    		MOVU.W 1EH[R0], R4
0000111A B88B                    		MOVU.W 06H[R0], R3
0000111C A90A                    		MOV.L 14H[R0], R2
0000111E 7F15                    		JSR R5
00001120 670C                    		RTSD #30H
00001122                         L490:	; bb186
00001122 BC01                    		MOVU.W 20H[R0], R1
00001124 6101                    		CMP #00H, R1
00001126 18                   S  		BNE L492
00001127                         L491:	; bb191
00001127 F80601                  		MOV.L #00000001H, [R0]
0000112A 08                   S  		BRA L493
0000112B                         L492:	; bb192
0000112B F80600                  		MOV.L #00000000H, [R0]
0000112E                         L493:	; bb193
0000112E EC01                    		MOV.L [R0], R1
00001130 6101                    		CMP #00H, R1
00001132 10                   S  		BEQ L496
00001133                         L494:	; bb197
00001133 BC09                    		MOVU.W 22H[R0], R1
00001135 7CF1                    		BTST #0FH, R1
00001137 10                   S  		BEQ L496
00001138                         L495:	; bb203
00001138 F80601                  		MOV.L #00000001H, [R0]
0000113B 08                   S  		BRA L497
0000113C                         L496:	; bb204
0000113C F80600                  		MOV.L #00000000H, [R0]
0000113F                         L497:	; bb205
0000113F EC01                    		MOV.L [R0], R1
00001141 6101                    		CMP #00H, R1
00001143 21rr                    		BNE L483
00001145                         L498:	; return
                                 ;     922   }
                                 ;     923 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",923
00001145 670C                    		RTSD #30H
00001147                         _spiffs_object_open_by_id:
                                 		.STACK	_spiffs_object_open_by_id=40
                                 ;     924 
                                 ;     925 // Open object by id
                                 ;     926 s32_t spiffs_object_open_by_id(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",926
00001147 7100E0                  		ADD #0FFFFFFE0H, R0
0000114A A189                    		MOV.L R1, 1CH[R0]
0000114C 930A                    		MOV.W R2, 1AH[R0]
0000114E A10B                    		MOV.L R3, 14H[R0]
00001150 920C                    		MOV.W R4, 12H[R0]
00001152 D5001208                		MOV.W 24H[R0], 10H[R0]
                                 ;     927     spiffs *fs,
                                 ;     928     spiffs_obj_id obj_id,
                                 ;     929     spiffs_fd *fd,
                                 ;     930     spiffs_flags flags,
                                 ;     931     spiffs_mode mode) {
                                 ;     932   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",932
00001156 3E0100                  		MOV.L #00000000H, 04H[R0]
00001159                         L500:	; entry.split
                                 ;     933   spiffs_page_ix pix;
                                 ;     934 
                                 ;     935   res = spiffs_obj_lu_find_id_and_span(fs, obj_id | SPIFFS_OBJ_ID_IX_FLAG, 0, 0, &pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",935
00001159 BB0A                    		MOVU.W 1AH[R0], R2
0000115B A989                    		MOV.L 1CH[R0], R1
0000115D 6040                    		SUB #04H, R0
0000115F 710E0E                  		ADD #0EH, R0, R14
00001162 E30E                    		MOV.L R14, [R0]
00001164 78F2                    		BSET #0FH, R2
00001166 6603                    		MOV.L #00000000H, R3
00001168 EF34                    		MOV.L R3, R4
0000116A 39rrrr               W  		BSR _spiffs_obj_lu_find_id_and_span
0000116D 6240                    		ADD #04H, R0
0000116F A009                    		MOV.L R1, 04H[R0]
00001171                         L501:	; entry.split1
                                 ;     936   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",936
00001171 A809                    		MOV.L 04H[R0], R1
00001173 69F1                    		SHLR #1FH, R1
00001175 6101                    		CMP #00H, R1
00001177 10                   S  		BEQ L503
00001178                         L502:	; bb15
00001178 E10001                  		MOV.L 04H[R0], [R0]
0000117B 2Err                 B  		BRA L505
0000117D                         L503:	; bb22
                                 ;     937 
                                 ;     938   res = spiffs_object_open_by_page(fs, pix, fd, flags, mode);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",938
0000117D 9A05                    		MOV.W 10H[R0], R5
0000117F BA0C                    		MOVU.W 12H[R0], R4
00001181 A90B                    		MOV.L 14H[R0], R3
00001183 B90A                    		MOVU.W 0AH[R0], R2
00001185 A989                    		MOV.L 1CH[R0], R1
00001187 6040                    		SUB #04H, R0
00001189 D305                    		MOV.W R5, [R0]
0000118B 39rrrr               W  		BSR _spiffs_object_open_by_page
0000118E 6240                    		ADD #04H, R0
00001190 A009                    		MOV.L R1, 04H[R0]
00001192                         L504:	; bb22.split
                                 ;     939 
                                 ;     940   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",940
00001192 E10001                  		MOV.L 04H[R0], [R0]
00001195                         L505:	; bb31
00001195 EC01                    		MOV.L [R0], R1
00001197 A089                    		MOV.L R1, 0CH[R0]
                                 ;     941 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",941
00001199 6708                    		RTSD #20H
0000119B                         _spiffs_object_open_by_page:
                                 		.STACK	_spiffs_object_open_by_page=96
                                 ;     942 
                                 ;     943 // Open object by page index
                                 ;     944 s32_t spiffs_object_open_by_page(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",944
0000119B 7100AC                  		ADD #0FFFFFFACH, R0
0000119E A501                    		MOV.L R1, 50H[R0]
000011A0 D70227                  		MOV.W R2, 4EH[R0]
000011A3 A483                    		MOV.L R3, 48H[R0]
000011A5 D70423                  		MOV.W R4, 46H[R0]
000011A8 D5002C22                		MOV.W 58H[R0], 44H[R0]
000011AC                         L507:	; entry.split
                                 ;     945     spiffs *fs,
                                 ;     946     spiffs_page_ix pix,
                                 ;     947     spiffs_fd *fd,
                                 ;     948     spiffs_flags flags,
                                 ;     949     spiffs_mode mode) {
                                 ;     950   (void)mode;
                                 ;     951   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",951
000011AC 3E0100                  		MOV.L #00000000H, 04H[R0]
000011AF                         L508:	; entry.split1
                                 ;     952   spiffs_page_object_ix_header oix_hdr;
                                 ;     953   spiffs_obj_id obj_id;
                                 ;     954 
                                 ;     955   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",955
000011AF AC81                    		MOV.L 48H[R0], R1
000011B1 9893                    		MOV.W 04H[R1], R3
000011B3 5D0427                  		MOVU.W 4EH[R0], R4
000011B6 AD01                    		MOV.L 50H[R0], R1
000011B8 6080                    		SUB #08H, R0
000011BA 710210                  		ADD #10H, R0, R2
000011BD A00A                    		MOV.L R2, 04H[R0]
000011BF F80630                  		MOV.L #00000030H, [R0]
000011C2 6C84                    		SHLL #08H, R4
000011C4 7344000010              		ADD #00100000H, R4
000011C9 754216                  		MOV.L #00000016H, R2
000011CC 05rrrrrr             A  		BSR _spiffs_phys_rd
000011D0 6280                    		ADD #08H, R0
000011D2 A009                    		MOV.L R1, 04H[R0]
000011D4                         L509:	; entry.split2
                                 ;     956       fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, pix), sizeof(spiffs_page_object_ix_header), (u8_t *)&oix_hdr);
                                 ;     957   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",957
000011D4 A809                    		MOV.L 04H[R0], R1
000011D6 69F1                    		SHLR #1FH, R1
000011D8 6101                    		CMP #00H, R1
000011DA 10                   S  		BEQ L511
000011DB                         L510:	; bb24
000011DB E10001                  		MOV.L 04H[R0], [R0]
000011DE 38rrrr               W  		BRA L535
000011E1                         L511:	; bb31
                                 ;     958 
                                 ;     959   spiffs_block_ix bix = SPIFFS_BLOCK_FOR_PAGE(fs, pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",959
000011E1 5D0127                  		MOVU.W 4EH[R0], R1
000011E4 6881                    		SHLR #08H, R1
000011E6 9709                    		MOV.W R1, 3AH[R0]
000011E8                         L512:	; bb31.split
                                 ;     960   int entry = SPIFFS_OBJ_LOOKUP_ENTRY_FOR_PAGE(fs, pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",960
000011E8 59014E                  		MOVU.B 4EH[R0], R1
000011EB 6021                    		SUB #02H, R1
000011ED A389                    		MOV.L R1, 3CH[R0]
000011EF                         L513:	; bb31.split3
                                 ;     961 
                                 ;     962   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",962
000011EF AB8A                    		MOV.L 3CH[R0], R2
000011F1 9F0C                    		MOV.W 3AH[R0], R4
000011F3 AD01                    		MOV.L 50H[R0], R1
000011F5 6080                    		SUB #08H, R0
000011F7 710340                  		ADD #40H, R0, R3
000011FA A00B                    		MOV.L R3, 04H[R0]
000011FC F80602                  		MOV.L #00000002H, [R0]
000011FF 6D04                    		SHLL #10H, R4
00001201 6C12                    		SHLL #01H, R2
00001203 4B24                    		ADD R2, R4
00001205 7344000010              		ADD #00100000H, R4
0000120A 6603                    		MOV.L #00000000H, R3
0000120C 754214                  		MOV.L #00000014H, R2
0000120F 05rrrrrr             A  		BSR _spiffs_phys_rd
00001213 6280                    		ADD #08H, R0
00001215 A009                    		MOV.L R1, 04H[R0]
00001217                         L514:	; bb31.split4
                                 ;     963       0,  SPIFFS_BLOCK_TO_PADDR(fs, bix) + entry * sizeof(spiffs_obj_id), sizeof(spiffs_obj_id), (u8_t *)&obj_id);
                                 ;     964 
                                 ;     965   fd->fs = fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",965
00001217 AD01                    		MOV.L 50H[R0], R1
00001219 AC82                    		MOV.L 48H[R0], R2
0000121B E321                    		MOV.L R1, [R2]
0000121D                         L515:	; bb31.split5
                                 ;     966   fd->objix_hdr_pix = pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",966
0000121D DD0127                  		MOV.W 4EH[R0], R1
00001220 AC82                    		MOV.L 48H[R0], R2
00001222 91A1                    		MOV.W R1, 0CH[R2]
00001224                         L516:	; bb31.split6
                                 ;     967   fd->size = oix_hdr.size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",967
00001224 A901                    		MOV.L 10H[R0], R1
00001226 AC82                    		MOV.L 48H[R0], R2
00001228 A0A1                    		MOV.L R1, 08H[R2]
0000122A                         L517:	; bb31.split7
                                 ;     968   fd->offset = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",968
0000122A AC81                    		MOV.L 48H[R0], R1
0000122C 3E1500                  		MOV.L #00000000H, 14H[R1]
0000122F                         L518:	; bb31.split8
                                 ;     969   fd->cursor_objix_pix = pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",969
0000122F DD0127                  		MOV.W 4EH[R0], R1
00001232 AC82                    		MOV.L 48H[R0], R2
00001234 91A9                    		MOV.W R1, 0EH[R2]
00001236                         L519:	; bb31.split9
                                 ;     970   fd->cursor_objix_spix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",970
00001236 AC81                    		MOV.L 48H[R0], R1
00001238 3D1800                  		MOV.W #0000H, 10H[R1]
0000123B                         L520:	; bb31.split10
                                 ;     971   fd->obj_id = obj_id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",971
0000123B 9F01                    		MOV.W 38H[R0], R1
0000123D AC82                    		MOV.L 48H[R0], R2
0000123F 90A9                    		MOV.W R1, 06H[R2]
00001241                         L521:	; bb31.split11
                                 ;     972   fd->flags = flags;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",972
00001241 DD0123                  		MOV.W 46H[R0], R1
00001244 AC82                    		MOV.L 48H[R0], R2
00001246 93A1                    		MOV.W R1, 1CH[R2]
00001248                         L522:	; bb31.split12
                                 ;     973 
                                 ;     974   SPIFFS_VALIDATE_OBJIX(oix_hdr.p_hdr, fd->obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",974
00001248 F5000C                  		BTST #00H, 0CH[R0].B
0000124B 10                   S  		BEQ L524
0000124C                         L523:	; bb74
0000124C F80AE4D8                		MOV.L #0FFFFD8E4H, [R0]
00001250 2Err                 B  		BRA L535
00001252                         L524:	; bb85
00001252 F5070C                  		BTST #07H, 0CH[R0].B
00001255 18                   S  		BNE L526
00001256                         L525:	; bb86
00001256 F80AECD8                		MOV.L #0FFFFD8ECH, [R0]
0000125A 2Err                 B  		BRA L535
0000125C                         L526:	; bb97
0000125C F5010C                  		BTST #01H, 0CH[R0].B
0000125F 10                   S  		BEQ L528
00001260                         L527:	; bb98
00001260 F80AEBD8                		MOV.L #0FFFFD8EBH, [R0]
00001264 2Err                 B  		BRA L535
00001266                         L528:	; bb109
00001266 F5020C                  		BTST #02H, 0CH[R0].B
00001269 10                   S  		BEQ L530
0000126A                         L529:	; bb110
0000126A F80AEAD8                		MOV.L #0FFFFD8EAH, [R0]
0000126E 2Err                 B  		BRA L535
00001270                         L530:	; bb121
00001270 AC81                    		MOV.L 48H[R0], R1
00001272 B899                    		MOVU.W 06H[R1], R1
00001274 7CF1                    		BTST #0FH, R1
00001276 18                   S  		BNE L532
00001277                         L531:	; bb122
00001277 F80AEAD8                		MOV.L #0FFFFD8EAH, [R0]
0000127B 2Err                 B  		BRA L535
0000127D                         L532:	; bb133
0000127D B909                    		MOVU.W 0AH[R0], R1
0000127F 6101                    		CMP #00H, R1
00001281 10                   S  		BEQ L534
00001282                         L533:	; bb134
00001282 F80AE3D8                		MOV.L #0FFFFD8E3H, [R0]
00001286 08                   S  		BRA L535
00001287                         L534:	; bb143
                                 ;     975 
                                 ;     976   SPIFFS_DBG("open: fd %i is obj id %04x\n", fd->file_nbr, fd->obj_id);
                                 ;     977 
                                 ;     978   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",978
00001287 E10001                  		MOV.L 04H[R0], [R0]
0000128A                         L535:	; bb146
0000128A EC01                    		MOV.L [R0], R1
0000128C A401                    		MOV.L R1, 40H[R0]
                                 ;     979 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",979
0000128E 6715                    		RTSD #54H
00001290                         _spiffs_object_append:
                                 		.STACK	_spiffs_object_append=104
                                 ;     980 
                                 ;     981 #if !SPIFFS_READ_ONLY
                                 ;     982 // Append to object
                                 ;     983 // keep current object index (header) page in fs->work buffer
                                 ;     984 s32_t spiffs_object_append(spiffs_fd *fd, u32_t offset, u8_t *data, u32_t len) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",984
00001290 7100AC                  		ADD #0FFFFFFACH, R0
00001293 A501                    		MOV.L R1, 50H[R0]
00001295 A48A                    		MOV.L R2, 4CH[R0]
00001297 A483                    		MOV.L R3, 48H[R0]
00001299 A40C                    		MOV.L R4, 44H[R0]
                                 ;     985   spiffs *fs = fd->fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",985
0000129B AD01                    		MOV.L 50H[R0], R1
0000129D E41002                  		MOV.L [R1], 08H[R0]
000012A0                         L537:	; entry.split
                                 ;     986   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",986
000012A0 3E0300                  		MOV.L #00000000H, 0CH[R0]
000012A3                         L538:	; entry.split1
                                 ;     987   u32_t written = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",987
000012A3 3E0400                  		MOV.L #00000000H, 10H[R0]
000012A6                         L539:	; entry.split2
                                 ;     988 
                                 ;     989   SPIFFS_DBG("append: %i bytes @ offs %i of size %i\n", len, offset, fd->size);
                                 ;     990 
                                 ;     991   if (offset > fd->size) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",991
000012A6 AD01                    		MOV.L 50H[R0], R1
000012A8 AC8A                    		MOV.L 4CH[R0], R2
000012AA 06851202                		CMP 08H[R1].L, R2
000012AE 25rr                    		BLEU L541
000012B0                         L540:	; bb25
                                 ;     992     SPIFFS_DBG("append: offset reversed to size\n");
                                 ;     993     offset = fd->size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",993
000012B0 AD01                    		MOV.L 50H[R0], R1
000012B2 E5100213                		MOV.L 08H[R1], 4CH[R0]
000012B6                         L541:	; bb35
                                 ;     994   }
                                 ;     995 
                                 ;     996   res = spiffs_gc_check(fs, len + SPIFFS_DATA_PAGE_SIZE(fs)); // add an extra page of data worth for meta
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",996
000012B6 AC0A                    		MOV.L 44H[R0], R2
000012B8 A881                    		MOV.L 08H[R0], R1
000012BA 7222FA00                		ADD #0FAH, R2
000012BE 05rrrrrr             A  		BSR _spiffs_gc_check
000012C2 A089                    		MOV.L R1, 0CH[R0]
000012C4                         L542:	; bb35.split3
                                 ;     997   if (res != SPIFFS_OK) {
                                 ;     998     SPIFFS_DBG("append: gc check fail %i\n", res);
                                 ;     999   }
                                 ;    1000   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1000
000012C4 A889                    		MOV.L 0CH[R0], R1
000012C6 69F1                    		SHLR #1FH, R1
000012C8 6101                    		CMP #00H, R1
000012CA 10                   S  		BEQ L544
000012CB                         L543:	; bb49
000012CB E5000301                		MOV.L 0CH[R0], 04H[R0]
000012CF 38rrrr               W  		BRA L702
000012D2                         L544:	; bb57
                                 ;    1001 
                                 ;    1002   spiffs_page_object_ix_header *objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1002
000012D2 A881                    		MOV.L 08H[R0], R1
000012D4 E5100905                		MOV.L 24H[R1], 14H[R0]
000012D8                         L545:	; bb57.split
                                 ;    1003   spiffs_page_object_ix *objix = (spiffs_page_object_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1003
000012D8 A881                    		MOV.L 08H[R0], R1
000012DA E5100906                		MOV.L 24H[R1], 18H[R0]
000012DE                         L546:	; bb57.split4
                                 ;    1004   spiffs_page_header p_hdr;
                                 ;    1005 
                                 ;    1006   spiffs_span_ix cur_objix_spix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1006
000012DE 3D8200                  		MOV.W #0000H, 24H[R0]
000012E1                         L547:	; bb57.split5
                                 ;    1007   spiffs_span_ix prev_objix_spix = (spiffs_span_ix)-1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1007
000012E1 F90913FFFF              		MOV.W #0FFFFH, 26H[R0]
000012E6                         L548:	; bb57.split6
                                 ;    1008   spiffs_page_ix cur_objix_pix = fd->objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1008
000012E6 AD01                    		MOV.L 50H[R0], R1
000012E8 D5100614                		MOV.W 0CH[R1], 28H[R0]
000012EC                         L549:	; bb57.split7
                                 ;    1009   spiffs_page_ix new_objix_hdr_page;
                                 ;    1010 
                                 ;    1011   spiffs_span_ix data_spix = offset / SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1011
000012EC AC89                    		MOV.L 4CH[R0], R1
000012EE FD7891FA00              		DIVU #0FAH, R1
000012F3 9581                    		MOV.W R1, 2CH[R0]
000012F5                         L550:	; bb57.split8
                                 ;    1012   spiffs_page_ix data_page;
                                 ;    1013   u32_t page_offs = offset % SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1013
000012F5 AC89                    		MOV.L 4CH[R0], R1
000012F7 EF1E                    		MOV.L R1, R14
000012F9 FD789EFA00              		DIVU #0FAH, R14
000012FE 761EFA00                		MUL #0FAH, R14
00001302 43E1                    		SUB R14, R1
00001304 A301                    		MOV.L R1, 30H[R0]
00001306 38rrrr               W  		BRA L668
00001309                         L551:	; bb74
                                 ;    1014 
                                 ;    1015   // write all data
                                 ;    1016   while (res == SPIFFS_OK && written < len) {
                                 ;    1017     // calculate object index page span index
                                 ;    1018     cur_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1018
00001309 BD81                    		MOVU.W 2CH[R0], R1
0000130B 755167                  		CMP #67H, R1
0000130E 24rr                    		BGTU L553
00001310                         L552:	; bb79
00001310 F80600                  		MOV.L #00000000H, [R0]
00001313 2Err                 B  		BRA L554
00001315                         L553:	; bb80
00001315 BD81                    		MOVU.W 2CH[R0], R1
00001317 711198                  		ADD #0FFFFFF98H, R1
0000131A FD74917C                		DIVU #7CH, R1
0000131E 6211                    		ADD #01H, R1
00001320 E301                    		MOV.L R1, [R0]
00001322                         L554:	; bb86
00001322 EC01                    		MOV.L [R0], R1
00001324 9481                    		MOV.W R1, 24H[R0]
                                 ;    1019 
                                 ;    1020     // handle storing and loading of object indices
                                 ;    1021     if (cur_objix_spix != prev_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1021
00001326 BC81                    		MOVU.W 24H[R0], R1
00001328 06C50113                		CMP 26H[R0].UW, R1
0000132C 3Arrrr               W  		BEQ L639
0000132F                         L555:	; bb92
                                 ;    1022       // new object index page
                                 ;    1023       // within this clause we return directly if something fails, object index mess-up
                                 ;    1024       if (written > 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1024
0000132F A901                    		MOV.L 10H[R0], R1
00001331 6101                    		CMP #00H, R1
00001333 3Arrrr               W  		BEQ L580
00001336                         L556:	; bb94
                                 ;    1025         // store previous object index page, unless first pass
                                 ;    1026         SPIFFS_DBG("append: %04x store objix %04x:%04x, written %i\n", fd->obj_id,
                                 ;    1027             cur_objix_pix, prev_objix_spix, written);
                                 ;    1028         if (prev_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1028
00001336 BC89                    		MOVU.W 26H[R0], R1
00001338 6101                    		CMP #00H, R1
0000133A 3Brrrr               W  		BNE L568
0000133D                         L557:	; bb95
                                 ;    1029           // this is an update to object index header page
                                 ;    1030           objix_hdr->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1030
0000133D AC89                    		MOV.L 4CH[R0], R1
0000133F 06890104                		ADD 10H[R0].L, R1
00001343 A90A                    		MOV.L 14H[R0], R2
00001345 A0A1                    		MOV.L R1, 08H[R2]
00001347                         L558:	; bb95.split
                                 ;    1031           if (offset == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1031
00001347 AC89                    		MOV.L 4CH[R0], R1
00001349 6101                    		CMP #00H, R1
0000134B AD02                    		MOV.L 50H[R0], R2
0000134D A881                    		MOV.L 08H[R0], R1
0000134F 21rr                    		BNE L565
00001351                         L559:	; bb102
                                 ;    1032             // was an empty object, update same page (size was 0xffffffff)
                                 ;    1033             res = spiffs_page_index_check(fs, fd, cur_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1033
00001351 BD03                    		MOVU.W 28H[R0], R3
00001353 6604                    		MOV.L #00000000H, R4
00001355 39rrrr               W  		BSR __$spiffs_page_index_check
00001358 A089                    		MOV.L R1, 0CH[R0]
0000135A                         L560:	; bb102.split
                                 ;    1034             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1034
0000135A A889                    		MOV.L 0CH[R0], R1
0000135C 69F1                    		SHLR #1FH, R1
0000135E 6101                    		CMP #00H, R1
00001360 10                   S  		BEQ L562
00001361                         L561:	; bb109
00001361 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001365 38rrrr               W  		BRA L702
00001368                         L562:	; bb117.split
                                 ;    1035             res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1035
00001368 A881                    		MOV.L 08H[R0], R1
0000136A AD02                    		MOV.L 50H[R0], R2
0000136C 98A3                    		MOV.W 04H[R2], R3
0000136E BD04                    		MOVU.W 28H[R0], R4
00001370 6080                    		SUB #08H, R0
00001372 E5100901                		MOV.L 24H[R1], 04H[R0]
00001376 F80A0001                		MOV.L #00000100H, [R0]
0000137A 6C84                    		SHLL #08H, R4
0000137C 7344000010              		ADD #00100000H, R4
00001381 6662                    		MOV.L #00000006H, R2
00001383 05rrrrrr             A  		BSR _spiffs_phys_wr
00001387 6280                    		ADD #08H, R0
00001389 A089                    		MOV.L R1, 0CH[R0]
0000138B                         L563:	; bb117.split9
                                 ;    1036                 fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1037             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1037
0000138B A889                    		MOV.L 0CH[R0], R1
0000138D 69F1                    		SHLR #1FH, R1
0000138F 6101                    		CMP #00H, R1
00001391 3Arrrr               W  		BEQ L578
00001394                         L564:	; bb132
00001394 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001398 38rrrr               W  		BRA L702
0000139B                         L565:	; bb141
                                 ;    1038           } else {
                                 ;    1039             // was a nonempty object, update to new page
                                 ;    1040             res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1040
0000139B AC8D                    		MOV.L 4CH[R0], R5
0000139D 06890504                		ADD 10H[R0].L, R5
000013A1 A883                    		MOV.L 08H[R0], R3
000013A3 ED3F09                  		MOV.L 24H[R3], R15
000013A6 AD03                    		MOV.L 50H[R0], R3
000013A8 B9B4                    		MOVU.W 0CH[R3], R4
000013AA B8BB                    		MOVU.W 06H[R3], R3
000013AC 7100F0                  		ADD #0FFFFFFF0H, R0
000013AF 710E3A                  		ADD #3AH, R0, R14
000013B2 E70E03                  		MOV.L R14, 0CH[R0]
000013B5 A085                    		MOV.L R5, 08H[R0]
000013B7 E30F                    		MOV.L R15, [R0]
000013B9 3E0100                  		MOV.L #00000000H, 04H[R0]
000013BC 39rrrr               W  		BSR _spiffs_object_update_index_hdr
000013BF 710010                  		ADD #10H, R0
000013C2 A089                    		MOV.L R1, 0CH[R0]
000013C4                         L566:	; bb141.split
                                 ;    1041                 fd->objix_hdr_pix, fs->work, 0, offset+written, &new_objix_hdr_page);
                                 ;    1042             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1042
000013C4 A889                    		MOV.L 0CH[R0], R1
000013C6 69F1                    		SHLR #1FH, R1
000013C8 6101                    		CMP #00H, R1
000013CA 3Arrrr               W  		BEQ L578
000013CD                         L567:	; bb159
000013CD E5000301                		MOV.L 0CH[R0], 04H[R0]
000013D1 38rrrr               W  		BRA L702
000013D4                         L568:	; bb173
                                 ;    1043             SPIFFS_DBG("append: %04x store new objix_hdr, %04x:%04x, written %i\n", fd->obj_id,
                                 ;    1044                 new_objix_hdr_page, 0, written);
                                 ;    1045           }
                                 ;    1046         } else {
                                 ;    1047           // this is an update to an object index page
                                 ;    1048           res = spiffs_page_index_check(fs, fd, cur_objix_pix, prev_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1048
000013D4 BC8C                    		MOVU.W 26H[R0], R4
000013D6 BD03                    		MOVU.W 28H[R0], R3
000013D8 AD02                    		MOV.L 50H[R0], R2
000013DA A881                    		MOV.L 08H[R0], R1
000013DC 39rrrr               W  		BSR __$spiffs_page_index_check
000013DF A089                    		MOV.L R1, 0CH[R0]
000013E1                         L569:	; bb173.split
                                 ;    1049           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1049
000013E1 A889                    		MOV.L 0CH[R0], R1
000013E3 69F1                    		SHLR #1FH, R1
000013E5 6101                    		CMP #00H, R1
000013E7 10                   S  		BEQ L571
000013E8                         L570:	; bb181
000013E8 E5000301                		MOV.L 0CH[R0], 04H[R0]
000013EC 38rrrr               W  		BRA L702
000013EF                         L571:	; bb189.split
                                 ;    1050 
                                 ;    1051           res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1051
000013EF A881                    		MOV.L 08H[R0], R1
000013F1 AD02                    		MOV.L 50H[R0], R2
000013F3 98A3                    		MOV.W 04H[R2], R3
000013F5 BD04                    		MOVU.W 28H[R0], R4
000013F7 6080                    		SUB #08H, R0
000013F9 E5100901                		MOV.L 24H[R1], 04H[R0]
000013FD F80A0001                		MOV.L #00000100H, [R0]
00001401 6C84                    		SHLL #08H, R4
00001403 7344000010              		ADD #00100000H, R4
00001408 6662                    		MOV.L #00000006H, R2
0000140A 05rrrrrr             A  		BSR _spiffs_phys_wr
0000140E 6280                    		ADD #08H, R0
00001410 A089                    		MOV.L R1, 0CH[R0]
00001412                         L572:	; bb189.split10
                                 ;    1052               fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1053           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1053
00001412 A889                    		MOV.L 0CH[R0], R1
00001414 69F1                    		SHLR #1FH, R1
00001416 6101                    		CMP #00H, R1
00001418 10                   S  		BEQ L574
00001419                         L573:	; bb204
00001419 E5000301                		MOV.L 0CH[R0], 04H[R0]
0000141D 38rrrr               W  		BRA L702
00001420                         L574:	; bb212.split
                                 ;    1054           spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD,fd->obj_id, objix->p_hdr.span_ix, cur_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1054
00001420 A981                    		MOV.L 18H[R0], R1
00001422 981B                    		MOV.W 02H[R1], R3
00001424 AD02                    		MOV.L 50H[R0], R2
00001426 B8AC                    		MOVU.W 06H[R2], R4
00001428 9D05                    		MOV.W 28H[R0], R5
0000142A A881                    		MOV.L 08H[R0], R1
0000142C 6080                    		SUB #08H, R0
0000142E 900D                    		MOV.W R5, 02H[R0]
00001430 D303                    		MOV.W R3, [R0]
00001432 3E0100                  		MOV.L #00000000H, 04H[R0]
00001435 6603                    		MOV.L #00000000H, R3
00001437 39rrrr               W  		BSR _spiffs_cb_object_event
0000143A 6280                    		ADD #08H, R0
0000143C                         L575:	; bb212.split11
                                 ;    1055           // update length in object index header page
                                 ;    1056           res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1056
0000143C AC8D                    		MOV.L 4CH[R0], R5
0000143E 06890504                		ADD 10H[R0].L, R5
00001442 AD02                    		MOV.L 50H[R0], R2
00001444 B9A4                    		MOVU.W 0CH[R2], R4
00001446 B8AB                    		MOVU.W 06H[R2], R3
00001448 A881                    		MOV.L 08H[R0], R1
0000144A 7100F0                  		ADD #0FFFFFFF0H, R0
0000144D 710F3A                  		ADD #3AH, R0, R15
00001450 E70F03                  		MOV.L R15, 0CH[R0]
00001453 A085                    		MOV.L R5, 08H[R0]
00001455 3E0100                  		MOV.L #00000000H, 04H[R0]
00001458 F80600                  		MOV.L #00000000H, [R0]
0000145B 39rrrr               W  		BSR _spiffs_object_update_index_hdr
0000145E 710010                  		ADD #10H, R0
00001461 A089                    		MOV.L R1, 0CH[R0]
00001463                         L576:	; bb212.split12
                                 ;    1057               fd->objix_hdr_pix, 0, 0, offset+written, &new_objix_hdr_page);
                                 ;    1058           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1058
00001463 A889                    		MOV.L 0CH[R0], R1
00001465 69F1                    		SHLR #1FH, R1
00001467 6101                    		CMP #00H, R1
00001469 10                   S  		BEQ L578
0000146A                         L577:	; bb237
0000146A E5000301                		MOV.L 0CH[R0], 04H[R0]
0000146E 38rrrr               W  		BRA L702
00001471                         L578:	; bb251
                                 ;    1059           SPIFFS_DBG("append: %04x store new size I %i in objix_hdr, %04x:%04x, written %i\n", fd->obj_id,
                                 ;    1060               offset+written, new_objix_hdr_page, 0, written);
                                 ;    1061         }
                                 ;    1062         fd->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1062
00001471 AC89                    		MOV.L 4CH[R0], R1
00001473 06890104                		ADD 10H[R0].L, R1
00001477 AD02                    		MOV.L 50H[R0], R2
00001479 A0A1                    		MOV.L R1, 08H[R2]
0000147B                         L579:	; bb251.split
                                 ;    1063         fd->offset = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1063
0000147B AC89                    		MOV.L 4CH[R0], R1
0000147D 06890104                		ADD 10H[R0].L, R1
00001481 AD02                    		MOV.L 50H[R0], R2
00001483 A129                    		MOV.L R1, 14H[R2]
00001485                         L580:	; bb267
                                 ;    1064       }
                                 ;    1065 
                                 ;    1066       // create or load new object index page
                                 ;    1067       if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1067
00001485 BC81                    		MOVU.W 24H[R0], R1
00001487 6101                    		CMP #00H, R1
00001489 3Brrrr               W  		BNE L596
0000148C                         L581:	; bb268
                                 ;    1068         // load object index header page, must always exist
                                 ;    1069         SPIFFS_DBG("append: %04x load objixhdr page %04x:%04x\n", fd->obj_id, cur_objix_pix, cur_objix_spix);
                                 ;    1070         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1070
0000148C A881                    		MOV.L 08H[R0], R1
0000148E AD02                    		MOV.L 50H[R0], R2
00001490 98A3                    		MOV.W 04H[R2], R3
00001492 BD04                    		MOVU.W 28H[R0], R4
00001494 6080                    		SUB #08H, R0
00001496 E5100901                		MOV.L 24H[R1], 04H[R0]
0000149A F80A0001                		MOV.L #00000100H, [R0]
0000149E 6C84                    		SHLL #08H, R4
000014A0 7344000010              		ADD #00100000H, R4
000014A5 754216                  		MOV.L #00000016H, R2
000014A8 05rrrrrr             A  		BSR _spiffs_phys_rd
000014AC 6280                    		ADD #08H, R0
000014AE A089                    		MOV.L R1, 0CH[R0]
000014B0                         L582:	; bb268.split
                                 ;    1071             fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1072         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1072
000014B0 A889                    		MOV.L 0CH[R0], R1
000014B2 69F1                    		SHLR #1FH, R1
000014B4 6101                    		CMP #00H, R1
000014B6 10                   S  		BEQ L584
000014B7                         L583:	; bb283
000014B7 E5000301                		MOV.L 0CH[R0], 04H[R0]
000014BB 38rrrr               W  		BRA L702
000014BE                         L584:	; bb292.split
                                 ;    1073         SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1073
000014BE A909                    		MOV.L 14H[R0], R1
000014C0 F51004                  		BTST #00H, 04H[R1].B
000014C3 10                   S  		BEQ L586
000014C4                         L585:	; bb293
000014C4 F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
000014C9 38rrrr               W  		BRA L702
000014CC                         L586:	; bb305
000014CC A909                    		MOV.L 14H[R0], R1
000014CE F51704                  		BTST #07H, 04H[R1].B
000014D1 18                   S  		BNE L588
000014D2                         L587:	; bb306
000014D2 F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
000014D7 38rrrr               W  		BRA L702
000014DA                         L588:	; bb318
000014DA A909                    		MOV.L 14H[R0], R1
000014DC F51104                  		BTST #01H, 04H[R1].B
000014DF 10                   S  		BEQ L590
000014E0                         L589:	; bb319
000014E0 F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
000014E5 38rrrr               W  		BRA L702
000014E8                         L590:	; bb331
000014E8 A909                    		MOV.L 14H[R0], R1
000014EA F51204                  		BTST #02H, 04H[R1].B
000014ED 10                   S  		BEQ L592
000014EE                         L591:	; bb332
000014EE F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
000014F3 38rrrr               W  		BRA L702
000014F6                         L592:	; bb344
000014F6 AD01                    		MOV.L 50H[R0], R1
000014F8 B899                    		MOVU.W 06H[R1], R1
000014FA 7CF1                    		BTST #0FH, R1
000014FC 18                   S  		BNE L594
000014FD                         L593:	; bb345
000014FD F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00001502 38rrrr               W  		BRA L702
00001505                         L594:	; bb356
00001505 A909                    		MOV.L 14H[R0], R1
00001507 B819                    		MOVU.W 02H[R1], R1
00001509 06C50112                		CMP 24H[R0].UW, R1
0000150D 3Arrrr               W  		BEQ L638
00001510                         L595:	; bb357
00001510 F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00001515 38rrrr               W  		BRA L702
00001518                         L596:	; bb370
                                 ;    1074       } else {
                                 ;    1075         spiffs_span_ix len_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, (fd->size-1)/SPIFFS_DATA_PAGE_SIZE(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1075
00001518 AD01                    		MOV.L 50H[R0], R1
0000151A A891                    		MOV.L 08H[R1], R1
0000151C 6011                    		SUB #01H, R1
0000151E FD7891FA00              		DIVU #0FAH, R1
00001523 755167                  		CMP #67H, R1
00001526 24rr                    		BGTU L598
00001528                         L597:	; bb378
00001528 F80600                  		MOV.L #00000000H, [R0]
0000152B 2Err                 B  		BRA L599
0000152D                         L598:	; bb379
0000152D AD01                    		MOV.L 50H[R0], R1
0000152F A891                    		MOV.L 08H[R1], R1
00001531 6011                    		SUB #01H, R1
00001533 FD7891FA00              		DIVU #0FAH, R1
00001538 711198                  		ADD #0FFFFFF98H, R1
0000153B FD74917C                		DIVU #7CH, R1
0000153F 6211                    		ADD #01H, R1
00001541 E301                    		MOV.L R1, [R0]
00001543                         L599:	; bb388
00001543 EC01                    		MOV.L [R0], R1
00001545 9781                    		MOV.W R1, 3CH[R0]
                                 ;    1076         // on subsequent passes, create a new object index page
                                 ;    1077         if (written > 0 || cur_objix_spix > len_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1077
00001547 A901                    		MOV.L 10H[R0], R1
00001549 6101                    		CMP #00H, R1
0000154B 3Brrrr               W  		BNE L631
0000154E 38rrrr               W  		BRA L630
00001551                         L600:	; bb393
                                 ;    1078           p_hdr.obj_id = fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1078
00001551 AD01                    		MOV.L 50H[R0], R1
00001553 9899                    		MOV.W 06H[R1], R1
00001555 78F1                    		BSET #0FH, R1
00001557 9389                    		MOV.W R1, 1EH[R0]
00001559                         L601:	; bb393.split
                                 ;    1079           p_hdr.span_ix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1079
00001559 D5001210                		MOV.W 24H[R0], 20H[R0]
0000155D                         L602:	; bb393.split13
                                 ;    1080           p_hdr.flags = 0xff & ~(SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_INDEX);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1080
0000155D F90422F9                		MOV.B #0F9H, 22H[R0]
00001561                         L603:	; bb393.split14
                                 ;    1081           res = spiffs_page_allocate_data(fs, fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1081
00001561 AD01                    		MOV.L 50H[R0], R1
00001563 B89A                    		MOVU.W 06H[R1], R2
00001565 A881                    		MOV.L 08H[R0], R1
00001567 7100F0                  		ADD #0FFFFFFF0H, R0
0000156A 710338                  		ADD #38H, R0, R3
0000156D A08B                    		MOV.L R3, 0CH[R0]
0000156F 3C0801                  		MOV.B #01H, 08H[R0]
00001572 3E0100                  		MOV.L #00000000H, 04H[R0]
00001575 F80600                  		MOV.L #00000000H, [R0]
00001578 78F2                    		BSET #0FH, R2
0000157A 6604                    		MOV.L #00000000H, R4
0000157C 71032E                  		ADD #2EH, R0, R3
0000157F 39rrrr               W  		BSR _spiffs_page_allocate_data
00001582 710010                  		ADD #10H, R0
00001585 A089                    		MOV.L R1, 0CH[R0]
00001587                         L604:	; bb393.split15
                                 ;    1082               &p_hdr, 0, 0, 0, 1, &cur_objix_pix);
                                 ;    1083           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1083
00001587 A889                    		MOV.L 0CH[R0], R1
00001589 69F1                    		SHLR #1FH, R1
0000158B 6101                    		CMP #00H, R1
0000158D 10                   S  		BEQ L606
0000158E                         L605:	; bb414
0000158E E5000301                		MOV.L 0CH[R0], 04H[R0]
00001592 38rrrr               W  		BRA L702
00001595                         L606:	; bb422.split
                                 ;    1084           spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_NEW, fd->obj_id, cur_objix_spix, cur_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1084
00001595 AD02                    		MOV.L 50H[R0], R2
00001597 B8AC                    		MOVU.W 06H[R2], R4
00001599 9D03                    		MOV.W 28H[R0], R3
0000159B 9C85                    		MOV.W 24H[R0], R5
0000159D A881                    		MOV.L 08H[R0], R1
0000159F 6080                    		SUB #08H, R0
000015A1 900B                    		MOV.W R3, 02H[R0]
000015A3 D305                    		MOV.W R5, [R0]
000015A5 3E0100                  		MOV.L #00000000H, 04H[R0]
000015A8 6613                    		MOV.L #00000001H, R3
000015AA 39rrrr               W  		BSR _spiffs_cb_object_event
000015AD 6280                    		ADD #08H, R0
000015AF                         L607:	; bb422.split16
                                 ;    1085           // quick "load" of new object index page
                                 ;    1086           memset(fs->work, 0xff, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1086
000015AF A881                    		MOV.L 08H[R0], R1
000015B1 AA19                    		MOV.L 24H[R1], R1
000015B3 FB3A0001                		MOV.L #00000100H, R3
000015B7 7542FF                  		MOV.L #000000FFH, R2
000015BA 7F88                    		SSTR.B
000015BC                         L608:	; bb422.split17
                                 ;    1087           memcpy(fs->work, &p_hdr, sizeof(spiffs_page_header));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1087
000015BC A881                    		MOV.L 08H[R0], R1
000015BE AA19                    		MOV.L 24H[R1], R1
000015C0 D5011102                		MOV.W 22H[R0], 04H[R1]
000015C4 710E1E                  		ADD #1EH, R0, R14
000015C7 E0E1                    		MOV.L [R14], [R1]
000015C9 38rrrr               W  		BRA L634
000015CC                         L609:	; bb438
                                 ;    1088           SPIFFS_DBG("append: %04x create objix page, %04x:%04x, written %i\n", fd->obj_id
                                 ;    1089               , cur_objix_pix, cur_objix_spix, written);
                                 ;    1090         } else {
                                 ;    1091           // on first pass, we load existing object index page
                                 ;    1092           spiffs_page_ix pix;
                                 ;    1093           SPIFFS_DBG("append: %04x find objix span_ix:%04x\n", fd->obj_id, cur_objix_spix);
                                 ;    1094           if (fd->cursor_objix_spix == cur_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1094
000015CC AD01                    		MOV.L 50H[R0], R1
000015CE BA11                    		MOVU.W 10H[R1], R1
000015D0 06C50112                		CMP 24H[R0].UW, R1
000015D4 18                   S  		BNE L611
000015D5                         L610:	; bb439
                                 ;    1095             pix = fd->cursor_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1095
000015D5 AD01                    		MOV.L 50H[R0], R1
000015D7 D510071F                		MOV.W 0EH[R1], 3EH[R0]
000015DB 2Err                 B  		BRA L614
000015DD                         L611:	; bb443
                                 ;    1096           } else {
                                 ;    1097             res = spiffs_obj_lu_find_id_and_span(fs, fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG, cur_objix_spix, 0, &pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1097
000015DD AD01                    		MOV.L 50H[R0], R1
000015DF B89A                    		MOVU.W 06H[R1], R2
000015E1 BC83                    		MOVU.W 24H[R0], R3
000015E3 A881                    		MOV.L 08H[R0], R1
000015E5 6040                    		SUB #04H, R0
000015E7 710E42                  		ADD #42H, R0, R14
000015EA E30E                    		MOV.L R14, [R0]
000015EC 78F2                    		BSET #0FH, R2
000015EE 6604                    		MOV.L #00000000H, R4
000015F0 39rrrr               W  		BSR _spiffs_obj_lu_find_id_and_span
000015F3 6240                    		ADD #04H, R0
000015F5 A089                    		MOV.L R1, 0CH[R0]
000015F7                         L612:	; bb443.split
                                 ;    1098             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1098
000015F7 A889                    		MOV.L 0CH[R0], R1
000015F9 69F1                    		SHLR #1FH, R1
000015FB 6101                    		CMP #00H, R1
000015FD 10                   S  		BEQ L614
000015FE                         L613:	; bb455
000015FE E5000301                		MOV.L 0CH[R0], 04H[R0]
00001602 38rrrr               W  		BRA L702
00001605                         L614:	; bb473
                                 ;    1099           }
                                 ;    1100           SPIFFS_DBG("append: %04x found object index at page %04x [fd size %i]\n", fd->obj_id, pix, fd->size);
                                 ;    1101           res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1101
00001605 A881                    		MOV.L 08H[R0], R1
00001607 AD02                    		MOV.L 50H[R0], R2
00001609 98A3                    		MOV.W 04H[R2], R3
0000160B BF8C                    		MOVU.W 3EH[R0], R4
0000160D 6080                    		SUB #08H, R0
0000160F E5100901                		MOV.L 24H[R1], 04H[R0]
00001613 F80A0001                		MOV.L #00000100H, [R0]
00001617 6C84                    		SHLL #08H, R4
00001619 7344000010              		ADD #00100000H, R4
0000161E 754216                  		MOV.L #00000016H, R2
00001621 05rrrrrr             A  		BSR _spiffs_phys_rd
00001625 6280                    		ADD #08H, R0
00001627 A089                    		MOV.L R1, 0CH[R0]
00001629                         L615:	; bb473.split
                                 ;    1102               fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1103           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1103
00001629 A889                    		MOV.L 0CH[R0], R1
0000162B 69F1                    		SHLR #1FH, R1
0000162D 6101                    		CMP #00H, R1
0000162F 10                   S  		BEQ L617
00001630                         L616:	; bb488
00001630 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001634 38rrrr               W  		BRA L702
00001637                         L617:	; bb497.split
                                 ;    1104           SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1104
00001637 A909                    		MOV.L 14H[R0], R1
00001639 F51004                  		BTST #00H, 04H[R1].B
0000163C 10                   S  		BEQ L619
0000163D                         L618:	; bb498
0000163D F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00001642 38rrrr               W  		BRA L702
00001645                         L619:	; bb510
00001645 A909                    		MOV.L 14H[R0], R1
00001647 F51704                  		BTST #07H, 04H[R1].B
0000164A 18                   S  		BNE L621
0000164B                         L620:	; bb511
0000164B F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00001650 38rrrr               W  		BRA L702
00001653                         L621:	; bb523
00001653 A909                    		MOV.L 14H[R0], R1
00001655 F51104                  		BTST #01H, 04H[R1].B
00001658 10                   S  		BEQ L623
00001659                         L622:	; bb524
00001659 F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
0000165E 38rrrr               W  		BRA L702
00001661                         L623:	; bb536
00001661 A909                    		MOV.L 14H[R0], R1
00001663 F51204                  		BTST #02H, 04H[R1].B
00001666 10                   S  		BEQ L625
00001667                         L624:	; bb537
00001667 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
0000166C 38rrrr               W  		BRA L702
0000166F                         L625:	; bb549
0000166F AD01                    		MOV.L 50H[R0], R1
00001671 B899                    		MOVU.W 06H[R1], R1
00001673 7CF1                    		BTST #0FH, R1
00001675 18                   S  		BNE L627
00001676                         L626:	; bb550
00001676 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
0000167B 38rrrr               W  		BRA L702
0000167E                         L627:	; bb561
0000167E A909                    		MOV.L 14H[R0], R1
00001680 B819                    		MOVU.W 02H[R1], R1
00001682 06C50112                		CMP 24H[R0].UW, R1
00001686 10                   S  		BEQ L629
00001687                         L628:	; bb562
00001687 F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
0000168C 38rrrr               W  		BRA L702
0000168F                         L629:	; bb574
                                 ;    1105           cur_objix_pix = pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1105
0000168F D5001F14                		MOV.W 3EH[R0], 28H[R0]
00001693 2Err                 B  		BRA L634
00001695                         L630:	; bb579
00001695 BC81                    		MOVU.W 24H[R0], R1
00001697 06C5011E                		CMP 3CH[R0].UW, R1
0000169B 2Brr                    		BLE L632
0000169D                         L631:	; bb586
0000169D F80601                  		MOV.L #00000001H, [R0]
000016A0 08                   S  		BRA L633
000016A1                         L632:	; bb587
000016A1 F80600                  		MOV.L #00000000H, [R0]
000016A4                         L633:	; bb588
000016A4 EC01                    		MOV.L [R0], R1
000016A6 6101                    		CMP #00H, R1
000016A8 3Brrrr               W  		BNE L600
000016AB 38rrrr               W  		BRA L609
000016AE                         L634:	; bb593
                                 ;    1106         }
                                 ;    1107         fd->cursor_objix_pix = cur_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1107
000016AE 9D01                    		MOV.W 28H[R0], R1
000016B0 AD02                    		MOV.L 50H[R0], R2
000016B2 91A9                    		MOV.W R1, 0EH[R2]
000016B4                         L635:	; bb593.split
                                 ;    1108         fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1108
000016B4 9C81                    		MOV.W 24H[R0], R1
000016B6 AD02                    		MOV.L 50H[R0], R2
000016B8 9221                    		MOV.W R1, 10H[R2]
000016BA                         L636:	; bb593.split18
                                 ;    1109         fd->offset = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1109
000016BA AC89                    		MOV.L 4CH[R0], R1
000016BC 06890104                		ADD 10H[R0].L, R1
000016C0 AD02                    		MOV.L 50H[R0], R2
000016C2 A129                    		MOV.L R1, 14H[R2]
000016C4                         L637:	; bb593.split19
                                 ;    1110         fd->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1110
000016C4 AC89                    		MOV.L 4CH[R0], R1
000016C6 06890104                		ADD 10H[R0].L, R1
000016CA AD02                    		MOV.L 50H[R0], R2
000016CC A0A1                    		MOV.L R1, 08H[R2]
000016CE                         L638:	; bb615
                                 ;    1111       }
                                 ;    1112       prev_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1112
000016CE D5001213                		MOV.W 24H[R0], 26H[R0]
000016D2                         L639:	; bb624
                                 ;    1113     }
                                 ;    1114 
                                 ;    1115     // write data
                                 ;    1116     u32_t to_write = MIN(len-written, SPIFFS_DATA_PAGE_SIZE(fs) - page_offs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1116
000016D2 AC09                    		MOV.L 44H[R0], R1
000016D4 06810104                		SUB 10H[R0].L, R1
000016D8 754EFA                  		MOV.L #000000FAH, R14
000016DB 06810E0C                		SUB 30H[R0].L, R14
000016DF 47E1                    		CMP R14, R1
000016E1 22rr                    		BGEU L641
000016E3                         L640:	; bb632
000016E3 AC09                    		MOV.L 44H[R0], R1
000016E5 06810104                		SUB 10H[R0].L, R1
000016E9 E301                    		MOV.L R1, [R0]
000016EB 08                   S  		BRA L642
000016EC                         L641:	; bb636
000016EC 7541FA                  		MOV.L #000000FAH, R1
000016EF 0681010C                		SUB 30H[R0].L, R1
000016F3 E301                    		MOV.L R1, [R0]
000016F5                         L642:	; bb639
000016F5 E4000E                  		MOV.L [R0], 38H[R0]
                                 ;    1117     if (page_offs == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1117
000016F8 AB01                    		MOV.L 30H[R0], R1
000016FA 6101                    		CMP #00H, R1
000016FC 21rr                    		BNE L647
000016FE                         L643:	; bb643
                                 ;    1118       // at beginning of a page, allocate and write a new page of data
                                 ;    1119       p_hdr.obj_id = fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1119
000016FE AD01                    		MOV.L 50H[R0], R1
00001700 B899                    		MOVU.W 06H[R1], R1
00001702 7621FF7F                		AND #7FFFH, R1
00001706 9389                    		MOV.W R1, 1EH[R0]
00001708                         L644:	; bb643.split
                                 ;    1120       p_hdr.span_ix = data_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1120
00001708 D5001610                		MOV.W 2CH[R0], 20H[R0]
0000170C                         L645:	; bb643.split20
                                 ;    1121       p_hdr.flags = 0xff & ~(SPIFFS_PH_FLAG_FINAL);  // finalize immediately
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1121
0000170C F90422FD                		MOV.B #0FDH, 22H[R0]
00001710                         L646:	; bb643.split21
                                 ;    1122       res = spiffs_page_allocate_data(fs, fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1122
00001710 AC84                    		MOV.L 48H[R0], R4
00001712 06890404                		ADD 10H[R0].L, R4
00001716 AD01                    		MOV.L 50H[R0], R1
00001718 B89A                    		MOVU.W 06H[R1], R2
0000171A AB03                    		MOV.L 30H[R0], R3
0000171C AB85                    		MOV.L 38H[R0], R5
0000171E A881                    		MOV.L 08H[R0], R1
00001720 7100F0                  		ADD #0FFFFFFF0H, R0
00001723 710F3E                  		ADD #3EH, R0, R15
00001726 E70F03                  		MOV.L R15, 0CH[R0]
00001729 A00B                    		MOV.L R3, 04H[R0]
0000172B E305                    		MOV.L R5, [R0]
0000172D 3C0801                  		MOV.B #01H, 08H[R0]
00001730 7622FF7F                		AND #7FFFH, R2
00001734 71032E                  		ADD #2EH, R0, R3
00001737 39rrrr               W  		BSR _spiffs_page_allocate_data
0000173A 710010                  		ADD #10H, R0
0000173D A089                    		MOV.L R1, 0CH[R0]
0000173F 38rrrr               W  		BRA L657
00001742                         L647:	; bb668
                                 ;    1123           &p_hdr, &data[written], to_write, page_offs, 1, &data_page);
                                 ;    1124       SPIFFS_DBG("append: %04x store new data page, %04x:%04x offset:%i, len %i, written %i\n", fd->obj_id,
                                 ;    1125           data_page, data_spix, page_offs, to_write, written);
                                 ;    1126     } else {
                                 ;    1127       // append to existing page, fill out free data in existing page
                                 ;    1128       if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1128
00001742 BC81                    		MOVU.W 24H[R0], R1
00001744 6101                    		CMP #00H, R1
00001746 21rr                    		BNE L649
00001748                         L648:	; bb669
                                 ;    1129         // get data page from object index header page
                                 ;    1130         data_page = ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1130
00001748 BD81                    		MOVU.W 2CH[R0], R1
0000174A 6C11                    		SHLL #01H, R1
0000174C 06890105                		ADD 14H[R0].L, R1
00001750 D5101817                		MOV.W 30H[R1], 2EH[R0]
00001754 2Err                 B  		BRA L653
00001756                         L649:	; bb678
                                 ;    1131       } else {
                                 ;    1132         // get data page from object index page
                                 ;    1133         data_page = ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1133
00001756 A981                    		MOV.L 18H[R0], R1
00001758 6281                    		ADD #08H, R1
0000175A BD82                    		MOVU.W 2CH[R0], R2
0000175C 755267                  		CMP #67H, R2
0000175F 24rr                    		BGTU L651
00001761                         L650:	; bb687
00001761 E302                    		MOV.L R2, [R0]
00001763 2Err                 B  		BRA L652
00001765                         L651:	; bb690
00001765 712298                  		ADD #0FFFFFF98H, R2
00001768 EF2E                    		MOV.L R2, R14
0000176A FD749E7C                		DIVU #7CH, R14
0000176E 751E7C                  		MUL #7CH, R14
00001771 43E2                    		SUB R14, R2
00001773 E302                    		MOV.L R2, [R0]
00001775                         L652:	; bb695
00001775 EC02                    		MOV.L [R0], R2
00001777 FE5211                  		MOV.W [R2,R1], R1
0000177A 9589                    		MOV.W R1, 2EH[R0]
0000177C                         L653:	; bb705
                                 ;    1134       }
                                 ;    1135 
                                 ;    1136       res = spiffs_page_data_check(fs, fd, data_page, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1136
0000177C BD84                    		MOVU.W 2CH[R0], R4
0000177E BD8B                    		MOVU.W 2EH[R0], R3
00001780 AD02                    		MOV.L 50H[R0], R2
00001782 A881                    		MOV.L 08H[R0], R1
00001784 39rrrr               W  		BSR __$spiffs_page_data_check
00001787 A089                    		MOV.L R1, 0CH[R0]
00001789                         L654:	; bb705.split
                                 ;    1137       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1137
00001789 A889                    		MOV.L 0CH[R0], R1
0000178B 69F1                    		SHLR #1FH, R1
0000178D 6101                    		CMP #00H, R1
0000178F 10                   S  		BEQ L656
00001790                         L655:	; bb713
00001790 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001794 38rrrr               W  		BRA L702
00001797                         L656:	; bb721.split
                                 ;    1138 
                                 ;    1139       res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1139
00001797 AC82                    		MOV.L 48H[R0], R2
00001799 06890204                		ADD 10H[R0].L, R2
0000179D AD01                    		MOV.L 50H[R0], R1
0000179F 9893                    		MOV.W 04H[R1], R3
000017A1 BD8C                    		MOVU.W 2EH[R0], R4
000017A3 6C84                    		SHLL #08H, R4
000017A5 0689040C                		ADD 30H[R0].L, R4
000017A9 AB85                    		MOV.L 38H[R0], R5
000017AB A881                    		MOV.L 08H[R0], R1
000017AD 6080                    		SUB #08H, R0
000017AF A00A                    		MOV.L R2, 04H[R0]
000017B1 E305                    		MOV.L R5, [R0]
000017B3 7344060010              		ADD #00100006H, R4
000017B8 6672                    		MOV.L #00000007H, R2
000017BA 05rrrrrr             A  		BSR _spiffs_phys_wr
000017BE 6280                    		ADD #08H, R0
000017C0 A089                    		MOV.L R1, 0CH[R0]
000017C2                         L657:	; bb743
                                 ;    1140           fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, data_page) + sizeof(spiffs_page_header) + page_offs, to_write, &data[written]);
                                 ;    1141       SPIFFS_DBG("append: %04x store to existing data page, %04x:%04x offset:%i, len %i, written %i\n", fd->obj_id
                                 ;    1142           , data_page, data_spix, page_offs, to_write, written);
                                 ;    1143     }
                                 ;    1144 
                                 ;    1145     if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1145
000017C2 A889                    		MOV.L 0CH[R0], R1
000017C4 6101                    		CMP #00H, R1
000017C6 21rr                    		BNE L673
000017C8                         L658:	; bb751
                                 ;    1146 
                                 ;    1147     // update memory representation of object index page with new data page
                                 ;    1148     if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1148
000017C8 BC81                    		MOVU.W 24H[R0], R1
000017CA 6101                    		CMP #00H, R1
000017CC 21rr                    		BNE L661
000017CE                         L659:	; bb752
                                 ;    1149       // update object index header page
                                 ;    1150       ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix] = data_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1150
000017CE BD81                    		MOVU.W 2CH[R0], R1
000017D0 6C11                    		SHLL #01H, R1
000017D2 06890105                		ADD 14H[R0].L, R1
000017D6 D5011718                		MOV.W 2EH[R0], 30H[R1]
000017DA                         L660:	; bb752.split
                                 ;    1151       SPIFFS_DBG("append: %04x wrote page %04x to objix_hdr entry %02x in mem\n", fd->obj_id
                                 ;    1152           , data_page, data_spix);
                                 ;    1153       objix_hdr->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1153
000017DA AC89                    		MOV.L 4CH[R0], R1
000017DC 06890104                		ADD 10H[R0].L, R1
000017E0 A90A                    		MOV.L 14H[R0], R2
000017E2 A0A1                    		MOV.L R1, 08H[R2]
000017E4 2Err                 B  		BRA L665
000017E6                         L661:	; bb766
                                 ;    1154     } else {
                                 ;    1155       // update object index page
                                 ;    1156       ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)] = data_page;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1156
000017E6 A981                    		MOV.L 18H[R0], R1
000017E8 6281                    		ADD #08H, R1
000017EA BD82                    		MOVU.W 2CH[R0], R2
000017EC 755267                  		CMP #67H, R2
000017EF 24rr                    		BGTU L663
000017F1                         L662:	; bb775
000017F1 E302                    		MOV.L R2, [R0]
000017F3 2Err                 B  		BRA L664
000017F5                         L663:	; bb778
000017F5 712298                  		ADD #0FFFFFF98H, R2
000017F8 EF2E                    		MOV.L R2, R14
000017FA FD749E7C                		DIVU #7CH, R14
000017FE 751E7C                  		MUL #7CH, R14
00001801 43E2                    		SUB R14, R2
00001803 E302                    		MOV.L R2, [R0]
00001805                         L664:	; bb783
00001805 9D8A                    		MOV.W 2EH[R0], R2
00001807 EC03                    		MOV.L [R0], R3
00001809 FE1312                  		MOV.W R2, [R3,R1]
0000180C                         L665:	; bb793
                                 ;    1157       SPIFFS_DBG("append: %04x wrote page %04x to objix entry %02x in mem\n", fd->obj_id
                                 ;    1158           , data_page, SPIFFS_OBJ_IX_ENTRY(fs, data_spix));
                                 ;    1159     }
                                 ;    1160 
                                 ;    1161     // update internals
                                 ;    1162     page_offs = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1162
0000180C 3E0C00                  		MOV.L #00000000H, 30H[R0]
0000180F                         L666:	; bb793.split
                                 ;    1163     data_spix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1163
0000180F 9D81                    		MOV.W 2CH[R0], R1
00001811 6211                    		ADD #01H, R1
00001813 9581                    		MOV.W R1, 2CH[R0]
00001815                         L667:	; bb793.split22
                                 ;    1164     written += to_write;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1164
00001815 A901                    		MOV.L 10H[R0], R1
00001817 0689010E                		ADD 38H[R0].L, R1
0000181B A101                    		MOV.L R1, 10H[R0]
0000181D                         L668:	; bb799
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1016
0000181D A889                    		MOV.L 0CH[R0], R1
0000181F 6101                    		CMP #00H, R1
00001821 21rr                    		BNE L671
00001823                         L669:	; bb803
00001823 A901                    		MOV.L 10H[R0], R1
00001825 06850111                		CMP 44H[R0].L, R1
00001829 22rr                    		BGEU L671
0000182B                         L670:	; bb808
0000182B F80601                  		MOV.L #00000001H, [R0]
0000182E 08                   S  		BRA L672
0000182F                         L671:	; bb809
0000182F F80600                  		MOV.L #00000000H, [R0]
00001832                         L672:	; bb810
00001832 EC01                    		MOV.L [R0], R1
00001834 6101                    		CMP #00H, R1
00001836 3Brrrr               W  		BNE L551
00001839                         L673:	; bb816
                                 ;    1165   } // while all data
                                 ;    1166 
                                 ;    1167   fd->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1167
00001839 AC89                    		MOV.L 4CH[R0], R1
0000183B 06890104                		ADD 10H[R0].L, R1
0000183F AD02                    		MOV.L 50H[R0], R2
00001841 A0A1                    		MOV.L R1, 08H[R2]
00001843                         L674:	; bb816.split
                                 ;    1168   fd->offset = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1168
00001843 AC89                    		MOV.L 4CH[R0], R1
00001845 06890104                		ADD 10H[R0].L, R1
00001849 AD02                    		MOV.L 50H[R0], R2
0000184B A129                    		MOV.L R1, 14H[R2]
0000184D                         L675:	; bb816.split23
                                 ;    1169   fd->cursor_objix_pix = cur_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1169
0000184D 9D01                    		MOV.W 28H[R0], R1
0000184F AD02                    		MOV.L 50H[R0], R2
00001851 91A9                    		MOV.W R1, 0EH[R2]
00001853                         L676:	; bb816.split24
                                 ;    1170   fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1170
00001853 9C81                    		MOV.W 24H[R0], R1
00001855 AD02                    		MOV.L 50H[R0], R2
00001857 9221                    		MOV.W R1, 10H[R2]
00001859                         L677:	; bb816.split25
                                 ;    1171 
                                 ;    1172   // finalize updated object indices
                                 ;    1173   s32_t res2 = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1173
00001859 3E0D00                  		MOV.L #00000000H, 34H[R0]
0000185C                         L678:	; bb816.split26
                                 ;    1174   if (cur_objix_spix != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1174
0000185C BC81                    		MOVU.W 24H[R0], R1
0000185E 6101                    		CMP #00H, R1
00001860 3Arrrr               W  		BEQ L689
00001863                         L679:	; bb834
                                 ;    1175     // wrote beyond object index header page
                                 ;    1176     // write last modified object index page, unless object header index page
                                 ;    1177     SPIFFS_DBG("append: %04x store objix page, %04x:%04x, written %i\n", fd->obj_id,
                                 ;    1178         cur_objix_pix, cur_objix_spix, written);
                                 ;    1179 
                                 ;    1180     res2 = spiffs_page_index_check(fs, fd, cur_objix_pix, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1180
00001863 BC84                    		MOVU.W 24H[R0], R4
00001865 BD03                    		MOVU.W 28H[R0], R3
00001867 AD02                    		MOV.L 50H[R0], R2
00001869 A881                    		MOV.L 08H[R0], R1
0000186B 39rrrr               W  		BSR __$spiffs_page_index_check
0000186E A309                    		MOV.L R1, 34H[R0]
00001870                         L680:	; bb834.split
                                 ;    1181     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1181
00001870 AB09                    		MOV.L 34H[R0], R1
00001872 69F1                    		SHLR #1FH, R1
00001874 6101                    		CMP #00H, R1
00001876 10                   S  		BEQ L682
00001877                         L681:	; bb842
00001877 E5000D01                		MOV.L 34H[R0], 04H[R0]
0000187B 38rrrr               W  		BRA L702
0000187E                         L682:	; bb850.split
                                 ;    1182 
                                 ;    1183     res2 = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1183
0000187E A881                    		MOV.L 08H[R0], R1
00001880 AD02                    		MOV.L 50H[R0], R2
00001882 98A3                    		MOV.W 04H[R2], R3
00001884 BD04                    		MOVU.W 28H[R0], R4
00001886 6080                    		SUB #08H, R0
00001888 E5100901                		MOV.L 24H[R1], 04H[R0]
0000188C F80A0001                		MOV.L #00000100H, [R0]
00001890 6C84                    		SHLL #08H, R4
00001892 7344000010              		ADD #00100000H, R4
00001897 6662                    		MOV.L #00000006H, R2
00001899 05rrrrrr             A  		BSR _spiffs_phys_wr
0000189D 6280                    		ADD #08H, R0
0000189F A309                    		MOV.L R1, 34H[R0]
000018A1                         L683:	; bb850.split27
                                 ;    1184         fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1185     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1185
000018A1 AB09                    		MOV.L 34H[R0], R1
000018A3 69F1                    		SHLR #1FH, R1
000018A5 6101                    		CMP #00H, R1
000018A7 10                   S  		BEQ L685
000018A8                         L684:	; bb865
000018A8 E5000D01                		MOV.L 34H[R0], 04H[R0]
000018AC 38rrrr               W  		BRA L702
000018AF                         L685:	; bb873.split
                                 ;    1186     spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, fd->obj_id, objix->p_hdr.span_ix, cur_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1186
000018AF A981                    		MOV.L 18H[R0], R1
000018B1 981B                    		MOV.W 02H[R1], R3
000018B3 AD02                    		MOV.L 50H[R0], R2
000018B5 B8AC                    		MOVU.W 06H[R2], R4
000018B7 9D05                    		MOV.W 28H[R0], R5
000018B9 A881                    		MOV.L 08H[R0], R1
000018BB 6080                    		SUB #08H, R0
000018BD 900D                    		MOV.W R5, 02H[R0]
000018BF D303                    		MOV.W R3, [R0]
000018C1 3E0100                  		MOV.L #00000000H, 04H[R0]
000018C4 6603                    		MOV.L #00000000H, R3
000018C6 39rrrr               W  		BSR _spiffs_cb_object_event
000018C9 6280                    		ADD #08H, R0
000018CB                         L686:	; bb873.split28
                                 ;    1187 
                                 ;    1188     // update size in object header index page
                                 ;    1189     res2 = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1189
000018CB AC8D                    		MOV.L 4CH[R0], R5
000018CD 06890504                		ADD 10H[R0].L, R5
000018D1 AD02                    		MOV.L 50H[R0], R2
000018D3 B9A4                    		MOVU.W 0CH[R2], R4
000018D5 B8AB                    		MOVU.W 06H[R2], R3
000018D7 A881                    		MOV.L 08H[R0], R1
000018D9 7100F0                  		ADD #0FFFFFFF0H, R0
000018DC 710F3A                  		ADD #3AH, R0, R15
000018DF E70F03                  		MOV.L R15, 0CH[R0]
000018E2 A085                    		MOV.L R5, 08H[R0]
000018E4 3E0100                  		MOV.L #00000000H, 04H[R0]
000018E7 F80600                  		MOV.L #00000000H, [R0]
000018EA 39rrrr               W  		BSR _spiffs_object_update_index_hdr
000018ED 710010                  		ADD #10H, R0
000018F0 A309                    		MOV.L R1, 34H[R0]
000018F2                         L687:	; bb873.split29
                                 ;    1190         fd->objix_hdr_pix, 0, 0, offset+written, &new_objix_hdr_page);
                                 ;    1191     SPIFFS_DBG("append: %04x store new size II %i in objix_hdr, %04x:%04x, written %i, res %i\n", fd->obj_id
                                 ;    1192         , offset+written, new_objix_hdr_page, 0, written, res2);
                                 ;    1193     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1193
000018F2 AB09                    		MOV.L 34H[R0], R1
000018F4 69F1                    		SHLR #1FH, R1
000018F6 6101                    		CMP #00H, R1
000018F8 3Arrrr               W  		BEQ L701
000018FB                         L688:	; bb898
000018FB E5000D01                		MOV.L 34H[R0], 04H[R0]
000018FF 38rrrr               W  		BRA L702
00001902                         L689:	; bb908
                                 ;    1194   } else {
                                 ;    1195     // wrote within object index header page
                                 ;    1196     if (offset == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1196
00001902 AC89                    		MOV.L 4CH[R0], R1
00001904 6101                    		CMP #00H, R1
00001906 21rr                    		BNE L698
00001908                         L690:	; bb909
                                 ;    1197       // wrote to empty object - simply update size and write whole page
                                 ;    1198       objix_hdr->size = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1198
00001908 AC89                    		MOV.L 4CH[R0], R1
0000190A 06890104                		ADD 10H[R0].L, R1
0000190E A90A                    		MOV.L 14H[R0], R2
00001910 A0A1                    		MOV.L R1, 08H[R2]
00001912                         L691:	; bb909.split
                                 ;    1199       SPIFFS_DBG("append: %04x store fresh objix_hdr page, %04x:%04x, written %i\n", fd->obj_id
                                 ;    1200           , cur_objix_pix, cur_objix_spix, written);
                                 ;    1201 
                                 ;    1202       res2 = spiffs_page_index_check(fs, fd, cur_objix_pix, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1202
00001912 BC84                    		MOVU.W 24H[R0], R4
00001914 BD03                    		MOVU.W 28H[R0], R3
00001916 AD02                    		MOV.L 50H[R0], R2
00001918 A881                    		MOV.L 08H[R0], R1
0000191A 39rrrr               W  		BSR __$spiffs_page_index_check
0000191D A309                    		MOV.L R1, 34H[R0]
0000191F                         L692:	; bb909.split30
                                 ;    1203       SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1203
0000191F AB09                    		MOV.L 34H[R0], R1
00001921 69F1                    		SHLR #1FH, R1
00001923 6101                    		CMP #00H, R1
00001925 10                   S  		BEQ L694
00001926                         L693:	; bb922
00001926 E5000D01                		MOV.L 34H[R0], 04H[R0]
0000192A 38rrrr               W  		BRA L702
0000192D                         L694:	; bb930.split
                                 ;    1204 
                                 ;    1205       res2 = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1205
0000192D A881                    		MOV.L 08H[R0], R1
0000192F AD02                    		MOV.L 50H[R0], R2
00001931 98A3                    		MOV.W 04H[R2], R3
00001933 BD04                    		MOVU.W 28H[R0], R4
00001935 6080                    		SUB #08H, R0
00001937 E5100901                		MOV.L 24H[R1], 04H[R0]
0000193B F80A0001                		MOV.L #00000100H, [R0]
0000193F 6C84                    		SHLL #08H, R4
00001941 7344000010              		ADD #00100000H, R4
00001946 6662                    		MOV.L #00000006H, R2
00001948 05rrrrrr             A  		BSR _spiffs_phys_wr
0000194C 6280                    		ADD #08H, R0
0000194E A309                    		MOV.L R1, 34H[R0]
00001950                         L695:	; bb930.split31
                                 ;    1206           fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1207       SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1207
00001950 AB09                    		MOV.L 34H[R0], R1
00001952 69F1                    		SHLR #1FH, R1
00001954 6101                    		CMP #00H, R1
00001956 10                   S  		BEQ L697
00001957                         L696:	; bb945
00001957 E5000D01                		MOV.L 34H[R0], 04H[R0]
0000195B 2Err                 B  		BRA L702
0000195D                         L697:	; bb953.split
                                 ;    1208       // callback on object index update
                                 ;    1209       spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, fd->obj_id, objix_hdr->p_hdr.span_ix, cur_objix_pix, objix_hdr->size);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1209
0000195D A90B                    		MOV.L 14H[R0], R3
0000195F 983D                    		MOV.W 02H[R3], R5
00001961 AD02                    		MOV.L 50H[R0], R2
00001963 B8AC                    		MOVU.W 06H[R2], R4
00001965 DD0F14                  		MOV.W 28H[R0], R15
00001968 A881                    		MOV.L 08H[R0], R1
0000196A 6080                    		SUB #08H, R0
0000196C E5300201                		MOV.L 08H[R3], 04H[R0]
00001970 D70F01                  		MOV.W R15, 02H[R0]
00001973 D305                    		MOV.W R5, [R0]
00001975 6603                    		MOV.L #00000000H, R3
00001977 39rrrr               W  		BSR _spiffs_cb_object_event
0000197A 6280                    		ADD #08H, R0
0000197C 2Err                 B  		BRA L701
0000197E                         L698:	; bb967
                                 ;    1210     } else {
                                 ;    1211       // modifying object index header page, update size and make new copy
                                 ;    1212       res2 = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1212
0000197E AC8D                    		MOV.L 4CH[R0], R5
00001980 06890504                		ADD 10H[R0].L, R5
00001984 A881                    		MOV.L 08H[R0], R1
00001986 ED1F09                  		MOV.L 24H[R1], R15
00001989 AD02                    		MOV.L 50H[R0], R2
0000198B B9A4                    		MOVU.W 0CH[R2], R4
0000198D B8AB                    		MOVU.W 06H[R2], R3
0000198F 7100F0                  		ADD #0FFFFFFF0H, R0
00001992 710E3A                  		ADD #3AH, R0, R14
00001995 E70E03                  		MOV.L R14, 0CH[R0]
00001998 A085                    		MOV.L R5, 08H[R0]
0000199A E30F                    		MOV.L R15, [R0]
0000199C 3E0100                  		MOV.L #00000000H, 04H[R0]
0000199F 39rrrr               W  		BSR _spiffs_object_update_index_hdr
000019A2 710010                  		ADD #10H, R0
000019A5 A309                    		MOV.L R1, 34H[R0]
000019A7                         L699:	; bb967.split
                                 ;    1213           fd->objix_hdr_pix, fs->work, 0, offset+written, &new_objix_hdr_page);
                                 ;    1214       SPIFFS_DBG("append: %04x store modified objix_hdr page, %04x:%04x, written %i\n", fd->obj_id
                                 ;    1215           , new_objix_hdr_page, 0, written);
                                 ;    1216       SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1216
000019A7 AB09                    		MOV.L 34H[R0], R1
000019A9 69F1                    		SHLR #1FH, R1
000019AB 6101                    		CMP #00H, R1
000019AD 10                   S  		BEQ L701
000019AE                         L700:	; bb985
000019AE E5000D01                		MOV.L 34H[R0], 04H[R0]
000019B2 08                   S  		BRA L702
000019B3                         L701:	; bb1004
                                 ;    1217     }
                                 ;    1218   }
                                 ;    1219 
                                 ;    1220   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1220
000019B3 E5000301                		MOV.L 0CH[R0], 04H[R0]
000019B7                         L702:	; bb1007
000019B7 A809                    		MOV.L 04H[R0], R1
000019B9 A401                    		MOV.L R1, 40H[R0]
                                 ;    1221 } // spiffs_object_append
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1221
000019BB 6715                    		RTSD #54H
000019BD                         _spiffs_object_modify:
                                 		.STACK	_spiffs_object_modify=108
                                 ;    1222 #endif // !SPIFFS_READ_ONLY
                                 ;    1223 
                                 ;    1224 #if !SPIFFS_READ_ONLY
                                 ;    1225 // Modify object
                                 ;    1226 // keep current object index (header) page in fs->work buffer
                                 ;    1227 s32_t spiffs_object_modify(spiffs_fd *fd, u32_t offset, u8_t *data, u32_t len) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1227
000019BD 7100A8                  		ADD #0FFFFFFA8H, R0
000019C0 A509                    		MOV.L R1, 54H[R0]
000019C2 A502                    		MOV.L R2, 50H[R0]
000019C4 A48B                    		MOV.L R3, 4CH[R0]
000019C6 A484                    		MOV.L R4, 48H[R0]
                                 ;    1228   spiffs *fs = fd->fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1228
000019C8 AD09                    		MOV.L 54H[R0], R1
000019CA E41002                  		MOV.L [R1], 08H[R0]
000019CD                         L704:	; entry.split
                                 ;    1229   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1229
000019CD 3E0300                  		MOV.L #00000000H, 0CH[R0]
000019D0                         L705:	; entry.split1
                                 ;    1230   u32_t written = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1230
000019D0 3E0400                  		MOV.L #00000000H, 10H[R0]
000019D3                         L706:	; entry.split2
                                 ;    1231 
                                 ;    1232   res = spiffs_gc_check(fs, len + SPIFFS_DATA_PAGE_SIZE(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1232
000019D3 AC82                    		MOV.L 48H[R0], R2
000019D5 A881                    		MOV.L 08H[R0], R1
000019D7 7222FA00                		ADD #0FAH, R2
000019DB 05rrrrrr             A  		BSR _spiffs_gc_check
000019DF A089                    		MOV.L R1, 0CH[R0]
000019E1                         L707:	; entry.split3
                                 ;    1233   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1233
000019E1 A889                    		MOV.L 0CH[R0], R1
000019E3 69F1                    		SHLR #1FH, R1
000019E5 6101                    		CMP #00H, R1
000019E7 10                   S  		BEQ L709
000019E8                         L708:	; bb33
000019E8 E5000301                		MOV.L 0CH[R0], 04H[R0]
000019EC 38rrrr               W  		BRA L841
000019EF                         L709:	; bb40
                                 ;    1234 
                                 ;    1235   spiffs_page_object_ix_header *objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1235
000019EF A881                    		MOV.L 08H[R0], R1
000019F1 E5100905                		MOV.L 24H[R1], 14H[R0]
000019F5                         L710:	; bb40.split
                                 ;    1236   spiffs_page_object_ix *objix = (spiffs_page_object_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1236
000019F5 A881                    		MOV.L 08H[R0], R1
000019F7 E5100906                		MOV.L 24H[R1], 18H[R0]
000019FB                         L711:	; bb40.split4
                                 ;    1237   spiffs_page_header p_hdr;
                                 ;    1238 
                                 ;    1239   spiffs_span_ix cur_objix_spix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1239
000019FB 3D8200                  		MOV.W #0000H, 24H[R0]
000019FE                         L712:	; bb40.split5
                                 ;    1240   spiffs_span_ix prev_objix_spix = (spiffs_span_ix)-1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1240
000019FE F90913FFFF              		MOV.W #0FFFFH, 26H[R0]
00001A03                         L713:	; bb40.split6
                                 ;    1241   spiffs_page_ix cur_objix_pix = fd->objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1241
00001A03 AD09                    		MOV.L 54H[R0], R1
00001A05 D5100614                		MOV.W 0CH[R1], 28H[R0]
00001A09                         L714:	; bb40.split7
                                 ;    1242   spiffs_page_ix new_objix_hdr_pix;
                                 ;    1243 
                                 ;    1244   spiffs_span_ix data_spix = offset / SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1244
00001A09 AD01                    		MOV.L 50H[R0], R1
00001A0B FD7891FA00              		DIVU #0FAH, R1
00001A10 9581                    		MOV.W R1, 2CH[R0]
00001A12                         L715:	; bb40.split8
                                 ;    1245   spiffs_page_ix data_pix;
                                 ;    1246   u32_t page_offs = offset % SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1246
00001A12 AD01                    		MOV.L 50H[R0], R1
00001A14 EF1E                    		MOV.L R1, R14
00001A16 FD789EFA00              		DIVU #0FAH, R14
00001A1B 761EFA00                		MUL #0FAH, R14
00001A1F 43E1                    		SUB R14, R1
00001A21 A301                    		MOV.L R1, 30H[R0]
00001A23 38rrrr               W  		BRA L818
00001A26                         L716:	; bb57
                                 ;    1247 
                                 ;    1248 
                                 ;    1249   // write all data
                                 ;    1250   while (res == SPIFFS_OK && written < len) {
                                 ;    1251     // calculate object index page span index
                                 ;    1252     cur_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1252
00001A26 BD81                    		MOVU.W 2CH[R0], R1
00001A28 755167                  		CMP #67H, R1
00001A2B 24rr                    		BGTU L718
00001A2D                         L717:	; bb62
00001A2D F80600                  		MOV.L #00000000H, [R0]
00001A30 2Err                 B  		BRA L719
00001A32                         L718:	; bb63
00001A32 BD81                    		MOVU.W 2CH[R0], R1
00001A34 711198                  		ADD #0FFFFFF98H, R1
00001A37 FD74917C                		DIVU #7CH, R1
00001A3B 6211                    		ADD #01H, R1
00001A3D E301                    		MOV.L R1, [R0]
00001A3F                         L719:	; bb69
00001A3F EC01                    		MOV.L [R0], R1
00001A41 9481                    		MOV.W R1, 24H[R0]
                                 ;    1253 
                                 ;    1254     // handle storing and loading of object indices
                                 ;    1255     if (cur_objix_spix != prev_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1255
00001A43 BC81                    		MOVU.W 24H[R0], R1
00001A45 06C50113                		CMP 26H[R0].UW, R1
00001A49 3Arrrr               W  		BEQ L773
00001A4C                         L720:	; bb75
                                 ;    1256       // new object index page
                                 ;    1257       // within this clause we return directly if something fails, object index mess-up
                                 ;    1258       if (written > 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1258
00001A4C A901                    		MOV.L 10H[R0], R1
00001A4E 6101                    		CMP #00H, R1
00001A50 3Arrrr               W  		BEQ L732
00001A53                         L721:	; bb77
                                 ;    1259         // store previous object index (header) page, unless first pass
                                 ;    1260         if (prev_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1260
00001A53 BC89                    		MOVU.W 26H[R0], R1
00001A55 6101                    		CMP #00H, R1
00001A57 AD0A                    		MOV.L 54H[R0], R2
00001A59 A881                    		MOV.L 08H[R0], R1
00001A5B 21rr                    		BNE L725
00001A5D                         L722:	; bb78
                                 ;    1261           // store previous object index header page
                                 ;    1262           res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1262
00001A5D A883                    		MOV.L 08H[R0], R3
00001A5F AA3D                    		MOV.L 24H[R3], R5
00001A61 AD0B                    		MOV.L 54H[R0], R3
00001A63 B9B4                    		MOVU.W 0CH[R3], R4
00001A65 B8BB                    		MOVU.W 06H[R3], R3
00001A67 7100F0                  		ADD #0FFFFFFF0H, R0
00001A6A 710F3A                  		ADD #3AH, R0, R15
00001A6D E70F03                  		MOV.L R15, 0CH[R0]
00001A70 E305                    		MOV.L R5, [R0]
00001A72 3E0200                  		MOV.L #00000000H, 08H[R0]
00001A75 3E0100                  		MOV.L #00000000H, 04H[R0]
00001A78 39rrrr               W  		BSR _spiffs_object_update_index_hdr
00001A7B 710010                  		ADD #10H, R0
00001A7E A089                    		MOV.L R1, 0CH[R0]
00001A80                         L723:	; bb78.split
                                 ;    1263               fd->objix_hdr_pix, fs->work, 0, 0, &new_objix_hdr_pix);
                                 ;    1264           SPIFFS_DBG("modify: store modified objix_hdr page, %04x:%04x, written %i\n", new_objix_hdr_pix, 0, written);
                                 ;    1265           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1265
00001A80 A889                    		MOV.L 0CH[R0], R1
00001A82 69F1                    		SHLR #1FH, R1
00001A84 6101                    		CMP #00H, R1
00001A86 20rr                    		BEQ L732
00001A88                         L724:	; bb93
00001A88 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001A8C 38rrrr               W  		BRA L841
00001A8F                         L725:	; bb102
                                 ;    1266         } else {
                                 ;    1267           // store new version of previous object index page
                                 ;    1268           spiffs_page_ix new_objix_pix;
                                 ;    1269 
                                 ;    1270           res = spiffs_page_index_check(fs, fd, cur_objix_pix, prev_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1270
00001A8F BC8C                    		MOVU.W 26H[R0], R4
00001A91 BD03                    		MOVU.W 28H[R0], R3
00001A93 39rrrr               W  		BSR __$spiffs_page_index_check
00001A96 A089                    		MOV.L R1, 0CH[R0]
00001A98                         L726:	; bb102.split
                                 ;    1271           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1271
00001A98 A889                    		MOV.L 0CH[R0], R1
00001A9A 69F1                    		SHLR #1FH, R1
00001A9C 6101                    		CMP #00H, R1
00001A9E 10                   S  		BEQ L728
00001A9F                         L727:	; bb110
00001A9F E5000301                		MOV.L 0CH[R0], 04H[R0]
00001AA3 38rrrr               W  		BRA L841
00001AA6                         L728:	; bb118.split
                                 ;    1272 
                                 ;    1273           res = spiffs_page_move(fs, fd->file_nbr, (u8_t*)objix, fd->obj_id, 0, cur_objix_pix, &new_objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1273
00001AA6 AD09                    		MOV.L 54H[R0], R1
00001AA8 B89C                    		MOVU.W 06H[R1], R4
00001AAA 9892                    		MOV.W 04H[R1], R2
00001AAC 9D05                    		MOV.W 28H[R0], R5
00001AAE A983                    		MOV.L 18H[R0], R3
00001AB0 A881                    		MOV.L 08H[R0], R1
00001AB2 60C0                    		SUB #0CH, R0
00001AB4 710F4A                  		ADD #4AH, R0, R15
00001AB7 E70F02                  		MOV.L R15, 08H[R0]
00001ABA 9085                    		MOV.W R5, 04H[R0]
00001ABC F80600                  		MOV.L #00000000H, [R0]
00001ABF 39rrrr               W  		BSR _spiffs_page_move
00001AC2 62C0                    		ADD #0CH, R0
00001AC4 A089                    		MOV.L R1, 0CH[R0]
00001AC6                         L729:	; bb118.split9
                                 ;    1274           SPIFFS_DBG("modify: store previous modified objix page, %04x:%04x, written %i\n", new_objix_pix, objix->p_hdr.span_ix, written);
                                 ;    1275           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1275
00001AC6 A889                    		MOV.L 0CH[R0], R1
00001AC8 69F1                    		SHLR #1FH, R1
00001ACA 6101                    		CMP #00H, R1
00001ACC 10                   S  		BEQ L731
00001ACD                         L730:	; bb132
00001ACD E5000301                		MOV.L 0CH[R0], 04H[R0]
00001AD1 38rrrr               W  		BRA L841
00001AD4                         L731:	; bb140.split
                                 ;    1276           spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, fd->obj_id, objix->p_hdr.span_ix, new_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1276
00001AD4 A981                    		MOV.L 18H[R0], R1
00001AD6 981B                    		MOV.W 02H[R1], R3
00001AD8 AD0A                    		MOV.L 54H[R0], R2
00001ADA B8AC                    		MOVU.W 06H[R2], R4
00001ADC 9F8D                    		MOV.W 3EH[R0], R5
00001ADE A881                    		MOV.L 08H[R0], R1
00001AE0 6080                    		SUB #08H, R0
00001AE2 900D                    		MOV.W R5, 02H[R0]
00001AE4 D303                    		MOV.W R3, [R0]
00001AE6 3E0100                  		MOV.L #00000000H, 04H[R0]
00001AE9 6603                    		MOV.L #00000000H, R3
00001AEB 39rrrr               W  		BSR _spiffs_cb_object_event
00001AEE 6280                    		ADD #08H, R0
00001AF0                         L732:	; bb162
                                 ;    1277         }
                                 ;    1278       }
                                 ;    1279 
                                 ;    1280       // load next object index page
                                 ;    1281       if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1281
00001AF0 BC81                    		MOVU.W 24H[R0], R1
00001AF2 6101                    		CMP #00H, R1
00001AF4 3Brrrr               W  		BNE L748
00001AF7                         L733:	; bb163
                                 ;    1282         // load object index header page, must exist
                                 ;    1283         SPIFFS_DBG("modify: load objixhdr page %04x:%04x\n", cur_objix_pix, cur_objix_spix);
                                 ;    1284         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1284
00001AF7 A881                    		MOV.L 08H[R0], R1
00001AF9 AD0A                    		MOV.L 54H[R0], R2
00001AFB 98A3                    		MOV.W 04H[R2], R3
00001AFD BD04                    		MOVU.W 28H[R0], R4
00001AFF 6080                    		SUB #08H, R0
00001B01 E5100901                		MOV.L 24H[R1], 04H[R0]
00001B05 F80A0001                		MOV.L #00000100H, [R0]
00001B09 6C84                    		SHLL #08H, R4
00001B0B 7344000010              		ADD #00100000H, R4
00001B10 754216                  		MOV.L #00000016H, R2
00001B13 05rrrrrr             A  		BSR _spiffs_phys_rd
00001B17 6280                    		ADD #08H, R0
00001B19 A089                    		MOV.L R1, 0CH[R0]
00001B1B                         L734:	; bb163.split
                                 ;    1285             fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, cur_objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1286         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1286
00001B1B A889                    		MOV.L 0CH[R0], R1
00001B1D 69F1                    		SHLR #1FH, R1
00001B1F 6101                    		CMP #00H, R1
00001B21 10                   S  		BEQ L736
00001B22                         L735:	; bb178
00001B22 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001B26 38rrrr               W  		BRA L841
00001B29                         L736:	; bb187.split
                                 ;    1287         SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1287
00001B29 A909                    		MOV.L 14H[R0], R1
00001B2B F51004                  		BTST #00H, 04H[R1].B
00001B2E 10                   S  		BEQ L738
00001B2F                         L737:	; bb188
00001B2F F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00001B34 38rrrr               W  		BRA L841
00001B37                         L738:	; bb200
00001B37 A909                    		MOV.L 14H[R0], R1
00001B39 F51704                  		BTST #07H, 04H[R1].B
00001B3C 18                   S  		BNE L740
00001B3D                         L739:	; bb201
00001B3D F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00001B42 38rrrr               W  		BRA L841
00001B45                         L740:	; bb213
00001B45 A909                    		MOV.L 14H[R0], R1
00001B47 F51104                  		BTST #01H, 04H[R1].B
00001B4A 10                   S  		BEQ L742
00001B4B                         L741:	; bb214
00001B4B F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00001B50 38rrrr               W  		BRA L841
00001B53                         L742:	; bb226
00001B53 A909                    		MOV.L 14H[R0], R1
00001B55 F51204                  		BTST #02H, 04H[R1].B
00001B58 10                   S  		BEQ L744
00001B59                         L743:	; bb227
00001B59 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00001B5E 38rrrr               W  		BRA L841
00001B61                         L744:	; bb239
00001B61 AD09                    		MOV.L 54H[R0], R1
00001B63 B899                    		MOVU.W 06H[R1], R1
00001B65 7CF1                    		BTST #0FH, R1
00001B67 18                   S  		BNE L746
00001B68                         L745:	; bb240
00001B68 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00001B6D 38rrrr               W  		BRA L841
00001B70                         L746:	; bb251
00001B70 A909                    		MOV.L 14H[R0], R1
00001B72 B819                    		MOVU.W 02H[R1], R1
00001B74 06C50112                		CMP 24H[R0].UW, R1
00001B78 3Arrrr               W  		BEQ L769
00001B7B                         L747:	; bb252
00001B7B F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00001B80 38rrrr               W  		BRA L841
00001B83                         L748:	; bb266
                                 ;    1288       } else {
                                 ;    1289         // load existing object index page on first pass
                                 ;    1290         spiffs_page_ix pix;
                                 ;    1291         SPIFFS_DBG("modify: find objix span_ix:%04x\n", cur_objix_spix);
                                 ;    1292         if (fd->cursor_objix_spix == cur_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1292
00001B83 AD09                    		MOV.L 54H[R0], R1
00001B85 BA11                    		MOVU.W 10H[R1], R1
00001B87 06C50112                		CMP 24H[R0].UW, R1
00001B8B 18                   S  		BNE L750
00001B8C                         L749:	; bb267
                                 ;    1293           pix = fd->cursor_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1293
00001B8C AD09                    		MOV.L 54H[R0], R1
00001B8E D5100720                		MOV.W 0EH[R1], 40H[R0]
00001B92 2Err                 B  		BRA L753
00001B94                         L750:	; bb271
                                 ;    1294         } else {
                                 ;    1295           res = spiffs_obj_lu_find_id_and_span(fs, fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG, cur_objix_spix, 0, &pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1295
00001B94 AD09                    		MOV.L 54H[R0], R1
00001B96 B89A                    		MOVU.W 06H[R1], R2
00001B98 BC83                    		MOVU.W 24H[R0], R3
00001B9A A881                    		MOV.L 08H[R0], R1
00001B9C 6040                    		SUB #04H, R0
00001B9E 710E44                  		ADD #44H, R0, R14
00001BA1 E30E                    		MOV.L R14, [R0]
00001BA3 78F2                    		BSET #0FH, R2
00001BA5 6604                    		MOV.L #00000000H, R4
00001BA7 39rrrr               W  		BSR _spiffs_obj_lu_find_id_and_span
00001BAA 6240                    		ADD #04H, R0
00001BAC A089                    		MOV.L R1, 0CH[R0]
00001BAE                         L751:	; bb271.split
                                 ;    1296           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1296
00001BAE A889                    		MOV.L 0CH[R0], R1
00001BB0 69F1                    		SHLR #1FH, R1
00001BB2 6101                    		CMP #00H, R1
00001BB4 10                   S  		BEQ L753
00001BB5                         L752:	; bb283
00001BB5 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001BB9 38rrrr               W  		BRA L841
00001BBC                         L753:	; bb301
                                 ;    1297         }
                                 ;    1298         SPIFFS_DBG("modify: found object index at page %04x\n", pix);
                                 ;    1299         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1299
00001BBC A881                    		MOV.L 08H[R0], R1
00001BBE AD0A                    		MOV.L 54H[R0], R2
00001BC0 98A3                    		MOV.W 04H[R2], R3
00001BC2 5D0420                  		MOVU.W 40H[R0], R4
00001BC5 6080                    		SUB #08H, R0
00001BC7 E5100901                		MOV.L 24H[R1], 04H[R0]
00001BCB F80A0001                		MOV.L #00000100H, [R0]
00001BCF 6C84                    		SHLL #08H, R4
00001BD1 7344000010              		ADD #00100000H, R4
00001BD6 754216                  		MOV.L #00000016H, R2
00001BD9 05rrrrrr             A  		BSR _spiffs_phys_rd
00001BDD 6280                    		ADD #08H, R0
00001BDF A089                    		MOV.L R1, 0CH[R0]
00001BE1                         L754:	; bb301.split
                                 ;    1300             fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1301         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1301
00001BE1 A889                    		MOV.L 0CH[R0], R1
00001BE3 69F1                    		SHLR #1FH, R1
00001BE5 6101                    		CMP #00H, R1
00001BE7 10                   S  		BEQ L756
00001BE8                         L755:	; bb316
00001BE8 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001BEC 38rrrr               W  		BRA L841
00001BEF                         L756:	; bb325.split
                                 ;    1302         SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1302
00001BEF A909                    		MOV.L 14H[R0], R1
00001BF1 F51004                  		BTST #00H, 04H[R1].B
00001BF4 10                   S  		BEQ L758
00001BF5                         L757:	; bb326
00001BF5 F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00001BFA 38rrrr               W  		BRA L841
00001BFD                         L758:	; bb338
00001BFD A909                    		MOV.L 14H[R0], R1
00001BFF F51704                  		BTST #07H, 04H[R1].B
00001C02 18                   S  		BNE L760
00001C03                         L759:	; bb339
00001C03 F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00001C08 38rrrr               W  		BRA L841
00001C0B                         L760:	; bb351
00001C0B A909                    		MOV.L 14H[R0], R1
00001C0D F51104                  		BTST #01H, 04H[R1].B
00001C10 10                   S  		BEQ L762
00001C11                         L761:	; bb352
00001C11 F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00001C16 38rrrr               W  		BRA L841
00001C19                         L762:	; bb364
00001C19 A909                    		MOV.L 14H[R0], R1
00001C1B F51204                  		BTST #02H, 04H[R1].B
00001C1E 10                   S  		BEQ L764
00001C1F                         L763:	; bb365
00001C1F F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00001C24 38rrrr               W  		BRA L841
00001C27                         L764:	; bb377
00001C27 AD09                    		MOV.L 54H[R0], R1
00001C29 B899                    		MOVU.W 06H[R1], R1
00001C2B 7CF1                    		BTST #0FH, R1
00001C2D 18                   S  		BNE L766
00001C2E                         L765:	; bb378
00001C2E F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00001C33 38rrrr               W  		BRA L841
00001C36                         L766:	; bb389
00001C36 A909                    		MOV.L 14H[R0], R1
00001C38 B819                    		MOVU.W 02H[R1], R1
00001C3A 06C50112                		CMP 24H[R0].UW, R1
00001C3E 10                   S  		BEQ L768
00001C3F                         L767:	; bb390
00001C3F F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00001C44 38rrrr               W  		BRA L841
00001C47                         L768:	; bb402
                                 ;    1303         cur_objix_pix = pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1303
00001C47 D5002014                		MOV.W 40H[R0], 28H[R0]
00001C4B                         L769:	; bb409
                                 ;    1304       }
                                 ;    1305       fd->cursor_objix_pix = cur_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1305
00001C4B 9D01                    		MOV.W 28H[R0], R1
00001C4D AD0A                    		MOV.L 54H[R0], R2
00001C4F 91A9                    		MOV.W R1, 0EH[R2]
00001C51                         L770:	; bb409.split
                                 ;    1306       fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1306
00001C51 9C81                    		MOV.W 24H[R0], R1
00001C53 AD0A                    		MOV.L 54H[R0], R2
00001C55 9221                    		MOV.W R1, 10H[R2]
00001C57                         L771:	; bb409.split10
                                 ;    1307       fd->offset = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1307
00001C57 AD01                    		MOV.L 50H[R0], R1
00001C59 06890104                		ADD 10H[R0].L, R1
00001C5D AD0A                    		MOV.L 54H[R0], R2
00001C5F A129                    		MOV.L R1, 14H[R2]
00001C61                         L772:	; bb409.split11
                                 ;    1308       prev_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1308
00001C61 D5001213                		MOV.W 24H[R0], 26H[R0]
00001C65                         L773:	; bb429
                                 ;    1309     }
                                 ;    1310 
                                 ;    1311     // write partial data
                                 ;    1312     u32_t to_write = MIN(len-written, SPIFFS_DATA_PAGE_SIZE(fs) - page_offs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1312
00001C65 AC81                    		MOV.L 48H[R0], R1
00001C67 06810104                		SUB 10H[R0].L, R1
00001C6B 754EFA                  		MOV.L #000000FAH, R14
00001C6E 06810E0C                		SUB 30H[R0].L, R14
00001C72 47E1                    		CMP R14, R1
00001C74 22rr                    		BGEU L775
00001C76                         L774:	; bb437
00001C76 AC81                    		MOV.L 48H[R0], R1
00001C78 06810104                		SUB 10H[R0].L, R1
00001C7C E301                    		MOV.L R1, [R0]
00001C7E 08                   S  		BRA L776
00001C7F                         L775:	; bb441
00001C7F 7541FA                  		MOV.L #000000FAH, R1
00001C82 0681010C                		SUB 30H[R0].L, R1
00001C86 E301                    		MOV.L R1, [R0]
00001C88                         L776:	; bb444
00001C88 E4000E                  		MOV.L [R0], 38H[R0]
                                 ;    1313     spiffs_page_ix orig_data_pix;
                                 ;    1314     if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1314
00001C8B BC81                    		MOVU.W 24H[R0], R1
00001C8D 6101                    		CMP #00H, R1
00001C8F 21rr                    		BNE L778
00001C91                         L777:	; bb448
                                 ;    1315       // get data page from object index header page
                                 ;    1316       orig_data_pix = ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1316
00001C91 BD81                    		MOVU.W 2CH[R0], R1
00001C93 6C11                    		SHLL #01H, R1
00001C95 06890105                		ADD 14H[R0].L, R1
00001C99 D510181E                		MOV.W 30H[R1], 3CH[R0]
00001C9D 2Err                 B  		BRA L782
00001C9F                         L778:	; bb457
                                 ;    1317     } else {
                                 ;    1318       // get data page from object index page
                                 ;    1319       orig_data_pix = ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1319
00001C9F A981                    		MOV.L 18H[R0], R1
00001CA1 6281                    		ADD #08H, R1
00001CA3 BD82                    		MOVU.W 2CH[R0], R2
00001CA5 755267                  		CMP #67H, R2
00001CA8 24rr                    		BGTU L780
00001CAA                         L779:	; bb466
00001CAA E302                    		MOV.L R2, [R0]
00001CAC 2Err                 B  		BRA L781
00001CAE                         L780:	; bb469
00001CAE 712298                  		ADD #0FFFFFF98H, R2
00001CB1 EF2E                    		MOV.L R2, R14
00001CB3 FD749E7C                		DIVU #7CH, R14
00001CB7 751E7C                  		MUL #7CH, R14
00001CBA 43E2                    		SUB R14, R2
00001CBC E302                    		MOV.L R2, [R0]
00001CBE                         L781:	; bb474
00001CBE EC02                    		MOV.L [R0], R2
00001CC0 FE5211                  		MOV.W [R2,R1], R1
00001CC3 9781                    		MOV.W R1, 3CH[R0]
00001CC5                         L782:	; bb484
                                 ;    1320     }
                                 ;    1321 
                                 ;    1322     p_hdr.obj_id = fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1322
00001CC5 AD09                    		MOV.L 54H[R0], R1
00001CC7 B899                    		MOVU.W 06H[R1], R1
00001CC9 7621FF7F                		AND #7FFFH, R1
00001CCD 9389                    		MOV.W R1, 1EH[R0]
00001CCF                         L783:	; bb484.split
                                 ;    1323     p_hdr.span_ix = data_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1323
00001CCF D5001610                		MOV.W 2CH[R0], 20H[R0]
00001CD3                         L784:	; bb484.split12
                                 ;    1324     p_hdr.flags = 0xff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1324
00001CD3 F90422FF                		MOV.B #0FFH, 22H[R0]
00001CD7                         L785:	; bb484.split13
                                 ;    1325     if (page_offs == 0 && to_write == SPIFFS_DATA_PAGE_SIZE(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1325
00001CD7 AB01                    		MOV.L 30H[R0], R1
00001CD9 6101                    		CMP #00H, R1
00001CDB 3Arrrr               W  		BEQ L803
00001CDE 38rrrr               W  		BRA L805
00001CE1                         L786:	; bb496
                                 ;    1326       // a full page, allocate and write a new page of data
                                 ;    1327       res = spiffs_page_allocate_data(fs, fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1327
00001CE1 AC8C                    		MOV.L 4CH[R0], R4
00001CE3 06890404                		ADD 10H[R0].L, R4
00001CE7 B8AA                    		MOVU.W 06H[R2], R2
00001CE9 AB03                    		MOV.L 30H[R0], R3
00001CEB AB85                    		MOV.L 38H[R0], R5
00001CED 7100F0                  		ADD #0FFFFFFF0H, R0
00001CF0 710F3E                  		ADD #3EH, R0, R15
00001CF3 E70F03                  		MOV.L R15, 0CH[R0]
00001CF6 A00B                    		MOV.L R3, 04H[R0]
00001CF8 E305                    		MOV.L R5, [R0]
00001CFA 3C0801                  		MOV.B #01H, 08H[R0]
00001CFD 7622FF7F                		AND #7FFFH, R2
00001D01 71032E                  		ADD #2EH, R0, R3
00001D04 39rrrr               W  		BSR _spiffs_page_allocate_data
00001D07 710010                  		ADD #10H, R0
00001D0A A089                    		MOV.L R1, 0CH[R0]
00001D0C 38rrrr               W  		BRA L807
00001D0F                         L787:	; bb510
                                 ;    1328           &p_hdr, &data[written], to_write, page_offs, 1, &data_pix);
                                 ;    1329       SPIFFS_DBG("modify: store new data page, %04x:%04x offset:%i, len %i, written %i\n", data_pix, data_spix, page_offs, to_write, written);
                                 ;    1330     } else {
                                 ;    1331       // write to existing page, allocate new and copy unmodified data
                                 ;    1332 
                                 ;    1333       res = spiffs_page_data_check(fs, fd, orig_data_pix, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1333
00001D0F BD84                    		MOVU.W 2CH[R0], R4
00001D11 BF83                    		MOVU.W 3CH[R0], R3
00001D13 39rrrr               W  		BSR __$spiffs_page_data_check
00001D16 A089                    		MOV.L R1, 0CH[R0]
00001D18                         L788:	; bb510.split
                                 ;    1334       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1334
00001D18 A889                    		MOV.L 0CH[R0], R1
00001D1A 69F1                    		SHLR #1FH, R1
00001D1C 6101                    		CMP #00H, R1
00001D1E 10                   S  		BEQ L790
00001D1F                         L789:	; bb518
00001D1F E5000301                		MOV.L 0CH[R0], 04H[R0]
00001D23 38rrrr               W  		BRA L841
00001D26                         L790:	; bb526.split
                                 ;    1335 
                                 ;    1336       res = spiffs_page_allocate_data(fs, fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1336
00001D26 AD09                    		MOV.L 54H[R0], R1
00001D28 B89A                    		MOVU.W 06H[R1], R2
00001D2A A881                    		MOV.L 08H[R0], R1
00001D2C 7100F0                  		ADD #0FFFFFFF0H, R0
00001D2F 71033E                  		ADD #3EH, R0, R3
00001D32 A08B                    		MOV.L R3, 0CH[R0]
00001D34 6604                    		MOV.L #00000000H, R4
00001D36 8204                    		MOV.B R4, 08H[R0]
00001D38 A00C                    		MOV.L R4, 04H[R0]
00001D3A E304                    		MOV.L R4, [R0]
00001D3C 7622FF7F                		AND #7FFFH, R2
00001D40 71032E                  		ADD #2EH, R0, R3
00001D43 39rrrr               W  		BSR _spiffs_page_allocate_data
00001D46 710010                  		ADD #10H, R0
00001D49 A089                    		MOV.L R1, 0CH[R0]
00001D4B                         L791:	; bb526.split14
                                 ;    1337           &p_hdr, 0, 0, 0, 0, &data_pix);
                                 ;    1338       if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1338
00001D4B A889                    		MOV.L 0CH[R0], R1
00001D4D 6101                    		CMP #00H, R1
00001D4F 3Brrrr               W  		BNE L823
00001D52                         L792:	; bb543
                                 ;    1339 
                                 ;    1340       // copy unmodified data
                                 ;    1341       if (page_offs > 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1341
00001D52 AB01                    		MOV.L 30H[R0], R1
00001D54 6101                    		CMP #00H, R1
00001D56 20rr                    		BEQ L795
00001D58                         L793:	; bb544
                                 ;    1342         // before modification
                                 ;    1343         res = spiffs_phys_cpy(fs, fd->file_nbr,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1343
00001D58 AD09                    		MOV.L 54H[R0], R1
00001D5A 9892                    		MOV.W 04H[R1], R2
00001D5C AB05                    		MOV.L 30H[R0], R5
00001D5E BF84                    		MOVU.W 3CH[R0], R4
00001D60 BD8B                    		MOVU.W 2EH[R0], R3
00001D62 A881                    		MOV.L 08H[R0], R1
00001D64 6040                    		SUB #04H, R0
00001D66 E305                    		MOV.L R5, [R0]
00001D68 6C84                    		SHLL #08H, R4
00001D6A 7344060010              		ADD #00100006H, R4
00001D6F 6C83                    		SHLL #08H, R3
00001D71 7333060010              		ADD #00100006H, R3
00001D76 39rrrr               W  		BSR _spiffs_phys_cpy
00001D79 6240                    		ADD #04H, R0
00001D7B A089                    		MOV.L R1, 0CH[R0]
00001D7D                         L794:	; bb544.split
                                 ;    1344             SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header),
                                 ;    1345             SPIFFS_PAGE_TO_PADDR(fs, orig_data_pix) + sizeof(spiffs_page_header),
                                 ;    1346             page_offs);
                                 ;    1347         if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1347
00001D7D A889                    		MOV.L 0CH[R0], R1
00001D7F 6101                    		CMP #00H, R1
00001D81 3Brrrr               W  		BNE L823
00001D84                         L795:	; bb574
                                 ;    1348       }
                                 ;    1349       if (page_offs + to_write < SPIFFS_DATA_PAGE_SIZE(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1349
00001D84 AB01                    		MOV.L 30H[R0], R1
00001D86 0689010E                		ADD 38H[R0].L, R1
00001D8A 7551F9                  		CMP #0F9H, R1
00001D8D 24rr                    		BGTU L798
00001D8F                         L796:	; bb575
                                 ;    1350         // after modification
                                 ;    1351         res = spiffs_phys_cpy(fs, fd->file_nbr,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1351
00001D8F AD09                    		MOV.L 54H[R0], R1
00001D91 9892                    		MOV.W 04H[R1], R2
00001D93 AB85                    		MOV.L 38H[R0], R5
00001D95 ED0F0C                  		MOV.L 30H[R0], R15
00001D98 BF84                    		MOVU.W 3CH[R0], R4
00001D9A BD8B                    		MOVU.W 2EH[R0], R3
00001D9C A881                    		MOV.L 08H[R0], R1
00001D9E 6040                    		SUB #04H, R0
00001DA0 6C83                    		SHLL #08H, R3
00001DA2 4BF3                    		ADD R15, R3
00001DA4 6C84                    		SHLL #08H, R4
00001DA6 4BF4                    		ADD R15, R4
00001DA8 4B5F                    		ADD R5, R15
00001DAA 754EFA                  		MOV.L #000000FAH, R14
00001DAD 43FE                    		SUB R15, R14
00001DAF E30E                    		MOV.L R14, [R0]
00001DB1 4B54                    		ADD R5, R4
00001DB3 7344060010              		ADD #00100006H, R4
00001DB8 4B53                    		ADD R5, R3
00001DBA 7333060010              		ADD #00100006H, R3
00001DBF 39rrrr               W  		BSR _spiffs_phys_cpy
00001DC2 6240                    		ADD #04H, R0
00001DC4 A089                    		MOV.L R1, 0CH[R0]
00001DC6                         L797:	; bb575.split
                                 ;    1352             SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header) + page_offs + to_write,
                                 ;    1353             SPIFFS_PAGE_TO_PADDR(fs, orig_data_pix) + sizeof(spiffs_page_header) + page_offs + to_write,
                                 ;    1354             SPIFFS_DATA_PAGE_SIZE(fs) - (page_offs + to_write));
                                 ;    1355         if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1355
00001DC6 A889                    		MOV.L 0CH[R0], R1
00001DC8 6101                    		CMP #00H, R1
00001DCA 3Brrrr               W  		BNE L823
00001DCD                         L798:	; bb617
                                 ;    1356       }
                                 ;    1357 
                                 ;    1358       res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1358
00001DCD AC8A                    		MOV.L 4CH[R0], R2
00001DCF 06890204                		ADD 10H[R0].L, R2
00001DD3 AD09                    		MOV.L 54H[R0], R1
00001DD5 9893                    		MOV.W 04H[R1], R3
00001DD7 BD8C                    		MOVU.W 2EH[R0], R4
00001DD9 6C84                    		SHLL #08H, R4
00001DDB 0689040C                		ADD 30H[R0].L, R4
00001DDF AB85                    		MOV.L 38H[R0], R5
00001DE1 A881                    		MOV.L 08H[R0], R1
00001DE3 6080                    		SUB #08H, R0
00001DE5 A00A                    		MOV.L R2, 04H[R0]
00001DE7 E305                    		MOV.L R5, [R0]
00001DE9 7344060010              		ADD #00100006H, R4
00001DEE 6672                    		MOV.L #00000007H, R2
00001DF0 05rrrrrr             A  		BSR _spiffs_phys_wr
00001DF4 6280                    		ADD #08H, R0
00001DF6 A089                    		MOV.L R1, 0CH[R0]
00001DF8                         L799:	; bb617.split
                                 ;    1359           fd->file_nbr,
                                 ;    1360           SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header) + page_offs, to_write, &data[written]);
                                 ;    1361       if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1361
00001DF8 A889                    		MOV.L 0CH[R0], R1
00001DFA 6101                    		CMP #00H, R1
00001DFC 3Brrrr               W  		BNE L823
00001DFF                         L800:	; bb641
                                 ;    1362       p_hdr.flags &= ~SPIFFS_PH_FLAG_FINAL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1362
00001DFF F10922                  		BCLR #01H, 22H[R0].B
00001E02                         L801:	; bb641.split
                                 ;    1363       res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1363
00001E02 AD09                    		MOV.L 54H[R0], R1
00001E04 9893                    		MOV.W 04H[R1], R3
00001E06 BD8C                    		MOVU.W 2EH[R0], R4
00001E08 A881                    		MOV.L 08H[R0], R1
00001E0A 6080                    		SUB #08H, R0
00001E0C 71022A                  		ADD #2AH, R0, R2
00001E0F A00A                    		MOV.L R2, 04H[R0]
00001E11 F80601                  		MOV.L #00000001H, [R0]
00001E14 6C84                    		SHLL #08H, R4
00001E16 7344040010              		ADD #00100004H, R4
00001E1B 6672                    		MOV.L #00000007H, R2
00001E1D 05rrrrrr             A  		BSR _spiffs_phys_wr
00001E21 6280                    		ADD #08H, R0
00001E23 A089                    		MOV.L R1, 0CH[R0]
00001E25                         L802:	; bb641.split15
                                 ;    1364           fd->file_nbr,
                                 ;    1365           SPIFFS_PAGE_TO_PADDR(fs, data_pix) + offsetof(spiffs_page_header, flags),
                                 ;    1366           sizeof(u8_t),
                                 ;    1367           (u8_t *)&p_hdr.flags);
                                 ;    1368       if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1368
00001E25 A889                    		MOV.L 0CH[R0], R1
00001E27 6101                    		CMP #00H, R1
00001E29 3Brrrr               W  		BNE L823
00001E2C 2Err                 B  		BRA L807
00001E2E                         L803:	; bb669
00001E2E AB81                    		MOV.L 38H[R0], R1
00001E30 7551FA                  		CMP #0FAH, R1
00001E33 18                   S  		BNE L805
00001E34                         L804:	; bb673
00001E34 F80601                  		MOV.L #00000001H, [R0]
00001E37 08                   S  		BRA L806
00001E38                         L805:	; bb674
00001E38 F80600                  		MOV.L #00000000H, [R0]
00001E3B                         L806:	; bb675
00001E3B EC01                    		MOV.L [R0], R1
00001E3D 6101                    		CMP #00H, R1
00001E3F AD0A                    		MOV.L 54H[R0], R2
00001E41 A881                    		MOV.L 08H[R0], R1
00001E43 3Brrrr               W  		BNE L786
00001E46 38rrrr               W  		BRA L787
00001E49                         L807:	; bb680
                                 ;    1369 
                                 ;    1370       SPIFFS_DBG("modify: store to existing data page, src:%04x, dst:%04x:%04x offset:%i, len %i, written %i\n", orig_data_pix, data_pix, data_spix, page_off
                                 ;    1371     }
                                 ;    1372 
                                 ;    1373     // delete original data page
                                 ;    1374     res = spiffs_page_delete(fs, orig_data_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1374
00001E49 BF82                    		MOVU.W 3CH[R0], R2
00001E4B A881                    		MOV.L 08H[R0], R1
00001E4D 39rrrr               W  		BSR _spiffs_page_delete
00001E50 A089                    		MOV.L R1, 0CH[R0]
00001E52                         L808:	; bb680.split
                                 ;    1375     if (res != SPIFFS_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1375
00001E52 A889                    		MOV.L 0CH[R0], R1
00001E54 6101                    		CMP #00H, R1
00001E56 21rr                    		BNE L823
00001E58                         L809:	; bb692
                                 ;    1376     // update memory representation of object index page with new data page
                                 ;    1377     if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1377
00001E58 BC81                    		MOVU.W 24H[R0], R1
00001E5A 6101                    		CMP #00H, R1
00001E5C 21rr                    		BNE L811
00001E5E                         L810:	; bb693
                                 ;    1378       // update object index header page
                                 ;    1379       ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix] = data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1379
00001E5E BD81                    		MOVU.W 2CH[R0], R1
00001E60 6C11                    		SHLL #01H, R1
00001E62 06890105                		ADD 14H[R0].L, R1
00001E66 D5011718                		MOV.W 2EH[R0], 30H[R1]
00001E6A 2Err                 B  		BRA L815
00001E6C                         L811:	; bb702
                                 ;    1380       SPIFFS_DBG("modify: wrote page %04x to objix_hdr entry %02x in mem\n", data_pix, data_spix);
                                 ;    1381     } else {
                                 ;    1382       // update object index page
                                 ;    1383       ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)] = data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1383
00001E6C A981                    		MOV.L 18H[R0], R1
00001E6E 6281                    		ADD #08H, R1
00001E70 BD82                    		MOVU.W 2CH[R0], R2
00001E72 755267                  		CMP #67H, R2
00001E75 24rr                    		BGTU L813
00001E77                         L812:	; bb711
00001E77 E302                    		MOV.L R2, [R0]
00001E79 2Err                 B  		BRA L814
00001E7B                         L813:	; bb714
00001E7B 712298                  		ADD #0FFFFFF98H, R2
00001E7E EF2E                    		MOV.L R2, R14
00001E80 FD749E7C                		DIVU #7CH, R14
00001E84 751E7C                  		MUL #7CH, R14
00001E87 43E2                    		SUB R14, R2
00001E89 E302                    		MOV.L R2, [R0]
00001E8B                         L814:	; bb719
00001E8B 9D8A                    		MOV.W 2EH[R0], R2
00001E8D EC03                    		MOV.L [R0], R3
00001E8F FE1312                  		MOV.W R2, [R3,R1]
00001E92                         L815:	; bb729
                                 ;    1384       SPIFFS_DBG("modify: wrote page %04x to objix entry %02x in mem\n", data_pix, SPIFFS_OBJ_IX_ENTRY(fs, data_spix));
                                 ;    1385     }
                                 ;    1386 
                                 ;    1387     // update internals
                                 ;    1388     page_offs = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1388
00001E92 3E0C00                  		MOV.L #00000000H, 30H[R0]
00001E95                         L816:	; bb729.split
                                 ;    1389     data_spix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1389
00001E95 9D81                    		MOV.W 2CH[R0], R1
00001E97 6211                    		ADD #01H, R1
00001E99 9581                    		MOV.W R1, 2CH[R0]
00001E9B                         L817:	; bb729.split16
                                 ;    1390     written += to_write;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1390
00001E9B A901                    		MOV.L 10H[R0], R1
00001E9D 0689010E                		ADD 38H[R0].L, R1
00001EA1 A101                    		MOV.L R1, 10H[R0]
00001EA3                         L818:	; bb735
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1250
00001EA3 A889                    		MOV.L 0CH[R0], R1
00001EA5 6101                    		CMP #00H, R1
00001EA7 21rr                    		BNE L821
00001EA9                         L819:	; bb739
00001EA9 A901                    		MOV.L 10H[R0], R1
00001EAB 06850112                		CMP 48H[R0].L, R1
00001EAF 22rr                    		BGEU L821
00001EB1                         L820:	; bb744
00001EB1 F80601                  		MOV.L #00000001H, [R0]
00001EB4 08                   S  		BRA L822
00001EB5                         L821:	; bb745
00001EB5 F80600                  		MOV.L #00000000H, [R0]
00001EB8                         L822:	; bb746
00001EB8 EC01                    		MOV.L [R0], R1
00001EBA 6101                    		CMP #00H, R1
00001EBC 3Brrrr               W  		BNE L716
00001EBF                         L823:	; bb752
                                 ;    1391   } // while all data
                                 ;    1392 
                                 ;    1393   fd->offset = offset+written;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1393
00001EBF AD01                    		MOV.L 50H[R0], R1
00001EC1 06890104                		ADD 10H[R0].L, R1
00001EC5 AD0A                    		MOV.L 54H[R0], R2
00001EC7 A129                    		MOV.L R1, 14H[R2]
00001EC9                         L824:	; bb752.split
                                 ;    1394   fd->cursor_objix_pix = cur_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1394
00001EC9 9D01                    		MOV.W 28H[R0], R1
00001ECB AD0A                    		MOV.L 54H[R0], R2
00001ECD 91A9                    		MOV.W R1, 0EH[R2]
00001ECF                         L825:	; bb752.split17
                                 ;    1395   fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1395
00001ECF 9C81                    		MOV.W 24H[R0], R1
00001ED1 AD0A                    		MOV.L 54H[R0], R2
00001ED3 9221                    		MOV.W R1, 10H[R2]
00001ED5                         L826:	; bb752.split18
                                 ;    1396 
                                 ;    1397   // finalize updated object indices
                                 ;    1398   s32_t res2 = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1398
00001ED5 3E0D00                  		MOV.L #00000000H, 34H[R0]
00001ED8                         L827:	; bb752.split19
                                 ;    1399   if (cur_objix_spix != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1399
00001ED8 BC81                    		MOVU.W 24H[R0], R1
00001EDA 6101                    		CMP #00H, R1
00001EDC AD0A                    		MOV.L 54H[R0], R2
00001EDE A881                    		MOV.L 08H[R0], R1
00001EE0 20rr                    		BEQ L837
00001EE2                         L828:	; bb765
                                 ;    1400     // wrote beyond object index header page
                                 ;    1401     // write last modified object index page
                                 ;    1402     // move and update page
                                 ;    1403     spiffs_page_ix new_objix_pix;
                                 ;    1404 
                                 ;    1405     res2 = spiffs_page_index_check(fs, fd, cur_objix_pix, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1405
00001EE2 BC84                    		MOVU.W 24H[R0], R4
00001EE4 BD03                    		MOVU.W 28H[R0], R3
00001EE6 39rrrr               W  		BSR __$spiffs_page_index_check
00001EE9 A309                    		MOV.L R1, 34H[R0]
00001EEB                         L829:	; bb765.split
                                 ;    1406     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1406
00001EEB AB09                    		MOV.L 34H[R0], R1
00001EED 69F1                    		SHLR #1FH, R1
00001EEF 6101                    		CMP #00H, R1
00001EF1 10                   S  		BEQ L831
00001EF2                         L830:	; bb773
00001EF2 E5000D01                		MOV.L 34H[R0], 04H[R0]
00001EF6 38rrrr               W  		BRA L841
00001EF9                         L831:	; bb781.split
                                 ;    1407 
                                 ;    1408     res2 = spiffs_page_move(fs, fd->file_nbr, (u8_t*)objix, fd->obj_id, 0, cur_objix_pix, &new_objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1408
00001EF9 AD09                    		MOV.L 54H[R0], R1
00001EFB B89C                    		MOVU.W 06H[R1], R4
00001EFD 9892                    		MOV.W 04H[R1], R2
00001EFF 9D05                    		MOV.W 28H[R0], R5
00001F01 A983                    		MOV.L 18H[R0], R3
00001F03 A881                    		MOV.L 08H[R0], R1
00001F05 60C0                    		SUB #0CH, R0
00001F07 710F4E                  		ADD #4EH, R0, R15
00001F0A E70F02                  		MOV.L R15, 08H[R0]
00001F0D 9085                    		MOV.W R5, 04H[R0]
00001F0F F80600                  		MOV.L #00000000H, [R0]
00001F12 39rrrr               W  		BSR _spiffs_page_move
00001F15 62C0                    		ADD #0CH, R0
00001F17 A309                    		MOV.L R1, 34H[R0]
00001F19                         L832:	; bb781.split20
                                 ;    1409     SPIFFS_DBG("modify: store modified objix page, %04x:%04x, written %i\n", new_objix_pix, cur_objix_spix, written);
                                 ;    1410     fd->cursor_objix_pix = new_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1410
00001F19 DD0121                  		MOV.W 42H[R0], R1
00001F1C AD0A                    		MOV.L 54H[R0], R2
00001F1E 91A9                    		MOV.W R1, 0EH[R2]
00001F20                         L833:	; bb781.split21
                                 ;    1411     fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1411
00001F20 9C81                    		MOV.W 24H[R0], R1
00001F22 AD0A                    		MOV.L 54H[R0], R2
00001F24 9221                    		MOV.W R1, 10H[R2]
00001F26                         L834:	; bb781.split22
                                 ;    1412     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1412
00001F26 AB09                    		MOV.L 34H[R0], R1
00001F28 69F1                    		SHLR #1FH, R1
00001F2A 6101                    		CMP #00H, R1
00001F2C 10                   S  		BEQ L836
00001F2D                         L835:	; bb801
00001F2D E5000D01                		MOV.L 34H[R0], 04H[R0]
00001F31 2Err                 B  		BRA L841
00001F33                         L836:	; bb809.split
                                 ;    1413     spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, fd->obj_id, objix->p_hdr.span_ix, new_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1413
00001F33 A981                    		MOV.L 18H[R0], R1
00001F35 981B                    		MOV.W 02H[R1], R3
00001F37 AD0A                    		MOV.L 54H[R0], R2
00001F39 B8AC                    		MOVU.W 06H[R2], R4
00001F3B DD0521                  		MOV.W 42H[R0], R5
00001F3E A881                    		MOV.L 08H[R0], R1
00001F40 6080                    		SUB #08H, R0
00001F42 900D                    		MOV.W R5, 02H[R0]
00001F44 D303                    		MOV.W R3, [R0]
00001F46 3E0100                  		MOV.L #00000000H, 04H[R0]
00001F49 6603                    		MOV.L #00000000H, R3
00001F4B 39rrrr               W  		BSR _spiffs_cb_object_event
00001F4E 6280                    		ADD #08H, R0
00001F50 2Err                 B  		BRA L840
00001F52                         L837:	; bb820
                                 ;    1414 
                                 ;    1415   } else {
                                 ;    1416     // wrote within object index header page
                                 ;    1417     res2 = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1417
00001F52 A883                    		MOV.L 08H[R0], R3
00001F54 AA3D                    		MOV.L 24H[R3], R5
00001F56 AD0B                    		MOV.L 54H[R0], R3
00001F58 B9B4                    		MOVU.W 0CH[R3], R4
00001F5A B8BB                    		MOVU.W 06H[R3], R3
00001F5C 7100F0                  		ADD #0FFFFFFF0H, R0
00001F5F 710F3A                  		ADD #3AH, R0, R15
00001F62 E70F03                  		MOV.L R15, 0CH[R0]
00001F65 E305                    		MOV.L R5, [R0]
00001F67 3E0200                  		MOV.L #00000000H, 08H[R0]
00001F6A 3E0100                  		MOV.L #00000000H, 04H[R0]
00001F6D 39rrrr               W  		BSR _spiffs_object_update_index_hdr
00001F70 710010                  		ADD #10H, R0
00001F73 A309                    		MOV.L R1, 34H[R0]
00001F75                         L838:	; bb820.split
                                 ;    1418         fd->objix_hdr_pix, fs->work, 0, 0, &new_objix_hdr_pix);
                                 ;    1419     SPIFFS_DBG("modify: store modified objix_hdr page, %04x:%04x, written %i\n", new_objix_hdr_pix, 0, written);
                                 ;    1420     SPIFFS_CHECK_RES(res2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1420
00001F75 AB09                    		MOV.L 34H[R0], R1
00001F77 69F1                    		SHLR #1FH, R1
00001F79 6101                    		CMP #00H, R1
00001F7B 10                   S  		BEQ L840
00001F7C                         L839:	; bb835
00001F7C E5000D01                		MOV.L 34H[R0], 04H[R0]
00001F80 08                   S  		BRA L841
00001F81                         L840:	; bb849
                                 ;    1421   }
                                 ;    1422 
                                 ;    1423   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1423
00001F81 E5000301                		MOV.L 0CH[R0], 04H[R0]
00001F85                         L841:	; bb852
00001F85 A809                    		MOV.L 04H[R0], R1
00001F87 A409                    		MOV.L R1, 44H[R0]
                                 ;    1424 } // spiffs_object_modify
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1424
00001F89 6716                    		RTSD #58H
00001F8B                         __$spiffs_object_find_object_index_header_by_name_v:
                                 		.STACK	__$spiffs_object_find_object_index_header_by_name_v=100
                                 ;    1425 #endif // !SPIFFS_READ_ONLY
                                 ;    1426 
                                 ;    1427 static s32_t spiffs_object_find_object_index_header_by_name_v(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1427
00001F8B 7100A8                  		ADD #0FFFFFFA8H, R0
00001F8E A509                    		MOV.L R1, 54H[R0]
00001F90 D70229                  		MOV.W R2, 52H[R0]
00001F93 D70328                  		MOV.W R3, 50H[R0]
00001F96 A48C                    		MOV.L R4, 4CH[R0]
00001F98 E5001712                		MOV.L 5CH[R0], 48H[R0]
00001F9C E5001811                		MOV.L 60H[R0], 44H[R0]
00001FA0                         L843:	; entry.split
                                 ;    1428     spiffs *fs,
                                 ;    1429     spiffs_obj_id obj_id,
                                 ;    1430     spiffs_block_ix bix,
                                 ;    1431     int ix_entry,
                                 ;    1432     const void *user_const_p,
                                 ;    1433     void *user_var_p) {
                                 ;    1434   (void)user_var_p;
                                 ;    1435   s32_t res;
                                 ;    1436   spiffs_page_object_ix_header objix_hdr;
                                 ;    1437   spiffs_page_ix pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, ix_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1437
00001FA0 5D0128                  		MOVU.W 50H[R0], R1
00001FA3 6C81                    		SHLL #08H, R1
00001FA5 06890113                		ADD 4CH[R0].L, R1
00001FA9 6221                    		ADD #02H, R1
00001FAB 9789                    		MOV.W R1, 3EH[R0]
00001FAD                         L844:	; entry.split1
                                 ;    1438   if (obj_id == SPIFFS_OBJ_ID_FREE || obj_id == SPIFFS_OBJ_ID_DELETED ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1438
00001FAD 5D0129                  		MOVU.W 52H[R0], R1
00001FB0 7701FFFF00              		CMP #0FFFFH, R1
00001FB5 20rr                    		BEQ L847
00001FB7 08                   S  		BRA L846
00001FB8                         L845:	; bb18
                                 ;    1439       (obj_id & SPIFFS_OBJ_ID_IX_FLAG) == 0) {
                                 ;    1440     return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1440
00001FB8 F90A01AAD8              		MOV.L #0FFFFD8AAH, 04H[R0]
00001FBD 38rrrr               W  		BRA L865
00001FC0                         L846:	; bb24
00001FC0 5D0129                  		MOVU.W 52H[R0], R1
00001FC3 6101                    		CMP #00H, R1
00001FC5 18                   S  		BNE L848
00001FC6                         L847:	; bb29
00001FC6 F80601                  		MOV.L #00000001H, [R0]
00001FC9 08                   S  		BRA L849
00001FCA                         L848:	; bb30
00001FCA F80600                  		MOV.L #00000000H, [R0]
00001FCD                         L849:	; bb31
00001FCD EC01                    		MOV.L [R0], R1
00001FCF 6101                    		CMP #00H, R1
00001FD1 18                   S  		BNE L851
00001FD2                         L850:	; bb34
00001FD2 5D0129                  		MOVU.W 52H[R0], R1
00001FD5 7CF1                    		BTST #0FH, R1
00001FD7 18                   S  		BNE L852
00001FD8                         L851:	; bb40
00001FD8 F80601                  		MOV.L #00000001H, [R0]
00001FDB 08                   S  		BRA L853
00001FDC                         L852:	; bb41
00001FDC F80600                  		MOV.L #00000000H, [R0]
00001FDF                         L853:	; bb42
00001FDF EC01                    		MOV.L [R0], R1
00001FE1 6101                    		CMP #00H, R1
00001FE3 21rr                    		BNE L845
00001FE5                         L854:	; bb47
                                 ;    1441   }
                                 ;    1442   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1442
00001FE5 BF8C                    		MOVU.W 3EH[R0], R4
00001FE7 AD09                    		MOV.L 54H[R0], R1
00001FE9 6080                    		SUB #08H, R0
00001FEB 710214                  		ADD #14H, R0, R2
00001FEE A00A                    		MOV.L R2, 04H[R0]
00001FF0 F80630                  		MOV.L #00000030H, [R0]
00001FF3 6C84                    		SHLL #08H, R4
00001FF5 7344000010              		ADD #00100000H, R4
00001FFA 6603                    		MOV.L #00000000H, R3
00001FFC 754215                  		MOV.L #00000015H, R2
00001FFF 05rrrrrr             A  		BSR _spiffs_phys_rd
00002003 6280                    		ADD #08H, R0
00002005 A081                    		MOV.L R1, 08H[R0]
00002007                         L855:	; bb47.split
                                 ;    1443       0, SPIFFS_PAGE_TO_PADDR(fs, pix), sizeof(spiffs_page_object_ix_header), (u8_t *)&objix_hdr);
                                 ;    1444   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1444
00002007 A881                    		MOV.L 08H[R0], R1
00002009 69F1                    		SHLR #1FH, R1
0000200B 6101                    		CMP #00H, R1
0000200D 10                   S  		BEQ L857
0000200E                         L856:	; bb57
0000200E E5000201                		MOV.L 08H[R0], 04H[R0]
00002012 2Err                 B  		BRA L865
00002014                         L857:	; bb66
                                 ;    1445   if (objix_hdr.p_hdr.span_ix == 0 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1445
00002014 B989                    		MOVU.W 0EH[R0], R1
00002016 6101                    		CMP #00H, R1
00002018 20rr                    		BEQ L860
0000201A 2Err                 B  		BRA L862
0000201C                         L858:	; bb68
0000201C FB36FF                  		MOV.L #0FFFFFFFFH, R3
                                 ;    1446       (objix_hdr.p_hdr.flags & (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_IXDELE)) ==
                                 ;    1447           (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_IXDELE)) {
                                 ;    1448     if (strcmp((const char*)user_const_p, (char*)objix_hdr.name) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1448
0000201F 710219                  		ADD #19H, R0, R2
00002022 AC81                    		MOV.L 48H[R0], R1
00002024 7F83                    		SCMPU
00002026 FCDBE2                  		SCGEU.L R14
00002029 FCDBF5                  		SCLEU.L R15
0000202C 43FE                    		SUB R15, R14
0000202E 610E                    		CMP #00H, R14
00002030 21rr                    		BNE L864
00002032                         L859:	; bb69
                                 ;    1449       return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1449
00002032 3E0100                  		MOV.L #00000000H, 04H[R0]
00002035 2Err                 B  		BRA L865
00002037                         L860:	; bb85
00002037 754EC2                  		MOV.L #000000C2H, R14
0000203A 510E10                  		AND 10H[R0].UB, R14
0000203D 755EC0                  		CMP #0C0H, R14
00002040 18                   S  		BNE L862
00002041                         L861:	; bb93
00002041 F80601                  		MOV.L #00000001H, [R0]
00002044 08                   S  		BRA L863
00002045                         L862:	; bb94
00002045 F80600                  		MOV.L #00000000H, [R0]
00002048                         L863:	; bb95
00002048 EC01                    		MOV.L [R0], R1
0000204A 6101                    		CMP #00H, R1
0000204C 21rr                    		BNE L858
0000204E                         L864:	; bb100
                                 ;    1450     }
                                 ;    1451   }
                                 ;    1452 
                                 ;    1453   return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1453
0000204E F90A01AAD8              		MOV.L #0FFFFD8AAH, 04H[R0]
00002053                         L865:	; bb102
00002053 A809                    		MOV.L 04H[R0], R1
00002055 A401                    		MOV.L R1, 40H[R0]
                                 ;    1454 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1454
00002057 6716                    		RTSD #58H
00002059                         _spiffs_object_find_object_index_header_by_name:
                                 		.STACK	_spiffs_object_find_object_index_header_by_name=60
                                 ;    1455 
                                 ;    1456 // Finds object index header page by name
                                 ;    1457 s32_t spiffs_object_find_object_index_header_by_name(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1457
00002059 7100E0                  		ADD #0FFFFFFE0H, R0
0000205C A189                    		MOV.L R1, 1CH[R0]
0000205E A182                    		MOV.L R2, 18H[R0]
00002060 A10B                    		MOV.L R3, 14H[R0]
                                 ;    1458     spiffs *fs,
                                 ;    1459     const u8_t name[SPIFFS_OBJ_NAME_LEN],
                                 ;    1460     spiffs_page_ix *pix) {
                                 ;    1461   s32_t res;
                                 ;    1462   spiffs_block_ix bix;
                                 ;    1463   int entry;
                                 ;    1464 
                                 ;    1465   res = spiffs_obj_lu_find_entry_visitor(fs,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1465
00002062 A989                    		MOV.L 1CH[R0], R1
00002064 A99B                    		MOV.L 1CH[R1], R3
00002066 BB12                    		MOVU.W 18H[R1], R2
00002068 A984                    		MOV.L 18H[R0], R4
0000206A 7100E8                  		ADD #0FFFFFFE8H, R0
0000206D 710524                  		ADD #24H, R0, R5
00002070 A10D                    		MOV.L R5, 14H[R0]
00002072 710522                  		ADD #22H, R0, R5
00002075 A105                    		MOV.L R5, 10H[R0]
00002077 A084                    		MOV.L R4, 08H[R0]
00002079 FB42rrrrrrrr            		MOV.L #__$spiffs_object_find_object_index_header_by_name_v, R4
0000207F A00C                    		MOV.L R4, 04H[R0]
00002081 3E0300                  		MOV.L #00000000H, 0CH[R0]
00002084 F80500                  		MOV.W #0000H, [R0]
00002087 6604                    		MOV.L #00000000H, R4
00002089 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
0000208C 710018                  		ADD #18H, R0
0000208F A009                    		MOV.L R1, 04H[R0]
00002091                         L867:	; entry.split
                                 ;    1466       fs->cursor_block_ix,
                                 ;    1467       fs->cursor_obj_lu_entry,
                                 ;    1468       0,
                                 ;    1469       0,
                                 ;    1470       spiffs_object_find_object_index_header_by_name_v,
                                 ;    1471       name,
                                 ;    1472       0,
                                 ;    1473       &bix,
                                 ;    1474       &entry);
                                 ;    1475 
                                 ;    1476   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1476
00002091 A809                    		MOV.L 04H[R0], R1
00002093 7601A8D8                		CMP #0FFFFD8A8H, R1
00002097 18                   S  		BNE L869
00002098                         L868:	; bb17
                                 ;    1477     res = SPIFFS_ERR_NOT_FOUND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1477
00002098 F90A01EED8              		MOV.L #0FFFFD8EEH, 04H[R0]
0000209D                         L869:	; bb23
                                 ;    1478   }
                                 ;    1479   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1479
0000209D A809                    		MOV.L 04H[R0], R1
0000209F 69F1                    		SHLR #1FH, R1
000020A1 6101                    		CMP #00H, R1
000020A3 10                   S  		BEQ L871
000020A4                         L870:	; bb24
000020A4 E10001                  		MOV.L 04H[R0], [R0]
000020A7 2Err                 B  		BRA L876
000020A9                         L871:	; bb33
                                 ;    1480 
                                 ;    1481   if (pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1481
000020A9 A909                    		MOV.L 14H[R0], R1
000020AB 6101                    		CMP #00H, R1
000020AD 20rr                    		BEQ L873
000020AF                         L872:	; bb34
                                 ;    1482     *pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1482
000020AF B909                    		MOVU.W 0AH[R0], R1
000020B1 6C81                    		SHLL #08H, R1
000020B3 06890103                		ADD 0CH[R0].L, R1
000020B7 6221                    		ADD #02H, R1
000020B9 A90A                    		MOV.L 14H[R0], R2
000020BB D321                    		MOV.W R1, [R2]
000020BD                         L873:	; bb47
                                 ;    1483   }
                                 ;    1484 
                                 ;    1485   fs->cursor_block_ix = bix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1485
000020BD 9909                    		MOV.W 0AH[R0], R1
000020BF A98A                    		MOV.L 1CH[R0], R2
000020C1 9321                    		MOV.W R1, 18H[R2]
000020C3                         L874:	; bb47.split
                                 ;    1486   fs->cursor_obj_lu_entry = entry;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1486
000020C3 A889                    		MOV.L 0CH[R0], R1
000020C5 A98A                    		MOV.L 1CH[R0], R2
000020C7 A1A9                    		MOV.L R1, 1CH[R2]
000020C9                         L875:	; bb47.split1
                                 ;    1487 
                                 ;    1488   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1488
000020C9 E10001                  		MOV.L 04H[R0], [R0]
000020CC                         L876:	; bb56
000020CC EC01                    		MOV.L [R0], R1
000020CE A101                    		MOV.L R1, 10H[R0]
                                 ;    1489 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1489
000020D0 6708                    		RTSD #20H
000020D2                         _spiffs_object_truncate:
                                 		.STACK	_spiffs_object_truncate=96
                                 ;    1490 
                                 ;    1491 #if !SPIFFS_READ_ONLY
                                 ;    1492 // Truncates object to new size. If new size is null, object may be removed totally
                                 ;    1493 s32_t spiffs_object_truncate(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1493
000020D2 7100B4                  		ADD #0FFFFFFB4H, R0
000020D5 A481                    		MOV.L R1, 48H[R0]
000020D7 A40A                    		MOV.L R2, 44H[R0]
000020D9 C70343                  		MOV.B R3, 43H[R0]
                                 ;    1494     spiffs_fd *fd,
                                 ;    1495     u32_t new_size,
                                 ;    1496     u8_t remove) {
                                 ;    1497   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1497
000020DC 3E0200                  		MOV.L #00000000H, 08H[R0]
000020DF                         L878:	; entry.split
                                 ;    1498   spiffs *fs = fd->fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1498
000020DF AC81                    		MOV.L 48H[R0], R1
000020E1 E41003                  		MOV.L [R1], 0CH[R0]
000020E4                         L879:	; entry.split1
                                 ;    1499 
                                 ;    1500   if ((fd->size == SPIFFS_UNDEFINED_LEN || fd->size == 0) && !remove) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1500
000020E4 AC81                    		MOV.L 48H[R0], R1
000020E6 A891                    		MOV.L 08H[R1], R1
000020E8 7501FF                  		CMP #0FFFFFFFFH, R1
000020EB 20rr                    		BEQ L882
000020ED 08                   S  		BRA L881
000020EE                         L880:	; bb23
                                 ;    1501     // no op
                                 ;    1502     return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1502
000020EE E5000201                		MOV.L 08H[R0], 04H[R0]
000020F2 38rrrr               W  		BRA L1059
000020F5                         L881:	; bb31
000020F5 AC81                    		MOV.L 48H[R0], R1
000020F7 A891                    		MOV.L 08H[R1], R1
000020F9 6101                    		CMP #00H, R1
000020FB 18                   S  		BNE L883
000020FC                         L882:	; bb37
000020FC F80601                  		MOV.L #00000001H, [R0]
000020FF 08                   S  		BRA L884
00002100                         L883:	; bb38
00002100 F80600                  		MOV.L #00000000H, [R0]
00002103                         L884:	; bb39
00002103 EC01                    		MOV.L [R0], R1
00002105 6101                    		CMP #00H, R1
00002107 20rr                    		BEQ L890
00002109                         L885:	; bb42
00002109 590143                  		MOVU.B 43H[R0], R1
0000210C 6101                    		CMP #00H, R1
0000210E 10                   S  		BEQ L887
0000210F                         L886:	; bb47
0000210F F80600                  		MOV.L #00000000H, [R0]
00002112 08                   S  		BRA L888
00002113                         L887:	; bb48
00002113 F80601                  		MOV.L #00000001H, [R0]
00002116                         L888:	; bb49
00002116 EC01                    		MOV.L [R0], R1
00002118 6101                    		CMP #00H, R1
0000211A 10                   S  		BEQ L890
0000211B                         L889:	; bb52
0000211B F80601                  		MOV.L #00000001H, [R0]
0000211E 08                   S  		BRA L891
0000211F                         L890:	; bb53
0000211F F80600                  		MOV.L #00000000H, [R0]
00002122                         L891:	; bb54
00002122 EC01                    		MOV.L [R0], R1
00002124 6101                    		CMP #00H, R1
00002126 21rr                    		BNE L880
00002128                         L892:	; bb60
                                 ;    1503   }
                                 ;    1504 
                                 ;    1505   // need 2 pages if not removing: object index page + possibly chopped data page
                                 ;    1506   if (remove == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1506
00002128 590143                  		MOVU.B 43H[R0], R1
0000212B 6101                    		CMP #00H, R1
0000212D 21rr                    		BNE L896
0000212F                         L893:	; bb61
                                 ;    1507     res = spiffs_gc_check(fs, SPIFFS_DATA_PAGE_SIZE(fs) * 2);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1507
0000212F A889                    		MOV.L 0CH[R0], R1
00002131 FB2AF401                		MOV.L #000001F4H, R2
00002135 05rrrrrr             A  		BSR _spiffs_gc_check
00002139 A081                    		MOV.L R1, 08H[R0]
0000213B                         L894:	; bb61.split
                                 ;    1508     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1508
0000213B A881                    		MOV.L 08H[R0], R1
0000213D 69F1                    		SHLR #1FH, R1
0000213F 6101                    		CMP #00H, R1
00002141 10                   S  		BEQ L896
00002142                         L895:	; bb66
00002142 E5000201                		MOV.L 08H[R0], 04H[R0]
00002146 38rrrr               W  		BRA L1059
00002149                         L896:	; bb80
                                 ;    1509   }
                                 ;    1510 
                                 ;    1511   spiffs_page_ix objix_pix = fd->objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1511
00002149 AC81                    		MOV.L 48H[R0], R1
0000214B D5100608                		MOV.W 0CH[R1], 10H[R0]
0000214F                         L897:	; bb80.split
                                 ;    1512   spiffs_span_ix data_spix = (fd->size > 0 ? fd->size-1 : 0) / SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1512
0000214F AC81                    		MOV.L 48H[R0], R1
00002151 A891                    		MOV.L 08H[R1], R1
00002153 6101                    		CMP #00H, R1
00002155 10                   S  		BEQ L899
00002156                         L898:	; bb89
00002156 AC81                    		MOV.L 48H[R0], R1
00002158 A891                    		MOV.L 08H[R1], R1
0000215A 6011                    		SUB #01H, R1
0000215C E301                    		MOV.L R1, [R0]
0000215E 08                   S  		BRA L900
0000215F                         L899:	; bb94
0000215F F80600                  		MOV.L #00000000H, [R0]
00002162                         L900:	; bb95
00002162 EC01                    		MOV.L [R0], R1
00002164 FD7891FA00              		DIVU #0FAH, R1
00002169 9209                    		MOV.W R1, 12H[R0]
                                 ;    1513   u32_t cur_size = fd->size == (u32_t)SPIFFS_UNDEFINED_LEN ? 0 : fd->size ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1513
0000216B AC81                    		MOV.L 48H[R0], R1
0000216D A891                    		MOV.L 08H[R1], R1
0000216F 7501FF                  		CMP #0FFFFFFFFH, R1
00002172 18                   S  		BNE L902
00002173                         L901:	; bb105
00002173 F80600                  		MOV.L #00000000H, [R0]
00002176 08                   S  		BRA L903
00002177                         L902:	; bb106
00002177 AC81                    		MOV.L 48H[R0], R1
00002179 E11002                  		MOV.L 08H[R1], [R0]
0000217C                         L903:	; bb110
0000217C E40005                  		MOV.L [R0], 14H[R0]
                                 ;    1514   spiffs_span_ix cur_objix_spix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1514
0000217F 3D0C00                  		MOV.W #0000H, 18H[R0]
00002182                         L904:	; bb110.split
                                 ;    1515   spiffs_span_ix prev_objix_spix = (spiffs_span_ix)-1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1515
00002182 F9090DFFFF              		MOV.W #0FFFFH, 1AH[R0]
00002187                         L905:	; bb110.split2
                                 ;    1516   spiffs_page_object_ix_header *objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1516
00002187 A889                    		MOV.L 0CH[R0], R1
00002189 E5100907                		MOV.L 24H[R1], 1CH[R0]
0000218D                         L906:	; bb110.split3
                                 ;    1517   spiffs_page_object_ix *objix = (spiffs_page_object_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1517
0000218D A889                    		MOV.L 0CH[R0], R1
0000218F E5100908                		MOV.L 24H[R1], 20H[R0]
00002193                         L907:	; bb110.split4
                                 ;    1518   spiffs_page_ix data_pix;
                                 ;    1519   spiffs_page_ix new_objix_hdr_pix;
                                 ;    1520 
                                 ;    1521   // before truncating, check if object is to be fully removed and mark this
                                 ;    1522   if (remove && new_size == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1522
00002193 590143                  		MOVU.B 43H[R0], R1
00002196 6101                    		CMP #00H, R1
00002198 21rr                    		BNE L912
0000219A 2Err                 B  		BRA L914
0000219C                         L908:	; bb122
                                 ;    1523     u8_t flags = ~( SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_IXDELE);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1523
0000219C F9042BB8                		MOV.B #0B8H, 2BH[R0]
000021A0                         L909:	; bb122.split
                                 ;    1524     res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1524
000021A0 AC81                    		MOV.L 48H[R0], R1
000021A2 B994                    		MOVU.W 0CH[R1], R4
000021A4 9893                    		MOV.W 04H[R1], R3
000021A6 A889                    		MOV.L 0CH[R0], R1
000021A8 6080                    		SUB #08H, R0
000021AA 710233                  		ADD #33H, R0, R2
000021AD A00A                    		MOV.L R2, 04H[R0]
000021AF F80601                  		MOV.L #00000001H, [R0]
000021B2 6C84                    		SHLL #08H, R4
000021B4 7344040010              		ADD #00100004H, R4
000021B9 6662                    		MOV.L #00000006H, R2
000021BB 05rrrrrr             A  		BSR _spiffs_phys_wr
000021BF 6280                    		ADD #08H, R0
000021C1 A081                    		MOV.L R1, 08H[R0]
000021C3                         L910:	; bb122.split5
                                 ;    1525         fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, fd->objix_hdr_pix) + offsetof(spiffs_page_header, flags),
                                 ;    1526         sizeof(u8_t),
                                 ;    1527         (u8_t *)&flags);
                                 ;    1528     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1528
000021C3 A881                    		MOV.L 08H[R0], R1
000021C5 69F1                    		SHLR #1FH, R1
000021C7 6101                    		CMP #00H, R1
000021C9 3Arrrr               W  		BEQ L1026
000021CC                         L911:	; bb137
000021CC E5000201                		MOV.L 08H[R0], 04H[R0]
000021D0 38rrrr               W  		BRA L1059
000021D3                         L912:	; bb150
000021D3 AC09                    		MOV.L 44H[R0], R1
000021D5 6101                    		CMP #00H, R1
000021D7 18                   S  		BNE L914
000021D8                         L913:	; bb154
000021D8 F80601                  		MOV.L #00000001H, [R0]
000021DB 08                   S  		BRA L915
000021DC                         L914:	; bb155
000021DC F80600                  		MOV.L #00000000H, [R0]
000021DF                         L915:	; bb156
000021DF EC01                    		MOV.L [R0], R1
000021E1 6101                    		CMP #00H, R1
000021E3 21rr                    		BNE L908
000021E5 38rrrr               W  		BRA L1026
000021E8                         L916:	; bb162
                                 ;    1529   }
                                 ;    1530 
                                 ;    1531   // delete from end of object until desired len is reached
                                 ;    1532   while (cur_size > new_size) {
                                 ;    1533     cur_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1533
000021E8 BA09                    		MOVU.W 12H[R0], R1
000021EA 755167                  		CMP #67H, R1
000021ED 24rr                    		BGTU L918
000021EF                         L917:	; bb167
000021EF F80600                  		MOV.L #00000000H, [R0]
000021F2 2Err                 B  		BRA L919
000021F4                         L918:	; bb168
000021F4 BA09                    		MOVU.W 12H[R0], R1
000021F6 711198                  		ADD #0FFFFFF98H, R1
000021F9 FD74917C                		DIVU #7CH, R1
000021FD 6211                    		ADD #01H, R1
000021FF E301                    		MOV.L R1, [R0]
00002201                         L919:	; bb174
00002201 EC01                    		MOV.L [R0], R1
00002203 9301                    		MOV.W R1, 18H[R0]
                                 ;    1534 
                                 ;    1535     // put object index for current data span index in work buffer
                                 ;    1536     if (prev_objix_spix != cur_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1536
00002205 BB09                    		MOVU.W 1AH[R0], R1
00002207 06C5010C                		CMP 18H[R0].UW, R1
0000220B 3Arrrr               W  		BEQ L958
0000220E                         L920:	; bb180
                                 ;    1537       if (prev_objix_spix != (spiffs_span_ix)-1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1537
0000220E BB09                    		MOVU.W 1AH[R0], R1
00002210 7701FFFF00              		CMP #0FFFFH, R1
00002215 3Arrrr               W  		BEQ L934
00002218                         L921:	; bb181
                                 ;    1538         // remove previous object index page
                                 ;    1539         SPIFFS_DBG("truncate: delete objix page %04x:%04x\n", objix_pix, prev_objix_spix);
                                 ;    1540 
                                 ;    1541         res = spiffs_page_index_check(fs, fd, objix_pix, prev_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1541
00002218 BB0C                    		MOVU.W 1AH[R0], R4
0000221A BA03                    		MOVU.W 10H[R0], R3
0000221C AC82                    		MOV.L 48H[R0], R2
0000221E A889                    		MOV.L 0CH[R0], R1
00002220 39rrrr               W  		BSR __$spiffs_page_index_check
00002223 A081                    		MOV.L R1, 08H[R0]
00002225                         L922:	; bb181.split
                                 ;    1542         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1542
00002225 A881                    		MOV.L 08H[R0], R1
00002227 69F1                    		SHLR #1FH, R1
00002229 6101                    		CMP #00H, R1
0000222B 10                   S  		BEQ L924
0000222C                         L923:	; bb189
0000222C E5000201                		MOV.L 08H[R0], 04H[R0]
00002230 38rrrr               W  		BRA L1059
00002233                         L924:	; bb197.split
                                 ;    1543 
                                 ;    1544         res = spiffs_page_delete(fs, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1544
00002233 BA02                    		MOVU.W 10H[R0], R2
00002235 A889                    		MOV.L 0CH[R0], R1
00002237 39rrrr               W  		BSR _spiffs_page_delete
0000223A A081                    		MOV.L R1, 08H[R0]
0000223C                         L925:	; bb197.split6
                                 ;    1545         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1545
0000223C A881                    		MOV.L 08H[R0], R1
0000223E 69F1                    		SHLR #1FH, R1
00002240 6101                    		CMP #00H, R1
00002242 10                   S  		BEQ L927
00002243                         L926:	; bb203
00002243 E5000201                		MOV.L 08H[R0], 04H[R0]
00002247 38rrrr               W  		BRA L1059
0000224A                         L927:	; bb211.split
                                 ;    1546         spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_DEL, fd->obj_id, objix->p_hdr.span_ix, objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1546
0000224A AA01                    		MOV.L 20H[R0], R1
0000224C 981B                    		MOV.W 02H[R1], R3
0000224E AC82                    		MOV.L 48H[R0], R2
00002250 B8AC                    		MOVU.W 06H[R2], R4
00002252 9A05                    		MOV.W 10H[R0], R5
00002254 A889                    		MOV.L 0CH[R0], R1
00002256 6080                    		SUB #08H, R0
00002258 900D                    		MOV.W R5, 02H[R0]
0000225A D303                    		MOV.W R3, [R0]
0000225C 3E0100                  		MOV.L #00000000H, 04H[R0]
0000225F 6623                    		MOV.L #00000002H, R3
00002261 39rrrr               W  		BSR _spiffs_cb_object_event
00002264 6280                    		ADD #08H, R0
00002266                         L928:	; bb211.split7
                                 ;    1547         if (prev_objix_spix > 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1547
00002266 BB09                    		MOVU.W 1AH[R0], R1
00002268 6101                    		CMP #00H, R1
0000226A 2Brr                    		BLE L934
0000226C                         L929:	; bb224
                                 ;    1548           // Update object index header page, unless we totally want to remove the file.
                                 ;    1549           // If fully removing, we're not keeping consistency as good as when storing the header between chunks,
                                 ;    1550           // would we be aborted. But when removing full files, a crammed system may otherwise
                                 ;    1551           // report ERR_FULL a la windows. We cannot have that.
                                 ;    1552           // Hence, take the risk - if aborted, a file check would free the lost pages and mend things
                                 ;    1553           // as the file is marked as fully deleted in the beginning.
                                 ;    1554           if (remove == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1554
0000226C 590143                  		MOVU.B 43H[R0], R1
0000226F 6101                    		CMP #00H, R1
00002271 21rr                    		BNE L933
00002273                         L930:	; bb225
                                 ;    1555             SPIFFS_DBG("truncate: update objix hdr page %04x:%04x to size %i\n", fd->objix_hdr_pix, prev_objix_spix, cur_size);
                                 ;    1556             res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1556
00002273 AC82                    		MOV.L 48H[R0], R2
00002275 B9A4                    		MOVU.W 0CH[R2], R4
00002277 B8AB                    		MOVU.W 06H[R2], R3
00002279 A90D                    		MOV.L 14H[R0], R5
0000227B A889                    		MOV.L 0CH[R0], R1
0000227D 7100F0                  		ADD #0FFFFFFF0H, R0
00002280 710F38                  		ADD #38H, R0, R15
00002283 E70F03                  		MOV.L R15, 0CH[R0]
00002286 A085                    		MOV.L R5, 08H[R0]
00002288 3E0100                  		MOV.L #00000000H, 04H[R0]
0000228B F80600                  		MOV.L #00000000H, [R0]
0000228E 39rrrr               W  		BSR _spiffs_object_update_index_hdr
00002291 710010                  		ADD #10H, R0
00002294 A081                    		MOV.L R1, 08H[R0]
00002296                         L931:	; bb225.split
                                 ;    1557                 fd->objix_hdr_pix, 0, 0, cur_size, &new_objix_hdr_pix);
                                 ;    1558             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1558
00002296 A881                    		MOV.L 08H[R0], R1
00002298 69F1                    		SHLR #1FH, R1
0000229A 6101                    		CMP #00H, R1
0000229C 10                   S  		BEQ L933
0000229D                         L932:	; bb238
0000229D E5000201                		MOV.L 08H[R0], 04H[R0]
000022A1 38rrrr               W  		BRA L1059
000022A4                         L933:	; bb252
                                 ;    1559           }
                                 ;    1560           fd->size = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1560
000022A4 A909                    		MOV.L 14H[R0], R1
000022A6 AC82                    		MOV.L 48H[R0], R2
000022A8 A0A1                    		MOV.L R1, 08H[R2]
000022AA                         L934:	; bb268
                                 ;    1561         }
                                 ;    1562       }
                                 ;    1563       // load current object index (header) page
                                 ;    1564       if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1564
000022AA BB01                    		MOVU.W 18H[R0], R1
000022AC 6101                    		CMP #00H, R1
000022AE 18                   S  		BNE L936
000022AF                         L935:	; bb269
                                 ;    1565         objix_pix = fd->objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1565
000022AF AC81                    		MOV.L 48H[R0], R1
000022B1 D5100608                		MOV.W 0CH[R1], 10H[R0]
000022B5 2Err                 B  		BRA L939
000022B7                         L936:	; bb273
                                 ;    1566       } else {
                                 ;    1567         res = spiffs_obj_lu_find_id_and_span(fs, fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG, cur_objix_spix, 0, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1567
000022B7 AC81                    		MOV.L 48H[R0], R1
000022B9 B89A                    		MOVU.W 06H[R1], R2
000022BB BB03                    		MOVU.W 18H[R0], R3
000022BD A889                    		MOV.L 0CH[R0], R1
000022BF 6040                    		SUB #04H, R0
000022C1 710E14                  		ADD #14H, R0, R14
000022C4 E30E                    		MOV.L R14, [R0]
000022C6 78F2                    		BSET #0FH, R2
000022C8 6604                    		MOV.L #00000000H, R4
000022CA 39rrrr               W  		BSR _spiffs_obj_lu_find_id_and_span
000022CD 6240                    		ADD #04H, R0
000022CF A081                    		MOV.L R1, 08H[R0]
000022D1                         L937:	; bb273.split
                                 ;    1568         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1568
000022D1 A881                    		MOV.L 08H[R0], R1
000022D3 69F1                    		SHLR #1FH, R1
000022D5 6101                    		CMP #00H, R1
000022D7 10                   S  		BEQ L939
000022D8                         L938:	; bb285
000022D8 E5000201                		MOV.L 08H[R0], 04H[R0]
000022DC 38rrrr               W  		BRA L1059
000022DF                         L939:	; bb299
                                 ;    1569       }
                                 ;    1570 
                                 ;    1571       SPIFFS_DBG("truncate: load objix page %04x:%04x for data spix:%04x\n", objix_pix, cur_objix_spix, data_spix);
                                 ;    1572       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1572
000022DF A889                    		MOV.L 0CH[R0], R1
000022E1 AC82                    		MOV.L 48H[R0], R2
000022E3 98A3                    		MOV.W 04H[R2], R3
000022E5 BA04                    		MOVU.W 10H[R0], R4
000022E7 6080                    		SUB #08H, R0
000022E9 E5100901                		MOV.L 24H[R1], 04H[R0]
000022ED F80A0001                		MOV.L #00000100H, [R0]
000022F1 6C84                    		SHLL #08H, R4
000022F3 7344000010              		ADD #00100000H, R4
000022F8 754216                  		MOV.L #00000016H, R2
000022FB 05rrrrrr             A  		BSR _spiffs_phys_rd
000022FF 6280                    		ADD #08H, R0
00002301 A081                    		MOV.L R1, 08H[R0]
00002303                         L940:	; bb299.split
                                 ;    1573           fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1574       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1574
00002303 A881                    		MOV.L 08H[R0], R1
00002305 69F1                    		SHLR #1FH, R1
00002307 6101                    		CMP #00H, R1
00002309 10                   S  		BEQ L942
0000230A                         L941:	; bb314
0000230A E5000201                		MOV.L 08H[R0], 04H[R0]
0000230E 38rrrr               W  		BRA L1059
00002311                         L942:	; bb323.split
                                 ;    1575       SPIFFS_VALIDATE_OBJIX(objix_hdr->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1575
00002311 A989                    		MOV.L 1CH[R0], R1
00002313 F51004                  		BTST #00H, 04H[R1].B
00002316 10                   S  		BEQ L944
00002317                         L943:	; bb324
00002317 F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
0000231C 38rrrr               W  		BRA L1059
0000231F                         L944:	; bb336
0000231F A989                    		MOV.L 1CH[R0], R1
00002321 F51704                  		BTST #07H, 04H[R1].B
00002324 18                   S  		BNE L946
00002325                         L945:	; bb337
00002325 F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
0000232A 38rrrr               W  		BRA L1059
0000232D                         L946:	; bb349
0000232D A989                    		MOV.L 1CH[R0], R1
0000232F F51104                  		BTST #01H, 04H[R1].B
00002332 10                   S  		BEQ L948
00002333                         L947:	; bb350
00002333 F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00002338 38rrrr               W  		BRA L1059
0000233B                         L948:	; bb362
0000233B A989                    		MOV.L 1CH[R0], R1
0000233D F51204                  		BTST #02H, 04H[R1].B
00002340 10                   S  		BEQ L950
00002341                         L949:	; bb363
00002341 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00002346 38rrrr               W  		BRA L1059
00002349                         L950:	; bb375
00002349 AC81                    		MOV.L 48H[R0], R1
0000234B B899                    		MOVU.W 06H[R1], R1
0000234D 7CF1                    		BTST #0FH, R1
0000234F 18                   S  		BNE L952
00002350                         L951:	; bb376
00002350 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
00002355 38rrrr               W  		BRA L1059
00002358                         L952:	; bb387
00002358 A989                    		MOV.L 1CH[R0], R1
0000235A B819                    		MOVU.W 02H[R1], R1
0000235C 06C5010C                		CMP 18H[R0].UW, R1
00002360 10                   S  		BEQ L954
00002361                         L953:	; bb388
00002361 F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
00002366 38rrrr               W  		BRA L1059
00002369                         L954:	; bb400
                                 ;    1576       fd->cursor_objix_pix = objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1576
00002369 9A01                    		MOV.W 10H[R0], R1
0000236B AC82                    		MOV.L 48H[R0], R2
0000236D 91A9                    		MOV.W R1, 0EH[R2]
0000236F                         L955:	; bb400.split
                                 ;    1577       fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1577
0000236F 9B01                    		MOV.W 18H[R0], R1
00002371 AC82                    		MOV.L 48H[R0], R2
00002373 9221                    		MOV.W R1, 10H[R2]
00002375                         L956:	; bb400.split8
                                 ;    1578       fd->offset = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1578
00002375 A909                    		MOV.L 14H[R0], R1
00002377 AC82                    		MOV.L 48H[R0], R2
00002379 A129                    		MOV.L R1, 14H[R2]
0000237B                         L957:	; bb400.split9
                                 ;    1579 
                                 ;    1580       prev_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1580
0000237B D5000C0D                		MOV.W 18H[R0], 1AH[R0]
0000237F                         L958:	; bb419
                                 ;    1581     }
                                 ;    1582 
                                 ;    1583     if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1583
0000237F BB01                    		MOVU.W 18H[R0], R1
00002381 6101                    		CMP #00H, R1
00002383 21rr                    		BNE L961
00002385                         L959:	; bb420
                                 ;    1584       // get data page from object index header page
                                 ;    1585       data_pix = ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1585
00002385 BA09                    		MOVU.W 12H[R0], R1
00002387 6C11                    		SHLL #01H, R1
00002389 06890107                		ADD 1CH[R0].L, R1
0000238D D5101813                		MOV.W 30H[R1], 26H[R0]
00002391                         L960:	; bb420.split
                                 ;    1586       ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix] = SPIFFS_OBJ_ID_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1586
00002391 BA09                    		MOVU.W 12H[R0], R1
00002393 6C11                    		SHLL #01H, R1
00002395 06890107                		ADD 1CH[R0].L, R1
00002399 F91918FFFF              		MOV.W #0FFFFH, 30H[R1]
0000239E 2Err                 B  		BRA L968
000023A0                         L961:	; bb436
                                 ;    1587     } else {
                                 ;    1588       // get data page from object index page
                                 ;    1589       data_pix = ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1589
000023A0 AA01                    		MOV.L 20H[R0], R1
000023A2 6281                    		ADD #08H, R1
000023A4 BA0A                    		MOVU.W 12H[R0], R2
000023A6 755267                  		CMP #67H, R2
000023A9 24rr                    		BGTU L963
000023AB                         L962:	; bb445
000023AB E302                    		MOV.L R2, [R0]
000023AD 2Err                 B  		BRA L964
000023AF                         L963:	; bb448
000023AF 712298                  		ADD #0FFFFFF98H, R2
000023B2 EF2E                    		MOV.L R2, R14
000023B4 FD749E7C                		DIVU #7CH, R14
000023B8 751E7C                  		MUL #7CH, R14
000023BB 43E2                    		SUB R14, R2
000023BD E302                    		MOV.L R2, [R0]
000023BF                         L964:	; bb453
000023BF EC02                    		MOV.L [R0], R2
000023C1 FE5211                  		MOV.W [R2,R1], R1
000023C4 9489                    		MOV.W R1, 26H[R0]
                                 ;    1590       ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)] = SPIFFS_OBJ_ID_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1590
000023C6 AA01                    		MOV.L 20H[R0], R1
000023C8 6281                    		ADD #08H, R1
000023CA BA0A                    		MOVU.W 12H[R0], R2
000023CC 755267                  		CMP #67H, R2
000023CF 24rr                    		BGTU L966
000023D1                         L965:	; bb466
000023D1 E302                    		MOV.L R2, [R0]
000023D3 2Err                 B  		BRA L967
000023D5                         L966:	; bb469
000023D5 712298                  		ADD #0FFFFFF98H, R2
000023D8 EF2E                    		MOV.L R2, R14
000023DA FD749E7C                		DIVU #7CH, R14
000023DE 751E7C                  		MUL #7CH, R14
000023E1 43E2                    		SUB R14, R2
000023E3 E302                    		MOV.L R2, [R0]
000023E5                         L967:	; bb474
000023E5 EC02                    		MOV.L [R0], R2
000023E7 FBE6FF                  		MOV.L #0FFFFFFFFH, R14
000023EA FE121E                  		MOV.W R14, [R2,R1]
000023ED                         L968:	; bb484
                                 ;    1591     }
                                 ;    1592 
                                 ;    1593     SPIFFS_DBG("truncate: got data pix %04x\n", data_pix);
                                 ;    1594 
                                 ;    1595     if (new_size == 0 || remove || cur_size - new_size >= SPIFFS_DATA_PAGE_SIZE(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1595
000023ED AC09                    		MOV.L 44H[R0], R1
000023EF 6101                    		CMP #00H, R1
000023F1 3Arrrr               W  		BEQ L1019
000023F4 38rrrr               W  		BRA L1018
000023F7                         L969:	; bb485
                                 ;    1596       // delete full data page
                                 ;    1597       res = spiffs_page_data_check(fs, fd, data_pix, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1597
000023F7 BA0C                    		MOVU.W 12H[R0], R4
000023F9 BC8B                    		MOVU.W 26H[R0], R3
000023FB AC82                    		MOV.L 48H[R0], R2
000023FD A889                    		MOV.L 0CH[R0], R1
000023FF 39rrrr               W  		BSR __$spiffs_page_data_check
00002402 A081                    		MOV.L R1, 08H[R0]
00002404                         L970:	; bb485.split
                                 ;    1598       if (res != SPIFFS_ERR_DELETED && res != SPIFFS_OK && res != SPIFFS_ERR_INDEX_REF_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1598
00002404 A881                    		MOV.L 08H[R0], R1
00002406 7601ECD8                		CMP #0FFFFD8ECH, R1
0000240A 10                   S  		BEQ L973
0000240B                         L971:	; bb497
0000240B A881                    		MOV.L 08H[R0], R1
0000240D 6101                    		CMP #00H, R1
0000240F 10                   S  		BEQ L973
00002410                         L972:	; bb501
00002410 F80601                  		MOV.L #00000001H, [R0]
00002413 08                   S  		BRA L974
00002414                         L973:	; bb502
00002414 F80600                  		MOV.L #00000000H, [R0]
00002417                         L974:	; bb503
00002417 EC01                    		MOV.L [R0], R1
00002419 6101                    		CMP #00H, R1
0000241B 20rr                    		BEQ L977
0000241D                         L975:	; bb507
0000241D A881                    		MOV.L 08H[R0], R1
0000241F 7601E1D8                		CMP #0FFFFD8E1H, R1
00002423 10                   S  		BEQ L977
00002424                         L976:	; bb511
00002424 F80601                  		MOV.L #00000001H, [R0]
00002427 08                   S  		BRA L978
00002428                         L977:	; bb512
00002428 F80600                  		MOV.L #00000000H, [R0]
0000242B                         L978:	; bb513
0000242B EC01                    		MOV.L [R0], R1
0000242D 6101                    		CMP #00H, R1
0000242F 3Brrrr               W  		BNE L1027
00002432                         L979:	; bb519
                                 ;    1599         SPIFFS_DBG("truncate: err validating data pix %i\n", res);
                                 ;    1600         break;
                                 ;    1601       }
                                 ;    1602 
                                 ;    1603       if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1603
00002432 A881                    		MOV.L 08H[R0], R1
00002434 6101                    		CMP #00H, R1
00002436 21rr                    		BNE L982
00002438                         L980:	; bb520
                                 ;    1604         res = spiffs_page_delete(fs, data_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1604
00002438 BC8A                    		MOVU.W 26H[R0], R2
0000243A A889                    		MOV.L 0CH[R0], R1
0000243C 39rrrr               W  		BSR _spiffs_page_delete
0000243F A081                    		MOV.L R1, 08H[R0]
00002441                         L981:	; bb520.split
                                 ;    1605         if (res != SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1605
00002441 A881                    		MOV.L 08H[R0], R1
00002443 6101                    		CMP #00H, R1
00002445 3Brrrr               W  		BNE L1027
00002448 2Err                 B  		BRA L988
0000244A                         L982:	; bb533
                                 ;    1606           SPIFFS_DBG("truncate: err deleting data pix %i\n", res);
                                 ;    1607           break;
                                 ;    1608         }
                                 ;    1609       } else if (res == SPIFFS_ERR_DELETED || res == SPIFFS_ERR_INDEX_REF_FREE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1609
0000244A A881                    		MOV.L 08H[R0], R1
0000244C 7601ECD8                		CMP #0FFFFD8ECH, R1
00002450 20rr                    		BEQ L985
00002452 08                   S  		BRA L984
00002453                         L983:	; bb534
                                 ;    1610         res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1610
00002453 3E0200                  		MOV.L #00000000H, 08H[R0]
00002456 2Err                 B  		BRA L988
00002458                         L984:	; bb538
00002458 A881                    		MOV.L 08H[R0], R1
0000245A 7601E1D8                		CMP #0FFFFD8E1H, R1
0000245E 18                   S  		BNE L986
0000245F                         L985:	; bb542
0000245F F80601                  		MOV.L #00000001H, [R0]
00002462 08                   S  		BRA L987
00002463                         L986:	; bb543
00002463 F80600                  		MOV.L #00000000H, [R0]
00002466                         L987:	; bb544
00002466 EC01                    		MOV.L [R0], R1
00002468 6101                    		CMP #00H, R1
0000246A 21rr                    		BNE L983
0000246C                         L988:	; bb555
                                 ;    1611       }
                                 ;    1612 
                                 ;    1613       // update current size
                                 ;    1614       if (cur_size % SPIFFS_DATA_PAGE_SIZE(fs) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1614
0000246C A909                    		MOV.L 14H[R0], R1
0000246E EF1E                    		MOV.L R1, R14
00002470 FD789EFA00              		DIVU #0FAH, R14
00002475 761EFA00                		MUL #0FAH, R14
00002479 FF0EE1                  		SUB R14, R1, R14
0000247C 610E                    		CMP #00H, R14
0000247E 18                   S  		BNE L990
0000247F                         L989:	; bb556
                                 ;    1615         cur_size -= SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1615
0000247F 721106FF                		ADD #0FFFFFF06H, R1
00002483 A109                    		MOV.L R1, 14H[R0]
00002485 2Err                 B  		BRA L991
00002487                         L990:	; bb559
                                 ;    1616       } else {
                                 ;    1617         cur_size -= cur_size % SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1617
00002487 EF1E                    		MOV.L R1, R14
00002489 FD789EFA00              		DIVU #0FAH, R14
0000248E 761EFA00                		MUL #0FAH, R14
00002492 43E1                    		SUB R14, R1
00002494 A90A                    		MOV.L 14H[R0], R2
00002496 4312                    		SUB R1, R2
00002498 A10A                    		MOV.L R2, 14H[R0]
0000249A                         L991:	; bb569
                                 ;    1618       }
                                 ;    1619       fd->size = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1619
0000249A A909                    		MOV.L 14H[R0], R1
0000249C AC82                    		MOV.L 48H[R0], R2
0000249E A0A1                    		MOV.L R1, 08H[R2]
000024A0                         L992:	; bb569.split
                                 ;    1620       fd->offset = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1620
000024A0 A909                    		MOV.L 14H[R0], R1
000024A2 AC82                    		MOV.L 48H[R0], R2
000024A4 A129                    		MOV.L R1, 14H[R2]
000024A6                         L993:	; bb569.split10
                                 ;    1621       SPIFFS_DBG("truncate: delete data page %04x for data spix:%04x, cur_size:%i\n", data_pix, data_spix, cur_size);
                                 ;    1622     } else {
                                 ;    1623       // delete last page, partially
                                 ;    1624       spiffs_page_header p_hdr;
                                 ;    1625       spiffs_page_ix new_data_pix;
                                 ;    1626       u32_t bytes_to_remove = SPIFFS_DATA_PAGE_SIZE(fs) - (new_size % SPIFFS_DATA_PAGE_SIZE(fs));
                                 ;    1627       SPIFFS_DBG("truncate: delete %i bytes from data page %04x for data spix:%04x, cur_size:%i\n", bytes_to_remove, data_pix, data_spix, cur_size);
                                 ;    1628 
                                 ;    1629       res = spiffs_page_data_check(fs, fd, data_pix, data_spix);
                                 ;    1630       if (res != SPIFFS_OK) break;
                                 ;    1631 
                                 ;    1632       p_hdr.obj_id = fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 ;    1633       p_hdr.span_ix = data_spix;
                                 ;    1634       p_hdr.flags = 0xff;
                                 ;    1635       // allocate new page and copy unmodified data
                                 ;    1636       res = spiffs_page_allocate_data(fs, fd->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 ;    1637           &p_hdr, 0, 0, 0, 0, &new_data_pix);
                                 ;    1638       if (res != SPIFFS_OK) break;
                                 ;    1639       res = spiffs_phys_cpy(fs, 0,
                                 ;    1640           SPIFFS_PAGE_TO_PADDR(fs, new_data_pix) + sizeof(spiffs_page_header),
                                 ;    1641           SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header),
                                 ;    1642           SPIFFS_DATA_PAGE_SIZE(fs) - bytes_to_remove);
                                 ;    1643       if (res != SPIFFS_OK) break;
                                 ;    1644       // delete original data page
                                 ;    1645       res = spiffs_page_delete(fs, data_pix);
                                 ;    1646       if (res != SPIFFS_OK) break;
                                 ;    1647       p_hdr.flags &= ~SPIFFS_PH_FLAG_FINAL;
                                 ;    1648       res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 ;    1649           fd->file_nbr,
                                 ;    1650           SPIFFS_PAGE_TO_PADDR(fs, new_data_pix) + offsetof(spiffs_page_header, flags),
                                 ;    1651           sizeof(u8_t),
                                 ;    1652           (u8_t *)&p_hdr.flags);
                                 ;    1653       if (res != SPIFFS_OK) break;
                                 ;    1654 
                                 ;    1655       // update memory representation of object index page with new data page
                                 ;    1656       if (cur_objix_spix == 0) {
                                 ;    1657         // update object index header page
                                 ;    1658         ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix] = new_data_pix;
                                 ;    1659         SPIFFS_DBG("truncate: wrote page %04x to objix_hdr entry %02x in mem\n", new_data_pix, SPIFFS_OBJ_IX_ENTRY(fs, data_spix));
                                 ;    1660       } else {
                                 ;    1661         // update object index page
                                 ;    1662         ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)] = new_data_pix;
                                 ;    1663         SPIFFS_DBG("truncate: wrote page %04x to objix entry %02x in mem\n", new_data_pix, SPIFFS_OBJ_IX_ENTRY(fs, data_spix));
                                 ;    1664       }
                                 ;    1665       cur_size = new_size;
                                 ;    1666       fd->size = new_size;
                                 ;    1667       fd->offset = cur_size;
                                 ;    1668       break;
                                 ;    1669     }
                                 ;    1670     data_spix--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1670
000024A6 9A09                    		MOV.W 12H[R0], R1
000024A8 6011                    		SUB #01H, R1
000024AA 9209                    		MOV.W R1, 12H[R0]
000024AC 38rrrr               W  		BRA L1026
000024AF                         L994:	; bb576
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1626
000024AF AC09                    		MOV.L 44H[R0], R1
000024B1 EF1E                    		MOV.L R1, R14
000024B3 FD789EFA00              		DIVU #0FAH, R14
000024B8 761EFA00                		MUL #0FAH, R14
000024BC 43E1                    		SUB R14, R1
000024BE 7542FA                  		MOV.L #000000FAH, R2
000024C1 4312                    		SUB R1, R2
000024C3 A30A                    		MOV.L R2, 34H[R0]
000024C5                         L995:	; bb576.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1629
000024C5 BA0C                    		MOVU.W 12H[R0], R4
000024C7 BC8B                    		MOVU.W 26H[R0], R3
000024C9 AC82                    		MOV.L 48H[R0], R2
000024CB A889                    		MOV.L 0CH[R0], R1
000024CD 39rrrr               W  		BSR __$spiffs_page_data_check
000024D0 A081                    		MOV.L R1, 08H[R0]
000024D2                         L996:	; bb576.split11
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1630
000024D2 A881                    		MOV.L 08H[R0], R1
000024D4 6101                    		CMP #00H, R1
000024D6 3Brrrr               W  		BNE L1027
000024D9                         L997:	; bb592
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1632
000024D9 AC81                    		MOV.L 48H[R0], R1
000024DB B899                    		MOVU.W 06H[R1], R1
000024DD 7621FF7F                		AND #7FFFH, R1
000024E1 9581                    		MOV.W R1, 2CH[R0]
000024E3                         L998:	; bb592.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1633
000024E3 D5000917                		MOV.W 12H[R0], 2EH[R0]
000024E7                         L999:	; bb592.split12
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1634
000024E7 F90430FF                		MOV.B #0FFH, 30H[R0]
000024EB                         L1000:	; bb592.split13
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1636
000024EB AC81                    		MOV.L 48H[R0], R1
000024ED B89A                    		MOVU.W 06H[R1], R2
000024EF A889                    		MOV.L 0CH[R0], R1
000024F1 7100F0                  		ADD #0FFFFFFF0H, R0
000024F4 710342                  		ADD #42H, R0, R3
000024F7 A08B                    		MOV.L R3, 0CH[R0]
000024F9 6604                    		MOV.L #00000000H, R4
000024FB 8204                    		MOV.B R4, 08H[R0]
000024FD A00C                    		MOV.L R4, 04H[R0]
000024FF E304                    		MOV.L R4, [R0]
00002501 7622FF7F                		AND #7FFFH, R2
00002505 71033C                  		ADD #3CH, R0, R3
00002508 39rrrr               W  		BSR _spiffs_page_allocate_data
0000250B 710010                  		ADD #10H, R0
0000250E A081                    		MOV.L R1, 08H[R0]
00002510                         L1001:	; bb592.split14
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1638
00002510 A881                    		MOV.L 08H[R0], R1
00002512 6101                    		CMP #00H, R1
00002514 3Brrrr               W  		BNE L1027
00002517                         L1002:	; bb618
00002517 754EFA                  		MOV.L #000000FAH, R14
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1639
0000251A 06810E0D                		SUB 34H[R0].L, R14
0000251E BC8C                    		MOVU.W 26H[R0], R4
00002520 BE0B                    		MOVU.W 32H[R0], R3
00002522 A889                    		MOV.L 0CH[R0], R1
00002524 6040                    		SUB #04H, R0
00002526 E30E                    		MOV.L R14, [R0]
00002528 6C84                    		SHLL #08H, R4
0000252A 7344060010              		ADD #00100006H, R4
0000252F 6C83                    		SHLL #08H, R3
00002531 7333060010              		ADD #00100006H, R3
00002536 6602                    		MOV.L #00000000H, R2
00002538 39rrrr               W  		BSR _spiffs_phys_cpy
0000253B 6240                    		ADD #04H, R0
0000253D A081                    		MOV.L R1, 08H[R0]
0000253F                         L1003:	; bb618.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1643
0000253F A881                    		MOV.L 08H[R0], R1
00002541 6101                    		CMP #00H, R1
00002543 3Brrrr               W  		BNE L1027
00002546                         L1004:	; bb640
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1645
00002546 BC8A                    		MOVU.W 26H[R0], R2
00002548 A889                    		MOV.L 0CH[R0], R1
0000254A 39rrrr               W  		BSR _spiffs_page_delete
0000254D A081                    		MOV.L R1, 08H[R0]
0000254F                         L1005:	; bb640.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1646
0000254F A881                    		MOV.L 08H[R0], R1
00002551 6101                    		CMP #00H, R1
00002553 3Brrrr               W  		BNE L1027
00002556                         L1006:	; bb651
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1647
00002556 F10930                  		BCLR #01H, 30H[R0].B
00002559                         L1007:	; bb651.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1648
00002559 AC81                    		MOV.L 48H[R0], R1
0000255B 9893                    		MOV.W 04H[R1], R3
0000255D BE0C                    		MOVU.W 32H[R0], R4
0000255F A889                    		MOV.L 0CH[R0], R1
00002561 6080                    		SUB #08H, R0
00002563 710238                  		ADD #38H, R0, R2
00002566 A00A                    		MOV.L R2, 04H[R0]
00002568 F80601                  		MOV.L #00000001H, [R0]
0000256B 6C84                    		SHLL #08H, R4
0000256D 7344040010              		ADD #00100004H, R4
00002572 6672                    		MOV.L #00000007H, R2
00002574 05rrrrrr             A  		BSR _spiffs_phys_wr
00002578 6280                    		ADD #08H, R0
0000257A A081                    		MOV.L R1, 08H[R0]
0000257C                         L1008:	; bb651.split15
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1653
0000257C A881                    		MOV.L 08H[R0], R1
0000257E 6101                    		CMP #00H, R1
00002580 3Brrrr               W  		BNE L1027
00002583                         L1009:	; bb676
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1656
00002583 BB01                    		MOVU.W 18H[R0], R1
00002585 6101                    		CMP #00H, R1
00002587 21rr                    		BNE L1011
00002589                         L1010:	; bb677
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1658
00002589 BA09                    		MOVU.W 12H[R0], R1
0000258B 6C11                    		SHLL #01H, R1
0000258D 06890107                		ADD 1CH[R0].L, R1
00002591 D5011918                		MOV.W 32H[R0], 30H[R1]
00002595 2Err                 B  		BRA L1015
00002597                         L1011:	; bb686
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1662
00002597 AA01                    		MOV.L 20H[R0], R1
00002599 6281                    		ADD #08H, R1
0000259B BA0A                    		MOVU.W 12H[R0], R2
0000259D 755267                  		CMP #67H, R2
000025A0 24rr                    		BGTU L1013
000025A2                         L1012:	; bb695
000025A2 E302                    		MOV.L R2, [R0]
000025A4 2Err                 B  		BRA L1014
000025A6                         L1013:	; bb698
000025A6 712298                  		ADD #0FFFFFF98H, R2
000025A9 EF2E                    		MOV.L R2, R14
000025AB FD749E7C                		DIVU #7CH, R14
000025AF 751E7C                  		MUL #7CH, R14
000025B2 43E2                    		SUB R14, R2
000025B4 E302                    		MOV.L R2, [R0]
000025B6                         L1014:	; bb703
000025B6 9E0A                    		MOV.W 32H[R0], R2
000025B8 EC03                    		MOV.L [R0], R3
000025BA FE1312                  		MOV.W R2, [R3,R1]
000025BD                         L1015:	; bb713
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1665
000025BD E5001105                		MOV.L 44H[R0], 14H[R0]
000025C1                         L1016:	; bb713.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1666
000025C1 AC09                    		MOV.L 44H[R0], R1
000025C3 AC82                    		MOV.L 48H[R0], R2
000025C5 A0A1                    		MOV.L R1, 08H[R2]
000025C7                         L1017:	; bb713.split16
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1667
000025C7 A909                    		MOV.L 14H[R0], R1
000025C9 AC82                    		MOV.L 48H[R0], R2
000025CB A129                    		MOV.L R1, 14H[R2]
000025CD 2Err                 B  		BRA L1027
000025CF                         L1018:	; bb725
000025CF 590143                  		MOVU.B 43H[R0], R1
000025D2 6101                    		CMP #00H, R1
000025D4 10                   S  		BEQ L1020
000025D5                         L1019:	; bb730
000025D5 F80601                  		MOV.L #00000001H, [R0]
000025D8 08                   S  		BRA L1021
000025D9                         L1020:	; bb731
000025D9 F80600                  		MOV.L #00000000H, [R0]
000025DC                         L1021:	; bb732
000025DC EC01                    		MOV.L [R0], R1
000025DE 6101                    		CMP #00H, R1
000025E0 21rr                    		BNE L1023
000025E2                         L1022:	; bb736
000025E2 A909                    		MOV.L 14H[R0], R1
000025E4 06810111                		SUB 44H[R0].L, R1
000025E8 7551FA                  		CMP #0FAH, R1
000025EB 23rr                    		BLTU L1024
000025ED                         L1023:	; bb742
000025ED F80601                  		MOV.L #00000001H, [R0]
000025F0 08                   S  		BRA L1025
000025F1                         L1024:	; bb743
000025F1 F80600                  		MOV.L #00000000H, [R0]
000025F4                         L1025:	; bb744
000025F4 EC01                    		MOV.L [R0], R1
000025F6 6101                    		CMP #00H, R1
000025F8 3Brrrr               W  		BNE L969
000025FB 38rrrr               W  		BRA L994
000025FE                         L1026:	; bb752
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1532
000025FE A909                    		MOV.L 14H[R0], R1
00002600 06850111                		CMP 44H[R0].L, R1
00002604 25rr                  * 		BGTU L916
         38rrrr                  
00002609                         L1027:	; bb760
                                 ;    1671   } // while all data
                                 ;    1672 
                                 ;    1673   // update object indices
                                 ;    1674   if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1674
00002609 BB01                    		MOVU.W 18H[R0], R1
0000260B 6101                    		CMP #00H, R1
0000260D 3Brrrr               W  		BNE L1044
00002610                         L1028:	; bb762
                                 ;    1675     // update object index header page
                                 ;    1676     if (cur_size == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1676
00002610 A909                    		MOV.L 14H[R0], R1
00002612 6101                    		CMP #00H, R1
00002614 3Brrrr               W  		BNE L1041
00002617                         L1029:	; bb764
                                 ;    1677       if (remove) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1677
00002617 590143                  		MOVU.B 43H[R0], R1
0000261A 6101                    		CMP #00H, R1
0000261C A889                    		MOV.L 0CH[R0], R1
0000261E 20rr                    		BEQ L1037
00002620                         L1030:	; bb765
                                 ;    1678         // remove object altogether
                                 ;    1679         SPIFFS_DBG("truncate: remove object index header page %04x\n", objix_pix);
                                 ;    1680 
                                 ;    1681         res = spiffs_page_index_check(fs, fd, objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1681
00002620 BA03                    		MOVU.W 10H[R0], R3
00002622 AC82                    		MOV.L 48H[R0], R2
00002624 6604                    		MOV.L #00000000H, R4
00002626 39rrrr               W  		BSR __$spiffs_page_index_check
00002629 A081                    		MOV.L R1, 08H[R0]
0000262B                         L1031:	; bb765.split
                                 ;    1682         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1682
0000262B A881                    		MOV.L 08H[R0], R1
0000262D 69F1                    		SHLR #1FH, R1
0000262F 6101                    		CMP #00H, R1
00002631 10                   S  		BEQ L1033
00002632                         L1032:	; bb772
00002632 E5000201                		MOV.L 08H[R0], 04H[R0]
00002636 38rrrr               W  		BRA L1059
00002639                         L1033:	; bb780.split
                                 ;    1683 
                                 ;    1684         res = spiffs_page_delete(fs, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1684
00002639 BA02                    		MOVU.W 10H[R0], R2
0000263B A889                    		MOV.L 0CH[R0], R1
0000263D 39rrrr               W  		BSR _spiffs_page_delete
00002640 A081                    		MOV.L R1, 08H[R0]
00002642                         L1034:	; bb780.split18
                                 ;    1685         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1685
00002642 A881                    		MOV.L 08H[R0], R1
00002644 69F1                    		SHLR #1FH, R1
00002646 6101                    		CMP #00H, R1
00002648 10                   S  		BEQ L1036
00002649                         L1035:	; bb786
00002649 E5000201                		MOV.L 08H[R0], 04H[R0]
0000264D 38rrrr               W  		BRA L1059
00002650                         L1036:	; bb794.split
                                 ;    1686         spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_DEL, fd->obj_id, 0, objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1686
00002650 AC82                    		MOV.L 48H[R0], R2
00002652 B8AC                    		MOVU.W 06H[R2], R4
00002654 9A03                    		MOV.W 10H[R0], R3
00002656 A889                    		MOV.L 0CH[R0], R1
00002658 6080                    		SUB #08H, R0
0000265A 900B                    		MOV.W R3, 02H[R0]
0000265C 3E0100                  		MOV.L #00000000H, 04H[R0]
0000265F F80500                  		MOV.W #0000H, [R0]
00002662 6623                    		MOV.L #00000002H, R3
00002664 39rrrr               W  		BSR _spiffs_cb_object_event
00002667 6280                    		ADD #08H, R0
00002669 38rrrr               W  		BRA L1057
0000266C                         L1037:	; bb801
                                 ;    1687       } else {
                                 ;    1688         // make uninitialized object
                                 ;    1689         SPIFFS_DBG("truncate: reset objix_hdr page %04x\n", objix_pix);
                                 ;    1690         memset(fs->work + sizeof(spiffs_page_object_ix_header), 0xff,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1690
0000266C AA19                    		MOV.L 24H[R1], R1
0000266E 711130                  		ADD #30H, R1
00002671 7543D0                  		MOV.L #000000D0H, R3
00002674 7542FF                  		MOV.L #000000FFH, R2
00002677 7F88                    		SSTR.B
00002679                         L1038:	; bb801.split
                                 ;    1691             SPIFFS_CFG_LOG_PAGE_SZ(fs) - sizeof(spiffs_page_object_ix_header));
                                 ;    1692         res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1692
00002679 A889                    		MOV.L 0CH[R0], R1
0000267B AA1D                    		MOV.L 24H[R1], R5
0000267D AC82                    		MOV.L 48H[R0], R2
0000267F B8AB                    		MOVU.W 06H[R2], R3
00002681 BA04                    		MOVU.W 10H[R0], R4
00002683 7100F0                  		ADD #0FFFFFFF0H, R0
00002686 710F38                  		ADD #38H, R0, R15
00002689 E70F03                  		MOV.L R15, 0CH[R0]
0000268C E305                    		MOV.L R5, [R0]
0000268E F90602FF                		MOV.L #0FFFFFFFFH, 08H[R0]
00002692 3E0100                  		MOV.L #00000000H, 04H[R0]
00002695 39rrrr               W  		BSR _spiffs_object_update_index_hdr
00002698 710010                  		ADD #10H, R0
0000269B A081                    		MOV.L R1, 08H[R0]
0000269D                         L1039:	; bb801.split19
                                 ;    1693             objix_pix, fs->work, 0, SPIFFS_UNDEFINED_LEN, &new_objix_hdr_pix);
                                 ;    1694         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1694
0000269D A881                    		MOV.L 08H[R0], R1
0000269F 69F1                    		SHLR #1FH, R1
000026A1 6101                    		CMP #00H, R1
000026A3 3Arrrr               W  		BEQ L1057
000026A6                         L1040:	; bb818
000026A6 E5000201                		MOV.L 08H[R0], 04H[R0]
000026AA 38rrrr               W  		BRA L1059
000026AD                         L1041:	; bb833
                                 ;    1695       }
                                 ;    1696     } else {
                                 ;    1697       // update object index header page
                                 ;    1698       SPIFFS_DBG("truncate: update object index header page with indices and size\n");
                                 ;    1699       res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1699
000026AD A889                    		MOV.L 0CH[R0], R1
000026AF AA1D                    		MOV.L 24H[R1], R5
000026B1 AC82                    		MOV.L 48H[R0], R2
000026B3 B8AB                    		MOVU.W 06H[R2], R3
000026B5 ED0F05                  		MOV.L 14H[R0], R15
000026B8 BA04                    		MOVU.W 10H[R0], R4
000026BA 7100F0                  		ADD #0FFFFFFF0H, R0
000026BD 710E38                  		ADD #38H, R0, R14
000026C0 E70E03                  		MOV.L R14, 0CH[R0]
000026C3 E70F02                  		MOV.L R15, 08H[R0]
000026C6 E305                    		MOV.L R5, [R0]
000026C8 3E0100                  		MOV.L #00000000H, 04H[R0]
000026CB 39rrrr               W  		BSR _spiffs_object_update_index_hdr
000026CE 710010                  		ADD #10H, R0
000026D1 A081                    		MOV.L R1, 08H[R0]
000026D3                         L1042:	; bb833.split
                                 ;    1700           objix_pix, fs->work, 0, cur_size, &new_objix_hdr_pix);
                                 ;    1701       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1701
000026D3 A881                    		MOV.L 08H[R0], R1
000026D5 69F1                    		SHLR #1FH, R1
000026D7 6101                    		CMP #00H, R1
000026D9 3Arrrr               W  		BEQ L1057
000026DC                         L1043:	; bb847
000026DC E5000201                		MOV.L 08H[R0], 04H[R0]
000026E0 38rrrr               W  		BRA L1059
000026E3                         L1044:	; bb861
                                 ;    1702     }
                                 ;    1703   } else {
                                 ;    1704     // update both current object index page and object index header page
                                 ;    1705     spiffs_page_ix new_objix_pix;
                                 ;    1706 
                                 ;    1707     res = spiffs_page_index_check(fs, fd, objix_pix, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1707
000026E3 BB04                    		MOVU.W 18H[R0], R4
000026E5 BA03                    		MOVU.W 10H[R0], R3
000026E7 AC82                    		MOV.L 48H[R0], R2
000026E9 A889                    		MOV.L 0CH[R0], R1
000026EB 39rrrr               W  		BSR __$spiffs_page_index_check
000026EE A081                    		MOV.L R1, 08H[R0]
000026F0                         L1045:	; bb861.split
                                 ;    1708     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1708
000026F0 A881                    		MOV.L 08H[R0], R1
000026F2 69F1                    		SHLR #1FH, R1
000026F4 6101                    		CMP #00H, R1
000026F6 10                   S  		BEQ L1047
000026F7                         L1046:	; bb869
000026F7 E5000201                		MOV.L 08H[R0], 04H[R0]
000026FB 38rrrr               W  		BRA L1059
000026FE                         L1047:	; bb877.split
                                 ;    1709 
                                 ;    1710     // move and update object index page
                                 ;    1711     res = spiffs_page_move(fs, fd->file_nbr, (u8_t*)objix_hdr, fd->obj_id, 0, objix_pix, &new_objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1711
000026FE AC81                    		MOV.L 48H[R0], R1
00002700 B89C                    		MOVU.W 06H[R1], R4
00002702 9892                    		MOV.W 04H[R1], R2
00002704 9A05                    		MOV.W 10H[R0], R5
00002706 A98B                    		MOV.L 1CH[R0], R3
00002708 A889                    		MOV.L 0CH[R0], R1
0000270A 60C0                    		SUB #0CH, R0
0000270C 710F46                  		ADD #46H, R0, R15
0000270F E70F02                  		MOV.L R15, 08H[R0]
00002712 9085                    		MOV.W R5, 04H[R0]
00002714 F80600                  		MOV.L #00000000H, [R0]
00002717 39rrrr               W  		BSR _spiffs_page_move
0000271A 62C0                    		ADD #0CH, R0
0000271C A081                    		MOV.L R1, 08H[R0]
0000271E                         L1048:	; bb877.split20
                                 ;    1712     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1712
0000271E A881                    		MOV.L 08H[R0], R1
00002720 69F1                    		SHLR #1FH, R1
00002722 6101                    		CMP #00H, R1
00002724 10                   S  		BEQ L1050
00002725                         L1049:	; bb891
00002725 E5000201                		MOV.L 08H[R0], 04H[R0]
00002729 2Err                 B  		BRA L1059
0000272B                         L1050:	; bb899.split
                                 ;    1713     spiffs_cb_object_event(fs, fd, SPIFFS_EV_IX_UPD, fd->obj_id, objix->p_hdr.span_ix, new_objix_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1713
0000272B AA01                    		MOV.L 20H[R0], R1
0000272D 981B                    		MOV.W 02H[R1], R3
0000272F AC82                    		MOV.L 48H[R0], R2
00002731 B8AC                    		MOVU.W 06H[R2], R4
00002733 9F0D                    		MOV.W 3AH[R0], R5
00002735 A889                    		MOV.L 0CH[R0], R1
00002737 6080                    		SUB #08H, R0
00002739 900D                    		MOV.W R5, 02H[R0]
0000273B D303                    		MOV.W R3, [R0]
0000273D 3E0100                  		MOV.L #00000000H, 04H[R0]
00002740 6603                    		MOV.L #00000000H, R3
00002742 39rrrr               W  		BSR _spiffs_cb_object_event
00002745 6280                    		ADD #08H, R0
00002747                         L1051:	; bb899.split21
                                 ;    1714     SPIFFS_DBG("truncate: store modified objix page, %04x:%04x\n", new_objix_pix, cur_objix_spix);
                                 ;    1715     fd->cursor_objix_pix = new_objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1715
00002747 9F09                    		MOV.W 3AH[R0], R1
00002749 AC82                    		MOV.L 48H[R0], R2
0000274B 91A9                    		MOV.W R1, 0EH[R2]
0000274D                         L1052:	; bb899.split22
                                 ;    1716     fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1716
0000274D 9B01                    		MOV.W 18H[R0], R1
0000274F AC82                    		MOV.L 48H[R0], R2
00002751 9221                    		MOV.W R1, 10H[R2]
00002753                         L1053:	; bb899.split23
                                 ;    1717     fd->offset = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1717
00002753 A909                    		MOV.L 14H[R0], R1
00002755 AC82                    		MOV.L 48H[R0], R2
00002757 A129                    		MOV.L R1, 14H[R2]
00002759                         L1054:	; bb899.split24
                                 ;    1718     // update object index header page with new size
                                 ;    1719     res = spiffs_object_update_index_hdr(fs, fd, fd->obj_id,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1719
00002759 AC82                    		MOV.L 48H[R0], R2
0000275B B9A4                    		MOVU.W 0CH[R2], R4
0000275D B8AB                    		MOVU.W 06H[R2], R3
0000275F A90D                    		MOV.L 14H[R0], R5
00002761 A889                    		MOV.L 0CH[R0], R1
00002763 7100F0                  		ADD #0FFFFFFF0H, R0
00002766 710F38                  		ADD #38H, R0, R15
00002769 E70F03                  		MOV.L R15, 0CH[R0]
0000276C A085                    		MOV.L R5, 08H[R0]
0000276E 3E0100                  		MOV.L #00000000H, 04H[R0]
00002771 F80600                  		MOV.L #00000000H, [R0]
00002774 39rrrr               W  		BSR _spiffs_object_update_index_hdr
00002777 710010                  		ADD #10H, R0
0000277A A081                    		MOV.L R1, 08H[R0]
0000277C                         L1055:	; bb899.split25
                                 ;    1720         fd->objix_hdr_pix, 0, 0, cur_size, &new_objix_hdr_pix);
                                 ;    1721     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1721
0000277C A881                    		MOV.L 08H[R0], R1
0000277E 69F1                    		SHLR #1FH, R1
00002780 6101                    		CMP #00H, R1
00002782 10                   S  		BEQ L1057
00002783                         L1056:	; bb931
00002783 E5000201                		MOV.L 08H[R0], 04H[R0]
00002787 2Err                 B  		BRA L1059
00002789                         L1057:	; bb945
                                 ;    1722   }
                                 ;    1723   fd->size = cur_size;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1723
00002789 A909                    		MOV.L 14H[R0], R1
0000278B AC82                    		MOV.L 48H[R0], R2
0000278D A0A1                    		MOV.L R1, 08H[R2]
0000278F                         L1058:	; bb945.split
                                 ;    1724 
                                 ;    1725   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1725
0000278F E5000201                		MOV.L 08H[R0], 04H[R0]
00002793                         L1059:	; bb951
00002793 A809                    		MOV.L 04H[R0], R1
00002795 A389                    		MOV.L R1, 3CH[R0]
                                 ;    1726 } // spiffs_object_truncate
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1726
00002797 6713                    		RTSD #4CH
00002799                         _spiffs_object_read:
                                 		.STACK	_spiffs_object_read=76
                                 ;    1727 #endif // !SPIFFS_READ_ONLY
                                 ;    1728 
                                 ;    1729 s32_t spiffs_object_read(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1729
00002799 7100C0                  		ADD #0FFFFFFC0H, R0
0000279C A389                    		MOV.L R1, 3CH[R0]
0000279E A382                    		MOV.L R2, 38H[R0]
000027A0 A30B                    		MOV.L R3, 34H[R0]
000027A2 A304                    		MOV.L R4, 30H[R0]
                                 ;    1730     spiffs_fd *fd,
                                 ;    1731     u32_t offset,
                                 ;    1732     u32_t len,
                                 ;    1733     u8_t *dst) {
                                 ;    1734   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1734
000027A4 3E0200                  		MOV.L #00000000H, 08H[R0]
000027A7                         L1061:	; entry.split
                                 ;    1735   spiffs *fs = fd->fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1735
000027A7 AB89                    		MOV.L 3CH[R0], R1
000027A9 E41003                  		MOV.L [R1], 0CH[R0]
000027AC                         L1062:	; entry.split1
                                 ;    1736   spiffs_page_ix objix_pix;
                                 ;    1737   spiffs_page_ix data_pix;
                                 ;    1738   spiffs_span_ix data_spix = offset / SPIFFS_DATA_PAGE_SIZE(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1738
000027AC AB81                    		MOV.L 38H[R0], R1
000027AE FD7891FA00              		DIVU #0FAH, R1
000027B3 9289                    		MOV.W R1, 16H[R0]
000027B5                         L1063:	; entry.split2
                                 ;    1739   u32_t cur_offset = offset;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1739
000027B5 E5000E06                		MOV.L 38H[R0], 18H[R0]
000027B9                         L1064:	; entry.split3
                                 ;    1740   spiffs_span_ix cur_objix_spix;
                                 ;    1741   spiffs_span_ix prev_objix_spix = (spiffs_span_ix)-1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1741
000027B9 F9090FFFFF              		MOV.W #0FFFFH, 1EH[R0]
000027BE                         L1065:	; entry.split4
                                 ;    1742   spiffs_page_object_ix_header *objix_hdr = (spiffs_page_object_ix_header *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1742
000027BE A889                    		MOV.L 0CH[R0], R1
000027C0 E5100908                		MOV.L 24H[R1], 20H[R0]
000027C4                         L1066:	; entry.split5
                                 ;    1743   spiffs_page_object_ix *objix = (spiffs_page_object_ix *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1743
000027C4 A889                    		MOV.L 0CH[R0], R1
000027C6 E5100909                		MOV.L 24H[R1], 24H[R0]
000027CA 38rrrr               W  		BRA L1120
000027CD                         L1067:	; bb
                                 ;    1744 
                                 ;    1745   while (cur_offset < offset + len) {
                                 ;    1746     cur_objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1746
000027CD BA89                    		MOVU.W 16H[R0], R1
000027CF 755167                  		CMP #67H, R1
000027D2 24rr                    		BGTU L1069
000027D4                         L1068:	; bb35
000027D4 F80600                  		MOV.L #00000000H, [R0]
000027D7 2Err                 B  		BRA L1070
000027D9                         L1069:	; bb36
000027D9 BA89                    		MOVU.W 16H[R0], R1
000027DB 711198                  		ADD #0FFFFFF98H, R1
000027DE FD74917C                		DIVU #7CH, R1
000027E2 6211                    		ADD #01H, R1
000027E4 E301                    		MOV.L R1, [R0]
000027E6                         L1070:	; bb42
000027E6 EC01                    		MOV.L [R0], R1
000027E8 9381                    		MOV.W R1, 1CH[R0]
                                 ;    1747     if (prev_objix_spix != cur_objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1747
000027EA BB89                    		MOVU.W 1EH[R0], R1
000027EC 06C5010E                		CMP 1CH[R0].UW, R1
000027F0 3Arrrr               W  		BEQ L1095
000027F3                         L1071:	; bb47
                                 ;    1748       // load current object index (header) page
                                 ;    1749       if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1749
000027F3 BB81                    		MOVU.W 1CH[R0], R1
000027F5 6101                    		CMP #00H, R1
000027F7 18                   S  		BNE L1073
000027F8                         L1072:	; bb48
                                 ;    1750         objix_pix = fd->objix_hdr_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1750
000027F8 AB89                    		MOV.L 3CH[R0], R1
000027FA D5100609                		MOV.W 0CH[R1], 12H[R0]
000027FE 2Err                 B  		BRA L1076
00002800                         L1073:	; bb52
                                 ;    1751       } else {
                                 ;    1752         SPIFFS_DBG("read: find objix %04x:%04x\n", fd->obj_id, cur_objix_spix);
                                 ;    1753         res = spiffs_obj_lu_find_id_and_span(fs, fd->obj_id | SPIFFS_OBJ_ID_IX_FLAG, cur_objix_spix, 0, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1753
00002800 AB89                    		MOV.L 3CH[R0], R1
00002802 B89A                    		MOVU.W 06H[R1], R2
00002804 BB83                    		MOVU.W 1CH[R0], R3
00002806 A889                    		MOV.L 0CH[R0], R1
00002808 6040                    		SUB #04H, R0
0000280A 710E16                  		ADD #16H, R0, R14
0000280D E30E                    		MOV.L R14, [R0]
0000280F 78F2                    		BSET #0FH, R2
00002811 6604                    		MOV.L #00000000H, R4
00002813 39rrrr               W  		BSR _spiffs_obj_lu_find_id_and_span
00002816 6240                    		ADD #04H, R0
00002818 A081                    		MOV.L R1, 08H[R0]
0000281A                         L1074:	; bb52.split
                                 ;    1754         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1754
0000281A A881                    		MOV.L 08H[R0], R1
0000281C 69F1                    		SHLR #1FH, R1
0000281E 6101                    		CMP #00H, R1
00002820 10                   S  		BEQ L1076
00002821                         L1075:	; bb64
00002821 E5000201                		MOV.L 08H[R0], 04H[R0]
00002825 38rrrr               W  		BRA L1122
00002828                         L1076:	; bb78
                                 ;    1755       }
                                 ;    1756       SPIFFS_DBG("read: load objix page %04x:%04x for data spix:%04x\n", objix_pix, cur_objix_spix, data_spix);
                                 ;    1757       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_IX | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1757
00002828 A889                    		MOV.L 0CH[R0], R1
0000282A AB8A                    		MOV.L 3CH[R0], R2
0000282C 98A3                    		MOV.W 04H[R2], R3
0000282E BA0C                    		MOVU.W 12H[R0], R4
00002830 6080                    		SUB #08H, R0
00002832 E5100901                		MOV.L 24H[R1], 04H[R0]
00002836 F80A0001                		MOV.L #00000100H, [R0]
0000283A 6C84                    		SHLL #08H, R4
0000283C 7344000010              		ADD #00100000H, R4
00002841 754216                  		MOV.L #00000016H, R2
00002844 05rrrrrr             A  		BSR _spiffs_phys_rd
00002848 6280                    		ADD #08H, R0
0000284A A081                    		MOV.L R1, 08H[R0]
0000284C                         L1077:	; bb78.split
                                 ;    1758           fd->file_nbr, SPIFFS_PAGE_TO_PADDR(fs, objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->work);
                                 ;    1759       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1759
0000284C A881                    		MOV.L 08H[R0], R1
0000284E 69F1                    		SHLR #1FH, R1
00002850 6101                    		CMP #00H, R1
00002852 10                   S  		BEQ L1079
00002853                         L1078:	; bb93
00002853 E5000201                		MOV.L 08H[R0], 04H[R0]
00002857 38rrrr               W  		BRA L1122
0000285A                         L1079:	; bb102.split
                                 ;    1760       SPIFFS_VALIDATE_OBJIX(objix->p_hdr, fd->obj_id, cur_objix_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1760
0000285A AA09                    		MOV.L 24H[R0], R1
0000285C F51004                  		BTST #00H, 04H[R1].B
0000285F 10                   S  		BEQ L1081
00002860                         L1080:	; bb103
00002860 F90A01E4D8              		MOV.L #0FFFFD8E4H, 04H[R0]
00002865 38rrrr               W  		BRA L1122
00002868                         L1081:	; bb115
00002868 AA09                    		MOV.L 24H[R0], R1
0000286A F51704                  		BTST #07H, 04H[R1].B
0000286D 18                   S  		BNE L1083
0000286E                         L1082:	; bb116
0000286E F90A01ECD8              		MOV.L #0FFFFD8ECH, 04H[R0]
00002873 38rrrr               W  		BRA L1122
00002876                         L1083:	; bb128
00002876 AA09                    		MOV.L 24H[R0], R1
00002878 F51104                  		BTST #01H, 04H[R1].B
0000287B 10                   S  		BEQ L1085
0000287C                         L1084:	; bb129
0000287C F90A01EBD8              		MOV.L #0FFFFD8EBH, 04H[R0]
00002881 38rrrr               W  		BRA L1122
00002884                         L1085:	; bb141
00002884 AA09                    		MOV.L 24H[R0], R1
00002886 F51204                  		BTST #02H, 04H[R1].B
00002889 10                   S  		BEQ L1087
0000288A                         L1086:	; bb142
0000288A F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
0000288F 38rrrr               W  		BRA L1122
00002892                         L1087:	; bb154
00002892 AB89                    		MOV.L 3CH[R0], R1
00002894 B899                    		MOVU.W 06H[R1], R1
00002896 7CF1                    		BTST #0FH, R1
00002898 18                   S  		BNE L1089
00002899                         L1088:	; bb155
00002899 F90A01EAD8              		MOV.L #0FFFFD8EAH, 04H[R0]
0000289E 38rrrr               W  		BRA L1122
000028A1                         L1089:	; bb166
000028A1 AA09                    		MOV.L 24H[R0], R1
000028A3 B819                    		MOVU.W 02H[R1], R1
000028A5 06C5010E                		CMP 1CH[R0].UW, R1
000028A9 10                   S  		BEQ L1091
000028AA                         L1090:	; bb167
000028AA F90A01E3D8              		MOV.L #0FFFFD8E3H, 04H[R0]
000028AF 38rrrr               W  		BRA L1122
000028B2                         L1091:	; bb179
                                 ;    1761 
                                 ;    1762       fd->offset = cur_offset;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1762
000028B2 A981                    		MOV.L 18H[R0], R1
000028B4 AB8A                    		MOV.L 3CH[R0], R2
000028B6 A129                    		MOV.L R1, 14H[R2]
000028B8                         L1092:	; bb179.split
                                 ;    1763       fd->cursor_objix_pix = objix_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1763
000028B8 9A09                    		MOV.W 12H[R0], R1
000028BA AB8A                    		MOV.L 3CH[R0], R2
000028BC 91A9                    		MOV.W R1, 0EH[R2]
000028BE                         L1093:	; bb179.split6
                                 ;    1764       fd->cursor_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1764
000028BE 9B81                    		MOV.W 1CH[R0], R1
000028C0 AB8A                    		MOV.L 3CH[R0], R2
000028C2 9221                    		MOV.W R1, 10H[R2]
000028C4                         L1094:	; bb179.split7
                                 ;    1765 
                                 ;    1766       prev_objix_spix = cur_objix_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1766
000028C4 D5000E0F                		MOV.W 1CH[R0], 1EH[R0]
000028C8                         L1095:	; bb198
                                 ;    1767     }
                                 ;    1768 
                                 ;    1769     if (cur_objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1769
000028C8 BB81                    		MOVU.W 1CH[R0], R1
000028CA 6101                    		CMP #00H, R1
000028CC 21rr                    		BNE L1097
000028CE                         L1096:	; bb199
                                 ;    1770       // get data page from object index header page
                                 ;    1771       data_pix = ((spiffs_page_ix*)((u8_t *)objix_hdr + sizeof(spiffs_page_object_ix_header)))[data_spix];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1771
000028CE BA89                    		MOVU.W 16H[R0], R1
000028D0 6C11                    		SHLL #01H, R1
000028D2 06890108                		ADD 20H[R0].L, R1
000028D6 D510180A                		MOV.W 30H[R1], 14H[R0]
000028DA 2Err                 B  		BRA L1101
000028DC                         L1097:	; bb208
                                 ;    1772     } else {
                                 ;    1773       // get data page from object index page
                                 ;    1774       data_pix = ((spiffs_page_ix*)((u8_t *)objix + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1774
000028DC AA09                    		MOV.L 24H[R0], R1
000028DE 6281                    		ADD #08H, R1
000028E0 BA8A                    		MOVU.W 16H[R0], R2
000028E2 755267                  		CMP #67H, R2
000028E5 24rr                    		BGTU L1099
000028E7                         L1098:	; bb217
000028E7 E302                    		MOV.L R2, [R0]
000028E9 2Err                 B  		BRA L1100
000028EB                         L1099:	; bb220
000028EB 712298                  		ADD #0FFFFFF98H, R2
000028EE EF2E                    		MOV.L R2, R14
000028F0 FD749E7C                		DIVU #7CH, R14
000028F4 751E7C                  		MUL #7CH, R14
000028F7 43E2                    		SUB R14, R2
000028F9 E302                    		MOV.L R2, [R0]
000028FB                         L1100:	; bb225
000028FB EC02                    		MOV.L [R0], R2
000028FD FE5211                  		MOV.W [R2,R1], R1
00002900 9281                    		MOV.W R1, 14H[R0]
00002902                         L1101:	; bb235
                                 ;    1775     }
                                 ;    1776 
                                 ;    1777     // all remaining data
                                 ;    1778     u32_t len_to_read = offset + len - cur_offset;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1778
00002902 AB81                    		MOV.L 38H[R0], R1
00002904 0689010D                		ADD 34H[R0].L, R1
00002908 06810106                		SUB 18H[R0].L, R1
0000290C A281                    		MOV.L R1, 28H[R0]
0000290E                         L1102:	; bb235.split
                                 ;    1779     // remaining data in page
                                 ;    1780     len_to_read = MIN(len_to_read, SPIFFS_DATA_PAGE_SIZE(fs) - (cur_offset % SPIFFS_DATA_PAGE_SIZE(fs)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1780
0000290E A981                    		MOV.L 18H[R0], R1
00002910 EF1E                    		MOV.L R1, R14
00002912 FD789EFA00              		DIVU #0FAH, R14
00002917 761EFA00                		MUL #0FAH, R14
0000291B 43E1                    		SUB R14, R1
0000291D 754EFA                  		MOV.L #000000FAH, R14
00002920 431E                    		SUB R1, R14
00002922 06850E0A                		CMP 28H[R0].L, R14
00002926 25rr                    		BLEU L1104
00002928                         L1103:	; bb247
00002928 E1000A                  		MOV.L 28H[R0], [R0]
0000292B 2Err                 B  		BRA L1105
0000292D                         L1104:	; bb249
0000292D A981                    		MOV.L 18H[R0], R1
0000292F EF1E                    		MOV.L R1, R14
00002931 FD789EFA00              		DIVU #0FAH, R14
00002936 761EFA00                		MUL #0FAH, R14
0000293A 43E1                    		SUB R14, R1
0000293C 7542FA                  		MOV.L #000000FAH, R2
0000293F 4312                    		SUB R1, R2
00002941 E302                    		MOV.L R2, [R0]
00002943                         L1105:	; bb253
00002943 EC01                    		MOV.L [R0], R1
00002945 A281                    		MOV.L R1, 28H[R0]
                                 ;    1781     // remaining data in file
                                 ;    1782     len_to_read = MIN(len_to_read, fd->size);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1782
00002947 AB8A                    		MOV.L 3CH[R0], R2
00002949 06852102                		CMP 08H[R2].L, R1
0000294D 22rr                    		BGEU L1107
0000294F                         L1106:	; bb262
0000294F E1000A                  		MOV.L 28H[R0], [R0]
00002952 08                   S  		BRA L1108
00002953                         L1107:	; bb264
00002953 AB89                    		MOV.L 3CH[R0], R1
00002955 E11002                  		MOV.L 08H[R1], [R0]
00002958                         L1108:	; bb268
00002958 EC01                    		MOV.L [R0], R1
0000295A A281                    		MOV.L R1, 28H[R0]
                                 ;    1783     SPIFFS_DBG("read: offset:%i rd:%i data spix:%04x is data_pix:%04x addr:%08x\n", cur_offset, len_to_read, data_spix, data_pix,
                                 ;    1784         SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header) + (cur_offset % SPIFFS_DATA_PAGE_SIZE(fs)));
                                 ;    1785     if (len_to_read <= 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1785
0000295C 6101                    		CMP #00H, R1
0000295E 18                   S  		BNE L1110
0000295F                         L1109:	; bb272
                                 ;    1786       res = SPIFFS_ERR_END_OF_OBJECT;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1786
0000295F F90A02EDD8              		MOV.L #0FFFFD8EDH, 08H[R0]
00002964 38rrrr               W  		BRA L1121
00002967                         L1110:	; bb278
                                 ;    1787       break;
                                 ;    1788     }
                                 ;    1789     res = spiffs_page_data_check(fs, fd, data_pix, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1789
00002967 BA8C                    		MOVU.W 16H[R0], R4
00002969 BA83                    		MOVU.W 14H[R0], R3
0000296B AB8A                    		MOV.L 3CH[R0], R2
0000296D A889                    		MOV.L 0CH[R0], R1
0000296F 39rrrr               W  		BSR __$spiffs_page_data_check
00002972 A081                    		MOV.L R1, 08H[R0]
00002974                         L1111:	; bb278.split
                                 ;    1790     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1790
00002974 A881                    		MOV.L 08H[R0], R1
00002976 69F1                    		SHLR #1FH, R1
00002978 6101                    		CMP #00H, R1
0000297A 10                   S  		BEQ L1113
0000297B                         L1112:	; bb286
0000297B E5000201                		MOV.L 08H[R0], 04H[R0]
0000297F 2Err                 B  		BRA L1122
00002981                         L1113:	; bb294.split
                                 ;    1791     res = _spiffs_rd(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1791
00002981 AB89                    		MOV.L 3CH[R0], R1
00002983 9893                    		MOV.W 04H[R1], R3
00002985 A982                    		MOV.L 18H[R0], R2
00002987 AB05                    		MOV.L 30H[R0], R5
00002989 ED0F0A                  		MOV.L 28H[R0], R15
0000298C BA84                    		MOVU.W 14H[R0], R4
0000298E A889                    		MOV.L 0CH[R0], R1
00002990 6080                    		SUB #08H, R0
00002992 A00D                    		MOV.L R5, 04H[R0]
00002994 E30F                    		MOV.L R15, [R0]
00002996 EF2E                    		MOV.L R2, R14
00002998 FD789EFA00              		DIVU #0FAH, R14
0000299D 761EFA00                		MUL #0FAH, R14
000029A1 43E2                    		SUB R14, R2
000029A3 6C84                    		SHLL #08H, R4
000029A5 5724                    		OR R2, R4
000029A7 7344060010              		ADD #00100006H, R4
000029AC 754217                  		MOV.L #00000017H, R2
000029AF 05rrrrrr             A  		BSR _spiffs_phys_rd
000029B3 6280                    		ADD #08H, R0
000029B5 A081                    		MOV.L R1, 08H[R0]
000029B7                         L1114:	; bb294.split8
                                 ;    1792         fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_READ,
                                 ;    1793         fd->file_nbr,
                                 ;    1794         SPIFFS_PAGE_TO_PADDR(fs, data_pix) + sizeof(spiffs_page_header) + (cur_offset % SPIFFS_DATA_PAGE_SIZE(fs)),
                                 ;    1795         len_to_read,
                                 ;    1796         dst);
                                 ;    1797     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1797
000029B7 A881                    		MOV.L 08H[R0], R1
000029B9 69F1                    		SHLR #1FH, R1
000029BB 6101                    		CMP #00H, R1
000029BD 10                   S  		BEQ L1116
000029BE                         L1115:	; bb312
000029BE E5000201                		MOV.L 08H[R0], 04H[R0]
000029C2 2Err                 B  		BRA L1122
000029C4                         L1116:	; bb320.split
                                 ;    1798     dst += len_to_read;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1798
000029C4 AB01                    		MOV.L 30H[R0], R1
000029C6 0689010A                		ADD 28H[R0].L, R1
000029CA A301                    		MOV.L R1, 30H[R0]
000029CC                         L1117:	; bb320.split9
                                 ;    1799     cur_offset += len_to_read;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1799
000029CC A981                    		MOV.L 18H[R0], R1
000029CE 0689010A                		ADD 28H[R0].L, R1
000029D2 A181                    		MOV.L R1, 18H[R0]
000029D4                         L1118:	; bb320.split10
                                 ;    1800     fd->offset = cur_offset;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1800
000029D4 A981                    		MOV.L 18H[R0], R1
000029D6 AB8A                    		MOV.L 3CH[R0], R2
000029D8 A129                    		MOV.L R1, 14H[R2]
000029DA                         L1119:	; bb320.split11
                                 ;    1801     data_spix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1801
000029DA 9A89                    		MOV.W 16H[R0], R1
000029DC 6211                    		ADD #01H, R1
000029DE 9289                    		MOV.W R1, 16H[R0]
000029E0                         L1120:	; bb332
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1745
000029E0 AB81                    		MOV.L 38H[R0], R1
000029E2 0689010D                		ADD 34H[R0].L, R1
000029E6 06850106                		CMP 18H[R0].L, R1
000029EA 25rr                  * 		BGTU L1067
         38rrrr                  
000029EF                         L1121:	; bb341
                                 ;    1802   }
                                 ;    1803 
                                 ;    1804   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1804
000029EF E5000201                		MOV.L 08H[R0], 04H[R0]
000029F3                         L1122:	; bb344
000029F3 A809                    		MOV.L 04H[R0], R1
000029F5 A289                    		MOV.L R1, 2CH[R0]
                                 ;    1805 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1805
000029F7 6710                    		RTSD #40H
000029F9                         __$spiffs_obj_lu_find_free_obj_id_bitmap_v:
                                 		.STACK	__$spiffs_obj_lu_find_free_obj_id_bitmap_v=116
                                 ;    1806 
                                 ;    1807 #if !SPIFFS_READ_ONLY
                                 ;    1808 typedef struct {
                                 ;    1809   spiffs_obj_id min_obj_id;
                                 ;    1810   spiffs_obj_id max_obj_id;
                                 ;    1811   u32_t compaction;
                                 ;    1812   const u8_t *conflicting_name;
                                 ;    1813 } spiffs_free_obj_id_state;
                                 ;    1814 
                                 ;    1815 static s32_t spiffs_obj_lu_find_free_obj_id_bitmap_v(spiffs *fs, spiffs_obj_id id, spiffs_block_ix bix, int ix_entry,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1815
000029F9 710098                  		ADD #0FFFFFF98H, R0
000029FC A609                    		MOV.L R1, 64H[R0]
000029FE D70231                  		MOV.W R2, 62H[R0]
00002A01 D70330                  		MOV.W R3, 60H[R0]
00002A04 A58C                    		MOV.L R4, 5CH[R0]
00002A06 E5001B16                		MOV.L 6CH[R0], 58H[R0]
00002A0A E5001C15                		MOV.L 70H[R0], 54H[R0]
                                 ;    1816     const void *user_const_p, void *user_var_p) {
                                 ;    1817   if (id != SPIFFS_OBJ_ID_FREE && id != SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1817
00002A0E 5D0131                  		MOVU.W 62H[R0], R1
00002A11 7701FFFF00              		CMP #0FFFFH, R1
00002A16 3Brrrr               W  		BNE L1151
00002A19 38rrrr               W  		BRA L1153
00002A1C                         L1124:	; bb14
                                 ;    1818     spiffs_obj_id min_obj_id = *((spiffs_obj_id*)user_var_p);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1818
00002A1C AD09                    		MOV.L 54H[R0], R1
00002A1E D41005                  		MOV.W [R1], 0AH[R0]
00002A21                         L1125:	; bb14.split
                                 ;    1819     const u8_t *conflicting_name = (const u8_t*)user_const_p;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1819
00002A21 E5001603                		MOV.L 58H[R0], 0CH[R0]
00002A25                         L1126:	; bb14.split1
                                 ;    1820 
                                 ;    1821     // if conflicting name parameter is given, also check if this name is found in object index hdrs
                                 ;    1822     if (conflicting_name && (id & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1822
00002A25 A889                    		MOV.L 0CH[R0], R1
00002A27 6101                    		CMP #00H, R1
00002A29 3Brrrr               W  		BNE L1138
00002A2C 38rrrr               W  		BRA L1140
00002A2F                         L1127:	; bb20
                                 ;    1823       spiffs_page_ix pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, ix_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1823
00002A2F 5D0130                  		MOVU.W 60H[R0], R1
00002A32 6C81                    		SHLL #08H, R1
00002A34 06890117                		ADD 5CH[R0].L, R1
00002A38 6221                    		ADD #02H, R1
00002A3A 9309                    		MOV.W R1, 1AH[R0]
00002A3C                         L1128:	; bb20.split
                                 ;    1824       int res;
                                 ;    1825       spiffs_page_object_ix_header objix_hdr;
                                 ;    1826       res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1826
00002A3C BB0C                    		MOVU.W 1AH[R0], R4
00002A3E AE09                    		MOV.L 64H[R0], R1
00002A40 6080                    		SUB #08H, R0
00002A42 710228                  		ADD #28H, R0, R2
00002A45 A00A                    		MOV.L R2, 04H[R0]
00002A47 F80630                  		MOV.L #00000030H, [R0]
00002A4A 6C84                    		SHLL #08H, R4
00002A4C 7344000010              		ADD #00100000H, R4
00002A51 6603                    		MOV.L #00000000H, R3
00002A53 754215                  		MOV.L #00000015H, R2
00002A56 05rrrrrr             A  		BSR _spiffs_phys_rd
00002A5A 6280                    		ADD #08H, R0
00002A5C A189                    		MOV.L R1, 1CH[R0]
00002A5E                         L1129:	; bb20.split2
                                 ;    1827           0, SPIFFS_PAGE_TO_PADDR(fs, pix), sizeof(spiffs_page_object_ix_header), (u8_t *)&objix_hdr);
                                 ;    1828       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1828
00002A5E A989                    		MOV.L 1CH[R0], R1
00002A60 69F1                    		SHLR #1FH, R1
00002A62 6101                    		CMP #00H, R1
00002A64 10                   S  		BEQ L1131
00002A65                         L1130:	; bb37
00002A65 E5000701                		MOV.L 1CH[R0], 04H[R0]
00002A69 38rrrr               W  		BRA L1156
00002A6C                         L1131:	; bb45.split
                                 ;    1829       if (objix_hdr.p_hdr.span_ix == 0 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1829
00002A6C BC09                    		MOVU.W 22H[R0], R1
00002A6E 6101                    		CMP #00H, R1
00002A70 20rr                    		BEQ L1134
00002A72 2Err                 B  		BRA L1136
00002A74                         L1132:	; bb47
00002A74 FB36FF                  		MOV.L #0FFFFFFFFH, R3
                                 ;    1830           (objix_hdr.p_hdr.flags & (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_IXDELE)) ==
                                 ;    1831               (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_IXDELE)) {
                                 ;    1832         if (strcmp((const char*)user_const_p, (char*)objix_hdr.name) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1832
00002A77 71022D                  		ADD #2DH, R0, R2
00002A7A AD81                    		MOV.L 58H[R0], R1
00002A7C 7F83                    		SCMPU
00002A7E FCDBE2                  		SCGEU.L R14
00002A81 FCDBF5                  		SCLEU.L R15
00002A84 43FE                    		SUB R15, R14
00002A86 610E                    		CMP #00H, R14
00002A88 21rr                    		BNE L1142
00002A8A                         L1133:	; bb48
                                 ;    1833           return SPIFFS_ERR_CONFLICTING_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1833
00002A8A F90A01D9D8              		MOV.L #0FFFFD8D9H, 04H[R0]
00002A8F 38rrrr               W  		BRA L1156
00002A92                         L1134:	; bb64
00002A92 754EC2                  		MOV.L #000000C2H, R14
00002A95 510E24                  		AND 24H[R0].UB, R14
00002A98 755EC0                  		CMP #0C0H, R14
00002A9B 18                   S  		BNE L1136
00002A9C                         L1135:	; bb72
00002A9C F80601                  		MOV.L #00000001H, [R0]
00002A9F 08                   S  		BRA L1137
00002AA0                         L1136:	; bb73
00002AA0 F80600                  		MOV.L #00000000H, [R0]
00002AA3                         L1137:	; bb74
00002AA3 EC01                    		MOV.L [R0], R1
00002AA5 6101                    		CMP #00H, R1
00002AA7 21rr                    		BNE L1132
00002AA9 2Err                 B  		BRA L1142
00002AAB                         L1138:	; bb83
00002AAB 5D0131                  		MOVU.W 62H[R0], R1
00002AAE 7CF1                    		BTST #0FH, R1
00002AB0 10                   S  		BEQ L1140
00002AB1                         L1139:	; bb89
00002AB1 F80601                  		MOV.L #00000001H, [R0]
00002AB4 08                   S  		BRA L1141
00002AB5                         L1140:	; bb90
00002AB5 F80600                  		MOV.L #00000000H, [R0]
00002AB8                         L1141:	; bb91
00002AB8 EC01                    		MOV.L [R0], R1
00002ABA 6101                    		CMP #00H, R1
00002ABC 3Brrrr               W  		BNE L1127
00002ABF                         L1142:	; bb96
                                 ;    1834         }
                                 ;    1835       }
                                 ;    1836     }
                                 ;    1837 
                                 ;    1838     id &= ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1838
00002ABF 5D0131                  		MOVU.W 62H[R0], R1
00002AC2 7621FF7F                		AND #7FFFH, R1
00002AC6 D70131                  		MOV.W R1, 62H[R0]
00002AC9                         L1143:	; bb96.split
                                 ;    1839     u32_t bit_ix = (id-min_obj_id) & 7;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1839
00002AC9 5D0131                  		MOVU.W 62H[R0], R1
00002ACC 06C10105                		SUB 0AH[R0].UW, R1
00002AD0 6471                    		AND #07H, R1
00002AD2 A101                    		MOV.L R1, 10H[R0]
00002AD4                         L1144:	; bb96.split3
                                 ;    1840     int byte_ix = (id-min_obj_id) >> 3;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1840
00002AD4 5D0131                  		MOVU.W 62H[R0], R1
00002AD7 06C10105                		SUB 0AH[R0].UW, R1
00002ADB 6A31                    		SHAR #03H, R1
00002ADD A109                    		MOV.L R1, 14H[R0]
00002ADF                         L1145:	; bb96.split4
                                 ;    1841     if (byte_ix >= 0 && (u32_t)byte_ix < SPIFFS_CFG_LOG_PAGE_SZ(fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1841
00002ADF A909                    		MOV.L 14H[R0], R1
00002AE1 6101                    		CMP #00H, R1
00002AE3 28rr                    		BGE L1147
00002AE5 2Err                 B  		BRA L1149
00002AE7                         L1146:	; bb114
00002AE7 661E                    		MOV.L #00000001H, R14
                                 ;    1842       fs->work[byte_ix] |= (1<<bit_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1842
00002AE9 A901                    		MOV.L 10H[R0], R1
00002AEB FD621E                  		SHLL R1, R14
00002AEE AE09                    		MOV.L 64H[R0], R1
00002AF0 AA19                    		MOV.L 24H[R1], R1
00002AF2 A90A                    		MOV.L 14H[R0], R2
00002AF4 FF2F21                  		ADD R2, R1, R15
00002AF7 54FE                    		OR [R15].UB, R14
00002AF9 FE012E                  		MOV.B R14, [R1,R2]
00002AFC 2Err                 B  		BRA L1155
00002AFE                         L1147:	; bb129
00002AFE A909                    		MOV.L 14H[R0], R1
00002B00 7551FF                  		CMP #0FFH, R1
00002B03 24rr                    		BGTU L1149
00002B05                         L1148:	; bb133
00002B05 F80601                  		MOV.L #00000001H, [R0]
00002B08 08                   S  		BRA L1150
00002B09                         L1149:	; bb134
00002B09 F80600                  		MOV.L #00000000H, [R0]
00002B0C                         L1150:	; bb135
00002B0C EC01                    		MOV.L [R0], R1
00002B0E 6101                    		CMP #00H, R1
00002B10 21rr                    		BNE L1146
00002B12 2Err                 B  		BRA L1155
00002B14                         L1151:	; bb145
00002B14 5D0131                  		MOVU.W 62H[R0], R1
00002B17 6101                    		CMP #00H, R1
00002B19 10                   S  		BEQ L1153
00002B1A                         L1152:	; bb150
00002B1A F80601                  		MOV.L #00000001H, [R0]
00002B1D 08                   S  		BRA L1154
00002B1E                         L1153:	; bb151
00002B1E F80600                  		MOV.L #00000000H, [R0]
00002B21                         L1154:	; bb152
00002B21 EC01                    		MOV.L [R0], R1
00002B23 6101                    		CMP #00H, R1
00002B25 3Brrrr               W  		BNE L1124
00002B28                         L1155:	; bb157
                                 ;    1843     }
                                 ;    1844   }
                                 ;    1845   return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1845
00002B28 F90A01AAD8              		MOV.L #0FFFFD8AAH, 04H[R0]
00002B2D                         L1156:	; bb159
00002B2D A809                    		MOV.L 04H[R0], R1
00002B2F A501                    		MOV.L R1, 50H[R0]
                                 ;    1846 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1846
00002B31 671A                    		RTSD #68H
00002B33                         __$spiffs_obj_lu_find_free_obj_id_compact_v:
                                 		.STACK	__$spiffs_obj_lu_find_free_obj_id_compact_v=108
                                 ;    1847 
                                 ;    1848 static s32_t spiffs_obj_lu_find_free_obj_id_compact_v(spiffs *fs, spiffs_obj_id id, spiffs_block_ix bix, int ix_entry,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1848
00002B33 7100A0                  		ADD #0FFFFFFA0H, R0
00002B36 A589                    		MOV.L R1, 5CH[R0]
00002B38 D7022D                  		MOV.W R2, 5AH[R0]
00002B3B D7032C                  		MOV.W R3, 58H[R0]
00002B3E A50C                    		MOV.L R4, 54H[R0]
00002B40 E5001914                		MOV.L 64H[R0], 50H[R0]
00002B44 E5001A13                		MOV.L 68H[R0], 4CH[R0]
00002B48                         L1158:	; entry.split
                                 ;    1849     const void *user_const_p, void *user_var_p) {
                                 ;    1850   (void)user_var_p;
                                 ;    1851   if (id != SPIFFS_OBJ_ID_FREE && id != SPIFFS_OBJ_ID_DELETED && (id & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1851
00002B48 5D012D                  		MOVU.W 5AH[R0], R1
00002B4B 7701FFFF00              		CMP #0FFFFH, R1
00002B50 3Brrrr               W  		BNE L1185
00002B53 38rrrr               W  		BRA L1187
00002B56                         L1159:	; bb13
                                 ;    1852     s32_t res;
                                 ;    1853     const spiffs_free_obj_id_state *state = (const spiffs_free_obj_id_state*)user_const_p;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1853
00002B56 E5001403                		MOV.L 50H[R0], 0CH[R0]
00002B5A                         L1160:	; bb13.split
                                 ;    1854     spiffs_page_object_ix_header objix_hdr;
                                 ;    1855 
                                 ;    1856     res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1856
00002B5A AD0C                    		MOV.L 54H[R0], R4
00002B5C DD022C                  		MOV.W 58H[R0], R2
00002B5F AD89                    		MOV.L 5CH[R0], R1
00002B61 6080                    		SUB #08H, R0
00002B63 710318                  		ADD #18H, R0, R3
00002B66 A00B                    		MOV.L R3, 04H[R0]
00002B68 F80630                  		MOV.L #00000030H, [R0]
00002B6B 6C84                    		SHLL #08H, R4
00002B6D 6D02                    		SHLL #10H, R2
00002B6F 4B24                    		ADD R2, R4
00002B71 7344000210              		ADD #00100200H, R4
00002B76 6603                    		MOV.L #00000000H, R3
00002B78 754215                  		MOV.L #00000015H, R2
00002B7B 05rrrrrr             A  		BSR _spiffs_phys_rd
00002B7F 6280                    		ADD #08H, R0
00002B81 A081                    		MOV.L R1, 08H[R0]
00002B83                         L1161:	; bb13.split1
                                 ;    1857         0, SPIFFS_OBJ_LOOKUP_ENTRY_TO_PADDR(fs, bix, ix_entry), sizeof(spiffs_page_object_ix_header), (u8_t*)&objix_hdr);
                                 ;    1858     if (res == SPIFFS_OK && objix_hdr.p_hdr.span_ix == 0 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1858
00002B83 A881                    		MOV.L 08H[R0], R1
00002B85 6101                    		CMP #00H, R1
00002B87 3Arrrr               W  		BEQ L1177
00002B8A 38rrrr               W  		BRA L1179
00002B8D                         L1162:	; bb29
                                 ;    1859         ((objix_hdr.p_hdr.flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_DELET)) ==
                                 ;    1860             (SPIFFS_PH_FLAG_DELET))) {
                                 ;    1861       // ok object look up entry
                                 ;    1862       if (state->conflicting_name && strcmp((const char *)state->conflicting_name, (char *)objix_hdr.name) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1862
00002B8D A889                    		MOV.L 0CH[R0], R1
00002B8F A891                    		MOV.L 08H[R1], R1
00002B91 6101                    		CMP #00H, R1
00002B93 21rr                    		BNE L1164
00002B95 2Err                 B  		BRA L1166
00002B97                         L1163:	; bb30
                                 ;    1863         return SPIFFS_ERR_CONFLICTING_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1863
00002B97 F90A01D9D8              		MOV.L #0FFFFD8D9H, 04H[R0]
00002B9C 38rrrr               W  		BRA L1194
00002B9F                         L1164:	; bb37
00002B9F A889                    		MOV.L 0CH[R0], R1
00002BA1 A891                    		MOV.L 08H[R1], R1
00002BA3 FB36FF                  		MOV.L #0FFFFFFFFH, R3
00002BA6 71021D                  		ADD #1DH, R0, R2
00002BA9 7F83                    		SCMPU
00002BAB FCDBE2                  		SCGEU.L R14
00002BAE FCDBF5                  		SCLEU.L R15
00002BB1 43FE                    		SUB R15, R14
00002BB3 610E                    		CMP #00H, R14
00002BB5 18                   S  		BNE L1166
00002BB6                         L1165:	; bb46
00002BB6 F80601                  		MOV.L #00000001H, [R0]
00002BB9 08                   S  		BRA L1167
00002BBA                         L1166:	; bb47
00002BBA F80600                  		MOV.L #00000000H, [R0]
00002BBD                         L1167:	; bb48
00002BBD EC01                    		MOV.L [R0], R1
00002BBF 6101                    		CMP #00H, R1
00002BC1 21rr                    		BNE L1163
00002BC3                         L1168:	; bb52
                                 ;    1864       }
                                 ;    1865 
                                 ;    1866       id &= ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1866
00002BC3 5D012D                  		MOVU.W 5AH[R0], R1
00002BC6 7621FF7F                		AND #7FFFH, R1
00002BCA D7012D                  		MOV.W R1, 5AH[R0]
00002BCD                         L1169:	; bb52.split
                                 ;    1867       if (id >= state->min_obj_id && id <= state->max_obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1867
00002BCD A889                    		MOV.L 0CH[R0], R1
00002BCF 5D022D                  		MOVU.W 5AH[R0], R2
00002BD2 06C412                  		CMP [R1].UW, R2
00002BD5 28rr                    		BGE L1173
00002BD7 2Err                 B  		BRA L1175
00002BD9                         L1170:	; bb58
                                 ;    1868         u8_t *map = (u8_t *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1868
00002BD9 AD89                    		MOV.L 5CH[R0], R1
00002BDB E5100910                		MOV.L 24H[R1], 40H[R0]
00002BDF                         L1171:	; bb58.split
                                 ;    1869         int ix = (id - state->min_obj_id) / state->compaction;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1869
00002BDF A889                    		MOV.L 0CH[R0], R1
00002BE1 5D022D                  		MOVU.W 5AH[R0], R2
00002BE4 06C012                  		SUB [R1].UW, R2
00002BE7 06A1091201              		DIVU 04H[R1].L, R2
00002BEC A40A                    		MOV.L R2, 44H[R0]
00002BEE                         L1172:	; bb58.split2
                                 ;    1870         //SPIFFS_DBG("free_obj_id: add ix %i for id %04x min:%04x max%04x comp:%i\n", ix, id, state->min_obj_id, state->max_obj_id, state->compaction);
                                 ;    1871         map[ix]++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1871
00002BEE AC09                    		MOV.L 44H[R0], R1
00002BF0 AC02                    		MOV.L 40H[R0], R2
00002BF2 FEC21E                  		MOVU.B [R2,R1], R14
00002BF5 621E                    		ADD #01H, R14
00002BF7 FE021E                  		MOV.B R14, [R2,R1]
00002BFA 2Err                 B  		BRA L1193
00002BFC                         L1173:	; bb86
00002BFC A889                    		MOV.L 0CH[R0], R1
00002BFE 5D022D                  		MOVU.W 5AH[R0], R2
00002C01 06C51201                		CMP 02H[R1].UW, R2
00002C05 2Arr                    		BGT L1175
00002C07                         L1174:	; bb95
00002C07 F80601                  		MOV.L #00000001H, [R0]
00002C0A 08                   S  		BRA L1176
00002C0B                         L1175:	; bb96
00002C0B F80600                  		MOV.L #00000000H, [R0]
00002C0E                         L1176:	; bb97
00002C0E EC01                    		MOV.L [R0], R1
00002C10 6101                    		CMP #00H, R1
00002C12 21rr                    		BNE L1170
00002C14 2Err                 B  		BRA L1193
00002C16                         L1177:	; bb106
00002C16 BA09                    		MOVU.W 12H[R0], R1
00002C18 6101                    		CMP #00H, R1
00002C1A 18                   S  		BNE L1179
00002C1B                         L1178:	; bb113
00002C1B F80601                  		MOV.L #00000001H, [R0]
00002C1E 08                   S  		BRA L1180
00002C1F                         L1179:	; bb114
00002C1F F80600                  		MOV.L #00000000H, [R0]
00002C22                         L1180:	; bb115
00002C22 EC01                    		MOV.L [R0], R1
00002C24 6101                    		CMP #00H, R1
00002C26 20rr                    		BEQ L1183
00002C28                         L1181:	; bb119
00002C28 754E86                  		MOV.L #00000086H, R14
00002C2B 510E14                  		AND 14H[R0].UB, R14
00002C2E 755E80                  		CMP #80H, R14
00002C31 18                   S  		BNE L1183
00002C32                         L1182:	; bb127
00002C32 F80601                  		MOV.L #00000001H, [R0]
00002C35 08                   S  		BRA L1184
00002C36                         L1183:	; bb128
00002C36 F80600                  		MOV.L #00000000H, [R0]
00002C39                         L1184:	; bb129
00002C39 EC01                    		MOV.L [R0], R1
00002C3B 6101                    		CMP #00H, R1
00002C3D 3Brrrr               W  		BNE L1162
00002C40 2Err                 B  		BRA L1193
00002C42                         L1185:	; bb139
00002C42 5D012D                  		MOVU.W 5AH[R0], R1
00002C45 6101                    		CMP #00H, R1
00002C47 10                   S  		BEQ L1187
00002C48                         L1186:	; bb144
00002C48 F80601                  		MOV.L #00000001H, [R0]
00002C4B 08                   S  		BRA L1188
00002C4C                         L1187:	; bb145
00002C4C F80600                  		MOV.L #00000000H, [R0]
00002C4F                         L1188:	; bb146
00002C4F EC01                    		MOV.L [R0], R1
00002C51 6101                    		CMP #00H, R1
00002C53 20rr                    		BEQ L1191
00002C55                         L1189:	; bb150
00002C55 5D012D                  		MOVU.W 5AH[R0], R1
00002C58 7CF1                    		BTST #0FH, R1
00002C5A 10                   S  		BEQ L1191
00002C5B                         L1190:	; bb156
00002C5B F80601                  		MOV.L #00000001H, [R0]
00002C5E 08                   S  		BRA L1192
00002C5F                         L1191:	; bb157
00002C5F F80600                  		MOV.L #00000000H, [R0]
00002C62                         L1192:	; bb158
00002C62 EC01                    		MOV.L [R0], R1
00002C64 6101                    		CMP #00H, R1
00002C66 3Brrrr               W  		BNE L1159
00002C69                         L1193:	; bb163
                                 ;    1872       }
                                 ;    1873     }
                                 ;    1874   }
                                 ;    1875   return SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1875
00002C69 F90A01AAD8              		MOV.L #0FFFFD8AAH, 04H[R0]
00002C6E                         L1194:	; bb165
00002C6E A809                    		MOV.L 04H[R0], R1
00002C70 A481                    		MOV.L R1, 48H[R0]
                                 ;    1876 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1876
00002C72 6718                    		RTSD #60H
00002C74                         _spiffs_obj_lu_find_free_obj_id:
                                 		.STACK	_spiffs_obj_lu_find_free_obj_id=104
                                 ;    1877 
                                 ;    1878 // Scans thru all object lookup for object index header pages. If total possible number of
                                 ;    1879 // object ids cannot fit into a work buffer, these are grouped. When a group containing free
                                 ;    1880 // object ids is found, the object lu is again scanned for object ids within group and bitmasked.
                                 ;    1881 // Finally, the bitmask is searched for a free id
                                 ;    1882 s32_t spiffs_obj_lu_find_free_obj_id(spiffs *fs, spiffs_obj_id *obj_id, const u8_t *conflicting_name) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1882
00002C74 7100B4                  		ADD #0FFFFFFB4H, R0
00002C77 A481                    		MOV.L R1, 48H[R0]
00002C79 A40A                    		MOV.L R2, 44H[R0]
00002C7B A403                    		MOV.L R3, 40H[R0]
                                 ;    1883   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1883
00002C7D 3E0200                  		MOV.L #00000000H, 08H[R0]
00002C80                         L1196:	; entry.split
                                 ;    1884   u32_t max_objects = (fs->block_count * SPIFFS_OBJ_LOOKUP_MAX_ENTRIES(fs)) / 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1884
00002C80 AC81                    		MOV.L 48H[R0], R1
00002C82 A899                    		MOV.L 0CH[R1], R1
00002C84 7611FE00                		MUL #0FEH, R1
00002C88 6811                    		SHLR #01H, R1
00002C8A A089                    		MOV.L R1, 0CH[R0]
00002C8C                         L1197:	; entry.split1
                                 ;    1885   spiffs_free_obj_id_state state;
                                 ;    1886   spiffs_obj_id free_obj_id = SPIFFS_OBJ_ID_FREE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1886
00002C8C F9090FFFFF              		MOV.W #0FFFFH, 1EH[R0]
00002C91                         L1198:	; entry.split2
                                 ;    1887   state.min_obj_id = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1887
00002C91 3D0801                  		MOV.W #0001H, 10H[R0]
00002C94                         L1199:	; entry.split3
                                 ;    1888   state.max_obj_id = max_objects + 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1888
00002C94 A889                    		MOV.L 0CH[R0], R1
00002C96 6211                    		ADD #01H, R1
00002C98 9209                    		MOV.W R1, 12H[R0]
00002C9A                         L1200:	; entry.split4
                                 ;    1889   if (state.max_obj_id & SPIFFS_OBJ_ID_IX_FLAG) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1889
00002C9A BA09                    		MOVU.W 12H[R0], R1
00002C9C 7CF1                    		BTST #0FH, R1
00002C9E 10                   S  		BEQ L1202
00002C9F                         L1201:	; bb26
                                 ;    1890     state.max_obj_id = ((spiffs_obj_id)-1) & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1890
00002C9F F90909FF7F              		MOV.W #7FFFH, 12H[R0]
00002CA4                         L1202:	; bb34
                                 ;    1891   }
                                 ;    1892   state.compaction = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1892
00002CA4 3E0500                  		MOV.L #00000000H, 14H[R0]
00002CA7                         L1203:	; bb34.split
                                 ;    1893   state.conflicting_name = conflicting_name;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1893
00002CA7 E5001006                		MOV.L 40H[R0], 18H[R0]
00002CAB 38rrrr               W  		BRA L1250
00002CAE                         L1204:	; bb39
                                 ;    1894   while (res == SPIFFS_OK && free_obj_id == SPIFFS_OBJ_ID_FREE) {
                                 ;    1895     if (state.max_obj_id - state.min_obj_id <= (spiffs_obj_id)SPIFFS_CFG_LOG_PAGE_SZ(fs)*8) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1895
00002CAE BA09                    		MOVU.W 12H[R0], R1
00002CB0 06C10108                		SUB 10H[R0].UW, R1
00002CB4 76010008                		CMP #0800H, R1
00002CB8 2Brr                  * 		BGT L1223
         38rrrr                  
00002CBD                         L1205:	; bb40
                                 ;    1896       // possible to represent in bitmap
                                 ;    1897       u32_t i, j;
                                 ;    1898       SPIFFS_DBG("free_obj_id: BITM min:%04x max:%04x\n", state.min_obj_id, state.max_obj_id);
                                 ;    1899 
                                 ;    1900       memset(fs->work, 0, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1900
00002CBD AC81                    		MOV.L 48H[R0], R1
00002CBF AA19                    		MOV.L 24H[R1], R1
00002CC1 FB3A0001                		MOV.L #00000100H, R3
00002CC5 6602                    		MOV.L #00000000H, R2
00002CC7 7F88                    		SSTR.B
00002CC9                         L1206:	; bb40.split
                                 ;    1901       res = spiffs_obj_lu_find_entry_visitor(fs, 0, 0, 0, 0, spiffs_obj_lu_find_free_obj_id_bitmap_v,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1901
00002CC9 AC03                    		MOV.L 40H[R0], R3
00002CCB AC81                    		MOV.L 48H[R0], R1
00002CCD 7100E8                  		ADD #0FFFFFFE8H, R0
00002CD0 6602                    		MOV.L #00000000H, R2
00002CD2 A10A                    		MOV.L R2, 14H[R0]
00002CD4 A102                    		MOV.L R2, 10H[R0]
00002CD6 710428                  		ADD #28H, R0, R4
00002CD9 A08C                    		MOV.L R4, 0CH[R0]
00002CDB A083                    		MOV.L R3, 08H[R0]
00002CDD FB32rrrrrrrr            		MOV.L #__$spiffs_obj_lu_find_free_obj_id_bitmap_v, R3
00002CE3 A00B                    		MOV.L R3, 04H[R0]
00002CE5 D302                    		MOV.W R2, [R0]
00002CE7 EF23                    		MOV.L R2, R3
00002CE9 EF24                    		MOV.L R2, R4
00002CEB 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
00002CEE 710018                  		ADD #18H, R0
00002CF1 A081                    		MOV.L R1, 08H[R0]
00002CF3                         L1207:	; bb40.split5
                                 ;    1902           conflicting_name, &state.min_obj_id, 0, 0);
                                 ;    1903       if (res == SPIFFS_VIS_END) res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1903
00002CF3 A881                    		MOV.L 08H[R0], R1
00002CF5 7601A8D8                		CMP #0FFFFD8A8H, R1
00002CF9 18                   S  		BNE L1209
00002CFA                         L1208:	; bb50
00002CFA 3E0200                  		MOV.L #00000000H, 08H[R0]
00002CFD                         L1209:	; bb57
                                 ;    1904       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1904
00002CFD A881                    		MOV.L 08H[R0], R1
00002CFF 69F1                    		SHLR #1FH, R1
00002D01 6101                    		CMP #00H, R1
00002D03 10                   S  		BEQ L1211
00002D04                         L1210:	; bb58
00002D04 E5000201                		MOV.L 08H[R0], 04H[R0]
00002D08 38rrrr               W  		BRA L1256
00002D0B                         L1211:	; bb66.split
                                 ;    1905       // traverse bitmask until found free obj_id
                                 ;    1906       for (i = 0; i < SPIFFS_CFG_LOG_PAGE_SZ(fs); i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1906
00002D0B 3E0800                  		MOV.L #00000000H, 20H[R0]
00002D0E 2Err                 B  		BRA L1221
00002D10                         L1212:	; bb67
                                 ;    1907         u8_t mask = fs->work[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1907
00002D10 AC81                    		MOV.L 48H[R0], R1
00002D12 AA19                    		MOV.L 24H[R1], R1
00002D14 AA02                    		MOV.L 20H[R0], R2
00002D16 FEC121                  		MOVU.B [R1,R2], R1
00002D19 C7012B                  		MOV.B R1, 2BH[R0]
00002D1C                         L1213:	; bb67.split
                                 ;    1908         if (mask == 0xff) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1908
00002D1C 59012B                  		MOVU.B 2BH[R0], R1
00002D1F 7551FF                  		CMP #0FFH, R1
00002D22 20rr                    		BEQ L1220
00002D24                         L1214:	; bb82
                                 ;    1909           continue;
                                 ;    1910         }
                                 ;    1911         for (j = 0; j < 8; j++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1911
00002D24 3E0900                  		MOV.L #00000000H, 24H[R0]
00002D27 2Err                 B  		BRA L1219
00002D29                         L1215:	; bb84
                                 ;    1912           if ((mask & (1<<j)) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1912
00002D29 59012B                  		MOVU.B 2BH[R0], R1
00002D2C AA0A                    		MOV.L 24H[R0], R2
00002D2E FC6B12                  		BTST R2, R1
00002D31 21rr                    		BNE L1218
00002D33                         L1216:	; bb85
                                 ;    1913             *obj_id = (i<<3)+j+state.min_obj_id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1913
00002D33 AA01                    		MOV.L 20H[R0], R1
00002D35 6C31                    		SHLL #03H, R1
00002D37 06890109                		ADD 24H[R0].L, R1
00002D3B 06C90108                		ADD 10H[R0].UW, R1
00002D3F AC0A                    		MOV.L 44H[R0], R2
00002D41 D321                    		MOV.W R1, [R2]
00002D43                         L1217:	; bb85.split
                                 ;    1914             return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1914
00002D43 3E0100                  		MOV.L #00000000H, 04H[R0]
00002D46 38rrrr               W  		BRA L1256
00002D49                         L1218:	; bb105
00002D49 AA09                    		MOV.L 24H[R0], R1
00002D4B 6211                    		ADD #01H, R1
00002D4D A209                    		MOV.L R1, 24H[R0]
00002D4F                         L1219:	; bb108
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1911
00002D4F AA09                    		MOV.L 24H[R0], R1
00002D51 6181                    		CMP #08H, R1
00002D53 23rr                    		BLTU L1215
00002D55                         L1220:	; bb114
00002D55 AA01                    		MOV.L 20H[R0], R1
00002D57 6211                    		ADD #01H, R1
00002D59 A201                    		MOV.L R1, 20H[R0]
00002D5B                         L1221:	; bb117
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1906
00002D5B AA01                    		MOV.L 20H[R0], R1
00002D5D 76010001                		CMP #0100H, R1
00002D61 23rr                    		BLTU L1212
00002D63                         L1222:	; bb122
                                 ;    1915           }
                                 ;    1916         }
                                 ;    1917       }
                                 ;    1918       return SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1918
00002D63 F90A01EFD8              		MOV.L #0FFFFD8EFH, 04H[R0]
00002D68 38rrrr               W  		BRA L1256
00002D6B                         L1223:	; bb125
                                 ;    1919     } else {
                                 ;    1920       // not possible to represent all ids in range in a bitmap, compact and count
                                 ;    1921       if (state.compaction != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1921
00002D6B A909                    		MOV.L 14H[R0], R1
00002D6D 6101                    		CMP #00H, R1
00002D6F 3Arrrr               W  		BEQ L1242
00002D72                         L1224:	; bb126
                                 ;    1922         // select element in compacted table, decrease range and recompact
                                 ;    1923         u32_t i, min_i = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1923
00002D72 3E0C00                  		MOV.L #00000000H, 30H[R0]
00002D75                         L1225:	; bb126.split
                                 ;    1924         u8_t *map = (u8_t *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1924
00002D75 AC81                    		MOV.L 48H[R0], R1
00002D77 E510090D                		MOV.L 24H[R1], 34H[R0]
00002D7B                         L1226:	; bb126.split6
                                 ;    1925         u8_t min_count = 0xff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1925
00002D7B F9043BFF                		MOV.B #0FFH, 3BH[R0]
00002D7F                         L1227:	; bb126.split7
                                 ;    1926 
                                 ;    1927         for (i = 0; i < SPIFFS_CFG_LOG_PAGE_SZ(fs)/sizeof(u8_t); i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1927
00002D7F 3E0B00                  		MOV.L #00000000H, 2CH[R0]
00002D82 2Err                 B  		BRA L1233
00002D84                         L1228:	; bb131
                                 ;    1928           if (map[i] < min_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1928
00002D84 AA89                    		MOV.L 2CH[R0], R1
00002D86 AB0A                    		MOV.L 34H[R0], R2
00002D88 FEC21E                  		MOVU.B [R2,R1], R14
00002D8B 450E3B                  		CMP 3BH[R0].UB, R14
00002D8E 28rr                    		BGE L1232
00002D90                         L1229:	; bb132
                                 ;    1929             min_count = map[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1929
00002D90 AA89                    		MOV.L 2CH[R0], R1
00002D92 AB0A                    		MOV.L 34H[R0], R2
00002D94 FEC211                  		MOVU.B [R2,R1], R1
00002D97 C7013B                  		MOV.B R1, 3BH[R0]
00002D9A                         L1230:	; bb132.split
                                 ;    1930             min_i = i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1930
00002D9A E5000B0C                		MOV.L 2CH[R0], 30H[R0]
00002D9E                         L1231:	; bb132.split8
                                 ;    1931             if (min_count == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1931
00002D9E 59013B                  		MOVU.B 3BH[R0], R1
00002DA1 6101                    		CMP #00H, R1
00002DA3 20rr                    		BEQ L1234
00002DA5                         L1232:	; bb157
00002DA5 AA89                    		MOV.L 2CH[R0], R1
00002DA7 6211                    		ADD #01H, R1
00002DA9 A289                    		MOV.L R1, 2CH[R0]
00002DAB                         L1233:	; bb160
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1927
00002DAB AA89                    		MOV.L 2CH[R0], R1
00002DAD 76010001                		CMP #0100H, R1
00002DB1 23rr                    		BLTU L1228
00002DB3                         L1234:	; bb167
                                 ;    1932               break;
                                 ;    1933             }
                                 ;    1934           }
                                 ;    1935         }
                                 ;    1936 
                                 ;    1937         if (min_count == state.compaction) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1937
00002DB3 59013B                  		MOVU.B 3BH[R0], R1
00002DB6 06850105                		CMP 14H[R0].L, R1
00002DBA 18                   S  		BNE L1236
00002DBB                         L1235:	; bb168
                                 ;    1938           // there are no free objids!
                                 ;    1939           SPIFFS_DBG("free_obj_id: compacted table is full\n");
                                 ;    1940           return SPIFFS_ERR_FULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1940
00002DBB F90A01EFD8              		MOV.L #0FFFFD8EFH, 04H[R0]
00002DC0 38rrrr               W  		BRA L1256
00002DC3                         L1236:	; bb178
                                 ;    1941         }
                                 ;    1942 
                                 ;    1943         SPIFFS_DBG("free_obj_id: COMP select index:%i min_count:%i min:%04x max:%04x compact:%i\n", min_i, min_count, state.min_obj_id, state.max_obj_id, sta
                                 ;    1944 
                                 ;    1945         if (min_count == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1945
00002DC3 59013B                  		MOVU.B 3BH[R0], R1
00002DC6 6101                    		CMP #00H, R1
00002DC8 21rr                    		BNE L1239
00002DCA                         L1237:	; bb179
                                 ;    1946           // no id in this range, skip compacting and use directly
                                 ;    1947           *obj_id = min_i * state.compaction + state.min_obj_id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1947
00002DCA AB01                    		MOV.L 30H[R0], R1
00002DCC 068D0105                		MUL 14H[R0].L, R1
00002DD0 06C90108                		ADD 10H[R0].UW, R1
00002DD4 AC0A                    		MOV.L 44H[R0], R2
00002DD6 D321                    		MOV.W R1, [R2]
00002DD8                         L1238:	; bb179.split
                                 ;    1948           return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1948
00002DD8 3E0100                  		MOV.L #00000000H, 04H[R0]
00002DDB 38rrrr               W  		BRA L1256
00002DDE                         L1239:	; bb191
                                 ;    1949         } else {
                                 ;    1950           SPIFFS_DBG("free_obj_id: COMP SEL chunk:%04x min:%04x -> %04x\n", state.compaction, state.min_obj_id, state.min_obj_id + min_i *  state.compaction)
                                 ;    1951           state.min_obj_id += min_i *  state.compaction;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1951
00002DDE AB01                    		MOV.L 30H[R0], R1
00002DE0 068D0105                		MUL 14H[R0].L, R1
00002DE4 06C90108                		ADD 10H[R0].UW, R1
00002DE8 9201                    		MOV.W R1, 10H[R0]
00002DEA                         L1240:	; bb191.split
                                 ;    1952           state.max_obj_id = state.min_obj_id + state.compaction;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1952
00002DEA BA01                    		MOVU.W 10H[R0], R1
00002DEC 06890105                		ADD 14H[R0].L, R1
00002DF0 9209                    		MOV.W R1, 12H[R0]
00002DF2                         L1241:	; bb191.split9
                                 ;    1953           // decrease compaction
                                 ;    1954         }
                                 ;    1955         if ((state.max_obj_id - state.min_obj_id <= (spiffs_obj_id)SPIFFS_CFG_LOG_PAGE_SZ(fs)*8)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1955
00002DF2 BA09                    		MOVU.W 12H[R0], R1
00002DF4 06C10108                		SUB 10H[R0].UW, R1
00002DF8 76010108                		CMP #0801H, R1
00002DFC 29rr                    		BLT L1250
00002DFE                         L1242:	; bb234
                                 ;    1956           // no need for compacting, use bitmap
                                 ;    1957           continue;
                                 ;    1958         }
                                 ;    1959       }
                                 ;    1960       // in a work memory of log_page_size bytes, we may fit in log_page_size ids
                                 ;    1961       // todo what if compaction is > 255 - then we cannot fit it in a byte
                                 ;    1962       state.compaction = (state.max_obj_id-state.min_obj_id) / ((SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(u8_t)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1962
00002DFE BA09                    		MOVU.W 12H[R0], R1
00002E00 06C10108                		SUB 10H[R0].UW, R1
00002E04 6881                    		SHLR #08H, R1
00002E06 A109                    		MOV.L R1, 14H[R0]
00002E08                         L1243:	; bb234.split
                                 ;    1963       SPIFFS_DBG("free_obj_id: COMP min:%04x max:%04x compact:%i\n", state.min_obj_id, state.max_obj_id, state.compaction);
                                 ;    1964 
                                 ;    1965       memset(fs->work, 0, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1965
00002E08 AC81                    		MOV.L 48H[R0], R1
00002E0A AA19                    		MOV.L 24H[R1], R1
00002E0C FB3A0001                		MOV.L #00000100H, R3
00002E10 6602                    		MOV.L #00000000H, R2
00002E12 7F88                    		SSTR.B
00002E14                         L1244:	; bb234.split10
                                 ;    1966       res = spiffs_obj_lu_find_entry_visitor(fs, 0, 0, 0, 0, spiffs_obj_lu_find_free_obj_id_compact_v, &state, 0, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1966
00002E14 AC81                    		MOV.L 48H[R0], R1
00002E16 7100E8                  		ADD #0FFFFFFE8H, R0
00002E19 6602                    		MOV.L #00000000H, R2
00002E1B A10A                    		MOV.L R2, 14H[R0]
00002E1D A102                    		MOV.L R2, 10H[R0]
00002E1F A08A                    		MOV.L R2, 0CH[R0]
00002E21 710328                  		ADD #28H, R0, R3
00002E24 A083                    		MOV.L R3, 08H[R0]
00002E26 FB32rrrrrrrr            		MOV.L #__$spiffs_obj_lu_find_free_obj_id_compact_v, R3
00002E2C A00B                    		MOV.L R3, 04H[R0]
00002E2E D302                    		MOV.W R2, [R0]
00002E30 EF23                    		MOV.L R2, R3
00002E32 EF24                    		MOV.L R2, R4
00002E34 39rrrr               W  		BSR _spiffs_obj_lu_find_entry_visitor
00002E37 710018                  		ADD #18H, R0
00002E3A A081                    		MOV.L R1, 08H[R0]
00002E3C                         L1245:	; bb234.split11
                                 ;    1967       if (res == SPIFFS_VIS_END) res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1967
00002E3C A881                    		MOV.L 08H[R0], R1
00002E3E 7601A8D8                		CMP #0FFFFD8A8H, R1
00002E42 18                   S  		BNE L1247
00002E43                         L1246:	; bb251
00002E43 3E0200                  		MOV.L #00000000H, 08H[R0]
00002E46                         L1247:	; bb258
                                 ;    1968       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1968
00002E46 A881                    		MOV.L 08H[R0], R1
00002E48 69F1                    		SHLR #1FH, R1
00002E4A 6101                    		CMP #00H, R1
00002E4C 10                   S  		BEQ L1249
00002E4D                         L1248:	; bb259
00002E4D E5000201                		MOV.L 08H[R0], 04H[R0]
00002E51 2Err                 B  		BRA L1256
00002E53                         L1249:	; bb267.split
                                 ;    1969       state.conflicting_name = 0; // searched for conflicting name once, no need to do it again
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1969
00002E53 3E0600                  		MOV.L #00000000H, 18H[R0]
00002E56                         L1250:	; bb281
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1894
00002E56 A881                    		MOV.L 08H[R0], R1
00002E58 6101                    		CMP #00H, R1
00002E5A 21rr                    		BNE L1253
00002E5C                         L1251:	; bb285
00002E5C BB89                    		MOVU.W 1EH[R0], R1
00002E5E 7701FFFF00              		CMP #0FFFFH, R1
00002E63 18                   S  		BNE L1253
00002E64                         L1252:	; bb290
00002E64 F80601                  		MOV.L #00000001H, [R0]
00002E67 08                   S  		BRA L1254
00002E68                         L1253:	; bb291
00002E68 F80600                  		MOV.L #00000000H, [R0]
00002E6B                         L1254:	; bb292
00002E6B EC01                    		MOV.L [R0], R1
00002E6D 6101                    		CMP #00H, R1
00002E6F 3Brrrr               W  		BNE L1204
00002E72                         L1255:	; bb297
                                 ;    1970     }
                                 ;    1971   }
                                 ;    1972 
                                 ;    1973   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1973
00002E72 E5000201                		MOV.L 08H[R0], 04H[R0]
00002E76                         L1256:	; bb300
00002E76 A809                    		MOV.L 04H[R0], R1
00002E78 A389                    		MOV.L R1, 3CH[R0]
                                 ;    1974 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1974
00002E7A 6713                    		RTSD #4CH
00002E7C                         _spiffs_fd_find_new:
                                 		.STACK	_spiffs_fd_find_new=32
                                 ;    1975 #endif // !SPIFFS_READ_ONLY
                                 ;    1976 
                                 ;    1977 s32_t spiffs_fd_find_new(spiffs *fs, spiffs_fd **fd) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1977
00002E7C 7100E4                  		ADD #0FFFFFFE4H, R0
00002E7F A181                    		MOV.L R1, 18H[R0]
00002E81 A10A                    		MOV.L R2, 14H[R0]
                                 ;    1978   u32_t i;
                                 ;    1979   spiffs_fd *fds = (spiffs_fd *)fs->fd_space;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1979
00002E83 A981                    		MOV.L 18H[R0], R1
00002E85 E5100A02                		MOV.L 28H[R1], 08H[R0]
00002E89                         L1258:	; entry.split
                                 ;    1980   for (i = 0; i < fs->fd_count; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1980
00002E89 3E0100                  		MOV.L #00000000H, 04H[R0]
00002E8C 2Err                 B  		BRA L1265
00002E8E                         L1259:	; bb
                                 ;    1981     spiffs_fd *cur_fd = &fds[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1981
00002E8E A809                    		MOV.L 04H[R0], R1
00002E90 751124                  		MUL #24H, R1
00002E93 06890102                		ADD 08H[R0].L, R1
00002E97 A089                    		MOV.L R1, 0CH[R0]
00002E99                         L1260:	; bb.split
                                 ;    1982     if (cur_fd->file_nbr == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1982
00002E99 A889                    		MOV.L 0CH[R0], R1
00002E9B 9891                    		MOV.W 04H[R1], R1
00002E9D 6101                    		CMP #00H, R1
00002E9F 21rr                    		BNE L1264
00002EA1                         L1261:	; bb14
                                 ;    1983       cur_fd->file_nbr = i+1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1983
00002EA1 A809                    		MOV.L 04H[R0], R1
00002EA3 6211                    		ADD #01H, R1
00002EA5 A88A                    		MOV.L 0CH[R0], R2
00002EA7 90A1                    		MOV.W R1, 04H[R2]
00002EA9                         L1262:	; bb14.split
                                 ;    1984       *fd = cur_fd;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1984
00002EA9 A889                    		MOV.L 0CH[R0], R1
00002EAB A90A                    		MOV.L 14H[R0], R2
00002EAD E321                    		MOV.L R1, [R2]
00002EAF                         L1263:	; bb14.split1
                                 ;    1985       return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1985
00002EAF F80600                  		MOV.L #00000000H, [R0]
00002EB2 2Err                 B  		BRA L1267
00002EB4                         L1264:	; bb29
00002EB4 A809                    		MOV.L 04H[R0], R1
00002EB6 6211                    		ADD #01H, R1
00002EB8 A009                    		MOV.L R1, 04H[R0]
00002EBA                         L1265:	; bb32
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1980
00002EBA A981                    		MOV.L 18H[R0], R1
00002EBC A80A                    		MOV.L 04H[R0], R2
00002EBE 0685120B                		CMP 2CH[R1].L, R2
00002EC2 23rr                    		BLTU L1259
00002EC4                         L1266:	; bb40
                                 ;    1986     }
                                 ;    1987   }
                                 ;    1988   return SPIFFS_ERR_OUT_OF_FILE_DESCS;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1988
00002EC4 F80AE9D8                		MOV.L #0FFFFD8E9H, [R0]
00002EC8                         L1267:	; bb42
00002EC8 EC01                    		MOV.L [R0], R1
00002ECA A101                    		MOV.L R1, 10H[R0]
                                 ;    1989 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1989
00002ECC 6707                    		RTSD #1CH
00002ECE                         _spiffs_fd_return:
                                 		.STACK	_spiffs_fd_return=32
                                 ;    1990 
                                 ;    1991 s32_t spiffs_fd_return(spiffs *fs, spiffs_file f) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1991
00002ECE 7100E4                  		ADD #0FFFFFFE4H, R0
00002ED1 A181                    		MOV.L R1, 18H[R0]
00002ED3 928A                    		MOV.W R2, 16H[R0]
                                 ;    1992   if (f <= 0 || f > (s16_t)fs->fd_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1992
00002ED5 9A89                    		MOV.W 16H[R0], R1
00002ED7 6101                    		CMP #00H, R1
00002ED9 2Brr                    		BLE L1271
00002EDB 08                   S  		BRA L1270
00002EDC                         L1269:	; bb5
                                 ;    1993     return SPIFFS_ERR_BAD_DESCRIPTOR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1993
00002EDC F90A01E6D8              		MOV.L #0FFFFD8E6H, 04H[R0]
00002EE1 2Err                 B  		BRA L1280
00002EE3                         L1270:	; bb11
00002EE3 A981                    		MOV.L 18H[R0], R1
00002EE5 9A8A                    		MOV.W 16H[R0], R2
00002EE7 06451216                		CMP 2CH[R1].W, R2
00002EEB 2Brr                    		BLE L1272
00002EED                         L1271:	; bb21
00002EED F80601                  		MOV.L #00000001H, [R0]
00002EF0 08                   S  		BRA L1273
00002EF1                         L1272:	; bb22
00002EF1 F80600                  		MOV.L #00000000H, [R0]
00002EF4                         L1273:	; bb23
00002EF4 EC01                    		MOV.L [R0], R1
00002EF6 6101                    		CMP #00H, R1
00002EF8 21rr                    		BNE L1269
00002EFA                         L1274:	; bb27
                                 ;    1994   }
                                 ;    1995   spiffs_fd *fds = (spiffs_fd *)fs->fd_space;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1995
00002EFA A981                    		MOV.L 18H[R0], R1
00002EFC E5100A02                		MOV.L 28H[R1], 08H[R0]
00002F00                         L1275:	; bb27.split
                                 ;    1996   spiffs_fd *fd = &fds[f-1];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1996
00002F00 9A89                    		MOV.W 16H[R0], R1
00002F02 751124                  		MUL #24H, R1
00002F05 06890102                		ADD 08H[R0].L, R1
00002F09 7111DC                  		ADD #0FFFFFFDCH, R1
00002F0C A089                    		MOV.L R1, 0CH[R0]
00002F0E                         L1276:	; bb27.split1
                                 ;    1997   if (fd->file_nbr == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1997
00002F0E A889                    		MOV.L 0CH[R0], R1
00002F10 9891                    		MOV.W 04H[R1], R1
00002F12 6101                    		CMP #00H, R1
00002F14 18                   S  		BNE L1278
00002F15                         L1277:	; bb38
                                 ;    1998     return SPIFFS_ERR_FILE_CLOSED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",1998
00002F15 F90A01E8D8              		MOV.L #0FFFFD8E8H, 04H[R0]
00002F1A 08                   S  		BRA L1280
00002F1B                         L1278:	; bb47
                                 ;    1999   }
                                 ;    2000   fd->file_nbr = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2000
00002F1B A889                    		MOV.L 0CH[R0], R1
00002F1D 3D1200                  		MOV.W #0000H, 04H[R1]
00002F20                         L1279:	; bb47.split
                                 ;    2001   return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2001
00002F20 3E0100                  		MOV.L #00000000H, 04H[R0]
00002F23                         L1280:	; bb51
00002F23 A809                    		MOV.L 04H[R0], R1
00002F25 A101                    		MOV.L R1, 10H[R0]
                                 ;    2002 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2002
00002F27 6707                    		RTSD #1CH
00002F29                         _spiffs_fd_get:
                                 		.STACK	_spiffs_fd_get=32
                                 ;    2003 
                                 ;    2004 s32_t spiffs_fd_get(spiffs *fs, spiffs_file f, spiffs_fd **fd) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2004
00002F29 7100E4                  		ADD #0FFFFFFE4H, R0
00002F2C A181                    		MOV.L R1, 18H[R0]
00002F2E 928A                    		MOV.W R2, 16H[R0]
00002F30 A103                    		MOV.L R3, 10H[R0]
                                 ;    2005   if (f <= 0 || f > (s16_t)fs->fd_count) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2005
00002F32 9A89                    		MOV.W 16H[R0], R1
00002F34 6101                    		CMP #00H, R1
00002F36 2Brr                    		BLE L1284
00002F38 08                   S  		BRA L1283
00002F39                         L1282:	; bb5
                                 ;    2006     return SPIFFS_ERR_BAD_DESCRIPTOR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2006
00002F39 F90A01E6D8              		MOV.L #0FFFFD8E6H, 04H[R0]
00002F3E 2Err                 B  		BRA L1292
00002F40                         L1283:	; bb11
00002F40 A981                    		MOV.L 18H[R0], R1
00002F42 9A8A                    		MOV.W 16H[R0], R2
00002F44 06451216                		CMP 2CH[R1].W, R2
00002F48 2Brr                    		BLE L1285
00002F4A                         L1284:	; bb21
00002F4A F80601                  		MOV.L #00000001H, [R0]
00002F4D 08                   S  		BRA L1286
00002F4E                         L1285:	; bb22
00002F4E F80600                  		MOV.L #00000000H, [R0]
00002F51                         L1286:	; bb23
00002F51 EC01                    		MOV.L [R0], R1
00002F53 6101                    		CMP #00H, R1
00002F55 21rr                    		BNE L1282
00002F57                         L1287:	; bb27
                                 ;    2007   }
                                 ;    2008   spiffs_fd *fds = (spiffs_fd *)fs->fd_space;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2008
00002F57 A981                    		MOV.L 18H[R0], R1
00002F59 E5100A02                		MOV.L 28H[R1], 08H[R0]
00002F5D                         L1288:	; bb27.split
                                 ;    2009   *fd = &fds[f-1];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2009
00002F5D 9A89                    		MOV.W 16H[R0], R1
00002F5F 751124                  		MUL #24H, R1
00002F62 06890102                		ADD 08H[R0].L, R1
00002F66 7111DC                  		ADD #0FFFFFFDCH, R1
00002F69 A902                    		MOV.L 10H[R0], R2
00002F6B E321                    		MOV.L R1, [R2]
00002F6D                         L1289:	; bb27.split1
                                 ;    2010   if ((*fd)->file_nbr == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2010
00002F6D A901                    		MOV.L 10H[R0], R1
00002F6F EC11                    		MOV.L [R1], R1
00002F71 9891                    		MOV.W 04H[R1], R1
00002F73 6101                    		CMP #00H, R1
00002F75 18                   S  		BNE L1291
00002F76                         L1290:	; bb39
                                 ;    2011     return SPIFFS_ERR_FILE_CLOSED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2011
00002F76 F90A01E8D8              		MOV.L #0FFFFD8E8H, 04H[R0]
00002F7B 08                   S  		BRA L1292
00002F7C                         L1291:	; bb49
                                 ;    2012   }
                                 ;    2013   return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2013
00002F7C 3E0100                  		MOV.L #00000000H, 04H[R0]
00002F7F                         L1292:	; bb51
00002F7F A809                    		MOV.L 04H[R0], R1
00002F81 A089                    		MOV.L R1, 0CH[R0]
                                 ;    2014 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_nucleus.c",2014
00002F83 6707                    		RTSD #1CH
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     09202   LINES

Section List

Attr         Size               Name
CODE     0000012165(00002F85H)  P

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx12DB\$ccrx\spiffs_nucleus.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01\Mobile_build\spiffs_nucleus.lst
-output=C:\Workspace\e2studio\git\MT01\Mobile_build\spiffs\spiffs_nucleus.obj
