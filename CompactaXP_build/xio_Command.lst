* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Thu Mar 09 14:18:42 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  09-Mar-2017 14:18:42
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=xio_Command.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx\src,C:/Workspace/e2studio/
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=xio_Command.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=1,EASYMAK=0,MOBILE=0,FREE_RTOS_PP
                                 ;xio_Command.c
                                 
                                 		.glb	_ds
                                 		.glb	_command
                                 		.glb	_xio_ctrl_generic
                                 		.glb	_xio_fc_null
                                 		.glb	_xio_init_command
                                 		.glb	_xio_open_command
                                 		.glb	_xio_gets_command
                                 		.glb	_xio_close_command
                                 		.glb	_xio_getc_command
                                 		.glb	_xio_putc_command
                                 		.glb	_xio_open_generic
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         _xio_init_command:
                                 		.STACK	_xio_init_command=28
                                 ;       1 /*
                                 ;       2  *  xio_file.c	- device driver for program memory "files"
                                 ;       3  * 				- works with avr-gcc stdio library
                                 ;       4  *
                                 ;       5  * Part of TinyG project
                                 ;       6  *
                                 ;       7  * Copyright (c) 2011 - 2015 Alden S. Hart Jr.
                                 ;       8  *
                                 ;       9  * This file ("the software") is free software: you can redistribute it and/or modify
                                 ;      10  * it under the terms of the GNU General Public License, version 2 as published by the
                                 ;      11  * Free Software Foundation. You should have received a copy of the GNU General Public
                                 ;      12  * License, version 2 along with the software.  If not, see <http://www.gnu.org/licenses/>.
                                 ;      13  *
                                 ;      14  * THE SOFTWARE IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT WITHOUT ANY
                                 ;      15  * WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
                                 ;      16  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT
                                 ;      17  * SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                 ;      18  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
                                 ;      19  * OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
                                 ;      20  */
                                 ;      21 
                                 ;      22 
                                 ;      23 #include <stdio.h>				// precursor for xio.h
                                 ;      24 #include <stdbool.h>			// true and false
                                 ;      25 #include <string.h>				// for memset
                                 ;      26 #include <stdint.h>				//
                                 ;      27 //#include "platform.h"
                                 ;      28 #include "xio.h"
                                 ;      29 #include "ut_state.h"
                                 ;      30 
                                 ;      31 
                                 ;      32 /******************************************************************************
                                 ;      33  * FILE CONFIGURATION RECORDS
                                 ;      34  ******************************************************************************/
                                 ;      35 
                                 ;      36 xioCommand_t	    command[XIO_DEV_COMMAND_COUNT];
                                 ;      37 
                                 ;      38 struct cfgFILE {
                                 ;      39 	x_open_t x_open;			// see xio.h for typedefs
                                 ;      40 	x_ctrl_t x_ctrl;
                                 ;      41 	x_close_t x_close;
                                 ;      42 	x_gets_t x_gets;
                                 ;      43 	x_getc_t x_getc;
                                 ;      44 	x_putc_t x_putc;
                                 ;      45 	x_flow_t x_flow;
                                 ;      46 };
                                 ;      47 
                                 ;      48 static struct cfgFILE const cfgFile[] = {
                                 ;      49 {	// PGM config
                                 ;      50 	xio_open_command,				// open function
                                 ;      51 	xio_ctrl_generic, 			// ctrl function
                                 ;      52 	xio_close_command, 			// close function
                                 ;      53 	xio_gets_command,				// get string function
                                 ;      54 	xio_getc_command,				// stdio getc function
                                 ;      55 	xio_putc_command,				// stdio putc function
                                 ;      56 	xio_fc_null,				// flow control callback
                                 ;      57 }
                                 ;      58 };
                                 ;      59 /******************************************************************************
                                 ;      60  * FUNCTIONS
                                 ;      61  ******************************************************************************/
                                 ;      62 
                                 ;      63 /*
                                 ;      64  *	xio_init_file() - initialize and set controls for file IO
                                 ;      65  *
                                 ;      66  *	Need to bind the open function or a subsequent opens will fail
                                 ;      67  */
                                 ;      68 
                                 ;      69 void xio_init_command()
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",69
00000000 7EA6                    		PUSH.L R6
00000002 6040                    		SUB #04H, R0
                                 ;      70 {
                                 ;      71 	for (uint8_t i=0; i<XIO_DEV_COMMAND_COUNT; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",71
00000004 3C0300                  		MOV.B #00H, 03H[R0]
00000007 2Err                 B  		BRA L12
00000009                         L11:	; bb
                                 ;      72 		xio_open_generic(XIO_DEV_COMMAND_OFFSET + i,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",72
00000009 B089                    		MOVU.B 03H[R0], R1
0000000B EF1E                    		MOV.L R1, R14
0000000D 751E1C                  		MUL #1CH, R14
00000010 FB52rrrrrrrr            		MOV.L #__$cfgFile, R5
00000016 4BE5                    		ADD R14, R5
00000018 ED5F05                  		MOV.L 14H[R5], R15
0000001B ED5E04                  		MOV.L 10H[R5], R14
0000001E A8DE                    		MOV.L 0CH[R5], R6
00000020 A8D4                    		MOV.L 08H[R5], R4
00000022 A85B                    		MOV.L 04H[R5], R3
00000024 EC52                    		MOV.L [R5], R2
00000026 7100F0                  		ADD #0FFFFFFF0H, R0
00000029 E5500603                		MOV.L 18H[R5], 0CH[R0]
0000002D E70F02                  		MOV.L R15, 08H[R0]
00000030 E70E01                  		MOV.L R14, 04H[R0]
00000033 E306                    		MOV.L R6, [R0]
00000035 6211                    		ADD #01H, R1
00000037 5B11                    		MOVU.B R1, R1
00000039 05rrrrrr             A  		BSR _xio_open_generic
0000003D 710010                  		ADD #10H, R0
00000040 B089                    		MOVU.B 03H[R0], R1
00000042 6211                    		ADD #01H, R1
00000044 8089                    		MOV.B R1, 03H[R0]
00000046                         L12:	; bb43
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",71
00000046 B089                    		MOVU.B 03H[R0], R1
00000048 6101                    		CMP #00H, R1
0000004A 2Brr                    		BLE L11
0000004C                         L13:	; return
                                 ;      73 						(x_open_t)(cfgFile[i].x_open),
                                 ;      74 						(x_ctrl_t)(cfgFile[i].x_ctrl),
                                 ;      75 						(x_close_t)(cfgFile[i].x_close),
                                 ;      76 						(x_gets_t)(cfgFile[i].x_gets),
                                 ;      77 						(x_getc_t)(cfgFile[i].x_getc),
                                 ;      78 						(x_putc_t)(cfgFile[i].x_putc),
                                 ;      79 						(x_flow_t)(cfgFile[i].x_flow));
                                 ;      80 	}
                                 ;      81 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",81
0000004C 3F6602                  		RTSD #08H, R6-R6
0000004F                         _xio_open_command:
                                 		.STACK	_xio_open_command=28
                                 ;      82 
                                 ;      83 /*
                                 ;      84  *	xio_open_file() - open the program memory device to a specific string address
                                 ;      85  *
                                 ;      86  *	OK, so this is not really a UNIX open() except for its moral equivalent
                                 ;      87  *  Returns a pointer to the stdio FILE struct or -1 on error
                                 ;      88  */
                                 ;      89 FILE * xio_open_command(const uint8_t dev, const char *addr, const flags_t flags)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",89
0000004F 7100E8                  		ADD #0FFFFFFE8H, R0
00000052 8589                    		MOV.B R1, 17H[R0]
00000054 A102                    		MOV.L R2, 10H[R0]
00000056 918B                    		MOV.W R3, 0EH[R0]
00000058 754E88                  		MOV.L #00000088H, R14
                                 ;      90 {
                                 ;      91 	xioDev_t *d = (xioDev_t *)&ds[dev];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",91
0000005B 4D0E17                  		MUL 17H[R0].UB, R14
0000005E FB12rrrrrrrr            		MOV.L #_ds, R1
00000064 4BE1                    		ADD R14, R1
00000066 E301                    		MOV.L R1, [R0]
00000068                         L15:	; entry.split
                                 ;      92 	d->x = &command[dev - XIO_DEV_COMMAND_OFFSET];			// bind extended struct to device
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",92
00000068 B589                    		MOVU.B 17H[R0], R1
0000006A 6C41                    		SHLL #04H, R1
0000006C FBE2rrrrrrrr            		MOV.L #_command, R14
00000072 4BE1                    		ADD R14, R1
00000074 7111F0                  		ADD #0FFFFFFF0H, R1
00000077 EC02                    		MOV.L [R0], R2
00000079 A4A9                    		MOV.L R1, 4CH[R2]
0000007B                         L16:	; entry.split1
                                 ;      93 	xioCommand_t *dx = (xioCommand_t *)d->x;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",93
0000007B EC01                    		MOV.L [R0], R1
0000007D E5101301                		MOV.L 4CH[R1], 04H[R0]
00000081                         L17:	; entry.split2
                                 ;      94 	dx->filebase_P = addr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",94
00000081 A901                    		MOV.L 10H[R0], R1
00000083 A80A                    		MOV.L 04H[R0], R2
00000085 A0A9                    		MOV.L R1, 0CH[R2]
00000087                         L18:	; entry.split3
                                 ;      95 
                                 ;      96 	return(&d->file);								// return pointer to the FILE stream
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",96
00000087 EC01                    		MOV.L [R0], R1
00000089 6241                    		ADD #04H, R1
0000008B A081                    		MOV.L R1, 08H[R0]
0000008D                         L19:	; entry.split4
                                 ;      97 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",97
0000008D 6706                    		RTSD #18H
0000008F                         _xio_gets_command:
                                 		.STACK	_xio_gets_command=32
                                 ;      98 
                                 ;      99 int xio_gets_command(xioDev_t *d, char *buf, const int size)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",99
0000008F 7100E4                  		ADD #0FFFFFFE4H, R0
00000092 A181                    		MOV.L R1, 18H[R0]
00000094 A10A                    		MOV.L R2, 14H[R0]
00000096 A103                    		MOV.L R3, 10H[R0]
                                 ;     100 {
                                 ;     101 	xioCommand_t *dx = (xioCommand_t *)d->x;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",101
00000098 A981                    		MOV.L 18H[R0], R1
0000009A E5101301                		MOV.L 4CH[R1], 04H[R0]
0000009E                         L21:	; entry.split
                                 ;     102 	const char *buffin = dx->filebase_P ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",102
0000009E A809                    		MOV.L 04H[R0], R1
000000A0 E5100302                		MOV.L 0CH[R1], 08H[R0]
000000A4                         L22:	; entry.split1
                                 ;     103 
                                 ;     104 	if (buffin == NULL)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",104
000000A4 A881                    		MOV.L 08H[R0], R1
000000A6 6101                    		CMP #00H, R1
000000A8 21rr                    		BNE L28
000000AA                         L23:	; bb13
                                 ;     105 	{
                                 ;     106 		return(XIO_EAGAIN);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",106
000000AA F80602                  		MOV.L #00000002H, [R0]
000000AD 2Err                 B  		BRA L33
000000AF                         L24:	; bb19
                                 ;     107 	}
                                 ;     108 
                                 ;     109 	while ( *buffin != '\n')
                                 ;     110 	{
                                 ;     111 		*buf++ = *buffin++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",111
000000AF A882                    		MOV.L 08H[R0], R2
000000B1 C021                    		MOV.B [R2], [R1]
000000B3 A909                    		MOV.L 14H[R0], R1
000000B5 6211                    		ADD #01H, R1
000000B7 A109                    		MOV.L R1, 14H[R0]
000000B9 A881                    		MOV.L 08H[R0], R1
000000BB 6211                    		ADD #01H, R1
000000BD A081                    		MOV.L R1, 08H[R0]
000000BF                         L25:	; bb19.split
                                 ;     112 		if(*buffin == '\0')
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",112
000000BF A881                    		MOV.L 08H[R0], R1
000000C1 581E                    		MOVU.B [R1], R14
000000C3 610E                    		CMP #00H, R14
000000C5 21rr                    		BNE L28
000000C7                         L26:	; bb28
                                 ;     113 		{
                                 ;     114 			dx->filebase_P = NULL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",114
000000C7 A809                    		MOV.L 04H[R0], R1
000000C9 3E1300                  		MOV.L #00000000H, 0CH[R1]
000000CC                         L27:	; bb28.split
                                 ;     115 			return(XIO_OK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",115
000000CC F80600                  		MOV.L #00000000H, [R0]
000000CF 2Err                 B  		BRA L33
000000D1                         L28:	; bb39
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",109
000000D1 A881                    		MOV.L 08H[R0], R1
000000D3 581E                    		MOVU.B [R1], R14
000000D5 61AE                    		CMP #0AH, R14
000000D7 A909                    		MOV.L 14H[R0], R1
000000D9 21rr                    		BNE L24
000000DB                         L29:	; bb46
                                 ;     116 		}
                                 ;     117 	}
                                 ;     118 	*buf++ = '\n';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",118
000000DB F8140A                  		MOV.B #0AH, [R1]
000000DE A909                    		MOV.L 14H[R0], R1
000000E0 6211                    		ADD #01H, R1
000000E2 A109                    		MOV.L R1, 14H[R0]
000000E4                         L30:	; bb46.split
                                 ;     119 	dx->filebase_P = ++buffin;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",119
000000E4 A881                    		MOV.L 08H[R0], R1
000000E6 6211                    		ADD #01H, R1
000000E8 A80A                    		MOV.L 04H[R0], R2
000000EA A081                    		MOV.L R1, 08H[R0]
000000EC A0A9                    		MOV.L R1, 0CH[R2]
000000EE                         L31:	; bb46.split2
                                 ;     120 	*buf = '\0';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",120
000000EE A909                    		MOV.L 14H[R0], R1
000000F0 F81400                  		MOV.B #00H, [R1]
000000F3                         L32:	; bb46.split3
                                 ;     121 	return(XIO_OK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",121
000000F3 F80600                  		MOV.L #00000000H, [R0]
000000F6                         L33:	; bb57
000000F6 EC01                    		MOV.L [R0], R1
000000F8 A089                    		MOV.L R1, 0CH[R0]
                                 ;     122 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",122
000000FA 6707                    		RTSD #1CH
000000FC                         _xio_close_command:
                                 		.STACK	_xio_close_command=8
                                 ;     123 
                                 ;     124 void xio_close_command (xioDev_t *d)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",124
000000FC 6040                    		SUB #04H, R0
000000FE E301                    		MOV.L R1, [R0]
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",127
00000100 6701                    		RTSD #04H
00000102                         _xio_getc_command:
                                 		.STACK	_xio_getc_command=12
                                 ;     125 {
                                 ;     126 
                                 ;     127 }
                                 ;     128 
                                 ;     129 int xio_getc_command(FILE *stream)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",129
00000102 6080                    		SUB #08H, R0
00000104 A009                    		MOV.L R1, 04H[R0]
                                 ;     130 {
                                 ;     131 	return(0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",131
00000106 F80600                  		MOV.L #00000000H, [R0]
00000109 6601                    		MOV.L #00000000H, R1
0000010B                         L36:	; entry.split
                                 ;     132 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",132
0000010B 6702                    		RTSD #08H
0000010D                         _xio_putc_command:
                                 		.STACK	_xio_putc_command=16
                                 ;     133 
                                 ;     134 int xio_putc_command(const char c, FILE *stream)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",134
0000010D 60C0                    		SUB #0CH, R0
0000010F 8289                    		MOV.B R1, 0BH[R0]
00000111 A00A                    		MOV.L R2, 04H[R0]
                                 ;     135 {
                                 ;     136 	return(-1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",136
00000113 F806FF                  		MOV.L #0FFFFFFFFH, [R0]
00000116 FB16FF                  		MOV.L #0FFFFFFFFH, R1
00000119                         L38:	; entry.split
                                 ;     137 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\src\cnc\xio\xio_Command.c",137
00000119 6703                    		RTSD #0CH
                                 		.SECTION	C,ROMDATA,ALIGN=4
00000000                         __$cfgFile:
00000000 rrrrrrrr                		.lword	_xio_open_command
00000004 rrrrrrrr                		.lword	_xio_ctrl_generic
00000008 rrrrrrrr                		.lword	_xio_close_command
0000000C rrrrrrrr                		.lword	_xio_gets_command
00000010 rrrrrrrr                		.lword	_xio_getc_command
00000014 rrrrrrrr                		.lword	_xio_putc_command
00000018 rrrrrrrr                		.lword	_xio_fc_null
                                 		.SECTION	B,DATA,ALIGN=4
00000000                         _command:
00000000(00000010H)              		.blkl	4
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     00376   LINES

Section List

Attr         Size               Name
CODE     0000000283(0000011BH)  P
ROMDATA  0000000028(0000001CH)  C
DATA     0000000016(00000010H)  B

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx4DB7\$ccrx\xio_Command.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\xio_Command.lst
-output=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\src\cnc\xio\xio_Command.obj
