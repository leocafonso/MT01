* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Tue Feb 28 14:07:26 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  28-Feb-2017 14:07:25
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=r_usb_hstorage_driver_api.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01\r_lvd_rx,C:\Workspace\e2studio\git\MT01\r_lvd_rx\src,C:/Workspace/e2studio/git/MT01/r_tfa
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=r_usb_hstorage_driver_api.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=1,EASYMAK=0,MOBILE=0,FREE_RTOS_PP
                                 ;r_usb_hstorage_driver_api.c
                                 
                                 		.glb	_usb_ghmsc_DriveChk
                                 		.glb	_usb_ghmsc_MaxDrive
                                 		.glb	_usb_shmsc_StrgProcess
                                 		.glb	_usb_ghmsc_StrgCount
                                 		.glb	_usb_shmsc_command_result
                                 		.glb	_usb_shmsc_StrgDriveSearchSeq
                                 		.glb	_R_usb_hmsc_StrgTaskOpen
                                 		.glb	_R_usb_hmsc_TaskOpen
                                 		.glb	_R_usb_hmsc_StrgTaskClose
                                 		.glb	_R_usb_hmsc_TaskClose
                                 		.glb	_R_usb_hmsc_StrgDriveTask
                                 		.glb	_R_usb_cstd_RecMsg
                                 		.glb	_usb_hmsc_ClassWait
                                 		.glb	_usb_hmsc_StrgDriveSearchAct
                                 		.glb	_usb_hmsc_SmpDevReadPartitionAct
                                 		.glb	_usb_hmsc_strg_user_command_result
                                 		.glb	_R_tfat_disk_read_write_complete
                                 		.glb	_R_usb_cstd_RelBlk
                                 		.glb	_R_usb_hmsc_StrgDriveSearch
                                 		.glb	_R_usb_cstd_SndMsg
                                 		.glb	_R_usb_cstd_PgetBlk
                                 		.glb	_R_usb_hmsc_StrgDriveClose
                                 		.glb	_usb_hmsc_SmpFsiSectorInitialized
                                 		.glb	_R_usb_hmsc_GetDevSts
                                 		.glb	_R_usb_hmsc_StrgReadSector
                                 		.glb	_R_usb_hmsc_Read10
                                 		.glb	_R_usb_hmsc_StrgWriteSector
                                 		.glb	_R_usb_hmsc_Write10
                                 		.glb	_R_usb_hmsc_StrgUserCommand
                                 		.glb	_R_usb_hmsc_TestUnit
                                 		.glb	_R_usb_hmsc_RequestSense
                                 		.glb	_R_usb_hmsc_Inquiry
                                 		.glb	_R_usb_hmsc_ModeSelect6
                                 		.glb	_R_usb_hmsc_PreventAllow
                                 		.glb	_R_usb_hmsc_ReadFormatCapacity
                                 		.glb	_R_usb_hmsc_ReadCapacity
                                 		.glb	_R_usb_hmsc_ModeSense10
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         _R_usb_hmsc_StrgTaskOpen:
                                 		.STACK	_R_usb_hmsc_StrgTaskOpen=12
                                 ;       1 /***********************************************************************************************************************
                                 ;       2 * DISCLAIMER
                                 ;       3 * This software is supplied by Renesas Electronics Corporation and is only intended for use with Renesas products. No
                                 ;       4 * other uses are authorized. This software is owned by Renesas Electronics Corporation and is protected under all
                                 ;       5 * applicable laws, including copyright laws.
                                 ;       6 * THIS SOFTWARE IS PROVIDED "AS IS" AND RENESAS MAKES NO WARRANTIES REGARDING
                                 ;       7 * THIS SOFTWARE, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY,
                                 ;       8 * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. ALL SUCH WARRANTIES ARE EXPRESSLY DISCLAIMED. TO THE MAXIMUM
                                 ;       9 * EXTENT PERMITTED NOT PROHIBITED BY LAW, NEITHER RENESAS ELECTRONICS CORPORATION NOR ANY OF ITS AFFILIATED COMPANIES
                                 ;      10 * SHALL BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES FOR ANY REASON RELATED TO THIS
                                 ;      11 * SOFTWARE, EVEN IF RENESAS OR ITS AFFILIATES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
                                 ;      12 * Renesas reserves the right, without notice, to make changes to this software and to discontinue the availability of
                                 ;      13 * this software. By using this software, you agree to the additional terms and conditions found by accessing the
                                 ;      14 * following link:
                                 ;      15 * http://www.renesas.com/disclaimer
                                 ;      16 *
                                 ;      17 * Copyright (C) 2014(2015) Renesas Electronics Corporation. All rights reserved.
                                 ;      18 ***********************************************************************************************************************/
                                 ;      19 /***********************************************************************************************************************
                                 ;      20 * File Name    : r_usb_hstorage_driver.c
                                 ;      21 * Description  : USB sample data declaration
                                 ;      22 ***********************************************************************************************************************/
                                 ;      23 /**********************************************************************************************************************
                                 ;      24 * History : DD.MM.YYYY Version Description
                                 ;      25 *         : 04.01.2014 1.00 First Release
                                 ;      26 *         : 30.01.2015 1.01    Support Multi device.
                                 ;      27 ***********************************************************************************************************************/
                                 ;      28 
                                 ;      29 /******************************************************************************
                                 ;      30 Includes   <System Includes> , "Project Includes"
                                 ;      31 ******************************************************************************/
                                 ;      32 #ifdef FREE_RTOS_PP
                                 ;      33 #include "FreeRTOS.h"
                                 ;      34 #include "task.h"
                                 ;      35 #include "queue.h"
                                 ;      36 #include "config_kernel.h"
                                 ;      37 #endif
                                 ;      38 
                                 ;      39 
                                 ;      40 #include "r_usb_basic_if.h"
                                 ;      41 #include "r_usb_hatapi_define.h"    /* Peripheral ATAPI Device extern */
                                 ;      42 #include "r_usb_hmsc_define.h"      /* Host Mass Storage Class Driver */
                                 ;      43 #include "r_usb_hmsc_extern.h"      /* MSC global definition */
                                 ;      44 #include "r_usb_api.h"
                                 ;      45 #include "r_usb_hmsc_config.h"
                                 ;      46 #include "r_usb_hmsc_if.h"
                                 ;      47 
                                 ;      48 /******************************************************************************
                                 ;      49 Renesas Abstracted Peripheral Driver functions
                                 ;      50 ******************************************************************************/
                                 ;      51 /* Call-back function for read/write completion */
                                 ;      52 extern void R_tfat_disk_read_write_complete(USB_CLSINFO_t *mess);
                                 ;      53 
                                 ;      54 /******************************************************************************
                                 ;      55 Function Name   : R_usb_hmsc_StrgTaskOpen
                                 ;      56 Description     : Storage task open
                                 ;      57 Arguments       : none
                                 ;      58 Return value    : none
                                 ;      59 ******************************************************************************/
                                 ;      60 void R_usb_hmsc_StrgTaskOpen(USB_UTR_t *ptr)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",60
00000000 6080                    		SUB #08H, R0
00000002 A009                    		MOV.L R1, 04H[R0]
00000004 6602                    		MOV.L #00000000H, R2
                                 ;      61 {
                                 ;      62     uint16_t        i;
                                 ;      63 
                                 ;      64     USB_PRINTF0("*** Install Host MS device driver ***\n");
                                 ;      65     R_usb_hmsc_TaskOpen( ptr, 0, 0 );
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",65
00000006 EF23                    		MOV.L R2, R3
00000008 05rrrrrr             A  		BSR _R_usb_hmsc_TaskOpen
0000000C                         L11:	; entry.split
                                 ;      66 
                                 ;      67     for( i = 0; i < (USB_MAXDRIVE + 1); i++ )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",67
0000000C 3D0100                  		MOV.W #0000H, 02H[R0]
0000000F 2Err                 B  		BRA L18
00000011                         L12:	; bb
                                 ;      68     {
                                 ;      69         usb_ghmsc_DriveChk[i][0] = USB_NO;  /* Yes/No */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",69
00000011 B809                    		MOVU.W 02H[R0], R1
00000013 63C1                    		MUL #0CH, R1
00000015 FBE2rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R14
0000001B 4B1E                    		ADD R1, R14
0000001D F8E500                  		MOV.W #0000H, [R14]
00000020                         L13:	; bb.split
                                 ;      70         usb_ghmsc_DriveChk[i][1] = 0;       /* Unit Number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",70
00000020 B809                    		MOVU.W 02H[R0], R1
00000022 63C1                    		MUL #0CH, R1
00000024 FB22rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R2
0000002A 4B12                    		ADD R1, R2
0000002C 3D2100                  		MOV.W #0000H, 02H[R2]
0000002F                         L14:	; bb.split1
                                 ;      71         usb_ghmsc_DriveChk[i][2] = 0;       /* Partition Number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",71
0000002F B809                    		MOVU.W 02H[R0], R1
00000031 63C1                    		MUL #0CH, R1
00000033 FB22rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R2
00000039 4B12                    		ADD R1, R2
0000003B 3D2200                  		MOV.W #0000H, 04H[R2]
0000003E                         L15:	; bb.split2
                                 ;      72         usb_ghmsc_DriveChk[i][3] = 0;       /* Device address */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",72
0000003E B809                    		MOVU.W 02H[R0], R1
00000040 63C1                    		MUL #0CH, R1
00000042 FB22rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R2
00000048 4B12                    		ADD R1, R2
0000004A 3D2300                  		MOV.W #0000H, 06H[R2]
0000004D                         L16:	; bb.split3
                                 ;      73         usb_ghmsc_DriveChk[i][4] = 0;       /* Device number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",73
0000004D B809                    		MOVU.W 02H[R0], R1
0000004F 63C1                    		MUL #0CH, R1
00000051 FB22rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R2
00000057 4B12                    		ADD R1, R2
00000059 3D2400                  		MOV.W #0000H, 08H[R2]
0000005C                         L17:	; bb.split4
                                 ;      74         usb_ghmsc_DriveChk[i][5] = 0;       /* USB IP number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",74
0000005C B809                    		MOVU.W 02H[R0], R1
0000005E 63C1                    		MUL #0CH, R1
00000060 FB22rrrrrrrr            		MOV.L #_usb_ghmsc_DriveChk, R2
00000066 4B12                    		ADD R1, R2
00000068 3D2500                  		MOV.W #0000H, 0AH[R2]
0000006B 9809                    		MOV.W 02H[R0], R1
0000006D 6211                    		ADD #01H, R1
0000006F 9009                    		MOV.W R1, 02H[R0]
00000071                         L18:	; bb36
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",67
00000071 B809                    		MOVU.W 02H[R0], R1
00000073 755111                  		CMP #11H, R1
00000076 29rr                    		BLT L12
00000078                         L19:	; bb41
                                 ;      75     }
                                 ;      76 
                                 ;      77     usb_ghmsc_MaxDrive = USB_DRIVE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",77
00000078 FBE2rrrrrrrr            		MOV.L #_usb_ghmsc_MaxDrive, R14
0000007E F8E500                  		MOV.W #0000H, [R14]
00000081                         L20:	; bb41.split
                                 ;      78     usb_ghmsc_StrgCount = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",78
00000081 FBE2rrrrrrrr            		MOV.L #_usb_ghmsc_StrgCount, R14
00000087 F8E500                  		MOV.W #0000H, [R14]
0000008A 6702                    		RTSD #08H
0000008C                         _R_usb_hmsc_StrgTaskClose:
                                 		.STACK	_R_usb_hmsc_StrgTaskClose=8
                                 ;      79 }   /* eof R_usb_hmsc_StrgTaskOpen() */
                                 ;      80 
                                 ;      81 /******************************************************************************
                                 ;      82 Function Name   : R_usb_hmsc_StrgTaskClose
                                 ;      83 Description     : Storage task close
                                 ;      84 Arguments       : none
                                 ;      85 Return value    : none
                                 ;      86 ******************************************************************************/
                                 ;      87 void R_usb_hmsc_StrgTaskClose(USB_UTR_t *ptr)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",87
0000008C 6040                    		SUB #04H, R0
0000008E E301                    		MOV.L R1, [R0]
                                 ;      88 {
                                 ;      89     /* Task close */
                                 ;      90     R_usb_hmsc_TaskClose(ptr);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",90
00000090 05rrrrrr             A  		BSR _R_usb_hmsc_TaskClose
00000094 6701                    		RTSD #04H
00000096                         _R_usb_hmsc_StrgDriveTask:
                                 		.STACK	_R_usb_hmsc_StrgDriveTask=12
                                 ;      91     USB_PRINTF0("*** Release Host MS device driver ***\n");
                                 ;      92 }   /* eof R_usb_hmsc_StrgTaskClose() */
                                 ;      93 
                                 ;      94 /******************************************************************************
                                 ;      95 Function Name   : R_usb_hmsc_StrgDriveTask
                                 ;      96 Description     : Storage drive task
                                 ;      97 Arguments       : none
                                 ;      98 Return value    : none
                                 ;      99 ******************************************************************************/
                                 ;     100 void R_usb_hmsc_StrgDriveTask(void)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",100
00000096 6080                    		SUB #08H, R0
00000098 2Err                 B  		BRA L34
0000009A                         L23:	; bb10
                                 ;     101 {
                                 ;     102     USB_UTR_t       *mess;
                                 ;     103     USB_ER_t        err;                    /* Error code */
                                 ;     104 #ifdef FREE_RTOS_PP
                                 ;     105     for( ;; )
                                 ;     106     {
                                 ;     107 #endif
                                 ;     108     /* receive message */
                                 ;     109     err = R_USB_TRCV_MSG( USB_HSTRG_MBX, (USB_MSG_t**)&mess, (uint16_t)0 );
                                 ;     110     if( err != USB_E_OK )
                                 ;     111     {
                                 ;     112 #ifdef FREE_RTOS_PP
                                 ;     113         continue;
                                 ;     114 #else
                                 ;     115         return;
                                 ;     116 #endif
                                 ;     117     }
                                 ;     118 
                                 ;     119     switch( mess->msginfo )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",119
0000009A EC01                    		MOV.L [R0], R1
0000009C B891                    		MOVU.W 04H[R1], R1
0000009E 6101                    		CMP #00H, R1
000000A0 20rr                    		BEQ L32
000000A2                         L24:	; bb10
000000A2 76010506                		CMP #0605H, R1
000000A6 20rr                    		BEQ L31
000000A8                         L25:	; bb10
000000A8 76010106                		CMP #0601H, R1
000000AC 20rr                    		BEQ L29
000000AE                         L26:	; bb10
000000AE 76010306                		CMP #0603H, R1
000000B2 20rr                    		BEQ L30
000000B4                         L27:	; bb10
000000B4 76010402                		CMP #0204H, R1
000000B8 21rr                    		BNE L33
000000BA                         L28:	; bb16
                                 ;     120     {
                                 ;     121     case USB_MSG_CLS_INIT:
                                 ;     122         break;
                                 ;     123     /* enumeration waiting of other device */
                                 ;     124     case USB_MSG_CLS_WAIT:
                                 ;     125         usb_hmsc_ClassWait(USB_HSTRG_MBX, mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",125
000000BA EC02                    		MOV.L [R0], R2
000000BC 6651                    		MOV.L #00000005H, R1
000000BE 05rrrrrr             A  		BSR _usb_hmsc_ClassWait
000000C2 2Err                 B  		BRA L33
000000C4                         L29:	; bb18
                                 ;     126         break;
                                 ;     127     case USB_MSG_HMSC_STRG_DRIVE_SEARCH:
                                 ;     128         /* Drive search */
                                 ;     129         usb_hmsc_StrgDriveSearchAct((USB_CLSINFO_t *)mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",129
000000C4 EC01                    		MOV.L [R0], R1
000000C6 05rrrrrr             A  		BSR _usb_hmsc_StrgDriveSearchAct
000000CA 2Err                 B  		BRA L33
000000CC                         L30:	; bb20
                                 ;     130         break;
                                 ;     131     case USB_MSG_HMSC_DEV_READ_PARTITION:
                                 ;     132         /* Read partition */
                                 ;     133         usb_hmsc_SmpDevReadPartitionAct((USB_CLSINFO_t *)mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",133
000000CC EC01                    		MOV.L [R0], R1
000000CE 05rrrrrr             A  		BSR _usb_hmsc_SmpDevReadPartitionAct
000000D2 2Err                 B  		BRA L33
000000D4                         L31:	; bb23
                                 ;     134         break;
                                 ;     135     case USB_MSG_HMSC_STRG_USER_COMMAND:
                                 ;     136         /* R_usb_hmsc_StrgUserCommand Result */
                                 ;     137         usb_hmsc_strg_user_command_result((USB_CLSINFO_t *)mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",137
000000D4 EC01                    		MOV.L [R0], R1
000000D6 05rrrrrr             A  		BSR _usb_hmsc_strg_user_command_result
000000DA 08                   S  		BRA L33
000000DB                         L32:	; bb25
                                 ;     138         break;
                                 ;     139 #ifdef FREE_RTOS_PP
                                 ;     140     case USB_NONE:
                                 ;     141         R_tfat_disk_read_write_complete((USB_CLSINFO_t *)mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",141
000000DB EC01                    		MOV.L [R0], R1
000000DD 05rrrrrr             A  		BSR _R_tfat_disk_read_write_complete
000000E1                         L33:	; bb28
                                 ;     142         break;
                                 ;     143 #endif
                                 ;     144     default:
                                 ;     145         break;
                                 ;     146     }
                                 ;     147 
                                 ;     148     err = R_USB_REL_BLK(USB_HSTRG_MPL,(USB_MH_t)mess);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",148
000000E1 EC02                    		MOV.L [R0], R2
000000E3 6651                    		MOV.L #00000005H, R1
000000E5 05rrrrrr             A  		BSR _R_usb_cstd_RelBlk
000000E9 A009                    		MOV.L R1, 04H[R0]
000000EB                         L34:	; bb41.split
000000EB 6603                    		MOV.L #00000000H, R3
000000ED EF02                    		MOV.L R0, R2
000000EF 6651                    		MOV.L #00000005H, R1
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",109
000000F1 05rrrrrr             A  		BSR _R_usb_cstd_RecMsg
000000F5 A009                    		MOV.L R1, 04H[R0]
000000F7                         L35:	; bb41.split1
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",110
000000F7 A809                    		MOV.L 04H[R0], R1
000000F9 6101                    		CMP #00H, R1
000000FB 21rr                    		BNE L34
000000FD 2Err                 B  		BRA L23
000000FF                         _R_usb_hmsc_StrgDriveSearch:
                                 		.STACK	_R_usb_hmsc_StrgDriveSearch=32
                                 ;     149 
                                 ;     150     if( err != USB_E_OK )
                                 ;     151     {
                                 ;     152         USB_PRINTF0("### USB Strg Task rel_blk error\n");
                                 ;     153     }
                                 ;     154 #ifdef FREE_RTOS_PP
                                 ;     155     }
                                 ;     156 #endif
                                 ;     157 }   /* eof R_usb_hmsc_StrgDriveTask() */
                                 ;     158 
                                 ;     159 
                                 ;     160 /******************************************************************************
                                 ;     161 Function Name   : R_usb_hmsc_StrgDriveSearch
                                 ;     162 Description     : Searches drive SndMsg
                                 ;     163 Arguments       : uint16_t addr        : Address
                                 ;     164 Return value    : uint16_t             : Status
                                 ;     165 ******************************************************************************/
                                 ;     166 uint16_t R_usb_hmsc_StrgDriveSearch(USB_UTR_t *ptr, uint16_t addr, USB_CB_t complete)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",166
000000FF 7100E4                  		ADD #0FFFFFFE4H, R0
00000102 A181                    		MOV.L R1, 18H[R0]
00000104 928A                    		MOV.W R2, 16H[R0]
00000106 A103                    		MOV.L R3, 10H[R0]
                                 ;     167 {
                                 ;     168     USB_MH_t            p_blf;
                                 ;     169     USB_ER_t            err;
                                 ;     170     USB_CLSINFO_t       *cp;
                                 ;     171 
                                 ;     172     usb_shmsc_StrgDriveSearchSeq[ptr->ip] = USB_SEQ_0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",172
00000108 A981                    		MOV.L 18H[R0], R1
0000010A B991                    		MOVU.W 0CH[R1], R1
0000010C FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgDriveSearchSeq, R14
00000112 660F                    		MOV.L #00000000H, R15
00000114 FE11EF                  		MOV.W R15, [R1,R14]
00000117                         L37:	; entry.split
00000117 EF02                    		MOV.L R0, R2
00000119 6651                    		MOV.L #00000005H, R1
                                 ;     173 
                                 ;     174     /* Get mem pool blk */
                                 ;     175     if( R_USB_PGET_BLK(USB_HSTRG_MPL,&p_blf) == USB_E_OK )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",175
0000011B 05rrrrrr             A  		BSR _R_usb_cstd_PgetBlk
0000011F 6101                    		CMP #00H, R1
00000121 21rr                    		BNE L47
00000123                         L38:	; bb12
                                 ;     176     {
                                 ;     177         cp = (USB_CLSINFO_t*)p_blf;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",177
00000123 E40002                  		MOV.L [R0], 08H[R0]
00000126                         L39:	; bb12.split
                                 ;     178         cp->msginfo = USB_MSG_HMSC_STRG_DRIVE_SEARCH;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",178
00000126 A881                    		MOV.L 08H[R0], R1
00000128 F919020106              		MOV.W #0601H, 04H[R1]
0000012D                         L40:	; bb12.split1
                                 ;     179         cp->keyword = addr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",179
0000012D 9A89                    		MOV.W 16H[R0], R1
0000012F A882                    		MOV.L 08H[R0], R2
00000131 90A9                    		MOV.W R1, 06H[R2]
00000133                         L41:	; bb12.split2
                                 ;     180 
                                 ;     181         cp->ip      = ptr->ip;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",181
00000133 A981                    		MOV.L 18H[R0], R1
00000135 A882                    		MOV.L 08H[R0], R2
00000137 D5120606                		MOV.W 0CH[R1], 0CH[R2]
0000013B                         L42:	; bb12.split3
                                 ;     182         cp->ipp     = ptr->ipp;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",182
0000013B A981                    		MOV.L 18H[R0], R1
0000013D A882                    		MOV.L 08H[R0], R2
0000013F E5120202                		MOV.L 08H[R1], 08H[R2]
00000143                         L43:	; bb12.split4
                                 ;     183         cp->complete = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",183
00000143 A901                    		MOV.L 10H[R0], R1
00000145 A882                    		MOV.L 08H[R0], R2
00000147 A121                    		MOV.L R1, 10H[R2]
00000149                         L44:	; bb12.split5
                                 ;     184 
                                 ;     185         /* Send message */
                                 ;     186         err = R_USB_SND_MSG( USB_HSTRG_MBX, (USB_MSG_t*)p_blf );
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",186
00000149 EC02                    		MOV.L [R0], R2
0000014B 6651                    		MOV.L #00000005H, R1
0000014D 05rrrrrr             A  		BSR _R_usb_cstd_SndMsg
00000151 A009                    		MOV.L R1, 04H[R0]
00000153                         L45:	; bb12.split6
                                 ;     187         if( err != USB_E_OK )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",187
00000153 A809                    		MOV.L 04H[R0], R1
00000155 6101                    		CMP #00H, R1
00000157 20rr                    		BEQ L47
00000159                         L46:	; bb39
                                 ;     188         {
                                 ;     189             err = R_USB_REL_BLK(USB_HSTRG_MPL,(USB_MH_t)p_blf);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",189
00000159 EC02                    		MOV.L [R0], R2
0000015B 6651                    		MOV.L #00000005H, R1
0000015D 05rrrrrr             A  		BSR _R_usb_cstd_RelBlk
00000161 A009                    		MOV.L R1, 04H[R0]
00000163                         L47:	; bb53
                                 ;     190             USB_PRINTF0("### StrgDriveSearch function snd_msg error\n");
                                 ;     191         }
                                 ;     192     }
                                 ;     193     else
                                 ;     194     {
                                 ;     195         USB_PRINTF0("### StrgDriveSearch function pget_blk error\n");
                                 ;     196     }
                                 ;     197     return (err);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",197
00000163 A809                    		MOV.L 04H[R0], R1
00000165 9189                    		MOV.W R1, 0EH[R0]
00000167 9989                    		MOV.W 0EH[R0], R1
00000169                         L48:	; bb53.split
                                 ;     198 }   /* eof R_usb_hmsc_StrgDriveSearch() */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",198
00000169 5F11                    		MOVU.W R1, R1
0000016B 6707                    		RTSD #1CH
0000016D                         _R_usb_hmsc_StrgDriveClose:
                                 		.STACK	_R_usb_hmsc_StrgDriveClose=16
                                 ;     199 
                                 ;     200 
                                 ;     201 /******************************************************************************
                                 ;     202 Function Name   : R_usb_hmsc_StrgDriveClose
                                 ;     203 Description     : Releases drive
                                 ;     204 Arguments       : uint16_t side    : Side
                                 ;     205 Return value    : uint16_t         : [DONE/ERROR]
                                 ;     206 ******************************************************************************/
                                 ;     207 uint16_t R_usb_hmsc_StrgDriveClose( USB_UTR_t *ptr, uint16_t side )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",207
0000016D 60C0                    		SUB #0CH, R0
0000016F A081                    		MOV.L R1, 08H[R0]
00000171 908A                    		MOV.W R2, 06H[R0]
00000173                         L50:	; entry.split
                                 ;     208 {
                                 ;     209     if( (USB_MEDIADRIVE != USB_DRIVE) && (side == USB_MEDIADRIVE) )
                                 ;     210     {   /* Memory device */
                                 ;     211         usb_hmsc_SmpFsiSectorInitialized(side, (uint32_t)0, (uint16_t)0);
                                 ;     212         return (USB_DONE);
                                 ;     213     }
                                 ;     214     else
                                 ;     215     {   /* USB device */
                                 ;     216         /* Device Status */
                                 ;     217         if( R_usb_hmsc_GetDevSts( side ) != USB_HMSC_DEV_ATT )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",217
00000173 B889                    		MOVU.W 06H[R0], R1
00000175 05rrrrrr             A  		BSR _R_usb_hmsc_GetDevSts
00000179 6111                    		CMP #01H, R1
0000017B 10                   S  		BEQ L52
0000017C                         L51:	; bb8
                                 ;     218         {
                                 ;     219             USB_PRINTF1("### device det(R_usb_hmsc_StrgDriveClose:side=%d)\n", side);
                                 ;     220             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",220
0000017C F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000181 2Err                 B  		BRA L54
00000183                         L52:	; bb15
                                 ;     221         }
                                 ;     222         usb_hmsc_SmpFsiSectorInitialized(side, (uint32_t)0, (uint16_t)0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",222
00000183 B889                    		MOVU.W 06H[R0], R1
00000185 6602                    		MOV.L #00000000H, R2
00000187 EF23                    		MOV.L R2, R3
00000189 05rrrrrr             A  		BSR _usb_hmsc_SmpFsiSectorInitialized
0000018D                         L53:	; bb15.split
                                 ;     223         return (USB_DONE);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",223
0000018D 3D0100                  		MOV.W #0000H, 02H[R0]
00000190                         L54:	; bb19
00000190 D5000102                		MOV.W 02H[R0], 04H[R0]
                                 ;     224     }
                                 ;     225 }   /* eof R_usb_hmsc_StrgDriveClose() */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",225
00000194 B881                    		MOVU.W 04H[R0], R1
00000196 6703                    		RTSD #0CH
00000198                         _R_usb_hmsc_StrgReadSector:
                                 		.STACK	_R_usb_hmsc_StrgReadSector=44
                                 ;     226 
                                 ;     227 /******************************************************************************
                                 ;     228 Function Name   : R_usb_hmsc_StrgReadSector
                                 ;     229 Description     : Releases drive
                                 ;     230 Arguments       : uint16_t side        : Side
                                 ;     231                 : uint8_t  *buff       : Buffer address
                                 ;     232                 : uint32_t secno       : Sector number
                                 ;     233                 : uint16_t seccnt      : Sector count
                                 ;     234                 : uint32_t trans_byte  : Trans byte
                                 ;     235 Return value    : uint16_t             : [DONE/ERROR]
                                 ;     236 ******************************************************************************/
                                 ;     237 uint16_t R_usb_hmsc_StrgReadSector(USB_UTR_t *ptr, uint16_t side, uint8_t *buff
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",237
00000198 7100E0                  		ADD #0FFFFFFE0H, R0
0000019B A189                    		MOV.L R1, 1CH[R0]
0000019D 930A                    		MOV.W R2, 1AH[R0]
0000019F A10B                    		MOV.L R3, 14H[R0]
000001A1 A104                    		MOV.L R4, 10H[R0]
000001A3 D5001207                		MOV.W 24H[R0], 0EH[R0]
000001A7 E5000A02                		MOV.L 28H[R0], 08H[R0]
                                 ;     238     , uint32_t secno, uint16_t seccnt, uint32_t trans_byte )
                                 ;     239 {
                                 ;     240     uint16_t    result;
                                 ;     241 
                                 ;     242     /* Device Status */
                                 ;     243     if( R_usb_hmsc_GetDevSts( side ) != USB_HMSC_DEV_ATT )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",243
000001AB BB09                    		MOVU.W 1AH[R0], R1
000001AD 05rrrrrr             A  		BSR _R_usb_hmsc_GetDevSts
000001B1 6111                    		CMP #01H, R1
000001B3 10                   S  		BEQ L57
000001B4                         L56:	; bb8
                                 ;     244     {
                                 ;     245         USB_PRINTF1("### device det(R_usb_hmsc_StrgReadSector:side=%d)\n", side);
                                 ;     246         return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",246
000001B4 F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
000001B9 2Err                 B  		BRA L59
000001BB                         L57:	; bb15
                                 ;     247     }
                                 ;     248     result = R_usb_hmsc_Read10(ptr, side, buff, secno, seccnt, trans_byte);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",248
000001BB A885                    		MOV.L 08H[R0], R5
000001BD DD0F07                  		MOV.W 0EH[R0], R15
000001C0 A904                    		MOV.L 10H[R0], R4
000001C2 A90B                    		MOV.L 14H[R0], R3
000001C4 BB0A                    		MOVU.W 1AH[R0], R2
000001C6 A989                    		MOV.L 1CH[R0], R1
000001C8 6080                    		SUB #08H, R0
000001CA A00D                    		MOV.L R5, 04H[R0]
000001CC D30F                    		MOV.W R15, [R0]
000001CE 05rrrrrr             A  		BSR _R_usb_hmsc_Read10
000001D2 6280                    		ADD #08H, R0
000001D4 9081                    		MOV.W R1, 04H[R0]
000001D6                         L58:	; bb15.split
                                 ;     249 
                                 ;     250     return (result);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",250
000001D6 D5000201                		MOV.W 04H[R0], 02H[R0]
000001DA                         L59:	; bb25
000001DA D5000103                		MOV.W 02H[R0], 06H[R0]
                                 ;     251 }   /* eof R_usb_hmsc_StrgReadSector() */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",251
000001DE B889                    		MOVU.W 06H[R0], R1
000001E0 6708                    		RTSD #20H
000001E2                         _R_usb_hmsc_StrgWriteSector:
                                 		.STACK	_R_usb_hmsc_StrgWriteSector=44
                                 ;     252 
                                 ;     253 /******************************************************************************
                                 ;     254 Function Name   : R_usb_hmsc_StrgWriteSector
                                 ;     255 Description     : Writes sector information
                                 ;     256 Arguments       : uint16_t side        : Side
                                 ;     257                 : uint8_t  *buff       : Buffer address
                                 ;     258                 : uint32_t secno       : Sector number
                                 ;     259                 : uint16_t seccnt      : Sector count
                                 ;     260                 : uint32_t trans_byte  : Trans byte
                                 ;     261 Return value    : uint16_t             : [DONE/ERROR]
                                 ;     262 ******************************************************************************/
                                 ;     263 uint16_t R_usb_hmsc_StrgWriteSector(USB_UTR_t *ptr, uint16_t side, uint8_t *buff
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",263
000001E2 7100E0                  		ADD #0FFFFFFE0H, R0
000001E5 A189                    		MOV.L R1, 1CH[R0]
000001E7 930A                    		MOV.W R2, 1AH[R0]
000001E9 A10B                    		MOV.L R3, 14H[R0]
000001EB A104                    		MOV.L R4, 10H[R0]
000001ED D5001207                		MOV.W 24H[R0], 0EH[R0]
000001F1 E5000A02                		MOV.L 28H[R0], 08H[R0]
                                 ;     264     , uint32_t secno, uint16_t seccnt, uint32_t trans_byte )
                                 ;     265 {
                                 ;     266     uint16_t    result;
                                 ;     267 
                                 ;     268     /* Device Status */
                                 ;     269     if( R_usb_hmsc_GetDevSts( side ) != USB_HMSC_DEV_ATT )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",269
000001F5 BB09                    		MOVU.W 1AH[R0], R1
000001F7 05rrrrrr             A  		BSR _R_usb_hmsc_GetDevSts
000001FB 6111                    		CMP #01H, R1
000001FD 10                   S  		BEQ L62
000001FE                         L61:	; bb8
                                 ;     270     {
                                 ;     271         USB_PRINTF1("### device det(R_usb_hmsc_StrgWriteSector:side=%d)\n", side);
                                 ;     272         return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",272
000001FE F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000203 2Err                 B  		BRA L64
00000205                         L62:	; bb15
                                 ;     273     }
                                 ;     274     result = R_usb_hmsc_Write10(ptr, side, buff, secno, seccnt, trans_byte);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",274
00000205 A885                    		MOV.L 08H[R0], R5
00000207 DD0F07                  		MOV.W 0EH[R0], R15
0000020A A904                    		MOV.L 10H[R0], R4
0000020C A90B                    		MOV.L 14H[R0], R3
0000020E BB0A                    		MOVU.W 1AH[R0], R2
00000210 A989                    		MOV.L 1CH[R0], R1
00000212 6080                    		SUB #08H, R0
00000214 A00D                    		MOV.L R5, 04H[R0]
00000216 D30F                    		MOV.W R15, [R0]
00000218 05rrrrrr             A  		BSR _R_usb_hmsc_Write10
0000021C 6280                    		ADD #08H, R0
0000021E 9081                    		MOV.W R1, 04H[R0]
00000220                         L63:	; bb15.split
                                 ;     275     return(result);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",275
00000220 D5000201                		MOV.W 04H[R0], 02H[R0]
00000224                         L64:	; bb25
00000224 D5000103                		MOV.W 02H[R0], 06H[R0]
                                 ;     276 }   /* eof R_usb_hmsc_StrgWriteSector() */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",276
00000228 B889                    		MOVU.W 06H[R0], R1
0000022A 6708                    		RTSD #20H
0000022C                         _R_usb_hmsc_StrgUserCommand:
                                 		.STACK	_R_usb_hmsc_StrgUserCommand=28
                                 ;     277 
                                 ;     278 /******************************************************************************
                                 ;     279 Function Name   : R_usb_hmsc_StrgUserCommand
                                 ;     280 Description     : USB Mass Storage Command
                                 ;     281 Arguments       : uint16_t side        : Side
                                 ;     282                 : uint16_t command     : Command
                                 ;     283                 : uint8_t  *buff       : Buffer address
                                 ;     284                 : USB_CB_t complete    : callback info
                                 ;     285 Return value    : uint16_t             : [DONE/ERROR]
                                 ;     286 ******************************************************************************/
                                 ;     287 uint16_t R_usb_hmsc_StrgUserCommand(USB_UTR_t *ptr, uint16_t side, uint16_t command
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",287
0000022C 7100E8                  		ADD #0FFFFFFE8H, R0
0000022F A109                    		MOV.L R1, 14H[R0]
00000231 920A                    		MOV.W R2, 12H[R0]
00000233 9203                    		MOV.W R3, 10H[R0]
00000235 A08C                    		MOV.L R4, 0CH[R0]
00000237 E5000702                		MOV.L 1CH[R0], 08H[R0]
0000023B                         L66:	; entry.split
                                 ;     288     , uint8_t *buff, USB_CB_t complete)
                                 ;     289 {
                                 ;     290     uint16_t    result;
                                 ;     291 
                                 ;     292     if( (USB_MEDIADRIVE != USB_DRIVE) && (side == USB_MEDIADRIVE) )
                                 ;     293     {   /* Memory device */
                                 ;     294         USB_PRINTF1("### not support command(StrgUserCommand:side=%d)\n", side);
                                 ;     295         return (USB_ERROR);
                                 ;     296     }
                                 ;     297     else
                                 ;     298     {   /* USB device */
                                 ;     299         /* Device Status */
                                 ;     300         if( R_usb_hmsc_GetDevSts( side ) != USB_HMSC_DEV_ATT )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",300
0000023B BA09                    		MOVU.W 12H[R0], R1
0000023D 05rrrrrr             A  		BSR _R_usb_hmsc_GetDevSts
00000241 6111                    		CMP #01H, R1
00000243 10                   S  		BEQ L68
00000244                         L67:	; bb11
                                 ;     301         {
                                 ;     302             USB_PRINTF1("### device det(StrgUserCommand:side=%d)\n", side);
                                 ;     303             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",303
00000244 F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000249 38rrrr               W  		BRA L118
0000024C                         L68:	; bb18
                                 ;     304         }
                                 ;     305 
                                 ;     306         switch( command )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",306
0000024C BA01                    		MOVU.W 10H[R0], R1
0000024E 75515A                  		CMP #5AH, R1
00000251 3Arrrr               W  		BEQ L111
00000254                         L69:	; bb18
00000254 6131                    		CMP #03H, R1
00000256 3Arrrr               W  		BEQ L87
00000259                         L70:	; bb18
00000259 6141                    		CMP #04H, R1
0000025B 3Arrrr               W  		BEQ L90
0000025E                         L71:	; bb18
0000025E 755112                  		CMP #12H, R1
00000261 3Arrrr               W  		BEQ L91
00000264                         L72:	; bb18
00000264 755115                  		CMP #15H, R1
00000267 3Arrrr               W  		BEQ L94
0000026A                         L73:	; bb18
0000026A 75511A                  		CMP #1AH, R1
0000026D 3Arrrr               W  		BEQ L97
00000270                         L74:	; bb18
00000270 75511B                  		CMP #1BH, R1
00000273 3Arrrr               W  		BEQ L98
00000276                         L75:	; bb18
00000276 75511E                  		CMP #1EH, R1
00000279 3Arrrr               W  		BEQ L99
0000027C                         L76:	; bb18
0000027C 755123                  		CMP #23H, R1
0000027F 3Arrrr               W  		BEQ L102
00000282                         L77:	; bb18
00000282 755125                  		CMP #25H, R1
00000285 3Arrrr               W  		BEQ L105
00000288                         L78:	; bb18
00000288 755128                  		CMP #28H, R1
0000028B 3Arrrr               W  		BEQ L108
0000028E                         L79:	; bb18
0000028E 75512A                  		CMP #2AH, R1
00000291 3Arrrr               W  		BEQ L108
00000294                         L80:	; bb18
00000294 75512B                  		CMP #2BH, R1
00000297 3Arrrr               W  		BEQ L109
0000029A                         L81:	; bb18
0000029A 711ED2                  		ADD #0FFFFFFD2H, R1, R14
0000029D 612E                    		CMP #02H, R14
0000029F 22rr                  * 		BLTU L109
         38rrrr                  
000002A4                         L82:	; bb18
000002A4 755155                  		CMP #55H, R1
000002A7 3Arrrr               W  		BEQ L110
000002AA                         L83:	; bb18
000002AA 6101                    		CMP #00H, R1
000002AC 3Brrrr               W  		BNE L114
000002AF                         L84:	; bb21
                                 ;     307         {
                                 ;     308         case USB_ATAPI_TEST_UNIT_READY:
                                 ;     309             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",309
000002AF A909                    		MOV.L 14H[R0], R1
000002B1 B991                    		MOVU.W 0CH[R1], R1
000002B3 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
000002B9 FBFA0506                		MOV.L #00000605H, R15
000002BD FE11EF                  		MOV.W R15, [R1,R14]
000002C0                         L85:	; bb21.split
                                 ;     310             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",310
000002C0 A909                    		MOV.L 14H[R0], R1
000002C2 B991                    		MOVU.W 0CH[R1], R1
000002C4 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
000002CA A882                    		MOV.L 08H[R0], R2
000002CC FE21E2                  		MOV.L R2, [R1,R14]
000002CF                         L86:	; bb21.split1
                                 ;     311             /* Test unit */
                                 ;     312             result = R_usb_hmsc_TestUnit(ptr, side);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",312
000002CF BA0A                    		MOVU.W 12H[R0], R2
000002D1 A909                    		MOV.L 14H[R0], R1
000002D3 05rrrrrr             A  		BSR _R_usb_hmsc_TestUnit
000002D7 9081                    		MOV.W R1, 04H[R0]
000002D9 38rrrr               W  		BRA L115
000002DC                         L87:	; bb36
                                 ;     313             break;
                                 ;     314         case USB_ATAPI_REQUEST_SENSE:
                                 ;     315             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",315
000002DC A909                    		MOV.L 14H[R0], R1
000002DE B991                    		MOVU.W 0CH[R1], R1
000002E0 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
000002E6 FBFA0506                		MOV.L #00000605H, R15
000002EA FE11EF                  		MOV.W R15, [R1,R14]
000002ED                         L88:	; bb36.split
                                 ;     316             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",316
000002ED A909                    		MOV.L 14H[R0], R1
000002EF B991                    		MOVU.W 0CH[R1], R1
000002F1 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
000002F7 A882                    		MOV.L 08H[R0], R2
000002F9 FE21E2                  		MOV.L R2, [R1,R14]
000002FC                         L89:	; bb36.split2
                                 ;     317             /*Request sense */
                                 ;     318             result = R_usb_hmsc_RequestSense(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",318
000002FC A88B                    		MOV.L 0CH[R0], R3
000002FE BA0A                    		MOVU.W 12H[R0], R2
00000300 A909                    		MOV.L 14H[R0], R1
00000302 05rrrrrr             A  		BSR _R_usb_hmsc_RequestSense
00000306 9081                    		MOV.W R1, 04H[R0]
00000308 38rrrr               W  		BRA L115
0000030B                         L90:	; bb52
                                 ;     319             break;
                                 ;     320         case USB_ATAPI_FORMAT_UNIT:
                                 ;     321             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",321
0000030B F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000310 38rrrr               W  		BRA L118
00000313                         L91:	; bb54
                                 ;     322             break;
                                 ;     323         case USB_ATAPI_INQUIRY:
                                 ;     324             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",324
00000313 A909                    		MOV.L 14H[R0], R1
00000315 B991                    		MOVU.W 0CH[R1], R1
00000317 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
0000031D FBFA0506                		MOV.L #00000605H, R15
00000321 FE11EF                  		MOV.W R15, [R1,R14]
00000324                         L92:	; bb54.split
                                 ;     325             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",325
00000324 A909                    		MOV.L 14H[R0], R1
00000326 B991                    		MOVU.W 0CH[R1], R1
00000328 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
0000032E A882                    		MOV.L 08H[R0], R2
00000330 FE21E2                  		MOV.L R2, [R1,R14]
00000333                         L93:	; bb54.split3
                                 ;     326             /* Inquiry */
                                 ;     327             result = R_usb_hmsc_Inquiry(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",327
00000333 A88B                    		MOV.L 0CH[R0], R3
00000335 BA0A                    		MOVU.W 12H[R0], R2
00000337 A909                    		MOV.L 14H[R0], R1
00000339 05rrrrrr             A  		BSR _R_usb_hmsc_Inquiry
0000033D 9081                    		MOV.W R1, 04H[R0]
0000033F 38rrrr               W  		BRA L115
00000342                         L94:	; bb70
                                 ;     328             break;
                                 ;     329         case USB_ATAPI_MODE_SELECT6:
                                 ;     330             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",330
00000342 A909                    		MOV.L 14H[R0], R1
00000344 B991                    		MOVU.W 0CH[R1], R1
00000346 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
0000034C FBFA0506                		MOV.L #00000605H, R15
00000350 FE11EF                  		MOV.W R15, [R1,R14]
00000353                         L95:	; bb70.split
                                 ;     331             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",331
00000353 A909                    		MOV.L 14H[R0], R1
00000355 B991                    		MOVU.W 0CH[R1], R1
00000357 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
0000035D A882                    		MOV.L 08H[R0], R2
0000035F FE21E2                  		MOV.L R2, [R1,R14]
00000362                         L96:	; bb70.split4
                                 ;     332             /* Mode select6 */
                                 ;     333             result = R_usb_hmsc_ModeSelect6(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",333
00000362 A88B                    		MOV.L 0CH[R0], R3
00000364 BA0A                    		MOVU.W 12H[R0], R2
00000366 A909                    		MOV.L 14H[R0], R1
00000368 05rrrrrr             A  		BSR _R_usb_hmsc_ModeSelect6
0000036C 9081                    		MOV.W R1, 04H[R0]
0000036E 38rrrr               W  		BRA L115
00000371                         L97:	; bb86
                                 ;     334             break;
                                 ;     335         case USB_ATAPI_MODE_SENSE6:
                                 ;     336             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",336
00000371 F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000376 38rrrr               W  		BRA L118
00000379                         L98:	; bb88
                                 ;     337             break;
                                 ;     338         case USB_ATAPI_START_STOP_UNIT:
                                 ;     339             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",339
00000379 F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
0000037E 38rrrr               W  		BRA L118
00000381                         L99:	; bb90
                                 ;     340             break;
                                 ;     341         case USB_ATAPI_PREVENT_ALLOW:
                                 ;     342             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",342
00000381 A909                    		MOV.L 14H[R0], R1
00000383 B991                    		MOVU.W 0CH[R1], R1
00000385 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
0000038B FBFA0506                		MOV.L #00000605H, R15
0000038F FE11EF                  		MOV.W R15, [R1,R14]
00000392                         L100:	; bb90.split
                                 ;     343             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",343
00000392 A909                    		MOV.L 14H[R0], R1
00000394 B991                    		MOVU.W 0CH[R1], R1
00000396 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
0000039C A882                    		MOV.L 08H[R0], R2
0000039E FE21E2                  		MOV.L R2, [R1,R14]
000003A1                         L101:	; bb90.split5
                                 ;     344             /* Prevent allow */
                                 ;     345             result = R_usb_hmsc_PreventAllow(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",345
000003A1 A88B                    		MOV.L 0CH[R0], R3
000003A3 BA0A                    		MOVU.W 12H[R0], R2
000003A5 A909                    		MOV.L 14H[R0], R1
000003A7 05rrrrrr             A  		BSR _R_usb_hmsc_PreventAllow
000003AB 9081                    		MOV.W R1, 04H[R0]
000003AD 38rrrr               W  		BRA L115
000003B0                         L102:	; bb106
                                 ;     346             break;
                                 ;     347         case USB_ATAPI_READ_FORMAT_CAPACITY:
                                 ;     348             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",348
000003B0 A909                    		MOV.L 14H[R0], R1
000003B2 B991                    		MOVU.W 0CH[R1], R1
000003B4 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
000003BA FBFA0506                		MOV.L #00000605H, R15
000003BE FE11EF                  		MOV.W R15, [R1,R14]
000003C1                         L103:	; bb106.split
                                 ;     349             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",349
000003C1 A909                    		MOV.L 14H[R0], R1
000003C3 B991                    		MOVU.W 0CH[R1], R1
000003C5 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
000003CB A882                    		MOV.L 08H[R0], R2
000003CD FE21E2                  		MOV.L R2, [R1,R14]
000003D0                         L104:	; bb106.split6
                                 ;     350             /* Read format capacity */
                                 ;     351             result = R_usb_hmsc_ReadFormatCapacity(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",351
000003D0 A88B                    		MOV.L 0CH[R0], R3
000003D2 BA0A                    		MOVU.W 12H[R0], R2
000003D4 A909                    		MOV.L 14H[R0], R1
000003D6 05rrrrrr             A  		BSR _R_usb_hmsc_ReadFormatCapacity
000003DA 9081                    		MOV.W R1, 04H[R0]
000003DC 2Err                 B  		BRA L115
000003DE                         L105:	; bb122
                                 ;     352             break;
                                 ;     353         case USB_ATAPI_READ_CAPACITY:
                                 ;     354             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",354
000003DE A909                    		MOV.L 14H[R0], R1
000003E0 B991                    		MOVU.W 0CH[R1], R1
000003E2 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
000003E8 FBFA0506                		MOV.L #00000605H, R15
000003EC FE11EF                  		MOV.W R15, [R1,R14]
000003EF                         L106:	; bb122.split
                                 ;     355             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",355
000003EF A909                    		MOV.L 14H[R0], R1
000003F1 B991                    		MOVU.W 0CH[R1], R1
000003F3 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
000003F9 A882                    		MOV.L 08H[R0], R2
000003FB FE21E2                  		MOV.L R2, [R1,R14]
000003FE                         L107:	; bb122.split7
                                 ;     356             /* Read capacity */
                                 ;     357             result = R_usb_hmsc_ReadCapacity(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",357
000003FE A88B                    		MOV.L 0CH[R0], R3
00000400 BA0A                    		MOVU.W 12H[R0], R2
00000402 A909                    		MOV.L 14H[R0], R1
00000404 05rrrrrr             A  		BSR _R_usb_hmsc_ReadCapacity
00000408 9081                    		MOV.W R1, 04H[R0]
0000040A 2Err                 B  		BRA L115
0000040C                         L108:	; bb138
                                 ;     358             break;
                                 ;     359         case USB_ATAPI_READ10:
                                 ;     360         case USB_ATAPI_WRITE10:
                                 ;     361             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",361
0000040C F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000411 2Err                 B  		BRA L118
00000413                         L109:	; bb140
                                 ;     362             break;
                                 ;     363         case USB_ATAPI_SEEK:
                                 ;     364         case USB_ATAPI_WRITE_AND_VERIFY:
                                 ;     365         case USB_ATAPI_VERIFY10:
                                 ;     366             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",366
00000413 F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000418 2Err                 B  		BRA L118
0000041A                         L110:	; bb142
                                 ;     367             break;
                                 ;     368         case USB_ATAPI_MODE_SELECT10:
                                 ;     369             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",369
0000041A F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
0000041F 2Err                 B  		BRA L118
00000421                         L111:	; bb144
                                 ;     370             break;
                                 ;     371         case USB_ATAPI_MODE_SENSE10:
                                 ;     372             usb_shmsc_StrgProcess[ptr->ip] = USB_MSG_HMSC_STRG_USER_COMMAND;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",372
00000421 A909                    		MOV.L 14H[R0], R1
00000423 B991                    		MOVU.W 0CH[R1], R1
00000425 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_StrgProcess, R14
0000042B FBFA0506                		MOV.L #00000605H, R15
0000042F FE11EF                  		MOV.W R15, [R1,R14]
00000432                         L112:	; bb144.split
                                 ;     373             usb_shmsc_command_result[ptr->ip] = complete;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",373
00000432 A909                    		MOV.L 14H[R0], R1
00000434 B991                    		MOVU.W 0CH[R1], R1
00000436 FBE2rrrrrrrr            		MOV.L #_usb_shmsc_command_result, R14
0000043C A882                    		MOV.L 08H[R0], R2
0000043E FE21E2                  		MOV.L R2, [R1,R14]
00000441                         L113:	; bb144.split8
                                 ;     374             /* Mode sense10 */
                                 ;     375             result = R_usb_hmsc_ModeSense10(ptr, side, buff);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",375
00000441 A88B                    		MOV.L 0CH[R0], R3
00000443 BA0A                    		MOVU.W 12H[R0], R2
00000445 A909                    		MOV.L 14H[R0], R1
00000447 05rrrrrr             A  		BSR _R_usb_hmsc_ModeSense10
0000044B 9081                    		MOV.W R1, 04H[R0]
0000044D 08                   S  		BRA L115
0000044E                         L114:	; bb160
                                 ;     376             break;
                                 ;     377         default:
                                 ;     378             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",378
0000044E F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000453 2Err                 B  		BRA L118
00000455                         L115:	; bb163
                                 ;     379             break;
                                 ;     380         }
                                 ;     381         if( result == USB_HMSC_OK )
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",381
00000455 B881                    		MOVU.W 04H[R0], R1
00000457 6101                    		CMP #00H, R1
00000459 18                   S  		BNE L117
0000045A                         L116:	; bb164
                                 ;     382         {
                                 ;     383             return (USB_DONE);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",383
0000045A 3D0100                  		MOV.W #0000H, 02H[R0]
0000045D 08                   S  		BRA L118
0000045E                         L117:	; bb166
                                 ;     384         }
                                 ;     385         else
                                 ;     386         {
                                 ;     387             return (USB_ERROR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",387
0000045E F90901FFFF              		MOV.W #0FFFFH, 02H[R0]
00000463                         L118:	; bb175
00000463 D5000103                		MOV.W 02H[R0], 06H[R0]
                                 ;     388         }
                                 ;     389     }
                                 ;     390 }   /* eof R_usb_hmsc_StrgUserCommand() */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\r_usb_hmsc\src\r_usb_hstorage_driver_api.c",390
00000467 B889                    		MOVU.W 06H[R0], R1
00000469 6706                    		RTSD #18H
                                 ;     391 
                                 ;     392 
                                 ;     393 /******************************************************************************
                                 ;     394 End  Of File
                                 ;     395 ******************************************************************************/
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     01081   LINES

Section List

Attr         Size               Name
CODE     0000001131(0000046BH)  P

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx12DB\$ccrx\r_usb_hstorage_driver_api.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01\CompactaXP_build\r_usb_hstorage_driver_api.lst
-output=C:\Workspace\e2studio\git\MT01\CompactaXP_build\r_usb_hmsc\src\r_usb_hstorage_driver_api.obj
