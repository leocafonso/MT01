* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Thu Mar 09 14:19:20 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  09-Mar-2017 14:19:19
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=ff.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx\src,C:/Workspace/e2studio/
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=ff.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=1,EASYMAK=0,MOBILE=0,FREE_RTOS_PP
                                 ;ff.c
                                 
                                 		.glb	_disk_write
                                 		.glb	_disk_read
                                 		.glb	_disk_ioctl
                                 		.glb	_clust2sect
                                 		.glb	_get_fat
                                 		.glb	_put_fat
                                 		.glb	_ff_wtoupper
                                 		.glb	_ff_convert
                                 		.glb	_disk_status
                                 		.glb	_disk_initialize
                                 		.glb	_f_mount
                                 		.glb	_f_open
                                 		.glb	_f_read
                                 		.glb	_f_write
                                 		.glb	_f_sync
                                 		.glb	_f_close
                                 		.glb	_f_chdir
                                 		.glb	_f_getcwd
                                 		.glb	_f_lseek
                                 		.glb	_f_opendir
                                 		.glb	_f_closedir
                                 		.glb	_f_readdir
                                 		.glb	_f_stat
                                 		.glb	_f_getfree
                                 		.glb	_f_truncate
                                 		.glb	_f_unlink
                                 		.glb	_f_mkdir
                                 		.glb	_f_chmod
                                 		.glb	_f_rename
                                 		.glb	_f_utime
                                 		.glb	_f_getlabel
                                 		.glb	_f_setlabel
                                 		.glb	_f_mkfs
                                 		.glb	_f_gets
                                 		.glb	_f_putc
                                 		.glb	_f_puts
                                 		.glb	_f_printf
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         __$mem_cpy:
                                 		.STACK	__$mem_cpy=24
                                 ;       1 /*----------------------------------------------------------------------------/
                                 ;       2 /  FatFs - FAT file system module  R0.10c                (C)ChaN, 2014
                                 ;       3 /-----------------------------------------------------------------------------/
                                 ;       4 / FatFs module is a generic FAT file system module for small embedded systems.
                                 ;       5 / This is a free software that opened for education, research and commercial
                                 ;       6 / developments under license policy of following terms.
                                 ;       7 /
                                 ;       8 /  Copyright (C) 2014, ChaN, all right reserved.
                                 ;       9 /
                                 ;      10 / * The FatFs module is a free software and there is NO WARRANTY.
                                 ;      11 / * No restriction on use. You can use, modify and redistribute it for
                                 ;      12 /   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
                                 ;      13 / * Redistributions of source code must retain the above copyright notice.
                                 ;      14 /
                                 ;      15 /-----------------------------------------------------------------------------/
                                 ;      16 / Feb 26,'06 R0.00  Prototype.
                                 ;      17 /
                                 ;      18 / Apr 29,'06 R0.01  First stable version.
                                 ;      19 /
                                 ;      20 / Jun 01,'06 R0.02  Added FAT12 support.
                                 ;      21 /                   Removed unbuffered mode.
                                 ;      22 /                   Fixed a problem on small (<32M) partition.
                                 ;      23 / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
                                 ;      24 /
                                 ;      25 / Sep 22,'06 R0.03  Added f_rename().
                                 ;      26 /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
                                 ;      27 / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
                                 ;      28 /                   Fixed f_mkdir() creates incorrect directory on FAT32.
                                 ;      29 /
                                 ;      30 / Feb 04,'07 R0.04  Supported multiple drive system.
                                 ;      31 /                   Changed some interfaces for multiple drive system.
                                 ;      32 /                   Changed f_mountdrv() to f_mount().
                                 ;      33 /                   Added f_mkfs().
                                 ;      34 / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
                                 ;      35 /                   Added a capability of extending file size to f_lseek().
                                 ;      36 /                   Added minimization level 3.
                                 ;      37 /                   Fixed an endian sensitive code in f_mkfs().
                                 ;      38 / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
                                 ;      39 /                   Added FSINFO support.
                                 ;      40 /                   Fixed DBCS name can result FR_INVALID_NAME.
                                 ;      41 /                   Fixed short seek (<= csize) collapses the file object.
                                 ;      42 /
                                 ;      43 / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
                                 ;      44 /                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
                                 ;      45 /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
                                 ;      46 / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
                                 ;      47 /                   Fixed off by one error at FAT sub-type determination.
                                 ;      48 /                   Fixed btr in f_read() can be mistruncated.
                                 ;      49 /                   Fixed cached sector is not flushed when create and close without write.
                                 ;      50 /
                                 ;      51 / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
                                 ;      52 /                   Improved performance of f_lseek() on moving to the same or following cluster.
                                 ;      53 /
                                 ;      54 / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
                                 ;      55 /                   Added long file name feature.
                                 ;      56 /                   Added multiple code page feature.
                                 ;      57 /                   Added re-entrancy for multitask operation.
                                 ;      58 /                   Added auto cluster size selection to f_mkfs().
                                 ;      59 /                   Added rewind option to f_readdir().
                                 ;      60 /                   Changed result code of critical errors.
                                 ;      61 /                   Renamed string functions to avoid name collision.
                                 ;      62 / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
                                 ;      63 /                   Added multiple sector size feature.
                                 ;      64 / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
                                 ;      65 /                   Fixed wrong cache control in f_lseek().
                                 ;      66 /                   Added relative path feature.
                                 ;      67 /                   Added f_chdir() and f_chdrive().
                                 ;      68 /                   Added proper case conversion to extended character.
                                 ;      69 / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
                                 ;      70 /                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
                                 ;      71 /                   Fixed name matching error on the 13 character boundary.
                                 ;      72 /                   Added a configuration option, _LFN_UNICODE.
                                 ;      73 /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
                                 ;      74 /
                                 ;      75 / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
                                 ;      76 /                   Added file lock feature. (_FS_SHARE)
                                 ;      77 /                   Added fast seek feature. (_USE_FASTSEEK)
                                 ;      78 /                   Changed some types on the API, XCHAR->TCHAR.
                                 ;      79 /                   Changed .fname in the FILINFO structure on Unicode cfg.
                                 ;      80 /                   String functions support UTF-8 encoding files on Unicode cfg.
                                 ;      81 / Aug 16,'10 R0.08a Added f_getcwd().
                                 ;      82 /                   Added sector erase feature. (_USE_ERASE)
                                 ;      83 /                   Moved file lock semaphore table from fs object to the bss.
                                 ;      84 /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name contains ';'.
                                 ;      85 /                   Fixed f_mkfs() creates wrong FAT32 volume.
                                 ;      86 / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
                                 ;      87 /                   f_lseek() reports required table size on creating CLMP.
                                 ;      88 /                   Extended format syntax of f_printf().
                                 ;      89 /                   Ignores duplicated directory separators in given path name.
                                 ;      90 /
                                 ;      91 / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature.
                                 ;      92 /                   Added f_fdisk().
                                 ;      93 / Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
                                 ;      94 /                   Changed option name _FS_SHARE to _FS_LOCK.
                                 ;      95 /                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
                                 ;      96 / Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
                                 ;      97 /
                                 ;      98 / Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
                                 ;      99 /                   Added f_closedir().
                                 ;     100 /                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
                                 ;     101 /                   Added forced mount feature with changes of f_mount().
                                 ;     102 /                   Improved behavior of volume auto detection.
                                 ;     103 /                   Improved write throughput of f_puts() and f_printf().
                                 ;     104 /                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
                                 ;     105 /                   Fixed f_write() can be truncated when the file size is close to 4GB.
                                 ;     106 /                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
                                 ;     107 / Jan 15,'14 R0.10a Added arbitrary strings as drive number in the path name. (_STR_VOLUME_ID)
                                 ;     108 /                   Added a configuration option of minimum sector size. (_MIN_SS)
                                 ;     109 /                   2nd argument of f_rename() can have a drive number and it will be ignored.
                                 ;     110 /                   Fixed f_mount() with forced mount fails when drive number is >= 1.
                                 ;     111 /                   Fixed f_close() invalidates the file object without volume lock.
                                 ;     112 /                   Fixed f_closedir() returns but the volume lock is left acquired.
                                 ;     113 /                   Fixed creation of an entry with LFN fails on too many SFN collisions.
                                 ;     114 / May 19,'14 R0.10b Fixed a hard error in the disk I/O layer can collapse the directory entry.
                                 ;     115 /                   Fixed LFN entry is not deleted on delete/rename an object with lossy converted SFN.
                                 ;     116 / Nov 09,'14 R0.10c Added a configuration option for the platforms without RTC. (_FS_NORTC)
                                 ;     117 /                   Fixed volume label created by Mac OS X cannot be retrieved with f_getlabel().
                                 ;     118 /                   Fixed a potential problem of FAT access that can appear on disk error.
                                 ;     119 /                   Fixed null pointer dereference on attempting to delete the root direcotry.
                                 ;     120 / Patch1 applied.
                                 ;     121 / Patch2 applied.
                                 ;     122 /---------------------------------------------------------------------------*/
                                 ;     123 
                                 ;     124 #include "ff.h"			/* Declarations of FatFs API */
                                 ;     125 #include "diskio.h"		/* Declarations of disk I/O functions */
                                 ;     126 
                                 ;     127 
                                 ;     128 
                                 ;     129 
                                 ;     130 /*--------------------------------------------------------------------------
                                 ;     131 
                                 ;     132    Module Private Definitions
                                 ;     133 
                                 ;     134 ---------------------------------------------------------------------------*/
                                 ;     135 
                                 ;     136 #if _FATFS != 80376	/* Revision ID */
                                 ;     137 #error Wrong include file (ff.h).
                                 ;     138 #endif
                                 ;     139 
                                 ;     140 
                                 ;     141 /* Reentrancy related */
                                 ;     142 #if _FS_REENTRANT
                                 ;     143 #if _USE_LFN == 1
                                 ;     144 #error Static LFN work area cannot be used at thread-safe configuration
                                 ;     145 #endif
                                 ;     146 #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
                                 ;     147 #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
                                 ;     148 #else
                                 ;     149 #define	ENTER_FF(fs)
                                 ;     150 #define LEAVE_FF(fs, res)	return res
                                 ;     151 #endif
                                 ;     152 
                                 ;     153 #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
                                 ;     154 
                                 ;     155 
                                 ;     156 /* Definitions of sector size */
                                 ;     157 #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096) || (_MIN_SS != 512 && _MIN_SS != 1024 && _MIN_SS != 2048
                                 ;     158 #error Wrong sector size configuration
                                 ;     159 #endif
                                 ;     160 #if _MAX_SS == _MIN_SS
                                 ;     161 #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
                                 ;     162 #else
                                 ;     163 #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
                                 ;     164 #endif
                                 ;     165 
                                 ;     166 
                                 ;     167 /* Timestamp feature */
                                 ;     168 #if _FS_NORTC == 1
                                 ;     169 #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 1 || _NORTC_MDAY > 31
                                 ;     170 #error Invalid _FS_NORTC settings
                                 ;     171 #endif
                                 ;     172 #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_MDAY << 16)
                                 ;     173 #else
                                 ;     174 #define GET_FATTIME()	get_fattime()
                                 ;     175 #endif
                                 ;     176 
                                 ;     177 
                                 ;     178 /* File access control feature */
                                 ;     179 #if _FS_LOCK
                                 ;     180 #if _FS_READONLY
                                 ;     181 #error _FS_LOCK must be 0 at read-only configuration
                                 ;     182 #endif
                                 ;     183 typedef struct {
                                 ;     184 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
                                 ;     185 	DWORD clu;		/* Object ID 2, directory (0:root) */
                                 ;     186 	WORD idx;		/* Object ID 3, directory index */
                                 ;     187 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
                                 ;     188 } FILESEM;
                                 ;     189 #endif
                                 ;     190 
                                 ;     191 
                                 ;     192 
                                 ;     193 /* DBCS code ranges and SBCS extend character conversion table */
                                 ;     194 
                                 ;     195 #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
                                 ;     196 #define _DF1S	0x81	/* DBC 1st byte range 1 start */
                                 ;     197 #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
                                 ;     198 #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
                                 ;     199 #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
                                 ;     200 #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
                                 ;     201 #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
                                 ;     202 #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
                                 ;     203 #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
                                 ;     204 
                                 ;     205 #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
                                 ;     206 #define _DF1S	0x81
                                 ;     207 #define _DF1E	0xFE
                                 ;     208 #define _DS1S	0x40
                                 ;     209 #define _DS1E	0x7E
                                 ;     210 #define _DS2S	0x80
                                 ;     211 #define _DS2E	0xFE
                                 ;     212 
                                 ;     213 #elif _CODE_PAGE == 949	/* Korean */
                                 ;     214 #define _DF1S	0x81
                                 ;     215 #define _DF1E	0xFE
                                 ;     216 #define _DS1S	0x41
                                 ;     217 #define _DS1E	0x5A
                                 ;     218 #define _DS2S	0x61
                                 ;     219 #define _DS2E	0x7A
                                 ;     220 #define _DS3S	0x81
                                 ;     221 #define _DS3E	0xFE
                                 ;     222 
                                 ;     223 #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
                                 ;     224 #define _DF1S	0x81
                                 ;     225 #define _DF1E	0xFE
                                 ;     226 #define _DS1S	0x40
                                 ;     227 #define _DS1E	0x7E
                                 ;     228 #define _DS2S	0xA1
                                 ;     229 #define _DS2E	0xFE
                                 ;     230 
                                 ;     231 #elif _CODE_PAGE == 437	/* U.S. (OEM) */
                                 ;     232 #define _DF1S	0
                                 ;     233 #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0
                                 ;     234 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     235 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     236 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     237 
                                 ;     238 #elif _CODE_PAGE == 720	/* Arabic (OEM) */
                                 ;     239 #define _DF1S	0
                                 ;     240 #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94,0x95,0x49,0x49,0x98,0x99,0x9A,0x9B,0
                                 ;     241 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     242 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     243 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     244 
                                 ;     245 #elif _CODE_PAGE == 737	/* Greek (OEM) */
                                 ;     246 #define _DF1S	0
                                 ;     247 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0
                                 ;     248 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     249 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     250 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     251 
                                 ;     252 #elif _CODE_PAGE == 775	/* Baltic (OEM) */
                                 ;     253 #define _DF1S	0
                                 ;     254 #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0
                                 ;     255 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     256 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD
                                 ;     257 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     258 
                                 ;     259 #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
                                 ;     260 #define _DF1S	0
                                 ;     261 #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x59,0x99,0x9A,0x9D,0
                                 ;     262 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     263 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     264 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     265 
                                 ;     266 #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
                                 ;     267 #define _DF1S	0
                                 ;     268 #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0
                                 ;     269 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     270 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD
                                 ;     271 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     272 
                                 ;     273 #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
                                 ;     274 #define _DF1S	0
                                 ;     275 #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0
                                 ;     276 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB
                                 ;     277 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD
                                 ;     278 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xF
                                 ;     279 
                                 ;     280 #elif _CODE_PAGE == 857	/* Turkish (OEM) */
                                 ;     281 #define _DF1S	0
                                 ;     282 #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0
                                 ;     283 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     284 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     285 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     286 
                                 ;     287 #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
                                 ;     288 #define _DF1S	0
                                 ;     289 #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x59,0x99,0x9A,0x9D,0
                                 ;     290 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     291 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     292 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     293 
                                 ;     294 #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
                                 ;     295 #define _DF1S	0
                                 ;     296 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     297 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     298 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     299 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     300 
                                 ;     301 #elif _CODE_PAGE == 866	/* Russian (OEM) */
                                 ;     302 #define _DF1S	0
                                 ;     303 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     304 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     305 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     306 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF
                                 ;     307 
                                 ;     308 #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
                                 ;     309 #define _DF1S	0
                                 ;     310 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     311 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     312 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     313 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     314 
                                 ;     315 #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
                                 ;     316 #define _DF1S	0
                                 ;     317 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0
                                 ;     318 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xA3,0xB4,0xB5,0xB6,0xB7,0xB8,0xA
                                 ;     319 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     320 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD
                                 ;     321 
                                 ;     322 #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
                                 ;     323 #define _DF1S	0
                                 ;     324 #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x80,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0
                                 ;     325 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB2,0xA5,0xB5,0xB6,0xB7,0xA8,0xB
                                 ;     326 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     327 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     328 
                                 ;     329 #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
                                 ;     330 #define _DF1S	0
                                 ;     331 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0xAd,0x9B,0
                                 ;     332 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     333 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     334 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD
                                 ;     335 
                                 ;     336 #elif _CODE_PAGE == 1253 /* Greek (Windows) */
                                 ;     337 #define _DF1S	0
                                 ;     338 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     339 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     340 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     341 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     342 
                                 ;     343 #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
                                 ;     344 #define _DF1S	0
                                 ;     345 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0
                                 ;     346 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     347 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     348 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD
                                 ;     349 
                                 ;     350 #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
                                 ;     351 #define _DF1S	0
                                 ;     352 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     353 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     354 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     355 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF
                                 ;     356 
                                 ;     357 #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
                                 ;     358 #define _DF1S	0
                                 ;     359 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     360 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     361 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     362 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,0xF3,0x4F,0xF5,0xF6,0xF7,0xF8,0x5
                                 ;     363 
                                 ;     364 #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
                                 ;     365 #define _DF1S	0
                                 ;     366 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     367 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xA8,0xB
                                 ;     368 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     369 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD
                                 ;     370 
                                 ;     371 #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
                                 ;     372 #define _DF1S	0
                                 ;     373 #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0
                                 ;     374 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB
                                 ;     375 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD
                                 ;     376 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD
                                 ;     377 
                                 ;     378 #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
                                 ;     379 #if _USE_LFN
                                 ;     380 #error Cannot use LFN feature without valid code page.
                                 ;     381 #endif
                                 ;     382 #define _DF1S	0
                                 ;     383 
                                 ;     384 #else
                                 ;     385 #error Unknown code page
                                 ;     386 
                                 ;     387 #endif
                                 ;     388 
                                 ;     389 
                                 ;     390 /* Character code support macros */
                                 ;     391 #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
                                 ;     392 #define IsLower(c)	(((c)>='a')&&((c)<='z'))
                                 ;     393 #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
                                 ;     394 
                                 ;     395 #if _DF1S		/* Code page is DBCS */
                                 ;     396 
                                 ;     397 #ifdef _DF2S	/* Two 1st byte areas */
                                 ;     398 #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) <= _DF2E))
                                 ;     399 #else			/* One 1st byte area */
                                 ;     400 #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
                                 ;     401 #endif
                                 ;     402 
                                 ;     403 #ifdef _DS3S	/* Three 2nd byte areas */
                                 ;     404 #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) <= _DS2E) || ((BYTE)(c) >= _DS3S && (BYTE)(c) <= _DS3E))
                                 ;     405 #else			/* Two 2nd byte areas */
                                 ;     406 #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) <= _DS2E))
                                 ;     407 #endif
                                 ;     408 
                                 ;     409 #else			/* Code page is SBCS */
                                 ;     410 
                                 ;     411 #define IsDBCS1(c)	0
                                 ;     412 #define IsDBCS2(c)	0
                                 ;     413 
                                 ;     414 #endif /* _DF1S */
                                 ;     415 
                                 ;     416 
                                 ;     417 /* Name status flags */
                                 ;     418 #define NSFLAG		11		/* Index of name status byte in fn[] */
                                 ;     419 #define NS_LOSS		0x01	/* Out of 8.3 format */
                                 ;     420 #define NS_LFN		0x02	/* Force to create LFN entry */
                                 ;     421 #define NS_LAST		0x04	/* Last segment */
                                 ;     422 #define NS_BODY		0x08	/* Lower case flag (body) */
                                 ;     423 #define NS_EXT		0x10	/* Lower case flag (ext) */
                                 ;     424 #define NS_DOT		0x20	/* Dot entry */
                                 ;     425 
                                 ;     426 
                                 ;     427 /* FAT sub-type boundaries (Differ from specs but correct for real DOS/Windows) */
                                 ;     428 #define MIN_FAT16	4086U	/* Minimum number of clusters as FAT16 */
                                 ;     429 #define	MIN_FAT32	65526U	/* Minimum number of clusters as FAT32 */
                                 ;     430 
                                 ;     431 
                                 ;     432 /* FatFs refers the members in the FAT structures as byte array instead of
                                 ;     433 / structure member because the structure is not binary compatible between
                                 ;     434 / different platforms */
                                 ;     435 
                                 ;     436 #define BS_jmpBoot			0		/* x86 jump instruction (3) */
                                 ;     437 #define BS_OEMName			3		/* OEM name (8) */
                                 ;     438 #define BPB_BytsPerSec		11		/* Sector size [byte] (2) */
                                 ;     439 #define BPB_SecPerClus		13		/* Cluster size [sector] (1) */
                                 ;     440 #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (2) */
                                 ;     441 #define BPB_NumFATs			16		/* Number of FAT copies (1) */
                                 ;     442 #define BPB_RootEntCnt		17		/* Number of root directory entries for FAT12/16 (2) */
                                 ;     443 #define BPB_TotSec16		19		/* Volume size [sector] (2) */
                                 ;     444 #define BPB_Media			21		/* Media descriptor (1) */
                                 ;     445 #define BPB_FATSz16			22		/* FAT size [sector] (2) */
                                 ;     446 #define BPB_SecPerTrk		24		/* Track size [sector] (2) */
                                 ;     447 #define BPB_NumHeads		26		/* Number of heads (2) */
                                 ;     448 #define BPB_HiddSec			28		/* Number of special hidden sectors (4) */
                                 ;     449 #define BPB_TotSec32		32		/* Volume size [sector] (4) */
                                 ;     450 #define BS_DrvNum			36		/* Physical drive number (2) */
                                 ;     451 #define BS_BootSig			38		/* Extended boot signature (1) */
                                 ;     452 #define BS_VolID			39		/* Volume serial number (4) */
                                 ;     453 #define BS_VolLab			43		/* Volume label (8) */
                                 ;     454 #define BS_FilSysType		54		/* File system type (1) */
                                 ;     455 #define BPB_FATSz32			36		/* FAT size [sector] (4) */
                                 ;     456 #define BPB_ExtFlags		40		/* Extended flags (2) */
                                 ;     457 #define BPB_FSVer			42		/* File system version (2) */
                                 ;     458 #define BPB_RootClus		44		/* Root directory first cluster (4) */
                                 ;     459 #define BPB_FSInfo			48		/* Offset of FSINFO sector (2) */
                                 ;     460 #define BPB_BkBootSec		50		/* Offset of backup boot sector (2) */
                                 ;     461 #define BS_DrvNum32			64		/* Physical drive number (2) */
                                 ;     462 #define BS_BootSig32		66		/* Extended boot signature (1) */
                                 ;     463 #define BS_VolID32			67		/* Volume serial number (4) */
                                 ;     464 #define BS_VolLab32			71		/* Volume label (8) */
                                 ;     465 #define BS_FilSysType32		82		/* File system type (1) */
                                 ;     466 #define	FSI_LeadSig			0		/* FSI: Leading signature (4) */
                                 ;     467 #define	FSI_StrucSig		484		/* FSI: Structure signature (4) */
                                 ;     468 #define	FSI_Free_Count		488		/* FSI: Number of free clusters (4) */
                                 ;     469 #define	FSI_Nxt_Free		492		/* FSI: Last allocated cluster (4) */
                                 ;     470 #define MBR_Table			446		/* MBR: Partition table offset (2) */
                                 ;     471 #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
                                 ;     472 #define BS_55AA				510		/* Signature word (2) */
                                 ;     473 
                                 ;     474 #define	DIR_Name			0		/* Short file name (11) */
                                 ;     475 #define	DIR_Attr			11		/* Attribute (1) */
                                 ;     476 #define	DIR_NTres			12		/* NT flag (1) */
                                 ;     477 #define DIR_CrtTimeTenth	13		/* Created time sub-second (1) */
                                 ;     478 #define	DIR_CrtTime			14		/* Created time (2) */
                                 ;     479 #define	DIR_CrtDate			16		/* Created date (2) */
                                 ;     480 #define DIR_LstAccDate		18		/* Last accessed date (2) */
                                 ;     481 #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (2) */
                                 ;     482 #define	DIR_WrtTime			22		/* Modified time (2) */
                                 ;     483 #define	DIR_WrtDate			24		/* Modified date (2) */
                                 ;     484 #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (2) */
                                 ;     485 #define	DIR_FileSize		28		/* File size (4) */
                                 ;     486 #define	LDIR_Ord			0		/* LFN entry order and LLE flag (1) */
                                 ;     487 #define	LDIR_Attr			11		/* LFN attribute (1) */
                                 ;     488 #define	LDIR_Type			12		/* LFN type (1) */
                                 ;     489 #define	LDIR_Chksum			13		/* Sum of corresponding SFN entry */
                                 ;     490 #define	LDIR_FstClusLO		26		/* Filled by zero (0) */
                                 ;     491 #define	SZ_DIR				32		/* Size of a directory entry */
                                 ;     492 #define	LLE					0x40	/* Last long entry flag in LDIR_Ord */
                                 ;     493 #define	DDE					0xE5	/* Deleted directory entry mark in DIR_Name[0] */
                                 ;     494 #define	NDDE				0x05	/* Replacement of the character collides with DDE */
                                 ;     495 
                                 ;     496 
                                 ;     497 
                                 ;     498 
                                 ;     499 /*------------------------------------------------------------*/
                                 ;     500 /* Module private work area                                   */
                                 ;     501 /*------------------------------------------------------------*/
                                 ;     502 /* Remark: Uninitialized variables with static duration are
                                 ;     503 /  guaranteed zero/null at start-up. If not, either the linker
                                 ;     504 /  or start-up routine being used is out of ANSI-C standard.
                                 ;     505 */
                                 ;     506 
                                 ;     507 #if _VOLUMES < 1 || _VOLUMES > 9
                                 ;     508 #error Wrong _VOLUMES setting
                                 ;     509 #endif
                                 ;     510 static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
                                 ;     511 static WORD Fsid;				/* File system mount ID */
                                 ;     512 
                                 ;     513 #if _FS_RPATH && _VOLUMES >= 2
                                 ;     514 static BYTE CurrVol;			/* Current drive */
                                 ;     515 #endif
                                 ;     516 
                                 ;     517 #if _FS_LOCK
                                 ;     518 static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
                                 ;     519 #endif
                                 ;     520 
                                 ;     521 #if _USE_LFN == 0			/* Non LFN feature */
                                 ;     522 #define	DEF_NAMEBUF			BYTE sfn[12]
                                 ;     523 #define INIT_BUF(dobj)		(dobj).fn = sfn
                                 ;     524 #define	FREE_BUF()
                                 ;     525 #else
                                 ;     526 #if _MAX_LFN < 12 || _MAX_LFN > 255
                                 ;     527 #error Wrong _MAX_LFN setting
                                 ;     528 #endif
                                 ;     529 #if _USE_LFN == 1			/* LFN feature with static working buffer */
                                 ;     530 static WCHAR LfnBuf[_MAX_LFN+1];
                                 ;     531 #define	DEF_NAMEBUF			BYTE sfn[12]
                                 ;     532 #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
                                 ;     533 #define	FREE_BUF()
                                 ;     534 #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
                                 ;     535 #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR lbuf[_MAX_LFN+1]
                                 ;     536 #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
                                 ;     537 #define	FREE_BUF()
                                 ;     538 #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
                                 ;     539 #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR *lfn
                                 ;     540 #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); if (!lfn) LEAVE_FF((dobj).fs, FR_NOT_ENOUGH_CORE); (dobj).lfn = lfn; (dobj).fn 
                                 ;     541 #define	FREE_BUF()			ff_memfree(lfn)
                                 ;     542 #else
                                 ;     543 #error Wrong _USE_LFN setting
                                 ;     544 #endif
                                 ;     545 #endif
                                 ;     546 
                                 ;     547 #ifdef _EXCVT
                                 ;     548 static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
                                 ;     549 #endif
                                 ;     550 
                                 ;     551 
                                 ;     552 
                                 ;     553 
                                 ;     554 
                                 ;     555 
                                 ;     556 /*--------------------------------------------------------------------------
                                 ;     557 
                                 ;     558    Module Private Functions
                                 ;     559 
                                 ;     560 ---------------------------------------------------------------------------*/
                                 ;     561 
                                 ;     562 
                                 ;     563 /*-----------------------------------------------------------------------*/
                                 ;     564 /* String functions                                                      */
                                 ;     565 /*-----------------------------------------------------------------------*/
                                 ;     566 
                                 ;     567 /* Copy memory to memory */
                                 ;     568 static
                                 ;     569 void mem_cpy (void* dst, const void* src, UINT cnt) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",569
00000000 7100EC                  		ADD #0FFFFFFECH, R0
00000003 A101                    		MOV.L R1, 10H[R0]
00000005 A08A                    		MOV.L R2, 0CH[R0]
00000007 A083                    		MOV.L R3, 08H[R0]
                                 ;     570 	BYTE *d = (BYTE*)dst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",570
00000009 E10004                  		MOV.L 10H[R0], [R0]
0000000C                         L17:	; entry.split
                                 ;     571 	const BYTE *s = (const BYTE*)src;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",571
0000000C E5000301                		MOV.L 0CH[R0], 04H[R0]
00000010 2Err                 B  		BRA L22
00000012                         L18:	; bb
                                 ;     572 
                                 ;     573 #if _WORD_ACCESS == 1
                                 ;     574 	while (cnt >= sizeof (int)) {
                                 ;     575 		*(int*)d = *(int*)s;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",575
00000012 A809                    		MOV.L 04H[R0], R1
00000014 EC02                    		MOV.L [R0], R2
00000016 E012                    		MOV.L [R1], [R2]
00000018                         L19:	; bb.split
                                 ;     576 		d += sizeof (int); s += sizeof (int);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",576
00000018 EC01                    		MOV.L [R0], R1
0000001A 6241                    		ADD #04H, R1
0000001C E301                    		MOV.L R1, [R0]
0000001E                         L20:	; bb.split1
0000001E A809                    		MOV.L 04H[R0], R1
00000020 6241                    		ADD #04H, R1
00000022 A009                    		MOV.L R1, 04H[R0]
00000024                         L21:	; bb.split2
                                 ;     577 		cnt -= sizeof (int);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",577
00000024 A881                    		MOV.L 08H[R0], R1
00000026 6041                    		SUB #04H, R1
00000028 A081                    		MOV.L R1, 08H[R0]
0000002A                         L22:	; bb18
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",574
0000002A A881                    		MOV.L 08H[R0], R1
0000002C 6131                    		CMP #03H, R1
0000002E 24rr                    		BGTU L18
00000030 2Err                 B  		BRA L24
00000032                         L23:	; bb23
                                 ;     578 	}
                                 ;     579 #endif
                                 ;     580 	while (cnt--)
                                 ;     581 		*d++ = *s++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",581
00000032 A809                    		MOV.L 04H[R0], R1
00000034 EC02                    		MOV.L [R0], R2
00000036 C012                    		MOV.B [R1], [R2]
00000038 EC01                    		MOV.L [R0], R1
0000003A 6211                    		ADD #01H, R1
0000003C E301                    		MOV.L R1, [R0]
0000003E A809                    		MOV.L 04H[R0], R1
00000040 6211                    		ADD #01H, R1
00000042 A009                    		MOV.L R1, 04H[R0]
00000044                         L24:	; bb31
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",580
00000044 A881                    		MOV.L 08H[R0], R1
00000046 7112FF                  		ADD #0FFFFFFFFH, R1, R2
00000049 A082                    		MOV.L R2, 08H[R0]
0000004B 6101                    		CMP #00H, R1
0000004D 21rr                    		BNE L23
0000004F                         L25:	; return
                                 ;     582 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",582
0000004F 6705                    		RTSD #14H
00000051                         __$mem_set:
                                 		.STACK	__$mem_set=20
                                 ;     583 
                                 ;     584 /* Fill memory */
                                 ;     585 static
                                 ;     586 void mem_set (void* dst, int val, UINT cnt) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",586
00000051 7100F0                  		ADD #0FFFFFFF0H, R0
00000054 A089                    		MOV.L R1, 0CH[R0]
00000056 A082                    		MOV.L R2, 08H[R0]
00000058 A00B                    		MOV.L R3, 04H[R0]
                                 ;     587 	BYTE *d = (BYTE*)dst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",587
0000005A E10003                  		MOV.L 0CH[R0], [R0]
0000005D 2Err                 B  		BRA L28
0000005F                         L27:	; bb
                                 ;     588 
                                 ;     589 	while (cnt--)
                                 ;     590 		*d++ = (BYTE)val;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",590
0000005F A881                    		MOV.L 08H[R0], R1
00000061 EC02                    		MOV.L [R0], R2
00000063 C321                    		MOV.B R1, [R2]
00000065 EC01                    		MOV.L [R0], R1
00000067 6211                    		ADD #01H, R1
00000069 E301                    		MOV.L R1, [R0]
0000006B                         L28:	; bb10
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",589
0000006B A809                    		MOV.L 04H[R0], R1
0000006D 7112FF                  		ADD #0FFFFFFFFH, R1, R2
00000070 A00A                    		MOV.L R2, 04H[R0]
00000072 6101                    		CMP #00H, R1
00000074 21rr                    		BNE L27
00000076                         L29:	; return
                                 ;     591 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",591
00000076 6704                    		RTSD #10H
00000078                         __$mem_cmp:
                                 		.STACK	__$mem_cmp=36
                                 ;     592 
                                 ;     593 /* Compare memory to memory */
                                 ;     594 static
                                 ;     595 int mem_cmp (const void* dst, const void* src, UINT cnt) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",595
00000078 7100E0                  		ADD #0FFFFFFE0H, R0
0000007B A189                    		MOV.L R1, 1CH[R0]
0000007D A182                    		MOV.L R2, 18H[R0]
0000007F A10B                    		MOV.L R3, 14H[R0]
                                 ;     596 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",596
00000081 E5000701                		MOV.L 1CH[R0], 04H[R0]
00000085 E5000602                		MOV.L 18H[R0], 08H[R0]
00000089                         L31:	; entry.split
                                 ;     597 	int r = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",597
00000089 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000008C                         L32:	; bb9
                                 ;     598 
                                 ;     599 	while (cnt-- && (r = *d++ - *s++) == 0) ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",599
0000008C A909                    		MOV.L 14H[R0], R1
0000008E 7112FF                  		ADD #0FFFFFFFFH, R1, R2
00000091 A10A                    		MOV.L R2, 14H[R0]
00000093 6101                    		CMP #00H, R1
00000095 20rr                    		BEQ L35
00000097                         L33:	; bb15
00000097 A809                    		MOV.L 04H[R0], R1
00000099 5811                    		MOVU.B [R1], R1
0000009B A882                    		MOV.L 08H[R0], R2
0000009D 4021                    		SUB [R2].UB, R1
0000009F A089                    		MOV.L R1, 0CH[R0]
000000A1 A80A                    		MOV.L 04H[R0], R2
000000A3 6212                    		ADD #01H, R2
000000A5 A00A                    		MOV.L R2, 04H[R0]
000000A7 A882                    		MOV.L 08H[R0], R2
000000A9 6212                    		ADD #01H, R2
000000AB A082                    		MOV.L R2, 08H[R0]
000000AD 6101                    		CMP #00H, R1
000000AF 18                   S  		BNE L35
000000B0                         L34:	; bb30
000000B0 F80601                  		MOV.L #00000001H, [R0]
000000B3 08                   S  		BRA L36
000000B4                         L35:	; bb31
000000B4 F80600                  		MOV.L #00000000H, [R0]
000000B7                         L36:	; bb32
000000B7 EC01                    		MOV.L [R0], R1
000000B9 6101                    		CMP #00H, R1
000000BB 21rr                    		BNE L32
000000BD                         L37:	; bb36
                                 ;     600 	return r;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",600
000000BD A889                    		MOV.L 0CH[R0], R1
000000BF A101                    		MOV.L R1, 10H[R0]
000000C1                         L38:	; bb36.split
                                 ;     601 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",601
000000C1 6708                    		RTSD #20H
000000C3                         __$chk_chr:
                                 		.STACK	__$chk_chr=20
                                 ;     602 
                                 ;     603 /* Check if chr is contained in the string */
                                 ;     604 static
                                 ;     605 int chk_chr (const char* str, int chr) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",605
000000C3 7100F0                  		ADD #0FFFFFFF0H, R0
000000C6 A089                    		MOV.L R1, 0CH[R0]
000000C8 A082                    		MOV.L R2, 08H[R0]
000000CA 08                   S  		BRA L41
000000CB                         L40:	; bb
000000CB 6211                    		ADD #01H, R1
000000CD A089                    		MOV.L R1, 0CH[R0]
000000CF                         L41:	; bb5
                                 ;     606 	while (*str && *str != chr) str++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",606
000000CF A889                    		MOV.L 0CH[R0], R1
000000D1 581E                    		MOVU.B [R1], R14
000000D3 610E                    		CMP #00H, R14
000000D5 20rr                    		BEQ L44
000000D7                         L42:	; bb11
000000D7 A889                    		MOV.L 0CH[R0], R1
000000D9 581E                    		MOVU.B [R1], R14
000000DB 06850E02                		CMP 08H[R0].L, R14
000000DF 10                   S  		BEQ L44
000000E0                         L43:	; bb18
000000E0 F80601                  		MOV.L #00000001H, [R0]
000000E3 08                   S  		BRA L45
000000E4                         L44:	; bb19
000000E4 F80600                  		MOV.L #00000000H, [R0]
000000E7                         L45:	; bb20
000000E7 EC01                    		MOV.L [R0], R1
000000E9 6101                    		CMP #00H, R1
000000EB A889                    		MOV.L 0CH[R0], R1
000000ED 21rr                    		BNE L40
000000EF                         L46:	; bb24
                                 ;     607 	return *str;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",607
000000EF 5811                    		MOVU.B [R1], R1
000000F1 A009                    		MOV.L R1, 04H[R0]
000000F3                         L47:	; bb24.split
                                 ;     608 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",608
000000F3 6704                    		RTSD #10H
000000F5                         __$sync_window:
                                 		.STACK	__$sync_window=24
                                 ;     609 
                                 ;     610 
                                 ;     611 
                                 ;     612 
                                 ;     613 /*-----------------------------------------------------------------------*/
                                 ;     614 /* Request/Release grant to access the volume                            */
                                 ;     615 /*-----------------------------------------------------------------------*/
                                 ;     616 #if _FS_REENTRANT
                                 ;     617 static
                                 ;     618 int lock_fs (
                                 ;     619 	FATFS* fs		/* File system object */
                                 ;     620 )
                                 ;     621 {
                                 ;     622 	return ff_req_grant(fs->sobj);
                                 ;     623 }
                                 ;     624 
                                 ;     625 
                                 ;     626 static
                                 ;     627 void unlock_fs (
                                 ;     628 	FATFS* fs,		/* File system object */
                                 ;     629 	FRESULT res		/* Result code to be returned */
                                 ;     630 )
                                 ;     631 {
                                 ;     632 	if (fs &&
                                 ;     633 		res != FR_NOT_ENABLED &&
                                 ;     634 		res != FR_INVALID_DRIVE &&
                                 ;     635 		res != FR_INVALID_OBJECT &&
                                 ;     636 		res != FR_TIMEOUT) {
                                 ;     637 		ff_rel_grant(fs->sobj);
                                 ;     638 	}
                                 ;     639 }
                                 ;     640 #endif
                                 ;     641 
                                 ;     642 
                                 ;     643 
                                 ;     644 
                                 ;     645 /*-----------------------------------------------------------------------*/
                                 ;     646 /* File lock control functions                                           */
                                 ;     647 /*-----------------------------------------------------------------------*/
                                 ;     648 #if _FS_LOCK
                                 ;     649 
                                 ;     650 static
                                 ;     651 FRESULT chk_lock (	/* Check if the file can be accessed */
                                 ;     652 	DIR* dp,		/* Directory object pointing the file to be checked */
                                 ;     653 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
                                 ;     654 )
                                 ;     655 {
                                 ;     656 	UINT i, be;
                                 ;     657 
                                 ;     658 	/* Search file semaphore table */
                                 ;     659 	for (i = be = 0; i < _FS_LOCK; i++) {
                                 ;     660 		if (Files[i].fs) {	/* Existing entry */
                                 ;     661 			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
                                 ;     662 				Files[i].clu == dp->sclust &&
                                 ;     663 				Files[i].idx == dp->index) break;
                                 ;     664 		} else {			/* Blank entry */
                                 ;     665 			be = 1;
                                 ;     666 		}
                                 ;     667 	}
                                 ;     668 	if (i == _FS_LOCK)	/* The object is not opened */
                                 ;     669 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new object? */
                                 ;     670 
                                 ;     671 	/* The object has been opened. Reject any open against writing file and all write mode open */
                                 ;     672 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
                                 ;     673 }
                                 ;     674 
                                 ;     675 
                                 ;     676 static
                                 ;     677 int enq_lock (void)	/* Check if an entry is available for a new object */
                                 ;     678 {
                                 ;     679 	UINT i;
                                 ;     680 
                                 ;     681 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
                                 ;     682 	return (i == _FS_LOCK) ? 0 : 1;
                                 ;     683 }
                                 ;     684 
                                 ;     685 
                                 ;     686 static
                                 ;     687 UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
                                 ;     688 	DIR* dp,	/* Directory object pointing the file to register or increment */
                                 ;     689 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
                                 ;     690 )
                                 ;     691 {
                                 ;     692 	UINT i;
                                 ;     693 
                                 ;     694 
                                 ;     695 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
                                 ;     696 		if (Files[i].fs == dp->fs &&
                                 ;     697 			Files[i].clu == dp->sclust &&
                                 ;     698 			Files[i].idx == dp->index) break;
                                 ;     699 	}
                                 ;     700 
                                 ;     701 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
                                 ;     702 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
                                 ;     703 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
                                 ;     704 		Files[i].fs = dp->fs;
                                 ;     705 		Files[i].clu = dp->sclust;
                                 ;     706 		Files[i].idx = dp->index;
                                 ;     707 		Files[i].ctr = 0;
                                 ;     708 	}
                                 ;     709 
                                 ;     710 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
                                 ;     711 
                                 ;     712 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
                                 ;     713 
                                 ;     714 	return i + 1;
                                 ;     715 }
                                 ;     716 
                                 ;     717 
                                 ;     718 static
                                 ;     719 FRESULT dec_lock (	/* Decrement object open counter */
                                 ;     720 	UINT i			/* Semaphore index (1..) */
                                 ;     721 )
                                 ;     722 {
                                 ;     723 	WORD n;
                                 ;     724 	FRESULT res;
                                 ;     725 
                                 ;     726 
                                 ;     727 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
                                 ;     728 		n = Files[i].ctr;
                                 ;     729 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
                                 ;     730 		if (n) n--;					/* Decrement read mode open count */
                                 ;     731 		Files[i].ctr = n;
                                 ;     732 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
                                 ;     733 		res = FR_OK;
                                 ;     734 	} else {
                                 ;     735 		res = FR_INT_ERR;			/* Invalid index nunber */
                                 ;     736 	}
                                 ;     737 	return res;
                                 ;     738 }
                                 ;     739 
                                 ;     740 
                                 ;     741 static
                                 ;     742 void clear_lock (	/* Clear lock entries of the volume */
                                 ;     743 	FATFS *fs
                                 ;     744 )
                                 ;     745 {
                                 ;     746 	UINT i;
                                 ;     747 
                                 ;     748 	for (i = 0; i < _FS_LOCK; i++) {
                                 ;     749 		if (Files[i].fs == fs) Files[i].fs = 0;
                                 ;     750 	}
                                 ;     751 }
                                 ;     752 #endif
                                 ;     753 
                                 ;     754 
                                 ;     755 
                                 ;     756 
                                 ;     757 /*-----------------------------------------------------------------------*/
                                 ;     758 /* Move/Flush disk access window in the file system object               */
                                 ;     759 /*-----------------------------------------------------------------------*/
                                 ;     760 #if !_FS_READONLY
                                 ;     761 static
                                 ;     762 FRESULT sync_window (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",762
000000F5 7100EC                  		ADD #0FFFFFFECH, R0
000000F8 A101                    		MOV.L R1, 10H[R0]
                                 ;     763 	FATFS* fs		/* File system object */
                                 ;     764 )
                                 ;     765 {
                                 ;     766 	DWORD wsect;
                                 ;     767 	UINT nf;
                                 ;     768 	FRESULT res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",768
000000FA 3E0200                  		MOV.L #00000000H, 08H[R0]
000000FD                         L49:	; entry.split
                                 ;     769 
                                 ;     770 
                                 ;     771 	if (fs->wflag) {	/* Write back the sector if it is dirty */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",771
000000FD A901                    		MOV.L 10H[R0], R1
000000FF B111                    		MOVU.B 04H[R1], R1
00000101 6101                    		CMP #00H, R1
00000103 20rr                    		BEQ L59
00000105                         L50:	; bb5
                                 ;     772 		wsect = fs->winsect;	/* Current sector number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",772
00000105 A901                    		MOV.L 10H[R0], R1
00000107 E1100C                  		MOV.L 30H[R1], [R0]
0000010A                         L51:	; bb5.split
                                 ;     773 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",773
0000010A A902                    		MOV.L 10H[R0], R2
0000010C B029                    		MOVU.B 01H[R2], R1
0000010E EC03                    		MOV.L [R0], R3
00000110 712234                  		ADD #34H, R2
00000113 6614                    		MOV.L #00000001H, R4
00000115 05rrrrrr             A  		BSR _disk_write
00000119 6101                    		CMP #00H, R1
0000011B 10                   S  		BEQ L53
0000011C                         L52:	; bb10
                                 ;     774 			res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",774
0000011C 3E0201                  		MOV.L #00000001H, 08H[R0]
0000011F 2Err                 B  		BRA L59
00000121                         L53:	; bb11
                                 ;     775 		} else {
                                 ;     776 			fs->wflag = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",776
00000121 A901                    		MOV.L 10H[R0], R1
00000123 3C1400                  		MOV.B #00H, 04H[R1]
00000126                         L54:	; bb11.split
                                 ;     777 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",777
00000126 A901                    		MOV.L 10H[R0], R1
00000128 EC02                    		MOV.L [R0], R2
0000012A 06811209                		SUB 24H[R1].L, R2
0000012E 06851207                		CMP 1CH[R1].L, R2
00000132 22rr                    		BGEU L59
00000134                         L55:	; bb15
                                 ;     778 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",778
00000134 A901                    		MOV.L 10H[R0], R1
00000136 B099                    		MOVU.B 03H[R1], R1
00000138 A009                    		MOV.L R1, 04H[R0]
0000013A 2Err                 B  		BRA L58
0000013C                         L56:	; bb20
                                 ;     779 					wsect += fs->fsize;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",779
0000013C A901                    		MOV.L 10H[R0], R1
0000013E A999                    		MOV.L 1CH[R1], R1
00000140 068801                  		ADD [R0].L, R1
00000143 E301                    		MOV.L R1, [R0]
00000145                         L57:	; bb20.split
                                 ;     780 					disk_write(fs->drv, fs->win, wsect, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",780
00000145 A902                    		MOV.L 10H[R0], R2
00000147 B029                    		MOVU.B 01H[R2], R1
00000149 EC03                    		MOV.L [R0], R3
0000014B 712234                  		ADD #34H, R2
0000014E 6614                    		MOV.L #00000001H, R4
00000150 05rrrrrr             A  		BSR _disk_write
00000154 A809                    		MOV.L 04H[R0], R1
00000156 6011                    		SUB #01H, R1
00000158 A009                    		MOV.L R1, 04H[R0]
0000015A                         L58:	; bb36
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",778
0000015A A809                    		MOV.L 04H[R0], R1
0000015C 6111                    		CMP #01H, R1
0000015E 24rr                    		BGTU L56
00000160                         L59:	; bb72
                                 ;     781 				}
                                 ;     782 			}
                                 ;     783 		}
                                 ;     784 	}
                                 ;     785 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",785
00000160 A881                    		MOV.L 08H[R0], R1
00000162 A089                    		MOV.L R1, 0CH[R0]
00000164                         L60:	; bb72.split
                                 ;     786 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",786
00000164 6705                    		RTSD #14H
00000166                         __$move_window:
                                 		.STACK	__$move_window=20
                                 ;     787 #endif
                                 ;     788 
                                 ;     789 
                                 ;     790 static
                                 ;     791 FRESULT move_window (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",791
00000166 7100F0                  		ADD #0FFFFFFF0H, R0
00000169 A089                    		MOV.L R1, 0CH[R0]
0000016B A082                    		MOV.L R2, 08H[R0]
                                 ;     792 	FATFS* fs,		/* File system object */
                                 ;     793 	DWORD sector	/* Sector number to make appearance in the fs->win[] */
                                 ;     794 )
                                 ;     795 {
                                 ;     796 	FRESULT res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",796
0000016D F80600                  		MOV.L #00000000H, [R0]
00000170                         L62:	; entry.split
                                 ;     797 
                                 ;     798 
                                 ;     799 	if (sector != fs->winsect) {	/* Window offset changed? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",799
00000170 A889                    		MOV.L 0CH[R0], R1
00000172 A882                    		MOV.L 08H[R0], R2
00000174 0685120C                		CMP 30H[R1].L, R2
00000178 20rr                    		BEQ L69
0000017A                         L63:	; bb4
                                 ;     800 #if !_FS_READONLY
                                 ;     801 		res = sync_window(fs);		/* Write-back changes */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",801
0000017A A889                    		MOV.L 0CH[R0], R1
0000017C 39rrrr               W  		BSR __$sync_window
0000017F E301                    		MOV.L R1, [R0]
00000181                         L64:	; bb4.split
                                 ;     802 #endif
                                 ;     803 		if (res == FR_OK) {			/* Fill sector window with new data */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",803
00000181 EC01                    		MOV.L [R0], R1
00000183 6101                    		CMP #00H, R1
00000185 21rr                    		BNE L69
00000187                         L65:	; bb9
                                 ;     804 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",804
00000187 A88A                    		MOV.L 0CH[R0], R2
00000189 B029                    		MOVU.B 01H[R2], R1
0000018B A883                    		MOV.L 08H[R0], R3
0000018D 712234                  		ADD #34H, R2
00000190 6614                    		MOV.L #00000001H, R4
00000192 05rrrrrr             A  		BSR _disk_read
00000196 6101                    		CMP #00H, R1
00000198 10                   S  		BEQ L68
00000199                         L66:	; bb10
                                 ;     805 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",805
00000199 F90602FF                		MOV.L #0FFFFFFFFH, 08H[R0]
0000019D                         L67:	; bb10.split
                                 ;     806 				res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",806
0000019D F80601                  		MOV.L #00000001H, [R0]
000001A0                         L68:	; bb21
                                 ;     807 			}
                                 ;     808 			fs->winsect = sector;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",808
000001A0 A881                    		MOV.L 08H[R0], R1
000001A2 A88A                    		MOV.L 0CH[R0], R2
000001A4 A321                    		MOV.L R1, 30H[R2]
000001A6                         L69:	; bb37
                                 ;     809 		}
                                 ;     810 	}
                                 ;     811 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",811
000001A6 EC01                    		MOV.L [R0], R1
000001A8 A009                    		MOV.L R1, 04H[R0]
000001AA                         L70:	; bb37.split
                                 ;     812 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",812
000001AA 6704                    		RTSD #10H
000001AC                         __$sync_fs:
                                 		.STACK	__$sync_fs=20
                                 ;     813 
                                 ;     814 
                                 ;     815 
                                 ;     816 
                                 ;     817 /*-----------------------------------------------------------------------*/
                                 ;     818 /* Synchronize file system and strage device                             */
                                 ;     819 /*-----------------------------------------------------------------------*/
                                 ;     820 #if !_FS_READONLY
                                 ;     821 static
                                 ;     822 FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",822
000001AC 7100F0                  		ADD #0FFFFFFF0H, R0
000001AF A089                    		MOV.L R1, 0CH[R0]
                                 ;     823 	FATFS* fs		/* File system object */
                                 ;     824 )
                                 ;     825 {
                                 ;     826 	FRESULT res;
                                 ;     827 
                                 ;     828 
                                 ;     829 	res = sync_window(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",829
000001B1 39rrrr               W  		BSR __$sync_window
000001B4 A009                    		MOV.L R1, 04H[R0]
000001B6                         L72:	; entry.split
                                 ;     830 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",830
000001B6 A809                    		MOV.L 04H[R0], R1
000001B8 6101                    		CMP #00H, R1
000001BA 3Brrrr               W  		BNE L89
000001BD                         L73:	; bb6
                                 ;     831 		/* Update FSINFO sector if needed */
                                 ;     832 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",832
000001BD A889                    		MOV.L 0CH[R0], R1
000001BF 581E                    		MOVU.B [R1], R14
000001C1 613E                    		CMP #03H, R14
000001C3 20rr                    		BEQ L83
000001C5 2Err                 B  		BRA L85
000001C7                         L74:	; bb7
                                 ;     833 			/* Create FSINFO structure */
                                 ;     834 			mem_set(fs->win, 0, SS(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",834
000001C7 A889                    		MOV.L 0CH[R0], R1
000001C9 711134                  		ADD #34H, R1
000001CC FB3A0002                		MOV.L #00000200H, R3
000001D0 6602                    		MOV.L #00000000H, R2
000001D2 39rrrr               W  		BSR __$mem_set
000001D5                         L75:	; bb7.split
                                 ;     835 			ST_WORD(fs->win+BS_55AA, 0xAA55);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",835
000001D5 A889                    		MOV.L 0CH[R0], R1
000001D7 FA19190155AA            		MOV.W #0AA55H, 0232H[R1]
000001DD                         L76:	; bb7.split1
                                 ;     836 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",836
000001DD A889                    		MOV.L 0CH[R0], R1
000001DF F9120D52526141          		MOV.L #41615252H, 34H[R1]
000001E6                         L77:	; bb7.split2
                                 ;     837 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",837
000001E6 A889                    		MOV.L 0CH[R0], R1
000001E8 F9128672724161          		MOV.L #61417272H, 0218H[R1]
000001EF                         L78:	; bb7.split3
                                 ;     838 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",838
000001EF A889                    		MOV.L 0CH[R0], R1
000001F1 E5110487                		MOV.L 10H[R1], 021CH[R1]
000001F5                         L79:	; bb7.split4
                                 ;     839 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",839
000001F5 A889                    		MOV.L 0CH[R0], R1
000001F7 E5110388                		MOV.L 0CH[R1], 0220H[R1]
000001FB                         L80:	; bb7.split5
                                 ;     840 			/* Write it into the FSINFO sector */
                                 ;     841 			fs->winsect = fs->volbase + 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",841
000001FB A889                    		MOV.L 0CH[R0], R1
000001FD AA12                    		MOV.L 20H[R1], R2
000001FF 6212                    		ADD #01H, R2
00000201 A312                    		MOV.L R2, 30H[R1]
00000203                         L81:	; bb7.split6
                                 ;     842 			disk_write(fs->drv, fs->win, fs->winsect, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",842
00000203 A88A                    		MOV.L 0CH[R0], R2
00000205 AB23                    		MOV.L 30H[R2], R3
00000207 B029                    		MOVU.B 01H[R2], R1
00000209 712234                  		ADD #34H, R2
0000020C 6614                    		MOV.L #00000001H, R4
0000020E 05rrrrrr             A  		BSR _disk_write
00000212                         L82:	; bb7.split7
                                 ;     843 			fs->fsi_flag = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",843
00000212 A889                    		MOV.L 0CH[R0], R1
00000214 3C1500                  		MOV.B #00H, 05H[R1]
00000217 2Err                 B  		BRA L87
00000219                         L83:	; bb66
00000219 A889                    		MOV.L 0CH[R0], R1
0000021B B119                    		MOVU.B 05H[R1], R1
0000021D 6111                    		CMP #01H, R1
0000021F 18                   S  		BNE L85
00000220                         L84:	; bb73
00000220 F80601                  		MOV.L #00000001H, [R0]
00000223 08                   S  		BRA L86
00000224                         L85:	; bb74
00000224 F80600                  		MOV.L #00000000H, [R0]
00000227                         L86:	; bb75
00000227 EC01                    		MOV.L [R0], R1
00000229 6101                    		CMP #00H, R1
0000022B 21rr                    		BNE L74
0000022D                         L87:	; bb80
                                 ;     844 		}
                                 ;     845 		/* Make sure that no pending write process in the physical drive */
                                 ;     846 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",846
0000022D A889                    		MOV.L 0CH[R0], R1
0000022F B019                    		MOVU.B 01H[R1], R1
00000231 6602                    		MOV.L #00000000H, R2
00000233 EF23                    		MOV.L R2, R3
00000235 05rrrrrr             A  		BSR _disk_ioctl
00000239 6101                    		CMP #00H, R1
0000023B 10                   S  		BEQ L89
0000023C                         L88:	; bb81
                                 ;     847 			res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",847
0000023C 3E0101                  		MOV.L #00000001H, 04H[R0]
0000023F                         L89:	; bb94
                                 ;     848 	}
                                 ;     849 
                                 ;     850 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",850
0000023F A809                    		MOV.L 04H[R0], R1
00000241 A081                    		MOV.L R1, 08H[R0]
00000243                         L90:	; bb94.split
                                 ;     851 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",851
00000243 6704                    		RTSD #10H
00000245                         _clust2sect:
                                 		.STACK	_clust2sect=20
                                 ;     852 #endif
                                 ;     853 
                                 ;     854 
                                 ;     855 
                                 ;     856 
                                 ;     857 /*-----------------------------------------------------------------------*/
                                 ;     858 /* Get sector# from cluster#                                             */
                                 ;     859 /*-----------------------------------------------------------------------*/
                                 ;     860 /* Hidden API for hacks and disk tools */
                                 ;     861 
                                 ;     862 DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",862
00000245 7100F0                  		ADD #0FFFFFFF0H, R0
00000248 A089                    		MOV.L R1, 0CH[R0]
0000024A A082                    		MOV.L R2, 08H[R0]
                                 ;     863 	FATFS* fs,		/* File system object */
                                 ;     864 	DWORD clst		/* Cluster# to be converted */
                                 ;     865 )
                                 ;     866 {
                                 ;     867 	clst -= 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",867
0000024C 6022                    		SUB #02H, R2
0000024E A082                    		MOV.L R2, 08H[R0]
00000250                         L92:	; entry.split
                                 ;     868 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",868
00000250 A889                    		MOV.L 0CH[R0], R1
00000252 A991                    		MOV.L 18H[R1], R1
00000254 6021                    		SUB #02H, R1
00000256 06850102                		CMP 08H[R0].L, R1
0000025A 24rr                    		BGTU L94
0000025C                         L93:	; bb5
0000025C F80600                  		MOV.L #00000000H, [R0]
0000025F 2Err                 B  		BRA L95
00000261                         L94:	; bb14
                                 ;     869 	return clst * fs->csize + fs->database;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",869
00000261 A889                    		MOV.L 0CH[R0], R1
00000263 B092                    		MOVU.B 02H[R1], R2
00000265 068D0202                		MUL 08H[R0].L, R2
00000269 0689120B                		ADD 2CH[R1].L, R2
0000026D E302                    		MOV.L R2, [R0]
0000026F                         L95:	; bb26
0000026F EC01                    		MOV.L [R0], R1
00000271 A009                    		MOV.L R1, 04H[R0]
                                 ;     870 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",870
00000273 6704                    		RTSD #10H
00000275                         _get_fat:
                                 		.STACK	_get_fat=36
                                 ;     871 
                                 ;     872 
                                 ;     873 
                                 ;     874 
                                 ;     875 /*-----------------------------------------------------------------------*/
                                 ;     876 /* FAT access - Read value of a FAT entry                                */
                                 ;     877 /*-----------------------------------------------------------------------*/
                                 ;     878 /* Hidden API for hacks and disk tools */
                                 ;     879 
                                 ;     880 DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x0FFFFFFF:Cluster status */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",880
00000275 7100E0                  		ADD #0FFFFFFE0H, R0
00000278 A189                    		MOV.L R1, 1CH[R0]
0000027A A182                    		MOV.L R2, 18H[R0]
                                 ;     881 	FATFS* fs,	/* File system object */
                                 ;     882 	DWORD clst	/* FAT item index (cluster#) to get the value */
                                 ;     883 )
                                 ;     884 {
                                 ;     885 	UINT wc, bc;
                                 ;     886 	BYTE *p;
                                 ;     887 	DWORD val;
                                 ;     888 
                                 ;     889 
                                 ;     890 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",890
0000027C 6122                    		CMP #02H, R2
0000027E 22rr                  * 		BLTU L120
         38rrrr                  
00000283 38rrrr               W  		BRA L119
00000286                         L97:	; bb7
                                 ;     891 		val = 1;	/* Internal error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",891
00000286 3E0401                  		MOV.L #00000001H, 10H[R0]
00000289 38rrrr               W  		BRA L123
0000028C                         L98:	; bb8
                                 ;     892 
                                 ;     893 	} else {
                                 ;     894 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",894
0000028C F90604FF                		MOV.L #0FFFFFFFFH, 10H[R0]
00000290                         L99:	; bb8.split
                                 ;     895 
                                 ;     896 		switch (fs->fs_type) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",896
00000290 A989                    		MOV.L 1CH[R0], R1
00000292 581E                    		MOVU.B [R1], R14
00000294 613E                    		CMP #03H, R14
00000296 3Arrrr               W  		BEQ L115
00000299                         L100:	; bb8.split
00000299 612E                    		CMP #02H, R14
0000029B 20rr                    		BEQ L112
0000029D                         L101:	; bb8.split
0000029D 611E                    		CMP #01H, R14
0000029F 3Brrrr               W  		BNE L118
000002A2                         L102:	; bb13
                                 ;     897 		case FS_FAT12 :
                                 ;     898 			bc = (UINT)clst; bc += bc / 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",898
000002A2 E5000602                		MOV.L 18H[R0], 08H[R0]
000002A6                         L103:	; bb13.split
000002A6 A881                    		MOV.L 08H[R0], R1
000002A8 FD811E                  		SHLR #01H, R1, R14
000002AB 4BE1                    		ADD R14, R1
000002AD A081                    		MOV.L R1, 08H[R0]
000002AF                         L104:	; bb13.split1
                                 ;     899 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",899
000002AF A882                    		MOV.L 08H[R0], R2
000002B1 6892                    		SHLR #09H, R2
000002B3 A989                    		MOV.L 1CH[R0], R1
000002B5 06891209                		ADD 24H[R1].L, R2
000002B9 39rrrr               W  		BSR __$move_window
000002BC 6101                    		CMP #00H, R1
000002BE 3Brrrr               W  		BNE L123
000002C1                         L105:	; bb32
                                 ;     900 			wc = fs->win[bc++ % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",900
000002C1 A881                    		MOV.L 08H[R0], R1
000002C3 7621FF01                		AND #01FFH, R1
000002C7 06890107                		ADD 1CH[R0].L, R1
000002CB 591134                  		MOVU.B 34H[R1], R1
000002CE A009                    		MOV.L R1, 04H[R0]
000002D0 A881                    		MOV.L 08H[R0], R1
000002D2 6211                    		ADD #01H, R1
000002D4 A081                    		MOV.L R1, 08H[R0]
000002D6                         L106:	; bb32.split
                                 ;     901 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",901
000002D6 A882                    		MOV.L 08H[R0], R2
000002D8 6892                    		SHLR #09H, R2
000002DA A989                    		MOV.L 1CH[R0], R1
000002DC 06891209                		ADD 24H[R1].L, R2
000002E0 39rrrr               W  		BSR __$move_window
000002E3 6101                    		CMP #00H, R1
000002E5 3Brrrr               W  		BNE L123
000002E8                         L107:	; bb57
                                 ;     902 			wc |= fs->win[bc % SS(fs)] << 8;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",902
000002E8 A881                    		MOV.L 08H[R0], R1
000002EA 7621FF01                		AND #01FFH, R1
000002EE 06890107                		ADD 1CH[R0].L, R1
000002F2 591134                  		MOVU.B 34H[R1], R1
000002F5 6C81                    		SHLL #08H, R1
000002F7 06950101                		OR 04H[R0].L, R1
000002FB A009                    		MOV.L R1, 04H[R0]
000002FD                         L108:	; bb57.split
                                 ;     903 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",903
000002FD A981                    		MOV.L 18H[R0], R1
000002FF 7C01                    		BTST #00H, R1
00000301 A809                    		MOV.L 04H[R0], R1
00000303 10                   S  		BEQ L110
00000304                         L109:	; bb73
00000304 6841                    		SHLR #04H, R1
00000306 E301                    		MOV.L R1, [R0]
00000308 08                   S  		BRA L111
00000309                         L110:	; bb76
00000309 7621FF0F                		AND #0FFFH, R1
0000030D E301                    		MOV.L R1, [R0]
0000030F                         L111:	; bb79
0000030F E40004                  		MOV.L [R0], 10H[R0]
00000312 2Err                 B  		BRA L123
00000314                         L112:	; bb83
                                 ;     904 			break;
                                 ;     905 
                                 ;     906 		case FS_FAT16 :
                                 ;     907 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",907
00000314 A982                    		MOV.L 18H[R0], R2
00000316 6882                    		SHLR #08H, R2
00000318 A989                    		MOV.L 1CH[R0], R1
0000031A 06891209                		ADD 24H[R1].L, R2
0000031E 39rrrr               W  		BSR __$move_window
00000321 6101                    		CMP #00H, R1
00000323 21rr                    		BNE L123
00000325                         L113:	; bb97
                                 ;     908 			p = &fs->win[clst * 2 % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",908
00000325 A981                    		MOV.L 18H[R0], R1
00000327 6C11                    		SHLL #01H, R1
00000329 7621FE01                		AND #01FEH, R1
0000032D 06890107                		ADD 1CH[R0].L, R1
00000331 711134                  		ADD #34H, R1
00000334 A089                    		MOV.L R1, 0CH[R0]
00000336                         L114:	; bb97.split
                                 ;     909 			val = LD_WORD(p);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",909
00000336 A889                    		MOV.L 0CH[R0], R1
00000338 5C11                    		MOVU.W [R1], R1
0000033A A101                    		MOV.L R1, 10H[R0]
0000033C 2Err                 B  		BRA L123
0000033E                         L115:	; bb110
                                 ;     910 			break;
                                 ;     911 
                                 ;     912 		case FS_FAT32 :
                                 ;     913 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",913
0000033E A982                    		MOV.L 18H[R0], R2
00000340 6872                    		SHLR #07H, R2
00000342 A989                    		MOV.L 1CH[R0], R1
00000344 06891209                		ADD 24H[R1].L, R2
00000348 39rrrr               W  		BSR __$move_window
0000034B 6101                    		CMP #00H, R1
0000034D 21rr                    		BNE L123
0000034F                         L116:	; bb124
                                 ;     914 			p = &fs->win[clst * 4 % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",914
0000034F A981                    		MOV.L 18H[R0], R1
00000351 6C21                    		SHLL #02H, R1
00000353 7621FC01                		AND #01FCH, R1
00000357 06890107                		ADD 1CH[R0].L, R1
0000035B 711134                  		ADD #34H, R1
0000035E A089                    		MOV.L R1, 0CH[R0]
00000360                         L117:	; bb124.split
                                 ;     915 			val = LD_DWORD(p) & 0x0FFFFFFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",915
00000360 A889                    		MOV.L 0CH[R0], R1
00000362 EC11                    		MOV.L [R1], R1
00000364 7421FFFFFF0F            		AND #0FFFFFFFH, R1
0000036A A101                    		MOV.L R1, 10H[R0]
0000036C 2Err                 B  		BRA L123
0000036E                         L118:	; bb136
                                 ;     916 			break;
                                 ;     917 
                                 ;     918 		default:
                                 ;     919 			val = 1;	/* Internal error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",919
0000036E 3E0401                  		MOV.L #00000001H, 10H[R0]
00000371 2Err                 B  		BRA L123
00000373                         L119:	; bb142
00000373 A989                    		MOV.L 1CH[R0], R1
00000375 A982                    		MOV.L 18H[R0], R2
00000377 06851206                		CMP 18H[R1].L, R2
0000037B 23rr                    		BLTU L121
0000037D                         L120:	; bb149
0000037D F80601                  		MOV.L #00000001H, [R0]
00000380 08                   S  		BRA L122
00000381                         L121:	; bb150
00000381 F80600                  		MOV.L #00000000H, [R0]
00000384                         L122:	; bb151
00000384 EC01                    		MOV.L [R0], R1
00000386 6101                    		CMP #00H, R1
00000388 3Brrrr               W  		BNE L97
0000038B 38rrrr               W  		BRA L98
0000038E                         L123:	; bb156
                                 ;     920 		}
                                 ;     921 	}
                                 ;     922 
                                 ;     923 	return val;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",923
0000038E A901                    		MOV.L 10H[R0], R1
00000390 A109                    		MOV.L R1, 14H[R0]
00000392                         L124:	; bb156.split
                                 ;     924 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",924
00000392 6708                    		RTSD #20H
00000394                         _put_fat:
                                 		.STACK	_put_fat=36
                                 ;     925 
                                 ;     926 
                                 ;     927 
                                 ;     928 
                                 ;     929 /*-----------------------------------------------------------------------*/
                                 ;     930 /* FAT access - Change value of a FAT entry                              */
                                 ;     931 /*-----------------------------------------------------------------------*/
                                 ;     932 /* Hidden API for hacks and disk tools */
                                 ;     933 
                                 ;     934 #if !_FS_READONLY
                                 ;     935 FRESULT put_fat (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",935
00000394 7100E0                  		ADD #0FFFFFFE0H, R0
00000397 A189                    		MOV.L R1, 1CH[R0]
00000399 A182                    		MOV.L R2, 18H[R0]
0000039B A10B                    		MOV.L R3, 14H[R0]
                                 ;     936 	FATFS* fs,	/* File system object */
                                 ;     937 	DWORD clst,	/* FAT item index (cluster#) to be set */
                                 ;     938 	DWORD val	/* New value to mark the cluster */
                                 ;     939 )
                                 ;     940 {
                                 ;     941 	UINT bc;
                                 ;     942 	BYTE *p;
                                 ;     943 	FRESULT res;
                                 ;     944 
                                 ;     945 
                                 ;     946 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",946
0000039D A981                    		MOV.L 18H[R0], R1
0000039F 6121                    		CMP #02H, R1
000003A1 22rr                  * 		BLTU L159
         38rrrr                  
000003A6 38rrrr               W  		BRA L158
000003A9                         L126:	; bb7
                                 ;     947 		res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",947
000003A9 3E0302                  		MOV.L #00000002H, 0CH[R0]
000003AC 38rrrr               W  		BRA L162
000003AF                         L127:	; bb8
                                 ;     948 
                                 ;     949 	} else {
                                 ;     950 		switch (fs->fs_type) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",950
000003AF A989                    		MOV.L 1CH[R0], R1
000003B1 581E                    		MOVU.B [R1], R14
000003B3 613E                    		CMP #03H, R14
000003B5 3Arrrr               W  		BEQ L151
000003B8                         L128:	; bb8
000003B8 612E                    		CMP #02H, R14
000003BA 3Arrrr               W  		BEQ L146
000003BD                         L129:	; bb8
000003BD 611E                    		CMP #01H, R14
000003BF 3Brrrr               W  		BNE L157
000003C2                         L130:	; bb13
                                 ;     951 		case FS_FAT12 :
                                 ;     952 			bc = (UINT)clst; bc += bc / 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",952
000003C2 E5000601                		MOV.L 18H[R0], 04H[R0]
000003C6                         L131:	; bb13.split
000003C6 A809                    		MOV.L 04H[R0], R1
000003C8 FD811E                  		SHLR #01H, R1, R14
000003CB 4BE1                    		ADD R14, R1
000003CD A009                    		MOV.L R1, 04H[R0]
000003CF                         L132:	; bb13.split1
                                 ;     953 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",953
000003CF A80A                    		MOV.L 04H[R0], R2
000003D1 6892                    		SHLR #09H, R2
000003D3 A989                    		MOV.L 1CH[R0], R1
000003D5 06891209                		ADD 24H[R1].L, R2
000003D9 39rrrr               W  		BSR __$move_window
000003DC A089                    		MOV.L R1, 0CH[R0]
000003DE                         L133:	; bb13.split2
                                 ;     954 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",954
000003DE A889                    		MOV.L 0CH[R0], R1
000003E0 6101                    		CMP #00H, R1
000003E2 3Brrrr               W  		BNE L162
000003E5                         L134:	; bb33
                                 ;     955 			p = &fs->win[bc++ % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",955
000003E5 A809                    		MOV.L 04H[R0], R1
000003E7 7621FF01                		AND #01FFH, R1
000003EB 06890107                		ADD 1CH[R0].L, R1
000003EF 711134                  		ADD #34H, R1
000003F2 A081                    		MOV.L R1, 08H[R0]
000003F4 A809                    		MOV.L 04H[R0], R1
000003F6 6211                    		ADD #01H, R1
000003F8 A009                    		MOV.L R1, 04H[R0]
000003FA                         L135:	; bb33.split
                                 ;     956 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",956
000003FA A981                    		MOV.L 18H[R0], R1
000003FC 7C01                    		BTST #00H, R1
000003FE A881                    		MOV.L 08H[R0], R1
00000400 20rr                    		BEQ L137
00000402                         L136:	; bb47
00000402 B502                    		MOVU.B 14H[R0], R2
00000404 6C42                    		SHLL #04H, R2
00000406 A883                    		MOV.L 08H[R0], R3
00000408 5833                    		MOVU.B [R3], R3
0000040A 64F3                    		AND #0FH, R3
0000040C 5723                    		OR R2, R3
0000040E E303                    		MOV.L R3, [R0]
00000410 08                   S  		BRA L138
00000411                         L137:	; bb57
00000411 B502                    		MOVU.B 14H[R0], R2
00000413 E302                    		MOV.L R2, [R0]
00000415                         L138:	; bb61
00000415 EC02                    		MOV.L [R0], R2
00000417 C312                    		MOV.B R2, [R1]
                                 ;     957 			fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",957
00000419 A989                    		MOV.L 1CH[R0], R1
0000041B 3C1401                  		MOV.B #01H, 04H[R1]
0000041E                         L139:	; bb61.split
                                 ;     958 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",958
0000041E A80A                    		MOV.L 04H[R0], R2
00000420 6892                    		SHLR #09H, R2
00000422 A989                    		MOV.L 1CH[R0], R1
00000424 06891209                		ADD 24H[R1].L, R2
00000428 39rrrr               W  		BSR __$move_window
0000042B A089                    		MOV.L R1, 0CH[R0]
0000042D                         L140:	; bb61.split3
                                 ;     959 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",959
0000042D A889                    		MOV.L 0CH[R0], R1
0000042F 6101                    		CMP #00H, R1
00000431 3Brrrr               W  		BNE L162
00000434                         L141:	; bb82
                                 ;     960 			p = &fs->win[bc % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",960
00000434 A809                    		MOV.L 04H[R0], R1
00000436 7621FF01                		AND #01FFH, R1
0000043A 06890107                		ADD 1CH[R0].L, R1
0000043E 711134                  		ADD #34H, R1
00000441 A081                    		MOV.L R1, 08H[R0]
00000443                         L142:	; bb82.split
                                 ;     961 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",961
00000443 A981                    		MOV.L 18H[R0], R1
00000445 7C01                    		BTST #00H, R1
00000447 A881                    		MOV.L 08H[R0], R1
00000449 20rr                    		BEQ L144
0000044B                         L143:	; bb94
0000044B A90A                    		MOV.L 14H[R0], R2
0000044D 6842                    		SHLR #04H, R2
0000044F 5B22                    		MOVU.B R2, R2
00000451 E302                    		MOV.L R2, [R0]
00000453 2Err                 B  		BRA L145
00000455                         L144:	; bb99
00000455 7542F0                  		MOV.L #000000F0H, R2
00000458 A883                    		MOV.L 08H[R0], R3
0000045A 5032                    		AND [R3].UB, R2
0000045C B50B                    		MOVU.B 15H[R0], R3
0000045E 64F3                    		AND #0FH, R3
00000460 5732                    		OR R3, R2
00000462 E302                    		MOV.L R2, [R0]
00000464                         L145:	; bb110
00000464 EC02                    		MOV.L [R0], R2
00000466 C312                    		MOV.B R2, [R1]
                                 ;     962 			fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",962
00000468 A989                    		MOV.L 1CH[R0], R1
0000046A 3C1401                  		MOV.B #01H, 04H[R1]
0000046D 38rrrr               W  		BRA L162
00000470                         L146:	; bb116
                                 ;     963 			break;
                                 ;     964 
                                 ;     965 		case FS_FAT16 :
                                 ;     966 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",966
00000470 A982                    		MOV.L 18H[R0], R2
00000472 6882                    		SHLR #08H, R2
00000474 A989                    		MOV.L 1CH[R0], R1
00000476 06891209                		ADD 24H[R1].L, R2
0000047A 39rrrr               W  		BSR __$move_window
0000047D A089                    		MOV.L R1, 0CH[R0]
0000047F                         L147:	; bb116.split
                                 ;     967 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",967
0000047F A889                    		MOV.L 0CH[R0], R1
00000481 6101                    		CMP #00H, R1
00000483 3Brrrr               W  		BNE L162
00000486                         L148:	; bb132
                                 ;     968 			p = &fs->win[clst * 2 % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",968
00000486 A981                    		MOV.L 18H[R0], R1
00000488 6C11                    		SHLL #01H, R1
0000048A 7621FE01                		AND #01FEH, R1
0000048E 06890107                		ADD 1CH[R0].L, R1
00000492 711134                  		ADD #34H, R1
00000495 A081                    		MOV.L R1, 08H[R0]
00000497                         L149:	; bb132.split
                                 ;     969 			ST_WORD(p, (WORD)val);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",969
00000497 A909                    		MOV.L 14H[R0], R1
00000499 A882                    		MOV.L 08H[R0], R2
0000049B D321                    		MOV.W R1, [R2]
0000049D                         L150:	; bb132.split4
                                 ;     970 			fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",970
0000049D A989                    		MOV.L 1CH[R0], R1
0000049F 3C1401                  		MOV.B #01H, 04H[R1]
000004A2 2Err                 B  		BRA L162
000004A4                         L151:	; bb146
                                 ;     971 			break;
                                 ;     972 
                                 ;     973 		case FS_FAT32 :
                                 ;     974 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",974
000004A4 A982                    		MOV.L 18H[R0], R2
000004A6 6872                    		SHLR #07H, R2
000004A8 A989                    		MOV.L 1CH[R0], R1
000004AA 06891209                		ADD 24H[R1].L, R2
000004AE 39rrrr               W  		BSR __$move_window
000004B1 A089                    		MOV.L R1, 0CH[R0]
000004B3                         L152:	; bb146.split
                                 ;     975 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",975
000004B3 A889                    		MOV.L 0CH[R0], R1
000004B5 6101                    		CMP #00H, R1
000004B7 21rr                    		BNE L162
000004B9                         L153:	; bb162
                                 ;     976 			p = &fs->win[clst * 4 % SS(fs)];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",976
000004B9 A981                    		MOV.L 18H[R0], R1
000004BB 6C21                    		SHLL #02H, R1
000004BD 7621FC01                		AND #01FCH, R1
000004C1 06890107                		ADD 1CH[R0].L, R1
000004C5 711134                  		ADD #34H, R1
000004C8 A081                    		MOV.L R1, 08H[R0]
000004CA                         L154:	; bb162.split
                                 ;     977 			val |= LD_DWORD(p) & 0xF0000000;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",977
000004CA A881                    		MOV.L 08H[R0], R1
000004CC EC11                    		MOV.L [R1], R1
000004CE 7421000000F0            		AND #0F0000000H, R1
000004D4 06950105                		OR 14H[R0].L, R1
000004D8 A109                    		MOV.L R1, 14H[R0]
000004DA                         L155:	; bb162.split5
                                 ;     978 			ST_DWORD(p, val);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",978
000004DA A909                    		MOV.L 14H[R0], R1
000004DC A882                    		MOV.L 08H[R0], R2
000004DE E321                    		MOV.L R1, [R2]
000004E0                         L156:	; bb162.split6
                                 ;     979 			fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",979
000004E0 A989                    		MOV.L 1CH[R0], R1
000004E2 3C1401                  		MOV.B #01H, 04H[R1]
000004E5 2Err                 B  		BRA L162
000004E7                         L157:	; bb181
                                 ;     980 			break;
                                 ;     981 
                                 ;     982 		default :
                                 ;     983 			res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",983
000004E7 3E0302                  		MOV.L #00000002H, 0CH[R0]
000004EA 2Err                 B  		BRA L162
000004EC                         L158:	; bb187
000004EC A989                    		MOV.L 1CH[R0], R1
000004EE A982                    		MOV.L 18H[R0], R2
000004F0 06851206                		CMP 18H[R1].L, R2
000004F4 23rr                    		BLTU L160
000004F6                         L159:	; bb194
000004F6 F80601                  		MOV.L #00000001H, [R0]
000004F9 08                   S  		BRA L161
000004FA                         L160:	; bb195
000004FA F80600                  		MOV.L #00000000H, [R0]
000004FD                         L161:	; bb196
000004FD EC01                    		MOV.L [R0], R1
000004FF 6101                    		CMP #00H, R1
00000501 3Brrrr               W  		BNE L126
00000504 38rrrr               W  		BRA L127
00000507                         L162:	; bb201
                                 ;     984 		}
                                 ;     985 	}
                                 ;     986 
                                 ;     987 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",987
00000507 A889                    		MOV.L 0CH[R0], R1
00000509 A101                    		MOV.L R1, 10H[R0]
0000050B                         L163:	; bb201.split
                                 ;     988 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",988
0000050B 6708                    		RTSD #20H
0000050D                         __$remove_chain:
                                 		.STACK	__$remove_chain=28
                                 ;     989 #endif /* !_FS_READONLY */
                                 ;     990 
                                 ;     991 
                                 ;     992 
                                 ;     993 
                                 ;     994 /*-----------------------------------------------------------------------*/
                                 ;     995 /* FAT handling - Remove a cluster chain                                 */
                                 ;     996 /*-----------------------------------------------------------------------*/
                                 ;     997 #if !_FS_READONLY
                                 ;     998 static
                                 ;     999 FRESULT remove_chain (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",999
0000050D 7100E8                  		ADD #0FFFFFFE8H, R0
00000510 A109                    		MOV.L R1, 14H[R0]
00000512 A102                    		MOV.L R2, 10H[R0]
                                 ;    1000 	FATFS* fs,			/* File system object */
                                 ;    1001 	DWORD clst			/* Cluster# to remove a chain from */
                                 ;    1002 )
                                 ;    1003 {
                                 ;    1004 	FRESULT res;
                                 ;    1005 	DWORD nxt;
                                 ;    1006 #if _USE_TRIM
                                 ;    1007 	DWORD scl = clst, ecl = clst, rt[2];
                                 ;    1008 #endif
                                 ;    1009 
                                 ;    1010 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1010
00000514 6122                    		CMP #02H, R2
00000516 23rr                    		BLTU L181
00000518 2Err                 B  		BRA L180
0000051A                         L165:	; bb5
                                 ;    1011 		res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1011
0000051A 3E0102                  		MOV.L #00000002H, 04H[R0]
0000051D 2Err                 B  		BRA L184
0000051F                         L166:	; bb6
                                 ;    1012 
                                 ;    1013 	} else {
                                 ;    1014 		res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1014
0000051F 3E0100                  		MOV.L #00000000H, 04H[R0]
00000522 2Err                 B  		BRA L179
00000524                         L167:	; bb7
                                 ;    1015 		while (clst < fs->n_fatent) {			/* Not a last link? */
                                 ;    1016 			nxt = get_fat(fs, clst);			/* Get cluster status */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1016
00000524 A902                    		MOV.L 10H[R0], R2
00000526 A909                    		MOV.L 14H[R0], R1
00000528 39rrrr               W  		BSR _get_fat
0000052B A081                    		MOV.L R1, 08H[R0]
0000052D                         L168:	; bb7.split
                                 ;    1017 			if (nxt == 0) break;				/* Empty cluster? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1017
0000052D A881                    		MOV.L 08H[R0], R1
0000052F 6101                    		CMP #00H, R1
00000531 20rr                    		BEQ L184
00000533                         L169:	; bb18
                                 ;    1018 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1018
00000533 A881                    		MOV.L 08H[R0], R1
00000535 6111                    		CMP #01H, R1
00000537 18                   S  		BNE L171
00000538                         L170:	; bb19
00000538 3E0102                  		MOV.L #00000002H, 04H[R0]
0000053B 2Err                 B  		BRA L184
0000053D                         L171:	; bb26
                                 ;    1019 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1019
0000053D A881                    		MOV.L 08H[R0], R1
0000053F 7501FF                  		CMP #0FFFFFFFFH, R1
00000542 18                   S  		BNE L173
00000543                         L172:	; bb27
00000543 3E0101                  		MOV.L #00000001H, 04H[R0]
00000546 2Err                 B  		BRA L184
00000548                         L173:	; bb33
                                 ;    1020 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1020
00000548 A902                    		MOV.L 10H[R0], R2
0000054A A909                    		MOV.L 14H[R0], R1
0000054C 6603                    		MOV.L #00000000H, R3
0000054E 39rrrr               W  		BSR _put_fat
00000551 A009                    		MOV.L R1, 04H[R0]
00000553                         L174:	; bb33.split
                                 ;    1021 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1021
00000553 A809                    		MOV.L 04H[R0], R1
00000555 6101                    		CMP #00H, R1
00000557 21rr                    		BNE L184
00000559                         L175:	; bb45
                                 ;    1022 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1022
00000559 A909                    		MOV.L 14H[R0], R1
0000055B A911                    		MOV.L 10H[R1], R1
0000055D 7501FF                  		CMP #0FFFFFFFFH, R1
00000560 20rr                    		BEQ L178
00000562                         L176:	; bb46
                                 ;    1023 				fs->free_clust++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1023
00000562 A909                    		MOV.L 14H[R0], R1
00000564 A912                    		MOV.L 10H[R1], R2
00000566 6212                    		ADD #01H, R2
00000568 A112                    		MOV.L R2, 10H[R1]
0000056A                         L177:	; bb46.split
                                 ;    1024 				fs->fsi_flag |= 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1024
0000056A A909                    		MOV.L 14H[R0], R1
0000056C F11005                  		BSET #00H, 05H[R1].B
0000056F                         L178:	; bb63
                                 ;    1025 			}
                                 ;    1026 #if _USE_TRIM
                                 ;    1027 			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
                                 ;    1028 				ecl = nxt;
                                 ;    1029 			} else {				/* End of contiguous clusters */ 
                                 ;    1030 				rt[0] = clust2sect(fs, scl);					/* Start sector */
                                 ;    1031 				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
                                 ;    1032 				disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Erase the block */
                                 ;    1033 				scl = ecl = nxt;
                                 ;    1034 			}
                                 ;    1035 #endif
                                 ;    1036 			clst = nxt;	/* Next cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1036
0000056F E5000204                		MOV.L 08H[R0], 10H[R0]
00000573                         L179:	; bb65
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1015
00000573 A909                    		MOV.L 14H[R0], R1
00000575 A902                    		MOV.L 10H[R0], R2
00000577 06851206                		CMP 18H[R1].L, R2
0000057B 23rr                    		BLTU L167
0000057D 2Err                 B  		BRA L184
0000057F                         L180:	; bb78
0000057F A909                    		MOV.L 14H[R0], R1
00000581 A902                    		MOV.L 10H[R0], R2
00000583 06851206                		CMP 18H[R1].L, R2
00000587 23rr                    		BLTU L182
00000589                         L181:	; bb85
00000589 F80601                  		MOV.L #00000001H, [R0]
0000058C 08                   S  		BRA L183
0000058D                         L182:	; bb86
0000058D F80600                  		MOV.L #00000000H, [R0]
00000590                         L183:	; bb87
00000590 EC01                    		MOV.L [R0], R1
00000592 6101                    		CMP #00H, R1
00000594 21rr                    		BNE L165
00000596 2Err                 B  		BRA L166
00000598                         L184:	; bb92
                                 ;    1037 		}
                                 ;    1038 	}
                                 ;    1039 
                                 ;    1040 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1040
00000598 A809                    		MOV.L 04H[R0], R1
0000059A A089                    		MOV.L R1, 0CH[R0]
0000059C                         L185:	; bb92.split
                                 ;    1041 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1041
0000059C 6706                    		RTSD #18H
0000059E                         __$create_chain:
                                 		.STACK	__$create_chain=40
                                 ;    1042 #endif
                                 ;    1043 
                                 ;    1044 
                                 ;    1045 
                                 ;    1046 
                                 ;    1047 /*-----------------------------------------------------------------------*/
                                 ;    1048 /* FAT handling - Stretch or Create a cluster chain                      */
                                 ;    1049 /*-----------------------------------------------------------------------*/
                                 ;    1050 #if !_FS_READONLY
                                 ;    1051 static
                                 ;    1052 DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster# */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1052
0000059E 7100DC                  		ADD #0FFFFFFDCH, R0
000005A1 A201                    		MOV.L R1, 20H[R0]
000005A3 A18A                    		MOV.L R2, 1CH[R0]
                                 ;    1053 	FATFS* fs,			/* File system object */
                                 ;    1054 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
                                 ;    1055 )
                                 ;    1056 {
                                 ;    1057 	DWORD cs, ncl, scl;
                                 ;    1058 	FRESULT res;
                                 ;    1059 
                                 ;    1060 
                                 ;    1061 	if (clst == 0) {		/* Create a new chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1061
000005A5 6102                    		CMP #00H, R2
000005A7 AA01                    		MOV.L 20H[R0], R1
000005A9 21rr                    		BNE L197
000005AB                         L187:	; bb7
                                 ;    1062 		scl = fs->last_clust;			/* Get suggested start point */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1062
000005AB E5100304                		MOV.L 0CH[R1], 10H[R0]
000005AF                         L188:	; bb7.split
                                 ;    1063 		if (!scl || scl >= fs->n_fatent) scl = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1063
000005AF A901                    		MOV.L 10H[R0], R1
000005B1 6101                    		CMP #00H, R1
000005B3 18                   S  		BNE L190
000005B4 08                   S  		BRA L191
000005B5                         L189:	; bb12
000005B5 3E0401                  		MOV.L #00000001H, 10H[R0]
000005B8 2Err                 B  		BRA L205
000005BA                         L190:	; bb16
000005BA F80600                  		MOV.L #00000000H, [R0]
000005BD 08                   S  		BRA L192
000005BE                         L191:	; bb17
000005BE F80601                  		MOV.L #00000001H, [R0]
000005C1                         L192:	; bb18
000005C1 EC01                    		MOV.L [R0], R1
000005C3 6101                    		CMP #00H, R1
000005C5 21rr                    		BNE L194
000005C7                         L193:	; bb20
000005C7 AA01                    		MOV.L 20H[R0], R1
000005C9 A902                    		MOV.L 10H[R0], R2
000005CB 06851206                		CMP 18H[R1].L, R2
000005CF 23rr                    		BLTU L195
000005D1                         L194:	; bb27
000005D1 F80601                  		MOV.L #00000001H, [R0]
000005D4 08                   S  		BRA L196
000005D5                         L195:	; bb28
000005D5 F80600                  		MOV.L #00000000H, [R0]
000005D8                         L196:	; bb29
000005D8 EC01                    		MOV.L [R0], R1
000005DA 6101                    		CMP #00H, R1
000005DC 21rr                    		BNE L189
000005DE 2Err                 B  		BRA L205
000005E0                         L197:	; bb35
                                 ;    1064 	}
                                 ;    1065 	else {					/* Stretch the current chain */
                                 ;    1066 		cs = get_fat(fs, clst);			/* Check the cluster status */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1066
000005E0 A98A                    		MOV.L 1CH[R0], R2
000005E2 39rrrr               W  		BSR _get_fat
000005E5 A081                    		MOV.L R1, 08H[R0]
000005E7                         L198:	; bb35.split
                                 ;    1067 		if (cs < 2) return 1;			/* Invalid value */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1067
000005E7 A881                    		MOV.L 08H[R0], R1
000005E9 6111                    		CMP #01H, R1
000005EB 24rr                    		BGTU L200
000005ED                         L199:	; bb40
000005ED 3E0101                  		MOV.L #00000001H, 04H[R0]
000005F0 38rrrr               W  		BRA L238
000005F3                         L200:	; bb47
                                 ;    1068 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1068
000005F3 A881                    		MOV.L 08H[R0], R1
000005F5 7501FF                  		CMP #0FFFFFFFFH, R1
000005F8 18                   S  		BNE L202
000005F9                         L201:	; bb48
000005F9 A009                    		MOV.L R1, 04H[R0]
000005FB 38rrrr               W  		BRA L238
000005FE                         L202:	; bb56
                                 ;    1069 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1069
000005FE AA02                    		MOV.L 20H[R0], R2
00000600 06852106                		CMP 18H[R2].L, R1
00000604 22rr                    		BGEU L204
00000606                         L203:	; bb57
00000606 E5000201                		MOV.L 08H[R0], 04H[R0]
0000060A 38rrrr               W  		BRA L238
0000060D                         L204:	; bb67
                                 ;    1070 		scl = clst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1070
0000060D E5000704                		MOV.L 1CH[R0], 10H[R0]
00000611                         L205:	; bb73
                                 ;    1071 	}
                                 ;    1072 
                                 ;    1073 	ncl = scl;				/* Start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1073
00000611 E5000403                		MOV.L 10H[R0], 0CH[R0]
00000615 2Err                 B  		BRA L219
00000617                         L206:	; bb79
                                 ;    1074 	for (;;) {
                                 ;    1075 		ncl++;							/* Next cluster */
                                 ;    1076 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
                                 ;    1077 			ncl = 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1077
00000617 3E0302                  		MOV.L #00000002H, 0CH[R0]
0000061A                         L207:	; bb79.split
                                 ;    1078 			if (ncl > scl) return 0;	/* No free cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1078
0000061A A889                    		MOV.L 0CH[R0], R1
0000061C 06850104                		CMP 10H[R0].L, R1
00000620 25rr                    		BLEU L209
00000622                         L208:	; bb81
00000622 3E0100                  		MOV.L #00000000H, 04H[R0]
00000625 38rrrr               W  		BRA L238
00000628                         L209:	; bb96
                                 ;    1079 		}
                                 ;    1080 		cs = get_fat(fs, ncl);			/* Get the cluster status */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1080
00000628 A88A                    		MOV.L 0CH[R0], R2
0000062A AA01                    		MOV.L 20H[R0], R1
0000062C 39rrrr               W  		BSR _get_fat
0000062F A081                    		MOV.L R1, 08H[R0]
00000631                         L210:	; bb96.split
                                 ;    1081 		if (cs == 0) break;				/* Found a free cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1081
00000631 A881                    		MOV.L 08H[R0], R1
00000633 6101                    		CMP #00H, R1
00000635 20rr                    		BEQ L221
00000637                         L211:	; bb108
                                 ;    1082 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1082
00000637 A881                    		MOV.L 08H[R0], R1
00000639 7501FF                  		CMP #0FFFFFFFFH, R1
0000063C 20rr                    		BEQ L214
0000063E 08                   S  		BRA L213
0000063F                         L212:	; bb109
                                 ;    1083 			return cs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1083
0000063F E5000201                		MOV.L 08H[R0], 04H[R0]
00000643 38rrrr               W  		BRA L238
00000646                         L213:	; bb115
00000646 A881                    		MOV.L 08H[R0], R1
00000648 6111                    		CMP #01H, R1
0000064A 18                   S  		BNE L215
0000064B                         L214:	; bb119
0000064B F80601                  		MOV.L #00000001H, [R0]
0000064E 08                   S  		BRA L216
0000064F                         L215:	; bb120
0000064F F80600                  		MOV.L #00000000H, [R0]
00000652                         L216:	; bb121
00000652 EC01                    		MOV.L [R0], R1
00000654 6101                    		CMP #00H, R1
00000656 21rr                    		BNE L212
00000658                         L217:	; bb127
                                 ;    1084 		if (ncl == scl) return 0;		/* No free cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1084
00000658 A889                    		MOV.L 0CH[R0], R1
0000065A 06850104                		CMP 10H[R0].L, R1
0000065E 18                   S  		BNE L219
0000065F                         L218:	; bb128
0000065F 3E0100                  		MOV.L #00000000H, 04H[R0]
00000662 38rrrr               W  		BRA L238
00000665                         L219:	; bb136.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1075
00000665 A889                    		MOV.L 0CH[R0], R1
00000667 6211                    		ADD #01H, R1
00000669 A089                    		MOV.L R1, 0CH[R0]
0000066B                         L220:	; bb136.split1
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1076
0000066B AA01                    		MOV.L 20H[R0], R1
0000066D A88A                    		MOV.L 0CH[R0], R2
0000066F 06851206                		CMP 18H[R1].L, R2
00000673 22rr                    		BGEU L206
00000675 2Err                 B  		BRA L209
00000677                         L221:	; bb138
                                 ;    1085 	}
                                 ;    1086 
                                 ;    1087 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1087
00000677 A88A                    		MOV.L 0CH[R0], R2
00000679 AA01                    		MOV.L 20H[R0], R1
0000067B FB32FFFFFF0F            		MOV.L #0FFFFFFFH, R3
00000681 39rrrr               W  		BSR _put_fat
00000684 A109                    		MOV.L R1, 14H[R0]
00000686                         L222:	; bb138.split
                                 ;    1088 	if (res == FR_OK && clst != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1088
00000686 A909                    		MOV.L 14H[R0], R1
00000688 6101                    		CMP #00H, R1
0000068A 20rr                    		BEQ L224
0000068C 2Err                 B  		BRA L226
0000068E                         L223:	; bb143
                                 ;    1089 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1089
0000068E A88B                    		MOV.L 0CH[R0], R3
00000690 A98A                    		MOV.L 1CH[R0], R2
00000692 AA01                    		MOV.L 20H[R0], R1
00000694 39rrrr               W  		BSR _put_fat
00000697 A109                    		MOV.L R1, 14H[R0]
00000699 2Err                 B  		BRA L228
0000069B                         L224:	; bb151
0000069B A989                    		MOV.L 1CH[R0], R1
0000069D 6101                    		CMP #00H, R1
0000069F 10                   S  		BEQ L226
000006A0                         L225:	; bb155
000006A0 F80601                  		MOV.L #00000001H, [R0]
000006A3 08                   S  		BRA L227
000006A4                         L226:	; bb156
000006A4 F80600                  		MOV.L #00000000H, [R0]
000006A7                         L227:	; bb157
000006A7 EC01                    		MOV.L [R0], R1
000006A9 6101                    		CMP #00H, R1
000006AB 21rr                    		BNE L223
000006AD                         L228:	; bb163
                                 ;    1090 	}
                                 ;    1091 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1091
000006AD A909                    		MOV.L 14H[R0], R1
000006AF 6101                    		CMP #00H, R1
000006B1 21rr                    		BNE L233
000006B3                         L229:	; bb164
                                 ;    1092 		fs->last_clust = ncl;			/* Update FSINFO */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1092
000006B3 A889                    		MOV.L 0CH[R0], R1
000006B5 AA02                    		MOV.L 20H[R0], R2
000006B7 A0A9                    		MOV.L R1, 0CH[R2]
000006B9                         L230:	; bb164.split
                                 ;    1093 		if (fs->free_clust != 0xFFFFFFFF) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1093
000006B9 AA01                    		MOV.L 20H[R0], R1
000006BB A911                    		MOV.L 10H[R1], R1
000006BD 7501FF                  		CMP #0FFFFFFFFH, R1
000006C0 20rr                    		BEQ L237
000006C2                         L231:	; bb169
                                 ;    1094 			fs->free_clust--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1094
000006C2 AA01                    		MOV.L 20H[R0], R1
000006C4 A912                    		MOV.L 10H[R1], R2
000006C6 6012                    		SUB #01H, R2
000006C8 A112                    		MOV.L R2, 10H[R1]
000006CA                         L232:	; bb169.split
                                 ;    1095 			fs->fsi_flag |= 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1095
000006CA AA01                    		MOV.L 20H[R0], R1
000006CC F11005                  		BSET #00H, 05H[R1].B
000006CF 2Err                 B  		BRA L237
000006D1                         L233:	; bb187
                                 ;    1096 		}
                                 ;    1097 	} else {
                                 ;    1098 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1098
000006D1 A909                    		MOV.L 14H[R0], R1
000006D3 6111                    		CMP #01H, R1
000006D5 18                   S  		BNE L235
000006D6                         L234:	; bb191
000006D6 F806FF                  		MOV.L #0FFFFFFFFH, [R0]
000006D9 08                   S  		BRA L236
000006DA                         L235:	; bb192
000006DA F80601                  		MOV.L #00000001H, [R0]
000006DD                         L236:	; bb193
000006DD E40003                  		MOV.L [R0], 0CH[R0]
000006E0                         L237:	; bb200
                                 ;    1099 	}
                                 ;    1100 
                                 ;    1101 	return ncl;		/* Return new cluster number or error code */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1101
000006E0 E5000301                		MOV.L 0CH[R0], 04H[R0]
000006E4                         L238:	; bb203
000006E4 A809                    		MOV.L 04H[R0], R1
000006E6 A181                    		MOV.L R1, 18H[R0]
                                 ;    1102 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1102
000006E8 6709                    		RTSD #24H
000006EA                         __$dir_sdi:
                                 		.STACK	__$dir_sdi=36
                                 ;    1103 #endif /* !_FS_READONLY */
                                 ;    1104 
                                 ;    1105 
                                 ;    1106 
                                 ;    1107 
                                 ;    1108 /*-----------------------------------------------------------------------*/
                                 ;    1109 /* FAT handling - Convert offset into cluster with link map table        */
                                 ;    1110 /*-----------------------------------------------------------------------*/
                                 ;    1111 
                                 ;    1112 #if _USE_FASTSEEK
                                 ;    1113 static
                                 ;    1114 DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
                                 ;    1115 	FIL* fp,		/* Pointer to the file object */
                                 ;    1116 	DWORD ofs		/* File offset to be converted to cluster# */
                                 ;    1117 )
                                 ;    1118 {
                                 ;    1119 	DWORD cl, ncl, *tbl;
                                 ;    1120 
                                 ;    1121 
                                 ;    1122 	tbl = fp->cltbl + 1;	/* Top of CLMT */
                                 ;    1123 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
                                 ;    1124 	for (;;) {
                                 ;    1125 		ncl = *tbl++;			/* Number of cluters in the fragment */
                                 ;    1126 		if (!ncl) return 0;		/* End of table? (error) */
                                 ;    1127 		if (cl < ncl) break;	/* In this fragment? */
                                 ;    1128 		cl -= ncl; tbl++;		/* Next fragment */
                                 ;    1129 	}
                                 ;    1130 	return cl + *tbl;	/* Return the cluster number */
                                 ;    1131 }
                                 ;    1132 #endif	/* _USE_FASTSEEK */
                                 ;    1133 
                                 ;    1134 
                                 ;    1135 
                                 ;    1136 
                                 ;    1137 /*-----------------------------------------------------------------------*/
                                 ;    1138 /* Directory handling - Set directory index                              */
                                 ;    1139 /*-----------------------------------------------------------------------*/
                                 ;    1140 
                                 ;    1141 static
                                 ;    1142 FRESULT dir_sdi (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1142
000006EA 7100E0                  		ADD #0FFFFFFE0H, R0
000006ED A189                    		MOV.L R1, 1CH[R0]
000006EF A182                    		MOV.L R2, 18H[R0]
                                 ;    1143 	DIR* dp,		/* Pointer to directory object */
                                 ;    1144 	UINT idx		/* Index of directory table */
                                 ;    1145 )
                                 ;    1146 {
                                 ;    1147 	DWORD clst, sect;
                                 ;    1148 	UINT ic;
                                 ;    1149 
                                 ;    1150 
                                 ;    1151 	dp->index = (WORD)idx;	/* Current index */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1151
000006F1 A989                    		MOV.L 1CH[R0], R1
000006F3 909A                    		MOV.W R2, 06H[R1]
000006F5                         L240:	; entry.split
                                 ;    1152 	clst = dp->sclust;		/* Table start cluster (0:root) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1152
000006F5 A989                    		MOV.L 1CH[R0], R1
000006F7 E5100202                		MOV.L 08H[R1], 08H[R0]
000006FB                         L241:	; entry.split1
                                 ;    1153 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1153
000006FB A881                    		MOV.L 08H[R0], R1
000006FD 6111                    		CMP #01H, R1
000006FF 20rr                    		BEQ L244
00000701 08                   S  		BRA L243
00000702                         L242:	; bb13
                                 ;    1154 		return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1154
00000702 3E0102                  		MOV.L #00000002H, 04H[R0]
00000705 38rrrr               W  		BRA L282
00000708                         L243:	; bb18
00000708 A989                    		MOV.L 1CH[R0], R1
0000070A EC1E                    		MOV.L [R1], R14
0000070C A881                    		MOV.L 08H[R0], R1
0000070E 0685E106                		CMP 18H[R14].L, R1
00000712 23rr                    		BLTU L245
00000714                         L244:	; bb27
00000714 F80601                  		MOV.L #00000001H, [R0]
00000717 08                   S  		BRA L246
00000718                         L245:	; bb28
00000718 F80600                  		MOV.L #00000000H, [R0]
0000071B                         L246:	; bb29
0000071B EC01                    		MOV.L [R0], R1
0000071D 6101                    		CMP #00H, R1
0000071F 21rr                    		BNE L242
00000721                         L247:	; bb34
                                 ;    1155 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1155
00000721 A881                    		MOV.L 08H[R0], R1
00000723 6101                    		CMP #00H, R1
00000725 21rr                    		BNE L249
00000727 2Err                 B  		BRA L250
00000729                         L248:	; bb35
                                 ;    1156 		clst = dp->fs->dirbase;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1156
00000729 A989                    		MOV.L 1CH[R0], R1
0000072B EC11                    		MOV.L [R1], R1
0000072D E5100A02                		MOV.L 28H[R1], 08H[R0]
00000731 2Err                 B  		BRA L256
00000733                         L249:	; bb44
00000733 F80600                  		MOV.L #00000000H, [R0]
00000736 08                   S  		BRA L251
00000737                         L250:	; bb45
00000737 F80601                  		MOV.L #00000001H, [R0]
0000073A                         L251:	; bb46
0000073A EC01                    		MOV.L [R0], R1
0000073C 6101                    		CMP #00H, R1
0000073E 20rr                    		BEQ L254
00000740                         L252:	; bb49
00000740 A989                    		MOV.L 1CH[R0], R1
00000742 EC1E                    		MOV.L [R1], R14
00000744 58EE                    		MOVU.B [R14], R14
00000746 613E                    		CMP #03H, R14
00000748 18                   S  		BNE L254
00000749                         L253:	; bb58
00000749 F80601                  		MOV.L #00000001H, [R0]
0000074C 08                   S  		BRA L255
0000074D                         L254:	; bb59
0000074D F80600                  		MOV.L #00000000H, [R0]
00000750                         L255:	; bb60
00000750 EC01                    		MOV.L [R0], R1
00000752 6101                    		CMP #00H, R1
00000754 21rr                    		BNE L248
00000756                         L256:	; bb66
                                 ;    1157 
                                 ;    1158 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1158
00000756 A881                    		MOV.L 08H[R0], R1
00000758 6101                    		CMP #00H, R1
0000075A 21rr                    		BNE L260
0000075C                         L257:	; bb68
                                 ;    1159 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1159
0000075C A989                    		MOV.L 1CH[R0], R1
0000075E EC11                    		MOV.L [R1], R1
00000760 B911                    		MOVU.W 08H[R1], R1
00000762 06850106                		CMP 18H[R0].L, R1
00000766 24rr                    		BGTU L259
00000768                         L258:	; bb69
                                 ;    1160 			return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1160
00000768 3E0102                  		MOV.L #00000002H, 04H[R0]
0000076B 38rrrr               W  		BRA L282
0000076E                         L259:	; bb81
                                 ;    1161 		sect = dp->fs->dirbase;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1161
0000076E A989                    		MOV.L 1CH[R0], R1
00000770 EC11                    		MOV.L [R1], R1
00000772 E5100A03                		MOV.L 28H[R1], 0CH[R0]
00000776 2Err                 B  		BRA L273
00000778                         L260:	; bb87
                                 ;    1162 	}
                                 ;    1163 	else {				/* Dynamic table (root-directory in FAT32 or sub-directory) */
                                 ;    1164 		ic = SS(dp->fs) / SZ_DIR * dp->fs->csize;	/* Entries per cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1164
00000778 A989                    		MOV.L 1CH[R0], R1
0000077A EC11                    		MOV.L [R1], R1
0000077C B091                    		MOVU.B 02H[R1], R1
0000077E 6C41                    		SHLL #04H, R1
00000780 A101                    		MOV.L R1, 10H[R0]
00000782 2Err                 B  		BRA L271
00000784                         L261:	; bb96
                                 ;    1165 		while (idx >= ic) {	/* Follow cluster chain */
                                 ;    1166 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1166
00000784 39rrrr               W  		BSR _get_fat
00000787 A081                    		MOV.L R1, 08H[R0]
00000789                         L262:	; bb96.split
                                 ;    1167 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1167
00000789 A881                    		MOV.L 08H[R0], R1
0000078B 7501FF                  		CMP #0FFFFFFFFH, R1
0000078E 18                   S  		BNE L264
0000078F                         L263:	; bb103
0000078F 3E0101                  		MOV.L #00000001H, 04H[R0]
00000792 38rrrr               W  		BRA L282
00000795                         L264:	; bb110
                                 ;    1168 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1168
00000795 A881                    		MOV.L 08H[R0], R1
00000797 6121                    		CMP #02H, R1
00000799 23rr                    		BLTU L267
0000079B 08                   S  		BRA L266
0000079C                         L265:	; bb111
                                 ;    1169 				return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1169
0000079C 3E0102                  		MOV.L #00000002H, 04H[R0]
0000079F 2Err                 B  		BRA L282
000007A1                         L266:	; bb116
000007A1 A989                    		MOV.L 1CH[R0], R1
000007A3 EC1E                    		MOV.L [R1], R14
000007A5 A881                    		MOV.L 08H[R0], R1
000007A7 0685E106                		CMP 18H[R14].L, R1
000007AB 23rr                    		BLTU L268
000007AD                         L267:	; bb125
000007AD F80601                  		MOV.L #00000001H, [R0]
000007B0 08                   S  		BRA L269
000007B1                         L268:	; bb126
000007B1 F80600                  		MOV.L #00000000H, [R0]
000007B4                         L269:	; bb127
000007B4 EC01                    		MOV.L [R0], R1
000007B6 6101                    		CMP #00H, R1
000007B8 21rr                    		BNE L265
000007BA                         L270:	; bb132
                                 ;    1170 			idx -= ic;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1170
000007BA A981                    		MOV.L 18H[R0], R1
000007BC 06810104                		SUB 10H[R0].L, R1
000007C0 A181                    		MOV.L R1, 18H[R0]
000007C2                         L271:	; bb136
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1165
000007C2 A981                    		MOV.L 18H[R0], R1
000007C4 06850104                		CMP 10H[R0].L, R1
000007C8 A989                    		MOV.L 1CH[R0], R1
000007CA EC11                    		MOV.L [R1], R1
000007CC A882                    		MOV.L 08H[R0], R2
000007CE 22rr                    		BGEU L261
000007D0                         L272:	; bb142
                                 ;    1171 		}
                                 ;    1172 		sect = clust2sect(dp->fs, clst);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1172
000007D0 39rrrr               W  		BSR _clust2sect
000007D3 A089                    		MOV.L R1, 0CH[R0]
000007D5                         L273:	; bb152
                                 ;    1173 	}
                                 ;    1174 	dp->clust = clst;	/* Current cluster# */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1174
000007D5 A881                    		MOV.L 08H[R0], R1
000007D7 A98A                    		MOV.L 1CH[R0], R2
000007D9 A0A9                    		MOV.L R1, 0CH[R2]
000007DB                         L274:	; bb152.split
                                 ;    1175 	if (!sect) return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1175
000007DB A889                    		MOV.L 0CH[R0], R1
000007DD 6101                    		CMP #00H, R1
000007DF 18                   S  		BNE L276
000007E0 08                   S  		BRA L277
000007E1                         L275:	; bb157
000007E1 3E0102                  		MOV.L #00000002H, 04H[R0]
000007E4 2Err                 B  		BRA L282
000007E6                         L276:	; bb162
000007E6 F80600                  		MOV.L #00000000H, [R0]
000007E9 08                   S  		BRA L278
000007EA                         L277:	; bb163
000007EA F80601                  		MOV.L #00000001H, [R0]
000007ED                         L278:	; bb164
000007ED EC01                    		MOV.L [R0], R1
000007EF 6101                    		CMP #00H, R1
000007F1 21rr                    		BNE L275
000007F3                         L279:	; bb168
                                 ;    1176 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1176
000007F3 A981                    		MOV.L 18H[R0], R1
000007F5 6841                    		SHLR #04H, R1
000007F7 06890103                		ADD 0CH[R0].L, R1
000007FB A98A                    		MOV.L 1CH[R0], R2
000007FD A121                    		MOV.L R1, 10H[R2]
000007FF                         L280:	; bb168.split
                                 ;    1177 	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1177
000007FF A981                    		MOV.L 18H[R0], R1
00000801 64F1                    		AND #0FH, R1
00000803 6C51                    		SHLL #05H, R1
00000805 A98A                    		MOV.L 1CH[R0], R2
00000807 068821                  		ADD [R2].L, R1
0000080A 711134                  		ADD #34H, R1
0000080D A129                    		MOV.L R1, 14H[R2]
0000080F                         L281:	; bb168.split2
                                 ;    1178 
                                 ;    1179 	return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1179
0000080F 3E0100                  		MOV.L #00000000H, 04H[R0]
00000812                         L282:	; bb187
00000812 A809                    		MOV.L 04H[R0], R1
00000814 A109                    		MOV.L R1, 14H[R0]
                                 ;    1180 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1180
00000816 6708                    		RTSD #20H
00000818                         __$dir_next:
                                 		.STACK	__$dir_next=40
                                 ;    1181 
                                 ;    1182 
                                 ;    1183 
                                 ;    1184 
                                 ;    1185 /*-----------------------------------------------------------------------*/
                                 ;    1186 /* Directory handling - Move directory table index next                  */
                                 ;    1187 /*-----------------------------------------------------------------------*/
                                 ;    1188 
                                 ;    1189 static
                                 ;    1190 FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1190
00000818 7EA6                    		PUSH.L R6
0000081A 7100E0                  		ADD #0FFFFFFE0H, R0
0000081D A189                    		MOV.L R1, 1CH[R0]
0000081F A182                    		MOV.L R2, 18H[R0]
                                 ;    1191 	DIR* dp,		/* Pointer to the directory object */
                                 ;    1192 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
                                 ;    1193 )
                                 ;    1194 {
                                 ;    1195 	DWORD clst;
                                 ;    1196 	UINT i;
                                 ;    1197 
                                 ;    1198 
                                 ;    1199 	i = dp->index + 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1199
00000821 A989                    		MOV.L 1CH[R0], R1
00000823 B899                    		MOVU.W 06H[R1], R1
00000825 6211                    		ADD #01H, R1
00000827 A089                    		MOV.L R1, 0CH[R0]
00000829                         L284:	; entry.split
                                 ;    1200 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1200
00000829 B981                    		MOVU.W 0CH[R0], R1
0000082B 6101                    		CMP #00H, R1
0000082D 18                   S  		BNE L286
0000082E 2Err                 B  		BRA L287
00000830                         L285:	; bb11
                                 ;    1201 		return FR_NO_FILE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1201
00000830 3E0104                  		MOV.L #00000004H, 04H[R0]
00000833 38rrrr               W  		BRA L342
00000836                         L286:	; bb17
00000836 F80600                  		MOV.L #00000000H, [R0]
00000839 08                   S  		BRA L288
0000083A                         L287:	; bb18
0000083A F80601                  		MOV.L #00000001H, [R0]
0000083D                         L288:	; bb19
0000083D EC01                    		MOV.L [R0], R1
0000083F 6101                    		CMP #00H, R1
00000841 21rr                    		BNE L293
00000843                         L289:	; bb21
00000843 A989                    		MOV.L 1CH[R0], R1
00000845 A911                    		MOV.L 10H[R1], R1
00000847 6101                    		CMP #00H, R1
00000849 10                   S  		BEQ L291
0000084A                         L290:	; bb27
0000084A F80600                  		MOV.L #00000000H, [R0]
0000084D 08                   S  		BRA L292
0000084E                         L291:	; bb28
0000084E F80601                  		MOV.L #00000001H, [R0]
00000851                         L292:	; bb29
00000851 EC01                    		MOV.L [R0], R1
00000853 6101                    		CMP #00H, R1
00000855 10                   S  		BEQ L294
00000856                         L293:	; bb32
00000856 F80601                  		MOV.L #00000001H, [R0]
00000859 08                   S  		BRA L295
0000085A                         L294:	; bb33
0000085A F80600                  		MOV.L #00000000H, [R0]
0000085D                         L295:	; bb34
0000085D EC01                    		MOV.L [R0], R1
0000085F 6101                    		CMP #00H, R1
00000861 21rr                    		BNE L285
00000863                         L296:	; bb40
00000863 66FE                    		MOV.L #0000000FH, R14
                                 ;    1202 
                                 ;    1203 	if (!(i % (SS(dp->fs) / SZ_DIR))) {	/* Sector changed? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1203
00000865 06A10C0E03              		TST 0CH[R0].L, R14
0000086A 3Brrrr               W  		BNE L336
0000086D 38rrrr               W  		BRA L337
00000870                         L297:	; bb41
                                 ;    1204 		dp->sect++;					/* Next sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1204
00000870 A989                    		MOV.L 1CH[R0], R1
00000872 A912                    		MOV.L 10H[R1], R2
00000874 6212                    		ADD #01H, R2
00000876 A112                    		MOV.L R2, 10H[R1]
00000878                         L298:	; bb41.split
                                 ;    1205 
                                 ;    1206 		if (!dp->clust) {		/* Static table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1206
00000878 A989                    		MOV.L 1CH[R0], R1
0000087A A899                    		MOV.L 0CH[R1], R1
0000087C 6101                    		CMP #00H, R1
0000087E 3Brrrr               W  		BNE L333
00000881 38rrrr               W  		BRA L334
00000884                         L299:	; bb48
                                 ;    1207 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1207
00000884 A98A                    		MOV.L 1CH[R0], R2
00000886 EC2E                    		MOV.L [R2], R14
00000888 06C5E104                		CMP 08H[R14].UW, R1
0000088C 22rr                  * 		BLTU L339
         38rrrr                  
00000891                         L300:	; bb49
                                 ;    1208 				return FR_NO_FILE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1208
00000891 3E0104                  		MOV.L #00000004H, 04H[R0]
00000894 38rrrr               W  		BRA L342
00000897                         L301:	; bb63
                                 ;    1209 		}
                                 ;    1210 		else {					/* Dynamic table */
                                 ;    1211 			if (((i / (SS(dp->fs) / SZ_DIR)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1211
00000897 A98A                    		MOV.L 1CH[R0], R2
00000899 EC22                    		MOV.L [R2], R2
0000089B B0A2                    		MOVU.B 02H[R2], R2
0000089D 6012                    		SUB #01H, R2
0000089F 6841                    		SHLR #04H, R1
000008A1 FC3321                  		TST R2, R1
000008A4 3Brrrr               W  		BNE L339
000008A7                         L302:	; bb64
                                 ;    1212 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1212
000008A7 A989                    		MOV.L 1CH[R0], R1
000008A9 A89A                    		MOV.L 0CH[R1], R2
000008AB EC11                    		MOV.L [R1], R1
000008AD 39rrrr               W  		BSR _get_fat
000008B0 A081                    		MOV.L R1, 08H[R0]
000008B2                         L303:	; bb64.split
                                 ;    1213 				if (clst <= 1) return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1213
000008B2 A881                    		MOV.L 08H[R0], R1
000008B4 6111                    		CMP #01H, R1
000008B6 24rr                    		BGTU L305
000008B8                         L304:	; bb73
000008B8 3E0102                  		MOV.L #00000002H, 04H[R0]
000008BB 38rrrr               W  		BRA L342
000008BE                         L305:	; bb80
                                 ;    1214 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1214
000008BE A881                    		MOV.L 08H[R0], R1
000008C0 7501FF                  		CMP #0FFFFFFFFH, R1
000008C3 18                   S  		BNE L307
000008C4                         L306:	; bb81
000008C4 3E0101                  		MOV.L #00000001H, 04H[R0]
000008C7 38rrrr               W  		BRA L342
000008CA                         L307:	; bb88
                                 ;    1215 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1215
000008CA A989                    		MOV.L 1CH[R0], R1
000008CC EC1E                    		MOV.L [R1], R14
000008CE A881                    		MOV.L 08H[R0], R1
000008D0 0685E106                		CMP 18H[R14].L, R1
000008D4 22rr                  * 		BLTU L331
         38rrrr                  
000008D9                         L308:	; bb90
                                 ;    1216 #if !_FS_READONLY
                                 ;    1217 					UINT c;
                                 ;    1218 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1218
000008D9 A981                    		MOV.L 18H[R0], R1
000008DB 6101                    		CMP #00H, R1
000008DD 18                   S  		BNE L310
000008DE 2Err                 B  		BRA L311
000008E0                         L309:	; bb91
000008E0 3E0104                  		MOV.L #00000004H, 04H[R0]
000008E3 38rrrr               W  		BRA L342
000008E6                         L310:	; bb96
000008E6 F80600                  		MOV.L #00000000H, [R0]
000008E9 08                   S  		BRA L312
000008EA                         L311:	; bb97
000008EA F80601                  		MOV.L #00000001H, [R0]
000008ED                         L312:	; bb98
000008ED EC01                    		MOV.L [R0], R1
000008EF 6101                    		CMP #00H, R1
000008F1 21rr                    		BNE L309
000008F3                         L313:	; bb102
                                 ;    1219 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1219
000008F3 A989                    		MOV.L 1CH[R0], R1
000008F5 A89A                    		MOV.L 0CH[R1], R2
000008F7 EC11                    		MOV.L [R1], R1
000008F9 39rrrr               W  		BSR __$create_chain
000008FC A081                    		MOV.L R1, 08H[R0]
000008FE                         L314:	; bb102.split
                                 ;    1220 					if (clst == 0) return FR_DENIED;			/* No free cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1220
000008FE A881                    		MOV.L 08H[R0], R1
00000900 6101                    		CMP #00H, R1
00000902 18                   S  		BNE L316
00000903                         L315:	; bb111
00000903 3E0107                  		MOV.L #00000007H, 04H[R0]
00000906 38rrrr               W  		BRA L342
00000909                         L316:	; bb118
                                 ;    1221 					if (clst == 1) return FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1221
00000909 A881                    		MOV.L 08H[R0], R1
0000090B 6111                    		CMP #01H, R1
0000090D 18                   S  		BNE L318
0000090E                         L317:	; bb119
0000090E 3E0102                  		MOV.L #00000002H, 04H[R0]
00000911 38rrrr               W  		BRA L342
00000914                         L318:	; bb126
                                 ;    1222 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1222
00000914 A881                    		MOV.L 08H[R0], R1
00000916 7501FF                  		CMP #0FFFFFFFFH, R1
00000919 18                   S  		BNE L320
0000091A                         L319:	; bb127
0000091A 3E0101                  		MOV.L #00000001H, 04H[R0]
0000091D 38rrrr               W  		BRA L342
00000920                         L320:	; bb134
                                 ;    1223 					/* Clean-up stretched table */
                                 ;    1224 					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1224
00000920 A989                    		MOV.L 1CH[R0], R1
00000922 EC11                    		MOV.L [R1], R1
00000924 39rrrr               W  		BSR __$sync_window
00000927 6101                    		CMP #00H, R1
00000929 10                   S  		BEQ L322
0000092A                         L321:	; bb135
0000092A 3E0101                  		MOV.L #00000001H, 04H[R0]
0000092D 38rrrr               W  		BRA L342
00000930                         L322:	; bb144
                                 ;    1225 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1225
00000930 A989                    		MOV.L 1CH[R0], R1
00000932 EC11                    		MOV.L [R1], R1
00000934 711134                  		ADD #34H, R1
00000937 FB3A0002                		MOV.L #00000200H, R3
0000093B 6602                    		MOV.L #00000000H, R2
0000093D 39rrrr               W  		BSR __$mem_set
00000940                         L323:	; bb144.split
                                 ;    1226 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1226
00000940 A989                    		MOV.L 1CH[R0], R1
00000942 EC16                    		MOV.L [R1], R6
00000944 A882                    		MOV.L 08H[R0], R2
00000946 EF61                    		MOV.L R6, R1
00000948 39rrrr               W  		BSR _clust2sect
0000094B A361                    		MOV.L R1, 30H[R6]
0000094D                         L324:	; bb144.split1
                                 ;    1227 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1227
0000094D 3E0400                  		MOV.L #00000000H, 10H[R0]
00000950 2Err                 B  		BRA L329
00000952                         L325:	; bb159
                                 ;    1228 						dp->fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1228
00000952 3C1401                  		MOV.B #01H, 04H[R1]
00000955                         L326:	; bb159.split
                                 ;    1229 						if (sync_window(dp->fs)) return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1229
00000955 A989                    		MOV.L 1CH[R0], R1
00000957 EC11                    		MOV.L [R1], R1
00000959 39rrrr               W  		BSR __$sync_window
0000095C 6101                    		CMP #00H, R1
0000095E 10                   S  		BEQ L328
0000095F                         L327:	; bb165
0000095F 3E0101                  		MOV.L #00000001H, 04H[R0]
00000962 2Err                 B  		BRA L342
00000964                         L328:	; bb174
                                 ;    1230 						dp->fs->winsect++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1230
00000964 A989                    		MOV.L 1CH[R0], R1
00000966 EC11                    		MOV.L [R1], R1
00000968 AB12                    		MOV.L 30H[R1], R2
0000096A 6212                    		ADD #01H, R2
0000096C A312                    		MOV.L R2, 30H[R1]
0000096E A901                    		MOV.L 10H[R0], R1
00000970 6211                    		ADD #01H, R1
00000972 A101                    		MOV.L R1, 10H[R0]
00000974                         L329:	; bb183
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1227
00000974 A989                    		MOV.L 1CH[R0], R1
00000976 EC11                    		MOV.L [R1], R1
00000978 B092                    		MOVU.B 02H[R1], R2
0000097A 06850204                		CMP 10H[R0].L, R2
0000097E 24rr                    		BGTU L325
00000980                         L330:	; bb194
                                 ;    1231 					}
                                 ;    1232 					dp->fs->winsect -= c;						/* Rewind window offset */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1232
00000980 AB12                    		MOV.L 30H[R1], R2
00000982 06810204                		SUB 10H[R0].L, R2
00000986 A312                    		MOV.L R2, 30H[R1]
00000988                         L331:	; bb211
                                 ;    1233 #else
                                 ;    1234 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT (this is to suppress warning) *
                                 ;    1235 					return FR_NO_FILE;							/* Report EOT */
                                 ;    1236 #endif
                                 ;    1237 				}
                                 ;    1238 				dp->clust = clst;				/* Initialize data for new cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1238
00000988 A881                    		MOV.L 08H[R0], R1
0000098A A98A                    		MOV.L 1CH[R0], R2
0000098C A0A9                    		MOV.L R1, 0CH[R2]
0000098E                         L332:	; bb211.split
                                 ;    1239 				dp->sect = clust2sect(dp->fs, clst);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1239
0000098E A98E                    		MOV.L 1CH[R0], R6
00000990 EC61                    		MOV.L [R6], R1
00000992 A882                    		MOV.L 08H[R0], R2
00000994 39rrrr               W  		BSR _clust2sect
00000997 A161                    		MOV.L R1, 10H[R6]
00000999 2Err                 B  		BRA L339
0000099B                         L333:	; bb241
0000099B F80600                  		MOV.L #00000000H, [R0]
0000099E 08                   S  		BRA L335
0000099F                         L334:	; bb242
0000099F F80601                  		MOV.L #00000001H, [R0]
000009A2                         L335:	; bb243
000009A2 EC01                    		MOV.L [R0], R1
000009A4 6101                    		CMP #00H, R1
000009A6 A889                    		MOV.L 0CH[R0], R1
000009A8 3Brrrr               W  		BNE L299
000009AB 38rrrr               W  		BRA L301
000009AE                         L336:	; bb252
000009AE F80600                  		MOV.L #00000000H, [R0]
000009B1 08                   S  		BRA L338
000009B2                         L337:	; bb253
000009B2 F80601                  		MOV.L #00000001H, [R0]
000009B5                         L338:	; bb254
000009B5 EC01                    		MOV.L [R0], R1
000009B7 6101                    		CMP #00H, R1
000009B9 3Brrrr               W  		BNE L297
000009BC                         L339:	; bb258
                                 ;    1240 			}
                                 ;    1241 		}
                                 ;    1242 	}
                                 ;    1243 
                                 ;    1244 	dp->index = (WORD)i;	/* Current index */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1244
000009BC A889                    		MOV.L 0CH[R0], R1
000009BE A98A                    		MOV.L 1CH[R0], R2
000009C0 90A9                    		MOV.W R1, 06H[R2]
000009C2                         L340:	; bb258.split
                                 ;    1245 	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1245
000009C2 A889                    		MOV.L 0CH[R0], R1
000009C4 64F1                    		AND #0FH, R1
000009C6 6C51                    		SHLL #05H, R1
000009C8 A98A                    		MOV.L 1CH[R0], R2
000009CA 068821                  		ADD [R2].L, R1
000009CD 711134                  		ADD #34H, R1
000009D0 A129                    		MOV.L R1, 14H[R2]
000009D2                         L341:	; bb258.split2
                                 ;    1246 
                                 ;    1247 	return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1247
000009D2 3E0100                  		MOV.L #00000000H, 04H[R0]
000009D5                         L342:	; bb275
000009D5 A809                    		MOV.L 04H[R0], R1
000009D7 A109                    		MOV.L R1, 14H[R0]
                                 ;    1248 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1248
000009D9 3F6609                  		RTSD #24H, R6-R6
000009DC                         __$dir_alloc:
                                 		.STACK	__$dir_alloc=28
                                 ;    1249 
                                 ;    1250 
                                 ;    1251 
                                 ;    1252 
                                 ;    1253 /*-----------------------------------------------------------------------*/
                                 ;    1254 /* Directory handling - Reserve directory entry                          */
                                 ;    1255 /*-----------------------------------------------------------------------*/
                                 ;    1256 
                                 ;    1257 #if !_FS_READONLY
                                 ;    1258 static
                                 ;    1259 FRESULT dir_alloc (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1259
000009DC 7100E8                  		ADD #0FFFFFFE8H, R0
000009DF A109                    		MOV.L R1, 14H[R0]
000009E1 A102                    		MOV.L R2, 10H[R0]
                                 ;    1260 	DIR* dp,	/* Pointer to the directory object */
                                 ;    1261 	UINT nent	/* Number of contiguous entries to allocate (1-21) */
                                 ;    1262 )
                                 ;    1263 {
                                 ;    1264 	FRESULT res;
                                 ;    1265 	UINT n;
                                 ;    1266 
                                 ;    1267 
                                 ;    1268 	res = dir_sdi(dp, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1268
000009E3 A909                    		MOV.L 14H[R0], R1
000009E5 6602                    		MOV.L #00000000H, R2
000009E7 39rrrr               W  		BSR __$dir_sdi
000009EA A009                    		MOV.L R1, 04H[R0]
000009EC                         L344:	; entry.split
                                 ;    1269 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1269
000009EC A809                    		MOV.L 04H[R0], R1
000009EE 6101                    		CMP #00H, R1
000009F0 21rr                    		BNE L357
000009F2                         L345:	; bb7
                                 ;    1270 		n = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1270
000009F2 3E0200                  		MOV.L #00000000H, 08H[R0]
000009F5                         L346:	; bb8
                                 ;    1271 		do {
                                 ;    1272 			res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1272
000009F5 A909                    		MOV.L 14H[R0], R1
000009F7 A912                    		MOV.L 10H[R1], R2
000009F9 EC11                    		MOV.L [R1], R1
000009FB 39rrrr               W  		BSR __$move_window
000009FE A009                    		MOV.L R1, 04H[R0]
00000A00                         L347:	; bb8.split
                                 ;    1273 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1273
00000A00 A809                    		MOV.L 04H[R0], R1
00000A02 6101                    		CMP #00H, R1
00000A04 21rr                    		BNE L357
00000A06                         L348:	; bb23
                                 ;    1274 			if (dp->dir[0] == DDE || dp->dir[0] == 0) {	/* Is it a free entry? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1274
00000A06 A909                    		MOV.L 14H[R0], R1
00000A08 A919                    		MOV.L 14H[R1], R1
00000A0A 581E                    		MOVU.B [R1], R14
00000A0C 755EE5                  		CMP #0E5H, R14
00000A0F 20rr                    		BEQ L352
00000A11 2Err                 B  		BRA L351
00000A13                         L349:	; bb25
                                 ;    1275 				if (++n == nent) break;	/* A block of contiguous free entries is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1275
00000A13 A881                    		MOV.L 08H[R0], R1
00000A15 6211                    		ADD #01H, R1
00000A17 A081                    		MOV.L R1, 08H[R0]
00000A19 06850104                		CMP 10H[R0].L, R1
00000A1D 20rr                    		BEQ L357
00000A1F 2Err                 B  		BRA L355
00000A21                         L350:	; bb36
                                 ;    1276 			} else {
                                 ;    1277 				n = 0;					/* Not a blank entry. Restart to search */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1277
00000A21 3E0200                  		MOV.L #00000000H, 08H[R0]
00000A24 2Err                 B  		BRA L355
00000A26                         L351:	; bb45
00000A26 A909                    		MOV.L 14H[R0], R1
00000A28 A919                    		MOV.L 14H[R1], R1
00000A2A 581E                    		MOVU.B [R1], R14
00000A2C 610E                    		CMP #00H, R14
00000A2E 18                   S  		BNE L353
00000A2F                         L352:	; bb54
00000A2F F80601                  		MOV.L #00000001H, [R0]
00000A32 08                   S  		BRA L354
00000A33                         L353:	; bb55
00000A33 F80600                  		MOV.L #00000000H, [R0]
00000A36                         L354:	; bb56
00000A36 EC01                    		MOV.L [R0], R1
00000A38 6101                    		CMP #00H, R1
00000A3A 21rr                    		BNE L349
00000A3C 2Err                 B  		BRA L350
00000A3E                         L355:	; bb61
                                 ;    1278 			}
                                 ;    1279 			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1279
00000A3E A909                    		MOV.L 14H[R0], R1
00000A40 6612                    		MOV.L #00000001H, R2
00000A42 39rrrr               W  		BSR __$dir_next
00000A45 A009                    		MOV.L R1, 04H[R0]
00000A47                         L356:	; bb61.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1271
00000A47 A809                    		MOV.L 04H[R0], R1
00000A49 6101                    		CMP #00H, R1
00000A4B 20rr                    		BEQ L346
00000A4D                         L357:	; bb75
                                 ;    1280 		} while (res == FR_OK);
                                 ;    1281 	}
                                 ;    1282 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1282
00000A4D A809                    		MOV.L 04H[R0], R1
00000A4F 6141                    		CMP #04H, R1
00000A51 18                   S  		BNE L359
00000A52                         L358:	; bb76
00000A52 3E0107                  		MOV.L #00000007H, 04H[R0]
00000A55                         L359:	; bb81
                                 ;    1283 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1283
00000A55 A809                    		MOV.L 04H[R0], R1
00000A57 A089                    		MOV.L R1, 0CH[R0]
00000A59                         L360:	; bb81.split
                                 ;    1284 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1284
00000A59 6706                    		RTSD #18H
00000A5B                         __$ld_clust:
                                 		.STACK	__$ld_clust=20
                                 ;    1285 #endif
                                 ;    1286 
                                 ;    1287 
                                 ;    1288 
                                 ;    1289 
                                 ;    1290 /*-----------------------------------------------------------------------*/
                                 ;    1291 /* Directory handling - Load/Store start cluster number                  */
                                 ;    1292 /*-----------------------------------------------------------------------*/
                                 ;    1293 
                                 ;    1294 static
                                 ;    1295 DWORD ld_clust (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1295
00000A5B 7100F0                  		ADD #0FFFFFFF0H, R0
00000A5E A089                    		MOV.L R1, 0CH[R0]
00000A60 A082                    		MOV.L R2, 08H[R0]
                                 ;    1296 	FATFS* fs,	/* Pointer to the fs object */
                                 ;    1297 	BYTE* dir	/* Pointer to the directory entry */
                                 ;    1298 )
                                 ;    1299 {
                                 ;    1300 	DWORD cl;
                                 ;    1301 
                                 ;    1302 	cl = LD_WORD(dir+DIR_FstClusLO);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1302
00000A62 BB29                    		MOVU.W 1AH[R2], R1
00000A64 E301                    		MOV.L R1, [R0]
00000A66                         L362:	; entry.split
                                 ;    1303 	if (fs->fs_type == FS_FAT32)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1303
00000A66 A889                    		MOV.L 0CH[R0], R1
00000A68 581E                    		MOVU.B [R1], R14
00000A6A 613E                    		CMP #03H, R14
00000A6C 21rr                    		BNE L364
00000A6E                         L363:	; bb9
                                 ;    1304 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1304
00000A6E A881                    		MOV.L 08H[R0], R1
00000A70 9A91                    		MOV.W 14H[R1], R1
00000A72 6D01                    		SHLL #10H, R1
00000A74 069401                  		OR [R0].L, R1
00000A77 E301                    		MOV.L R1, [R0]
00000A79                         L364:	; bb24
                                 ;    1305 
                                 ;    1306 	return cl;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1306
00000A79 EC01                    		MOV.L [R0], R1
00000A7B A009                    		MOV.L R1, 04H[R0]
00000A7D                         L365:	; bb24.split
                                 ;    1307 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1307
00000A7D 6704                    		RTSD #10H
00000A7F                         __$st_clust:
                                 		.STACK	__$st_clust=12
                                 ;    1308 
                                 ;    1309 
                                 ;    1310 #if !_FS_READONLY
                                 ;    1311 static
                                 ;    1312 void st_clust (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1312
00000A7F 6080                    		SUB #08H, R0
00000A81 A009                    		MOV.L R1, 04H[R0]
00000A83 E302                    		MOV.L R2, [R0]
                                 ;    1313 	BYTE* dir,	/* Pointer to the directory entry */
                                 ;    1314 	DWORD cl	/* Value to be set */
                                 ;    1315 )
                                 ;    1316 {
                                 ;    1317 	ST_WORD(dir+DIR_FstClusLO, cl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1317
00000A85 A809                    		MOV.L 04H[R0], R1
00000A87 931A                    		MOV.W R2, 1AH[R1]
00000A89                         L367:	; entry.split
                                 ;    1318 	ST_WORD(dir+DIR_FstClusHI, cl >> 16);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1318
00000A89 EC01                    		MOV.L [R0], R1
00000A8B 6901                    		SHLR #10H, R1
00000A8D A80A                    		MOV.L 04H[R0], R2
00000A8F 92A1                    		MOV.W R1, 14H[R2]
00000A91 6702                    		RTSD #08H
00000A93                         __$cmp_lfn:
                                 		.STACK	__$cmp_lfn=40
                                 ;    1319 }
                                 ;    1320 #endif
                                 ;    1321 
                                 ;    1322 
                                 ;    1323 
                                 ;    1324 
                                 ;    1325 /*-----------------------------------------------------------------------*/
                                 ;    1326 /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
                                 ;    1327 /*-----------------------------------------------------------------------*/
                                 ;    1328 #if _USE_LFN
                                 ;    1329 static
                                 ;    1330 const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the directory entry */
                                 ;    1331 
                                 ;    1332 
                                 ;    1333 static
                                 ;    1334 int cmp_lfn (			/* 1:Matched, 0:Not matched */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1334
00000A93 7EA6                    		PUSH.L R6
00000A95 7100E0                  		ADD #0FFFFFFE0H, R0
00000A98 A189                    		MOV.L R1, 1CH[R0]
00000A9A A182                    		MOV.L R2, 18H[R0]
00000A9C 7541BF                  		MOV.L #000000BFH, R1
                                 ;    1335 	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
                                 ;    1336 	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
                                 ;    1337 )
                                 ;    1338 {
                                 ;    1339 	UINT i, s;
                                 ;    1340 	WCHAR wc, uc;
                                 ;    1341 
                                 ;    1342 
                                 ;    1343 	i = ((dir[LDIR_Ord] & ~LLE) - 1) * 13;	/* Get offset in the LFN buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1343
00000A9F 5021                    		AND [R2].UB, R1
00000AA1 63D1                    		MUL #0DH, R1
00000AA3 60D1                    		SUB #0DH, R1
00000AA5 A081                    		MOV.L R1, 08H[R0]
00000AA7                         L369:	; entry.split
                                 ;    1344 	s = 0; wc = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1344
00000AA7 3E0300                  		MOV.L #00000000H, 0CH[R0]
00000AAA 3D0801                  		MOV.W #0001H, 10H[R0]
00000AAD                         L370:	; bb
                                 ;    1345 	do {
                                 ;    1346 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1346
00000AAD A889                    		MOV.L 0CH[R0], R1
00000AAF FBE2rrrrrrrr            		MOV.L #__$LfnOfs, R14
00000AB5 FECE1E                  		MOVU.B [R14,R1], R14
00000AB8 06890E06                		ADD 18H[R0].L, R14
00000ABC D4E009                  		MOV.W [R14], 12H[R0]
00000ABF                         L371:	; bb.split
                                 ;    1347 		if (wc) {	/* Last character has not been processed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1347
00000ABF BA01                    		MOVU.W 10H[R0], R1
00000AC1 6101                    		CMP #00H, R1
00000AC3 9A09                    		MOV.W 12H[R0], R1
00000AC5 20rr                    		BEQ L379
00000AC7                         L372:	; bb23
                                 ;    1348 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1348
00000AC7 5F11                    		MOVU.W R1, R1
00000AC9 05rrrrrr             A  		BSR _ff_wtoupper
00000ACD 9201                    		MOV.W R1, 10H[R0]
00000ACF                         L373:	; bb23.split
                                 ;    1349 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1349
00000ACF A881                    		MOV.L 08H[R0], R1
00000AD1 7551FE                  		CMP #0FEH, R1
00000AD4 24rr                    		BGTU L376
00000AD6 08                   S  		BRA L375
00000AD7                         L374:	; bb27
                                 ;    1350 				return 0;				/* Not matched */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1350
00000AD7 3E0100                  		MOV.L #00000000H, 04H[R0]
00000ADA 2Err                 B  		BRA L393
00000ADC                         L375:	; bb32
00000ADC A882                    		MOV.L 08H[R0], R2
00000ADE A989                    		MOV.L 1CH[R0], R1
00000AE0 FED211                  		MOVU.W [R2,R1], R1
00000AE3 6212                    		ADD #01H, R2
00000AE5 BA06                    		MOVU.W 10H[R0], R6
00000AE7 A082                    		MOV.L R2, 08H[R0]
00000AE9 05rrrrrr             A  		BSR _ff_wtoupper
00000AED 4716                    		CMP R1, R6
00000AEF 10                   S  		BEQ L377
00000AF0                         L376:	; bb45
00000AF0 F80601                  		MOV.L #00000001H, [R0]
00000AF3 08                   S  		BRA L378
00000AF4                         L377:	; bb46
00000AF4 F80600                  		MOV.L #00000000H, [R0]
00000AF7                         L378:	; bb47
00000AF7 EC01                    		MOV.L [R0], R1
00000AF9 6101                    		CMP #00H, R1
00000AFB 21rr                    		BNE L374
00000AFD 2Err                 B  		BRA L381
00000AFF                         L379:	; bb53
                                 ;    1351 		} else {
                                 ;    1352 			if (uc != 0xFFFF) return 0;	/* Check filler */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1352
00000AFF 5F1E                    		MOVU.W R1, R14
00000B01 770EFFFF00              		CMP #0FFFFH, R14
00000B06 10                   S  		BEQ L381
00000B07                         L380:	; bb54
00000B07 3E0100                  		MOV.L #00000000H, 04H[R0]
00000B0A 2Err                 B  		BRA L393
00000B0C                         L381:	; bb67
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1345
00000B0C A889                    		MOV.L 0CH[R0], R1
00000B0E 6211                    		ADD #01H, R1
00000B10 A089                    		MOV.L R1, 0CH[R0]
00000B12 61D1                    		CMP #0DH, R1
00000B14 23rr                    		BLTU L370
00000B16                         L382:	; bb75
                                 ;    1353 		}
                                 ;    1354 	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
                                 ;    1355 
                                 ;    1356 	if ((dir[LDIR_Ord] & LLE) && wc && lfnbuf[i])	/* Last segment matched but different length */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1356
00000B16 A981                    		MOV.L 18H[R0], R1
00000B18 F416                    		BTST #06H, [R1].B
00000B1A 18                   S  		BNE L384
00000B1B 2Err                 B  		BRA L386
00000B1D                         L383:	; bb76
                                 ;    1357 		return 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1357
00000B1D 3E0100                  		MOV.L #00000000H, 04H[R0]
00000B20 2Err                 B  		BRA L393
00000B22                         L384:	; bb85
00000B22 BA01                    		MOVU.W 10H[R0], R1
00000B24 6101                    		CMP #00H, R1
00000B26 10                   S  		BEQ L386
00000B27                         L385:	; bb90
00000B27 F80601                  		MOV.L #00000001H, [R0]
00000B2A 08                   S  		BRA L387
00000B2B                         L386:	; bb91
00000B2B F80600                  		MOV.L #00000000H, [R0]
00000B2E                         L387:	; bb92
00000B2E EC01                    		MOV.L [R0], R1
00000B30 6101                    		CMP #00H, R1
00000B32 20rr                    		BEQ L390
00000B34                         L388:	; bb96
00000B34 A989                    		MOV.L 1CH[R0], R1
00000B36 A882                    		MOV.L 08H[R0], R2
00000B38 FED21E                  		MOVU.W [R2,R1], R14
00000B3B 610E                    		CMP #00H, R14
00000B3D 10                   S  		BEQ L390
00000B3E                         L389:	; bb104
00000B3E F80601                  		MOV.L #00000001H, [R0]
00000B41 08                   S  		BRA L391
00000B42                         L390:	; bb105
00000B42 F80600                  		MOV.L #00000000H, [R0]
00000B45                         L391:	; bb106
00000B45 EC01                    		MOV.L [R0], R1
00000B47 6101                    		CMP #00H, R1
00000B49 21rr                    		BNE L383
00000B4B                         L392:	; bb111
                                 ;    1358 
                                 ;    1359 	return 1;						/* The part of LFN matched */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1359
00000B4B 3E0101                  		MOV.L #00000001H, 04H[R0]
00000B4E                         L393:	; bb113
00000B4E A809                    		MOV.L 04H[R0], R1
00000B50 A109                    		MOV.L R1, 14H[R0]
                                 ;    1360 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1360
00000B52 3F6609                  		RTSD #24H, R6-R6
00000B55                         __$pick_lfn:
                                 		.STACK	__$pick_lfn=32
                                 ;    1361 
                                 ;    1362 
                                 ;    1363 
                                 ;    1364 static
                                 ;    1365 int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1365
00000B55 7100E4                  		ADD #0FFFFFFE4H, R0
00000B58 A181                    		MOV.L R1, 18H[R0]
00000B5A A10A                    		MOV.L R2, 14H[R0]
                                 ;    1366 	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
                                 ;    1367 	BYTE* dir			/* Pointer to the directory entry */
                                 ;    1368 )
                                 ;    1369 {
                                 ;    1370 	UINT i, s;
                                 ;    1371 	WCHAR wc, uc;
                                 ;    1372 
                                 ;    1373 
                                 ;    1374 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1374
00000B5C 5821                    		MOVU.B [R2], R1
00000B5E 75213F                  		AND #3FH, R1
00000B61 63D1                    		MUL #0DH, R1
00000B63 60D1                    		SUB #0DH, R1
00000B65 A009                    		MOV.L R1, 04H[R0]
00000B67                         L395:	; entry.split
                                 ;    1375 
                                 ;    1376 	s = 0; wc = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1376
00000B67 3E0200                  		MOV.L #00000000H, 08H[R0]
00000B6A 3D0601                  		MOV.W #0001H, 0CH[R0]
00000B6D                         L396:	; bb
                                 ;    1377 	do {
                                 ;    1378 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1378
00000B6D A881                    		MOV.L 08H[R0], R1
00000B6F FBE2rrrrrrrr            		MOV.L #__$LfnOfs, R14
00000B75 FECE1E                  		MOVU.B [R14,R1], R14
00000B78 06890E05                		ADD 14H[R0].L, R14
00000B7C D4E007                  		MOV.W [R14], 0EH[R0]
00000B7F                         L397:	; bb.split
                                 ;    1379 		if (wc) {	/* Last character has not been processed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1379
00000B7F B981                    		MOVU.W 0CH[R0], R1
00000B81 6101                    		CMP #00H, R1
00000B83 20rr                    		BEQ L401
00000B85                         L398:	; bb24
                                 ;    1380 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1380
00000B85 A809                    		MOV.L 04H[R0], R1
00000B87 7551FF                  		CMP #0FFH, R1
00000B8A 23rr                    		BLTU L400
00000B8C                         L399:	; bb25
00000B8C F80600                  		MOV.L #00000000H, [R0]
00000B8F 2Err                 B  		BRA L409
00000B91                         L400:	; bb30
                                 ;    1381 			lfnbuf[i++] = wc = uc;			/* Store it */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1381
00000B91 9989                    		MOV.W 0EH[R0], R1
00000B93 A80A                    		MOV.L 04H[R0], R2
00000B95 A983                    		MOV.L 18H[R0], R3
00000B97 9181                    		MOV.W R1, 0CH[R0]
00000B99 FE1231                  		MOV.W R1, [R2,R3]
00000B9C A809                    		MOV.L 04H[R0], R1
00000B9E 6211                    		ADD #01H, R1
00000BA0 A009                    		MOV.L R1, 04H[R0]
00000BA2 2Err                 B  		BRA L403
00000BA4                         L401:	; bb39
                                 ;    1382 		} else {
                                 ;    1383 			if (uc != 0xFFFF) return 0;		/* Check filler */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1383
00000BA4 B989                    		MOVU.W 0EH[R0], R1
00000BA6 7701FFFF00              		CMP #0FFFFH, R1
00000BAB 10                   S  		BEQ L403
00000BAC                         L402:	; bb40
00000BAC F80600                  		MOV.L #00000000H, [R0]
00000BAF 2Err                 B  		BRA L409
00000BB1                         L403:	; bb53
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1377
00000BB1 A881                    		MOV.L 08H[R0], R1
00000BB3 6211                    		ADD #01H, R1
00000BB5 A081                    		MOV.L R1, 08H[R0]
00000BB7 61D1                    		CMP #0DH, R1
00000BB9 23rr                    		BLTU L396
00000BBB                         L404:	; bb61
                                 ;    1384 		}
                                 ;    1385 	} while (++s < 13);						/* Read all character in the entry */
                                 ;    1386 
                                 ;    1387 	if (dir[LDIR_Ord] & LLE) {				/* Put terminator if it is the last LFN part */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1387
00000BBB A909                    		MOV.L 14H[R0], R1
00000BBD F416                    		BTST #06H, [R1].B
00000BBF 20rr                    		BEQ L408
00000BC1                         L405:	; bb63
                                 ;    1388 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1388
00000BC1 A809                    		MOV.L 04H[R0], R1
00000BC3 7551FF                  		CMP #0FFH, R1
00000BC6 23rr                    		BLTU L407
00000BC8                         L406:	; bb64
00000BC8 F80600                  		MOV.L #00000000H, [R0]
00000BCB 2Err                 B  		BRA L409
00000BCD                         L407:	; bb70
00000BCD 660E                    		MOV.L #00000000H, R14
                                 ;    1389 		lfnbuf[i] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1389
00000BCF A809                    		MOV.L 04H[R0], R1
00000BD1 A982                    		MOV.L 18H[R0], R2
00000BD3 FE112E                  		MOV.W R14, [R1,R2]
00000BD6                         L408:	; bb82
                                 ;    1390 	}
                                 ;    1391 
                                 ;    1392 	return 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1392
00000BD6 F80601                  		MOV.L #00000001H, [R0]
00000BD9                         L409:	; bb84
00000BD9 EC01                    		MOV.L [R0], R1
00000BDB A101                    		MOV.L R1, 10H[R0]
                                 ;    1393 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1393
00000BDD 6707                    		RTSD #1CH
00000BDF                         __$fit_lfn:
                                 		.STACK	__$fit_lfn=28
                                 ;    1394 
                                 ;    1395 
                                 ;    1396 #if !_FS_READONLY
                                 ;    1397 static
                                 ;    1398 void fit_lfn (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1398
00000BDF 7100E8                  		ADD #0FFFFFFE8H, R0
00000BE2 A109                    		MOV.L R1, 14H[R0]
00000BE4 A102                    		MOV.L R2, 10H[R0]
00000BE6 838B                    		MOV.B R3, 0FH[R0]
00000BE8 8384                    		MOV.B R4, 0EH[R0]
                                 ;    1399 	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
                                 ;    1400 	BYTE* dir,				/* Pointer to the directory entry */
                                 ;    1401 	BYTE ord,				/* LFN order (1-20) */
                                 ;    1402 	BYTE sum				/* SFN sum */
                                 ;    1403 )
                                 ;    1404 {
                                 ;    1405 	UINT i, s;
                                 ;    1406 	WCHAR wc;
                                 ;    1407 
                                 ;    1408 
                                 ;    1409 	dir[LDIR_Chksum] = sum;			/* Set check sum */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1409
00000BEA A901                    		MOV.L 10H[R0], R1
00000BEC 831C                    		MOV.B R4, 0DH[R1]
00000BEE                         L411:	; entry.split
                                 ;    1410 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1410
00000BEE A901                    		MOV.L 10H[R0], R1
00000BF0 3C1B0F                  		MOV.B #0FH, 0BH[R1]
00000BF3                         L412:	; entry.split1
                                 ;    1411 	dir[LDIR_Type] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1411
00000BF3 A901                    		MOV.L 10H[R0], R1
00000BF5 3C1C00                  		MOV.B #00H, 0CH[R1]
00000BF8                         L413:	; entry.split2
                                 ;    1412 	ST_WORD(dir+LDIR_FstClusLO, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1412
00000BF8 A901                    		MOV.L 10H[R0], R1
00000BFA 3D1D00                  		MOV.W #0000H, 1AH[R1]
00000BFD                         L414:	; entry.split3
                                 ;    1413 
                                 ;    1414 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1414
00000BFD B389                    		MOVU.B 0FH[R0], R1
00000BFF 63D1                    		MUL #0DH, R1
00000C01 60D1                    		SUB #0DH, R1
00000C03 A009                    		MOV.L R1, 04H[R0]
00000C05                         L415:	; entry.split4
                                 ;    1415 	s = wc = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1415
00000C05 3D0600                  		MOV.W #0000H, 0CH[R0]
00000C08 B981                    		MOVU.W 0CH[R0], R1
00000C0A A081                    		MOV.L R1, 08H[R0]
00000C0C                         L416:	; bb23
                                 ;    1416 	do {
                                 ;    1417 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1417
00000C0C B981                    		MOVU.W 0CH[R0], R1
00000C0E 7701FFFF00              		CMP #0FFFFH, R1
00000C13 20rr                    		BEQ L418
00000C15                         L417:	; bb24
00000C15 A909                    		MOV.L 14H[R0], R1
00000C17 A80A                    		MOV.L 04H[R0], R2
00000C19 FE5211                  		MOV.W [R2,R1], R1
00000C1C 9181                    		MOV.W R1, 0CH[R0]
00000C1E A809                    		MOV.L 04H[R0], R1
00000C20 6211                    		ADD #01H, R1
00000C22 A009                    		MOV.L R1, 04H[R0]
00000C24                         L418:	; bb35
                                 ;    1418 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1418
00000C24 A881                    		MOV.L 08H[R0], R1
00000C26 FBE2rrrrrrrr            		MOV.L #__$LfnOfs, R14
00000C2C FECE1E                  		MOVU.B [R14,R1], R14
00000C2F 06890E04                		ADD 10H[R0].L, R14
00000C33 D10E06                  		MOV.W 0CH[R0], [R14]
00000C36                         L419:	; bb35.split
                                 ;    1419 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1419
00000C36 B981                    		MOVU.W 0CH[R0], R1
00000C38 6101                    		CMP #00H, R1
00000C3A 18                   S  		BNE L421
00000C3B 2Err                 B  		BRA L422
00000C3D                         L420:	; bb45
00000C3D F90906FFFF              		MOV.W #0FFFFH, 0CH[R0]
00000C42 2Err                 B  		BRA L424
00000C44                         L421:	; bb50
00000C44 F80600                  		MOV.L #00000000H, [R0]
00000C47 08                   S  		BRA L423
00000C48                         L422:	; bb51
00000C48 F80601                  		MOV.L #00000001H, [R0]
00000C4B                         L423:	; bb52
00000C4B EC01                    		MOV.L [R0], R1
00000C4D 6101                    		CMP #00H, R1
00000C4F 21rr                    		BNE L420
00000C51                         L424:	; bb56
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1416
00000C51 A881                    		MOV.L 08H[R0], R1
00000C53 6211                    		ADD #01H, R1
00000C55 A081                    		MOV.L R1, 08H[R0]
00000C57 61D1                    		CMP #0DH, R1
00000C59 23rr                    		BLTU L416
00000C5B                         L425:	; bb64
                                 ;    1420 	} while (++s < 13);
                                 ;    1421 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1421
00000C5B B981                    		MOVU.W 0CH[R0], R1
00000C5D 7701FFFF00              		CMP #0FFFFH, R1
00000C62 20rr                    		BEQ L431
00000C64 08                   S  		BRA L427
00000C65                         L426:	; bb65
00000C65 F1060F                  		BSET #06H, 0FH[R0].B
00000C68 2Err                 B  		BRA L434
00000C6A                         L427:	; bb74
00000C6A A909                    		MOV.L 14H[R0], R1
00000C6C A80A                    		MOV.L 04H[R0], R2
00000C6E FED21E                  		MOVU.W [R2,R1], R14
00000C71 610E                    		CMP #00H, R14
00000C73 10                   S  		BEQ L429
00000C74                         L428:	; bb82
00000C74 F80600                  		MOV.L #00000000H, [R0]
00000C77 08                   S  		BRA L430
00000C78                         L429:	; bb83
00000C78 F80601                  		MOV.L #00000001H, [R0]
00000C7B                         L430:	; bb84
00000C7B EC01                    		MOV.L [R0], R1
00000C7D 6101                    		CMP #00H, R1
00000C7F 10                   S  		BEQ L432
00000C80                         L431:	; bb87
00000C80 F80601                  		MOV.L #00000001H, [R0]
00000C83 08                   S  		BRA L433
00000C84                         L432:	; bb88
00000C84 F80600                  		MOV.L #00000000H, [R0]
00000C87                         L433:	; bb89
00000C87 EC01                    		MOV.L [R0], R1
00000C89 6101                    		CMP #00H, R1
00000C8B 21rr                    		BNE L426
00000C8D                         L434:	; bb94
                                 ;    1422 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1422
00000C8D B389                    		MOVU.B 0FH[R0], R1
00000C8F A902                    		MOV.L 10H[R0], R2
00000C91 C321                    		MOV.B R1, [R2]
00000C93 6706                    		RTSD #18H
00000C95                         __$gen_numname:
                                 		.STACK	__$gen_numname=52
                                 ;    1423 }
                                 ;    1424 
                                 ;    1425 #endif
                                 ;    1426 #endif
                                 ;    1427 
                                 ;    1428 
                                 ;    1429 
                                 ;    1430 
                                 ;    1431 /*-----------------------------------------------------------------------*/
                                 ;    1432 /* Create numbered name                                                  */
                                 ;    1433 /*-----------------------------------------------------------------------*/
                                 ;    1434 #if _USE_LFN
                                 ;    1435 static
                                 ;    1436 void gen_numname (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1436
00000C95 7100D0                  		ADD #0FFFFFFD0H, R0
00000C98 A289                    		MOV.L R1, 2CH[R0]
00000C9A A282                    		MOV.L R2, 28H[R0]
00000C9C A20B                    		MOV.L R3, 24H[R0]
00000C9E A204                    		MOV.L R4, 20H[R0]
                                 ;    1437 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
                                 ;    1438 	const BYTE* src,	/* Pointer to SFN */
                                 ;    1439 	const WCHAR* lfn,	/* Pointer to LFN */
                                 ;    1440 	UINT seq			/* Sequence number */
                                 ;    1441 )
                                 ;    1442 {
                                 ;    1443 	BYTE ns[8], c;
                                 ;    1444 	UINT i, j;
                                 ;    1445 
                                 ;    1446 
                                 ;    1447 	mem_cpy(dst, src, 11);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1447
00000CA0 AA82                    		MOV.L 28H[R0], R2
00000CA2 AA89                    		MOV.L 2CH[R0], R1
00000CA4 66B3                    		MOV.L #0000000BH, R3
00000CA6 39rrrr               W  		BSR __$mem_cpy
00000CA9                         L436:	; entry.split
                                 ;    1448 
                                 ;    1449 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1449
00000CA9 AA01                    		MOV.L 20H[R0], R1
00000CAB 6161                    		CMP #06H, R1
00000CAD 23rr                    		BLTU L448
00000CAF                         L437:	; bb12
                                 ;    1450 		WCHAR wc;
                                 ;    1451 		DWORD sr = seq;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1451
00000CAF E5000807                		MOV.L 20H[R0], 1CH[R0]
00000CB3 2Err                 B  		BRA L446
00000CB5                         L438:	; bb14
                                 ;    1452 
                                 ;    1453 		while (*lfn) {	/* Create a CRC */
                                 ;    1454 			wc = *lfn++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1454
00000CB5 AA09                    		MOV.L 24H[R0], R1
00000CB7 D4100D                  		MOV.W [R1], 1AH[R0]
00000CBA AA09                    		MOV.L 24H[R0], R1
00000CBC 6221                    		ADD #02H, R1
00000CBE A209                    		MOV.L R1, 24H[R0]
00000CC0                         L439:	; bb14.split
                                 ;    1455 			for (i = 0; i < 16; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1455
00000CC0 3E0400                  		MOV.L #00000000H, 10H[R0]
00000CC3 2Err                 B  		BRA L445
00000CC5                         L440:	; bb19
                                 ;    1456 				sr = (sr << 1) + (wc & 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1456
00000CC5 A989                    		MOV.L 1CH[R0], R1
00000CC7 6C11                    		SHLL #01H, R1
00000CC9 BB0A                    		MOVU.W 1AH[R0], R2
00000CCB 6412                    		AND #01H, R2
00000CCD 5721                    		OR R2, R1
00000CCF A189                    		MOV.L R1, 1CH[R0]
00000CD1                         L441:	; bb19.split
                                 ;    1457 				wc >>= 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1457
00000CD1 BB09                    		MOVU.W 1AH[R0], R1
00000CD3 6811                    		SHLR #01H, R1
00000CD5 9309                    		MOV.W R1, 1AH[R0]
00000CD7                         L442:	; bb19.split1
                                 ;    1458 				if (sr & 0x10000) sr ^= 0x11021;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1458
00000CD7 A989                    		MOV.L 1CH[R0], R1
00000CD9 7D01                    		BTST #10H, R1
00000CDB 20rr                    		BEQ L444
00000CDD                         L443:	; bb31
00000CDD A989                    		MOV.L 1CH[R0], R1
00000CDF FD7CD1211001            		XOR #00011021H, R1
00000CE5 A189                    		MOV.L R1, 1CH[R0]
00000CE7                         L444:	; bb38
00000CE7 A901                    		MOV.L 10H[R0], R1
00000CE9 6211                    		ADD #01H, R1
00000CEB A101                    		MOV.L R1, 10H[R0]
00000CED                         L445:	; bb41
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1455
00000CED A901                    		MOV.L 10H[R0], R1
00000CEF 755110                  		CMP #10H, R1
00000CF2 23rr                    		BLTU L440
00000CF4                         L446:	; bb47
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1453
00000CF4 AA09                    		MOV.L 24H[R0], R1
00000CF6 5C1E                    		MOVU.W [R1], R14
00000CF8 610E                    		CMP #00H, R14
00000CFA 21rr                    		BNE L438
00000CFC                         L447:	; bb54
                                 ;    1459 			}
                                 ;    1460 		}
                                 ;    1461 		seq = (UINT)sr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1461
00000CFC E5000708                		MOV.L 1CH[R0], 20H[R0]
00000D00                         L448:	; bb60
                                 ;    1462 	}
                                 ;    1463 
                                 ;    1464 	/* itoa (hexdecimal) */
                                 ;    1465 	i = 7;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1465
00000D00 3E0407                  		MOV.L #00000007H, 10H[R0]
00000D03                         L449:	; bb61
                                 ;    1466 	do {
                                 ;    1467 		c = (seq % 16) + '0';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1467
00000D03 AA01                    		MOV.L 20H[R0], R1
00000D05 753130                  		OR #30H, R1
00000D08 75213F                  		AND #3FH, R1
00000D0B 8389                    		MOV.B R1, 0FH[R0]
00000D0D                         L450:	; bb61.split
                                 ;    1468 		if (c > '9') c += 7;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1468
00000D0D B389                    		MOVU.B 0FH[R0], R1
00000D0F 75513A                  		CMP #3AH, R1
00000D12 29rr                    		BLT L452
00000D14                         L451:	; bb67
00000D14 B389                    		MOVU.B 0FH[R0], R1
00000D16 6271                    		ADD #07H, R1
00000D18 8389                    		MOV.B R1, 0FH[R0]
00000D1A                         L452:	; bb77
00000D1A 710E07                  		ADD #07H, R0, R14
                                 ;    1469 		ns[i--] = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1469
00000D1D B389                    		MOVU.B 0FH[R0], R1
00000D1F A902                    		MOV.L 10H[R0], R2
00000D21 FE0E21                  		MOV.B R1, [R14,R2]
00000D24 A901                    		MOV.L 10H[R0], R1
00000D26 6011                    		SUB #01H, R1
00000D28 A101                    		MOV.L R1, 10H[R0]
00000D2A                         L453:	; bb77.split
                                 ;    1470 		seq /= 16;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1470
00000D2A AA01                    		MOV.L 20H[R0], R1
00000D2C 6841                    		SHLR #04H, R1
00000D2E A201                    		MOV.L R1, 20H[R0]
00000D30                         L454:	; bb77.split2
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1466
00000D30 AA01                    		MOV.L 20H[R0], R1
00000D32 6101                    		CMP #00H, R1
00000D34 21rr                    		BNE L449
00000D36                         L455:	; bb90
                                 ;    1471 	} while (seq);
                                 ;    1472 	ns[i] = '~';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1472
00000D36 A901                    		MOV.L 10H[R0], R1
00000D38 710E07                  		ADD #07H, R0, R14
00000D3B 754F7E                  		MOV.L #0000007EH, R15
00000D3E FE0E1F                  		MOV.B R15, [R14,R1]
00000D41                         L456:	; bb90.split
                                 ;    1473 
                                 ;    1474 	/* Append the number */
                                 ;    1475 	for (j = 0; j < i && dst[j] != ' '; j++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1475
00000D41 3E0500                  		MOV.L #00000000H, 14H[R0]
00000D44 08                   S  		BRA L458
00000D45                         L457:	; bb109
                                 ;    1476 		if (IsDBCS1(dst[j])) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1476
00000D45 A909                    		MOV.L 14H[R0], R1
00000D47 6211                    		ADD #01H, R1
00000D49 A109                    		MOV.L R1, 14H[R0]
00000D4B                         L458:	; bb112
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1475
00000D4B A909                    		MOV.L 14H[R0], R1
00000D4D 06850104                		CMP 10H[R0].L, R1
00000D51 22rr                    		BGEU L461
00000D53                         L459:	; bb117
00000D53 A909                    		MOV.L 14H[R0], R1
00000D55 AA8A                    		MOV.L 2CH[R0], R2
00000D57 FEC21E                  		MOVU.B [R2,R1], R14
00000D5A 755E20                  		CMP #20H, R14
00000D5D 10                   S  		BEQ L461
00000D5E                         L460:	; bb125
00000D5E F80601                  		MOV.L #00000001H, [R0]
00000D61 08                   S  		BRA L462
00000D62                         L461:	; bb126
00000D62 F80600                  		MOV.L #00000000H, [R0]
00000D65                         L462:	; bb127
00000D65 EC01                    		MOV.L [R0], R1
00000D67 6101                    		CMP #00H, R1
00000D69 21rr                    		BNE L457
00000D6B                         L463:	; bb134
                                 ;    1477 			if (j == i - 1) break;
                                 ;    1478 			j++;
                                 ;    1479 		}
                                 ;    1480 	}
                                 ;    1481 	do {
                                 ;    1482 		dst[j++] = (i < 8) ? ns[i++] : ' ';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1482
00000D6B A901                    		MOV.L 10H[R0], R1
00000D6D 6171                    		CMP #07H, R1
00000D6F A909                    		MOV.L 14H[R0], R1
00000D71 AA8A                    		MOV.L 2CH[R0], R2
00000D73 24rr                    		BGTU L465
00000D75                         L464:	; bb141
00000D75 A903                    		MOV.L 10H[R0], R3
00000D77 710E07                  		ADD #07H, R0, R14
00000D7A FECE34                  		MOVU.B [R14,R3], R4
00000D7D 6213                    		ADD #01H, R3
00000D7F A103                    		MOV.L R3, 10H[R0]
00000D81 E304                    		MOV.L R4, [R0]
00000D83 08                   S  		BRA L466
00000D84                         L465:	; bb149
00000D84 F80620                  		MOV.L #00000020H, [R0]
00000D87                         L466:	; bb150
00000D87 EC03                    		MOV.L [R0], R3
00000D89 FE0123                  		MOV.B R3, [R1,R2]
00000D8C A909                    		MOV.L 14H[R0], R1
00000D8E 6211                    		ADD #01H, R1
00000D90 A109                    		MOV.L R1, 14H[R0]
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1481
00000D92 6181                    		CMP #08H, R1
00000D94 23rr                    		BLTU L463
00000D96                         L467:	; return
                                 ;    1483 	} while (j < 8);
                                 ;    1484 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1484
00000D96 670C                    		RTSD #30H
00000D98                         __$sum_sfn:
                                 		.STACK	__$sum_sfn=20
                                 ;    1485 #endif
                                 ;    1486 
                                 ;    1487 
                                 ;    1488 
                                 ;    1489 
                                 ;    1490 /*-----------------------------------------------------------------------*/
                                 ;    1491 /* Calculate sum of an SFN                                               */
                                 ;    1492 /*-----------------------------------------------------------------------*/
                                 ;    1493 #if _USE_LFN
                                 ;    1494 static
                                 ;    1495 BYTE sum_sfn (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1495
00000D98 7100F0                  		ADD #0FFFFFFF0H, R0
00000D9B A089                    		MOV.L R1, 0CH[R0]
                                 ;    1496 	const BYTE* dir		/* Pointer to the SFN entry */
                                 ;    1497 )
                                 ;    1498 {
                                 ;    1499 	BYTE sum = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1499
00000D9D 3C0300                  		MOV.B #00H, 03H[R0]
00000DA0                         L469:	; entry.split
                                 ;    1500 	UINT n = 11;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1500
00000DA0 3E010B                  		MOV.L #0000000BH, 04H[R0]
00000DA3                         L470:	; bb
                                 ;    1501 
                                 ;    1502 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1502
00000DA3 B089                    		MOVU.B 03H[R0], R1
00000DA5 FD8112                  		SHLR #01H, R1, R2
00000DA8 6C71                    		SHLL #07H, R1
00000DAA 5712                    		OR R1, R2
00000DAC A889                    		MOV.L 0CH[R0], R1
00000DAE 4812                    		ADD [R1].UB, R2
00000DB0 808A                    		MOV.B R2, 03H[R0]
00000DB2 A889                    		MOV.L 0CH[R0], R1
00000DB4 6211                    		ADD #01H, R1
00000DB6 A089                    		MOV.L R1, 0CH[R0]
00000DB8 A809                    		MOV.L 04H[R0], R1
00000DBA 6011                    		SUB #01H, R1
00000DBC A009                    		MOV.L R1, 04H[R0]
00000DBE 6101                    		CMP #00H, R1
00000DC0 21rr                    		BNE L470
00000DC2                         L471:	; bb23
                                 ;    1503 	return sum;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1503
00000DC2 C500030B                		MOV.B 03H[R0], 0BH[R0]
00000DC6 B289                    		MOVU.B 0BH[R0], R1
00000DC8                         L472:	; bb23.split
                                 ;    1504 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1504
00000DC8 5B11                    		MOVU.B R1, R1
00000DCA 6704                    		RTSD #10H
00000DCC                         __$dir_find:
                                 		.STACK	__$dir_find=40
                                 ;    1505 #endif
                                 ;    1506 
                                 ;    1507 
                                 ;    1508 
                                 ;    1509 
                                 ;    1510 /*-----------------------------------------------------------------------*/
                                 ;    1511 /* Directory handling - Find an object in the directory                  */
                                 ;    1512 /*-----------------------------------------------------------------------*/
                                 ;    1513 
                                 ;    1514 static
                                 ;    1515 FRESULT dir_find (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1515
00000DCC 7EA6                    		PUSH.L R6
00000DCE 7100E0                  		ADD #0FFFFFFE0H, R0
00000DD1 A189                    		MOV.L R1, 1CH[R0]
00000DD3 6602                    		MOV.L #00000000H, R2
                                 ;    1516 	DIR* dp			/* Pointer to the directory object linked to the file name */
                                 ;    1517 )
                                 ;    1518 {
                                 ;    1519 	FRESULT res;
                                 ;    1520 	BYTE c, *dir;
                                 ;    1521 #if _USE_LFN
                                 ;    1522 	BYTE a, ord, sum;
                                 ;    1523 #endif
                                 ;    1524 
                                 ;    1525 	res = dir_sdi(dp, 0);			/* Rewind directory object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1525
00000DD5 39rrrr               W  		BSR __$dir_sdi
00000DD8 A081                    		MOV.L R1, 08H[R0]
00000DDA                         L474:	; entry.split
                                 ;    1526 	if (res != FR_OK) return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1526
00000DDA A881                    		MOV.L 08H[R0], R1
00000DDC 6101                    		CMP #00H, R1
00000DDE 10                   S  		BEQ L476
00000DDF                         L475:	; bb10
00000DDF E5000201                		MOV.L 08H[R0], 04H[R0]
00000DE3 38rrrr               W  		BRA L538
00000DE6                         L476:	; bb16
                                 ;    1527 
                                 ;    1528 #if _USE_LFN
                                 ;    1529 	ord = sum = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1529
00000DE6 3C87FF                  		MOV.B #0FFH, 17H[R0]
00000DE9 3C86FF                  		MOV.B #0FFH, 16H[R0]
00000DEC A989                    		MOV.L 1CH[R0], R1
00000DEE F91910FFFF              		MOV.W #0FFFFH, 20H[R1]
00000DF3                         L477:	; bb20
                                 ;    1530 #endif
                                 ;    1531 	do {
                                 ;    1532 		res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1532
00000DF3 A989                    		MOV.L 1CH[R0], R1
00000DF5 A912                    		MOV.L 10H[R1], R2
00000DF7 EC11                    		MOV.L [R1], R1
00000DF9 39rrrr               W  		BSR __$move_window
00000DFC A081                    		MOV.L R1, 08H[R0]
00000DFE                         L478:	; bb20.split
                                 ;    1533 		if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1533
00000DFE A881                    		MOV.L 08H[R0], R1
00000E00 6101                    		CMP #00H, R1
00000E02 3Brrrr               W  		BNE L537
00000E05                         L479:	; bb35
                                 ;    1534 		dir = dp->dir;					/* Ptr to the directory entry of current index */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1534
00000E05 A989                    		MOV.L 1CH[R0], R1
00000E07 E5100504                		MOV.L 14H[R1], 10H[R0]
00000E0B                         L480:	; bb35.split
                                 ;    1535 		c = dir[DIR_Name];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1535
00000E0B A901                    		MOV.L 10H[R0], R1
00000E0D C4100F                  		MOV.B [R1], 0FH[R0]
00000E10                         L481:	; bb35.split1
                                 ;    1536 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1536
00000E10 B389                    		MOVU.B 0FH[R0], R1
00000E12 6101                    		CMP #00H, R1
00000E14 18                   S  		BNE L483
00000E15                         L482:	; bb43
00000E15 3E0204                  		MOV.L #00000004H, 08H[R0]
00000E18 38rrrr               W  		BRA L537
00000E1B                         L483:	; bb50
                                 ;    1537 #if _USE_LFN	/* LFN configuration */
                                 ;    1538 		a = dir[DIR_Attr] & AM_MASK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1538
00000E1B A901                    		MOV.L 10H[R0], R1
00000E1D B299                    		MOVU.B 0BH[R1], R1
00000E1F 75213F                  		AND #3FH, R1
00000E22 8509                    		MOV.B R1, 15H[R0]
00000E24                         L484:	; bb50.split
                                 ;    1539 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1539
00000E24 B389                    		MOVU.B 0FH[R0], R1
00000E26 7551E5                  		CMP #0E5H, R1
00000E29 3Arrrr               W  		BEQ L532
00000E2C 38rrrr               W  		BRA L527
00000E2F                         L485:	; bb58
                                 ;    1540 			ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1540
00000E2F 3C86FF                  		MOV.B #0FFH, 16H[R0]
00000E32                         L486:	; bb58.split
00000E32 A989                    		MOV.L 1CH[R0], R1
00000E34 F91910FFFF              		MOV.W #0FFFFH, 20H[R1]
00000E39 38rrrr               W  		BRA L535
00000E3C                         L487:	; bb62
                                 ;    1541 		} else {
                                 ;    1542 			if (a == AM_LFN) {			/* An LFN entry is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1542
00000E3C B509                    		MOVU.B 15H[R0], R1
00000E3E 61F1                    		CMP #0FH, R1
00000E40 21rr                    		BNE L506
00000E42                         L488:	; bb64
                                 ;    1543 				if (dp->lfn) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1543
00000E42 A989                    		MOV.L 1CH[R0], R1
00000E44 A999                    		MOV.L 1CH[R1], R1
00000E46 6101                    		CMP #00H, R1
00000E48 3Arrrr               W  		BEQ L535
00000E4B                         L489:	; bb66
                                 ;    1544 					if (c & LLE) {		/* Is it start of LFN sequence? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1544
00000E4B F5060F                  		BTST #06H, 0FH[R0].B
00000E4E 20rr                    		BEQ L494
00000E50                         L490:	; bb67
                                 ;    1545 						sum = dir[LDIR_Chksum];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1545
00000E50 A901                    		MOV.L 10H[R0], R1
00000E52 C5100D17                		MOV.B 0DH[R1], 17H[R0]
00000E56                         L491:	; bb67.split
                                 ;    1546 						c &= ~LLE; ord = c;	/* LFN start order */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1546
00000E56 F10E0F                  		BCLR #06H, 0FH[R0].B
00000E59                         L492:	; bb67.split2
00000E59 C5000F16                		MOV.B 0FH[R0], 16H[R0]
00000E5D                         L493:	; bb67.split3
                                 ;    1547 						dp->lfn_idx = dp->index;	/* Start index of LFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1547
00000E5D A989                    		MOV.L 1CH[R0], R1
00000E5F D5110310                		MOV.W 06H[R1], 20H[R1]
00000E63                         L494:	; bb87
                                 ;    1548 					}
                                 ;    1549 					/* Check validity of the LFN entry and compare it with given name */
                                 ;    1550 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1550
00000E63 B389                    		MOVU.B 0FH[R0], R1
00000E65 450116                  		CMP 16H[R0].UB, R1
00000E68 21rr                    		BNE L497
00000E6A                         L495:	; bb94
00000E6A A901                    		MOV.L 10H[R0], R1
00000E6C B58A                    		MOVU.B 17H[R0], R2
00000E6E 45120D                  		CMP 0DH[R1].UB, R2
00000E71 18                   S  		BNE L497
00000E72                         L496:	; bb103
00000E72 F80601                  		MOV.L #00000001H, [R0]
00000E75 08                   S  		BRA L498
00000E76                         L497:	; bb104
00000E76 F80600                  		MOV.L #00000000H, [R0]
00000E79                         L498:	; bb105
00000E79 EC01                    		MOV.L [R0], R1
00000E7B 6101                    		CMP #00H, R1
00000E7D 20rr                    		BEQ L501
00000E7F                         L499:	; bb109
00000E7F A989                    		MOV.L 1CH[R0], R1
00000E81 A999                    		MOV.L 1CH[R1], R1
00000E83 A902                    		MOV.L 10H[R0], R2
00000E85 39rrrr               W  		BSR __$cmp_lfn
00000E88 6101                    		CMP #00H, R1
00000E8A 10                   S  		BEQ L501
00000E8B                         L500:	; bb117
00000E8B F80601                  		MOV.L #00000001H, [R0]
00000E8E 08                   S  		BRA L502
00000E8F                         L501:	; bb118
00000E8F F80600                  		MOV.L #00000000H, [R0]
00000E92                         L502:	; bb119
00000E92 EC01                    		MOV.L [R0], R1
00000E94 6101                    		CMP #00H, R1
00000E96 10                   S  		BEQ L504
00000E97                         L503:	; bb123
00000E97 B581                    		MOVU.B 16H[R0], R1
00000E99 6011                    		SUB #01H, R1
00000E9B E301                    		MOV.L R1, [R0]
00000E9D 08                   S  		BRA L505
00000E9E                         L504:	; bb127
00000E9E 3E00FF                  		MOV.L #000000FFH, 00H[R0]
00000EA1                         L505:	; bb128
00000EA1 EC01                    		MOV.L [R0], R1
00000EA3 8581                    		MOV.B R1, 16H[R0]
00000EA5 38rrrr               W  		BRA L535
00000EA8                         L506:	; bb140
                                 ;    1551 				}
                                 ;    1552 			} else {					/* An SFN entry is found */
                                 ;    1553 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1553
00000EA8 B581                    		MOVU.B 16H[R0], R1
00000EAA 6101                    		CMP #00H, R1
00000EAC 10                   S  		BEQ L508
00000EAD                         L507:	; bb147
00000EAD F80600                  		MOV.L #00000000H, [R0]
00000EB0 08                   S  		BRA L509
00000EB1                         L508:	; bb148
00000EB1 F80601                  		MOV.L #00000001H, [R0]
00000EB4                         L509:	; bb149
00000EB4 EC01                    		MOV.L [R0], R1
00000EB6 6101                    		CMP #00H, R1
00000EB8 20rr                    		BEQ L512
00000EBA                         L510:	; bb152
00000EBA A901                    		MOV.L 10H[R0], R1
00000EBC B58E                    		MOVU.B 17H[R0], R6
00000EBE 39rrrr               W  		BSR __$sum_sfn
00000EC1 4716                    		CMP R1, R6
00000EC3 18                   S  		BNE L512
00000EC4                         L511:	; bb160
00000EC4 F80601                  		MOV.L #00000001H, [R0]
00000EC7 08                   S  		BRA L513
00000EC8                         L512:	; bb161
00000EC8 F80600                  		MOV.L #00000000H, [R0]
00000ECB                         L513:	; bb162
00000ECB EC01                    		MOV.L [R0], R1
00000ECD 6101                    		CMP #00H, R1
00000ECF 3Brrrr               W  		BNE L537
00000ED2                         L514:	; bb168
                                 ;    1554 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1554
00000ED2 A989                    		MOV.L 1CH[R0], R1
00000ED4 A991                    		MOV.L 18H[R1], R1
00000ED6 F5100B                  		BTST #00H, 0BH[R1].B
00000ED9 10                   S  		BEQ L516
00000EDA                         L515:	; bb180
00000EDA F80600                  		MOV.L #00000000H, [R0]
00000EDD 08                   S  		BRA L517
00000EDE                         L516:	; bb181
00000EDE F80601                  		MOV.L #00000001H, [R0]
00000EE1                         L517:	; bb182
00000EE1 EC01                    		MOV.L [R0], R1
00000EE3 6101                    		CMP #00H, R1
00000EE5 20rr                    		BEQ L523
00000EE7                         L518:	; bb185
00000EE7 A989                    		MOV.L 1CH[R0], R1
00000EE9 A992                    		MOV.L 18H[R1], R2
00000EEB A901                    		MOV.L 10H[R0], R1
00000EED 66B3                    		MOV.L #0000000BH, R3
00000EEF 39rrrr               W  		BSR __$mem_cmp
00000EF2 6101                    		CMP #00H, R1
00000EF4 10                   S  		BEQ L520
00000EF5                         L519:	; bb193
00000EF5 F80600                  		MOV.L #00000000H, [R0]
00000EF8 08                   S  		BRA L521
00000EF9                         L520:	; bb194
00000EF9 F80601                  		MOV.L #00000001H, [R0]
00000EFC                         L521:	; bb195
00000EFC EC01                    		MOV.L [R0], R1
00000EFE 6101                    		CMP #00H, R1
00000F00 10                   S  		BEQ L523
00000F01                         L522:	; bb198
00000F01 F80601                  		MOV.L #00000001H, [R0]
00000F04 08                   S  		BRA L524
00000F05                         L523:	; bb199
00000F05 F80600                  		MOV.L #00000000H, [R0]
00000F08                         L524:	; bb200
00000F08 EC01                    		MOV.L [R0], R1
00000F0A 6101                    		CMP #00H, R1
00000F0C 21rr                    		BNE L537
00000F0E                         L525:	; bb205
                                 ;    1555 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1555
00000F0E 3C86FF                  		MOV.B #0FFH, 16H[R0]
00000F11                         L526:	; bb205.split
00000F11 A989                    		MOV.L 1CH[R0], R1
00000F13 F91910FFFF              		MOV.W #0FFFFH, 20H[R1]
00000F18 2Err                 B  		BRA L535
00000F1A                         L527:	; bb218
00000F1A F50315                  		BTST #03H, 15H[R0].B
00000F1D 10                   S  		BEQ L530
00000F1E                         L528:	; bb224
00000F1E B509                    		MOVU.B 15H[R0], R1
00000F20 61F1                    		CMP #0FH, R1
00000F22 10                   S  		BEQ L530
00000F23                         L529:	; bb229
00000F23 F80601                  		MOV.L #00000001H, [R0]
00000F26 08                   S  		BRA L531
00000F27                         L530:	; bb230
00000F27 F80600                  		MOV.L #00000000H, [R0]
00000F2A                         L531:	; bb231
00000F2A EC01                    		MOV.L [R0], R1
00000F2C 6101                    		CMP #00H, R1
00000F2E 10                   S  		BEQ L533
00000F2F                         L532:	; bb235
00000F2F F80601                  		MOV.L #00000001H, [R0]
00000F32 08                   S  		BRA L534
00000F33                         L533:	; bb236
00000F33 F80600                  		MOV.L #00000000H, [R0]
00000F36                         L534:	; bb237
00000F36 EC01                    		MOV.L [R0], R1
00000F38 6101                    		CMP #00H, R1
00000F3A 3Brrrr               W  		BNE L485
00000F3D 38rrrr               W  		BRA L487
00000F40                         L535:	; bb242
                                 ;    1556 			}
                                 ;    1557 		}
                                 ;    1558 #else		/* Non LFN configuration */
                                 ;    1559 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
                                 ;    1560 			break;
                                 ;    1561 #endif
                                 ;    1562 		res = dir_next(dp, 0);		/* Next entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1562
00000F40 A989                    		MOV.L 1CH[R0], R1
00000F42 6602                    		MOV.L #00000000H, R2
00000F44 39rrrr               W  		BSR __$dir_next
00000F47 A081                    		MOV.L R1, 08H[R0]
00000F49                         L536:	; bb242.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1531
00000F49 A881                    		MOV.L 08H[R0], R1
00000F4B 6101                    		CMP #00H, R1
00000F4D 3Arrrr               W  		BEQ L477
00000F50                         L537:	; bb250
                                 ;    1563 	} while (res == FR_OK);
                                 ;    1564 
                                 ;    1565 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1565
00000F50 E5000201                		MOV.L 08H[R0], 04H[R0]
00000F54                         L538:	; bb253
00000F54 A809                    		MOV.L 04H[R0], R1
00000F56 A181                    		MOV.L R1, 18H[R0]
                                 ;    1566 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1566
00000F58 3F6609                  		RTSD #24H, R6-R6
00000F5B                         __$dir_read:
                                 		.STACK	__$dir_read=40
                                 ;    1567 
                                 ;    1568 
                                 ;    1569 
                                 ;    1570 
                                 ;    1571 /*-----------------------------------------------------------------------*/
                                 ;    1572 /* Read an object from the directory                                     */
                                 ;    1573 /*-----------------------------------------------------------------------*/
                                 ;    1574 #if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
                                 ;    1575 static
                                 ;    1576 FRESULT dir_read (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1576
00000F5B 7EA6                    		PUSH.L R6
00000F5D 7100E0                  		ADD #0FFFFFFE0H, R0
00000F60 A189                    		MOV.L R1, 1CH[R0]
00000F62 A182                    		MOV.L R2, 18H[R0]
                                 ;    1577 	DIR* dp,		/* Pointer to the directory object */
                                 ;    1578 	int vol			/* Filtered by 0:file/directory or 1:volume label */
                                 ;    1579 )
                                 ;    1580 {
                                 ;    1581 	FRESULT res;
                                 ;    1582 	BYTE a, c, *dir;
                                 ;    1583 #if _USE_LFN
                                 ;    1584 	BYTE ord = 0xFF, sum = 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1584
00000F64 3C82FF                  		MOV.B #0FFH, 12H[R0]
00000F67 3C83FF                  		MOV.B #0FFH, 13H[R0]
00000F6A                         L540:	; entry.split
                                 ;    1585 #endif
                                 ;    1586 
                                 ;    1587 	res = FR_NO_FILE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1587
00000F6A 3E0104                  		MOV.L #00000004H, 04H[R0]
00000F6D 38rrrr               W  		BRA L583
00000F70                         L541:	; bb
                                 ;    1588 	while (dp->sect) {
                                 ;    1589 		res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1589
00000F70 A989                    		MOV.L 1CH[R0], R1
00000F72 A912                    		MOV.L 10H[R1], R2
00000F74 EC11                    		MOV.L [R1], R1
00000F76 39rrrr               W  		BSR __$move_window
00000F79 A009                    		MOV.L R1, 04H[R0]
00000F7B                         L542:	; bb.split
                                 ;    1590 		if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1590
00000F7B A809                    		MOV.L 04H[R0], R1
00000F7D 6101                    		CMP #00H, R1
00000F7F 3Brrrr               W  		BNE L584
00000F82                         L543:	; bb22
                                 ;    1591 		dir = dp->dir;					/* Ptr to the directory entry of current index */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1591
00000F82 A989                    		MOV.L 1CH[R0], R1
00000F84 E5100503                		MOV.L 14H[R1], 0CH[R0]
00000F88                         L544:	; bb22.split
                                 ;    1592 		c = dir[DIR_Name];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1592
00000F88 A889                    		MOV.L 0CH[R0], R1
00000F8A C4100B                  		MOV.B [R1], 0BH[R0]
00000F8D                         L545:	; bb22.split1
                                 ;    1593 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1593
00000F8D B289                    		MOVU.B 0BH[R0], R1
00000F8F 6101                    		CMP #00H, R1
00000F91 18                   S  		BNE L547
00000F92                         L546:	; bb30
00000F92 3E0104                  		MOV.L #00000004H, 04H[R0]
00000F95 38rrrr               W  		BRA L584
00000F98                         L547:	; bb37
                                 ;    1594 		a = dir[DIR_Attr] & AM_MASK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1594
00000F98 A889                    		MOV.L 0CH[R0], R1
00000F9A B299                    		MOVU.B 0BH[R1], R1
00000F9C 75213F                  		AND #3FH, R1
00000F9F 8281                    		MOV.B R1, 0AH[R0]
00000FA1                         L548:	; bb37.split
                                 ;    1595 #if _USE_LFN	/* LFN configuration */
                                 ;    1596 		if (c == DDE || (!_FS_RPATH && c == '.') || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without valid data */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1596
00000FA1 B289                    		MOVU.B 0BH[R0], R1
00000FA3 7551E5                  		CMP #0E5H, R1
00000FA6 3Arrrr               W  		BEQ L574
00000FA9 38rrrr               W  		BRA L575
00000FAC                         L549:	; bb45
                                 ;    1597 			ord = 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1597
00000FAC 3C82FF                  		MOV.B #0FFH, 12H[R0]
00000FAF 38rrrr               W  		BRA L581
00000FB2                         L550:	; bb47
                                 ;    1598 		} else {
                                 ;    1599 			if (a == AM_LFN) {			/* An LFN entry is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1599
00000FB2 B281                    		MOVU.B 0AH[R0], R1
00000FB4 61F1                    		CMP #0FH, R1
00000FB6 21rr                    		BNE L568
00000FB8                         L551:	; bb49
                                 ;    1600 				if (c & LLE) {			/* Is it start of LFN sequence? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1600
00000FB8 F5060B                  		BTST #06H, 0BH[R0].B
00000FBB 20rr                    		BEQ L556
00000FBD                         L552:	; bb50
                                 ;    1601 					sum = dir[LDIR_Chksum];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1601
00000FBD A889                    		MOV.L 0CH[R0], R1
00000FBF C5100D13                		MOV.B 0DH[R1], 13H[R0]
00000FC3                         L553:	; bb50.split
                                 ;    1602 					c &= ~LLE; ord = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1602
00000FC3 F10E0B                  		BCLR #06H, 0BH[R0].B
00000FC6                         L554:	; bb50.split2
00000FC6 C5000B12                		MOV.B 0BH[R0], 12H[R0]
00000FCA                         L555:	; bb50.split3
                                 ;    1603 					dp->lfn_idx = dp->index;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1603
00000FCA A989                    		MOV.L 1CH[R0], R1
00000FCC D5110310                		MOV.W 06H[R1], 20H[R1]
00000FD0                         L556:	; bb70
                                 ;    1604 				}
                                 ;    1605 				/* Check LFN validity and capture it */
                                 ;    1606 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1606
00000FD0 B289                    		MOVU.B 0BH[R0], R1
00000FD2 450112                  		CMP 12H[R0].UB, R1
00000FD5 21rr                    		BNE L559
00000FD7                         L557:	; bb77
00000FD7 A889                    		MOV.L 0CH[R0], R1
00000FD9 B48A                    		MOVU.B 13H[R0], R2
00000FDB 45120D                  		CMP 0DH[R1].UB, R2
00000FDE 18                   S  		BNE L559
00000FDF                         L558:	; bb86
00000FDF F80601                  		MOV.L #00000001H, [R0]
00000FE2 08                   S  		BRA L560
00000FE3                         L559:	; bb87
00000FE3 F80600                  		MOV.L #00000000H, [R0]
00000FE6                         L560:	; bb88
00000FE6 EC01                    		MOV.L [R0], R1
00000FE8 6101                    		CMP #00H, R1
00000FEA 20rr                    		BEQ L563
00000FEC                         L561:	; bb92
00000FEC A989                    		MOV.L 1CH[R0], R1
00000FEE A999                    		MOV.L 1CH[R1], R1
00000FF0 A88A                    		MOV.L 0CH[R0], R2
00000FF2 39rrrr               W  		BSR __$pick_lfn
00000FF5 6101                    		CMP #00H, R1
00000FF7 10                   S  		BEQ L563
00000FF8                         L562:	; bb100
00000FF8 F80601                  		MOV.L #00000001H, [R0]
00000FFB 08                   S  		BRA L564
00000FFC                         L563:	; bb101
00000FFC F80600                  		MOV.L #00000000H, [R0]
00000FFF                         L564:	; bb102
00000FFF EC01                    		MOV.L [R0], R1
00001001 6101                    		CMP #00H, R1
00001003 10                   S  		BEQ L566
00001004                         L565:	; bb106
00001004 B481                    		MOVU.B 12H[R0], R1
00001006 6011                    		SUB #01H, R1
00001008 E301                    		MOV.L R1, [R0]
0000100A 08                   S  		BRA L567
0000100B                         L566:	; bb110
0000100B 3E00FF                  		MOV.L #000000FFH, 00H[R0]
0000100E                         L567:	; bb111
0000100E EC01                    		MOV.L [R0], R1
00001010 8481                    		MOV.B R1, 12H[R0]
00001012 2Err                 B  		BRA L581
00001014                         L568:	; bb116
                                 ;    1607 			} else {					/* An SFN entry is found */
                                 ;    1608 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1608
00001014 B481                    		MOVU.B 12H[R0], R1
00001016 6101                    		CMP #00H, R1
00001018 21rr                    		BNE L571
0000101A 08                   S  		BRA L570
0000101B                         L569:	; bb117
                                 ;    1609 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1609
0000101B A989                    		MOV.L 1CH[R0], R1
0000101D F91910FFFF              		MOV.W #0FFFFH, 20H[R1]
00001022 2Err                 B  		BRA L584
00001024                         L570:	; bb124
00001024 A889                    		MOV.L 0CH[R0], R1
00001026 B48E                    		MOVU.B 13H[R0], R6
00001028 39rrrr               W  		BSR __$sum_sfn
0000102B 4716                    		CMP R1, R6
0000102D 10                   S  		BEQ L572
0000102E                         L571:	; bb132
0000102E F80601                  		MOV.L #00000001H, [R0]
00001031 08                   S  		BRA L573
00001032                         L572:	; bb133
00001032 F80600                  		MOV.L #00000000H, [R0]
00001035                         L573:	; bb134
00001035 EC01                    		MOV.L [R0], R1
00001037 6101                    		CMP #00H, R1
00001039 21rr                    		BNE L569
0000103B 2Err                 B  		BRA L584
0000103D                         L574:	; bb152
0000103D F80601                  		MOV.L #00000001H, [R0]
00001040 08                   S  		BRA L576
00001041                         L575:	; bb153
00001041 F80600                  		MOV.L #00000000H, [R0]
00001044                         L576:	; bb154
00001044 EC01                    		MOV.L [R0], R1
00001046 6101                    		CMP #00H, R1
00001048 21rr                    		BNE L578
0000104A                         L577:	; bb157
0000104A 754EDF                  		MOV.L #000000DFH, R14
0000104D 510E0A                  		AND 0AH[R0].UB, R14
00001050 618E                    		CMP #08H, R14
00001052 FCDBE0                  		SCEQ.L R14
00001055 06850E06                		CMP 18H[R0].L, R14
00001059 10                   S  		BEQ L579
0000105A                         L578:	; bb166
0000105A F80601                  		MOV.L #00000001H, [R0]
0000105D 08                   S  		BRA L580
0000105E                         L579:	; bb167
0000105E F80600                  		MOV.L #00000000H, [R0]
00001061                         L580:	; bb168
00001061 EC01                    		MOV.L [R0], R1
00001063 6101                    		CMP #00H, R1
00001065 3Brrrr               W  		BNE L549
00001068 38rrrr               W  		BRA L550
0000106B                         L581:	; bb173
                                 ;    1610 				break;
                                 ;    1611 			}
                                 ;    1612 		}
                                 ;    1613 #else		/* Non LFN configuration */
                                 ;    1614 		if (c != DDE && (_FS_RPATH || c != '.') && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol)	/* Is it a valid entry? */
                                 ;    1615 			break;
                                 ;    1616 #endif
                                 ;    1617 		res = dir_next(dp, 0);				/* Next entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1617
0000106B A989                    		MOV.L 1CH[R0], R1
0000106D 6602                    		MOV.L #00000000H, R2
0000106F 39rrrr               W  		BSR __$dir_next
00001072 A009                    		MOV.L R1, 04H[R0]
00001074                         L582:	; bb173.split
                                 ;    1618 		if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1618
00001074 A809                    		MOV.L 04H[R0], R1
00001076 6101                    		CMP #00H, R1
00001078 18                   S  		BNE L584
00001079                         L583:	; bb184
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1588
00001079 A989                    		MOV.L 1CH[R0], R1
0000107B A911                    		MOV.L 10H[R1], R1
0000107D 6101                    		CMP #00H, R1
0000107F 3Brrrr               W  		BNE L541
00001082                         L584:	; bb193
                                 ;    1619 	}
                                 ;    1620 
                                 ;    1621 	if (res != FR_OK) dp->sect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1621
00001082 A809                    		MOV.L 04H[R0], R1
00001084 6101                    		CMP #00H, R1
00001086 10                   S  		BEQ L586
00001087                         L585:	; bb194
00001087 A989                    		MOV.L 1CH[R0], R1
00001089 3E1400                  		MOV.L #00000000H, 10H[R1]
0000108C                         L586:	; bb201
                                 ;    1622 
                                 ;    1623 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1623
0000108C A809                    		MOV.L 04H[R0], R1
0000108E A109                    		MOV.L R1, 14H[R0]
00001090                         L587:	; bb201.split
                                 ;    1624 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1624
00001090 3F6609                  		RTSD #24H, R6-R6
00001093                         __$dir_register:
                                 		.STACK	__$dir_register=56
                                 ;    1625 #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
                                 ;    1626 
                                 ;    1627 
                                 ;    1628 
                                 ;    1629 
                                 ;    1630 /*-----------------------------------------------------------------------*/
                                 ;    1631 /* Register an object to the directory                                   */
                                 ;    1632 /*-----------------------------------------------------------------------*/
                                 ;    1633 #if !_FS_READONLY
                                 ;    1634 static
                                 ;    1635 FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_DISK_ERR:Disk error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1635
00001093 7100CC                  		ADD #0FFFFFFCCH, R0
00001096 A301                    		MOV.L R1, 30H[R0]
                                 ;    1636 	DIR* dp				/* Target directory with object name to be created */
                                 ;    1637 )
                                 ;    1638 {
                                 ;    1639 	FRESULT res;
                                 ;    1640 #if _USE_LFN	/* LFN configuration */
                                 ;    1641 	UINT n, nent;
                                 ;    1642 	BYTE sn[12], *fn, sum;
                                 ;    1643 	WCHAR *lfn;
                                 ;    1644 
                                 ;    1645 
                                 ;    1646 	fn = dp->fn; lfn = dp->lfn;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1646
00001098 E5100608                		MOV.L 18H[R1], 20H[R0]
0000109C AB01                    		MOV.L 30H[R0], R1
0000109E E510070A                		MOV.L 1CH[R1], 28H[R0]
000010A2                         L589:	; entry.split
                                 ;    1647 	mem_cpy(sn, fn, 12);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1647
000010A2 AA02                    		MOV.L 20H[R0], R2
000010A4 66C3                    		MOV.L #0000000CH, R3
000010A6 710114                  		ADD #14H, R0, R1
000010A9 39rrrr               W  		BSR __$mem_cpy
000010AC                         L590:	; entry.split1
                                 ;    1648 
                                 ;    1649 	if (_FS_RPATH && (sn[NSFLAG] & NS_DOT))		/* Cannot create dot entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1649
000010AC F5051F                  		BTST #05H, 1FH[R0].B
000010AF 18                   S  		BNE L592
000010B0 2Err                 B  		BRA L593
000010B2                         L591:	; bb17
                                 ;    1650 		return FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1650
000010B2 3E0106                  		MOV.L #00000006H, 04H[R0]
000010B5 38rrrr               W  		BRA L643
000010B8                         L592:	; bb27
000010B8 F80601                  		MOV.L #00000001H, [R0]
000010BB 08                   S  		BRA L594
000010BC                         L593:	; bb28
000010BC F80600                  		MOV.L #00000000H, [R0]
000010BF                         L594:	; bb29
000010BF EC01                    		MOV.L [R0], R1
000010C1 6101                    		CMP #00H, R1
000010C3 21rr                    		BNE L591
000010C5                         L595:	; bb33
                                 ;    1651 
                                 ;    1652 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1652
000010C5 F5001F                  		BTST #00H, 1FH[R0].B
000010C8 20rr                    		BEQ L610
000010CA                         L596:	; bb34
                                 ;    1653 		fn[NSFLAG] = 0; dp->lfn = 0;			/* Find only SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1653
000010CA AA01                    		MOV.L 20H[R0], R1
000010CC 3C1B00                  		MOV.B #00H, 0BH[R1]
000010CF                         L597:	; bb34.split
000010CF AB01                    		MOV.L 30H[R0], R1
000010D1 3E1700                  		MOV.L #00000000H, 1CH[R1]
000010D4                         L598:	; bb34.split2
                                 ;    1654 		for (n = 1; n < 100; n++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1654
000010D4 3E0301                  		MOV.L #00000001H, 0CH[R0]
000010D7 2Err                 B  		BRA L603
000010D9                         L599:	; bb39
                                 ;    1655 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1655
000010D9 A88C                    		MOV.L 0CH[R0], R4
000010DB AA83                    		MOV.L 28H[R0], R3
000010DD AA01                    		MOV.L 20H[R0], R1
000010DF 710214                  		ADD #14H, R0, R2
000010E2 39rrrr               W  		BSR __$gen_numname
000010E5                         L600:	; bb39.split
                                 ;    1656 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1656
000010E5 AB01                    		MOV.L 30H[R0], R1
000010E7 39rrrr               W  		BSR __$dir_find
000010EA A081                    		MOV.L R1, 08H[R0]
000010EC                         L601:	; bb39.split3
                                 ;    1657 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1657
000010EC A881                    		MOV.L 08H[R0], R1
000010EE 6101                    		CMP #00H, R1
000010F0 21rr                    		BNE L604
000010F2                         L602:	; bb53
000010F2 A889                    		MOV.L 0CH[R0], R1
000010F4 6211                    		ADD #01H, R1
000010F6 A089                    		MOV.L R1, 0CH[R0]
000010F8                         L603:	; bb56
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1654
000010F8 A889                    		MOV.L 0CH[R0], R1
000010FA 755164                  		CMP #64H, R1
000010FD 23rr                    		BLTU L599
000010FF                         L604:	; bb63
                                 ;    1658 		}
                                 ;    1659 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1659
000010FF A889                    		MOV.L 0CH[R0], R1
00001101 755164                  		CMP #64H, R1
00001104 18                   S  		BNE L606
00001105                         L605:	; bb64
00001105 3E0107                  		MOV.L #00000007H, 04H[R0]
00001108 38rrrr               W  		BRA L643
0000110B                         L606:	; bb71
                                 ;    1660 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1660
0000110B A881                    		MOV.L 08H[R0], R1
0000110D 6141                    		CMP #04H, R1
0000110F 10                   S  		BEQ L608
00001110                         L607:	; bb72
00001110 E5000201                		MOV.L 08H[R0], 04H[R0]
00001114 38rrrr               W  		BRA L643
00001117                         L608:	; bb79
                                 ;    1661 		fn[NSFLAG] = sn[NSFLAG]; dp->lfn = lfn;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1661
00001117 B789                    		MOVU.B 1FH[R0], R1
00001119 AA02                    		MOV.L 20H[R0], R2
0000111B 82A9                    		MOV.B R1, 0BH[R2]
0000111D                         L609:	; bb79.split
0000111D AA81                    		MOV.L 28H[R0], R1
0000111F AB02                    		MOV.L 30H[R0], R2
00001121 A1A9                    		MOV.L R1, 1CH[R2]
00001123                         L610:	; bb97
                                 ;    1662 	}
                                 ;    1663 
                                 ;    1664 	if (sn[NSFLAG] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1664
00001123 F5011F                  		BTST #01H, 1FH[R0].B
00001126 20rr                    		BEQ L615
00001128                         L611:	; bb98
                                 ;    1665 		for (n = 0; lfn[n]; n++) ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1665
00001128 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000112B 08                   S  		BRA L613
0000112C                         L612:	; bb99
0000112C 6211                    		ADD #01H, R1
0000112E A089                    		MOV.L R1, 0CH[R0]
00001130                         L613:	; bb102
00001130 AA82                    		MOV.L 28H[R0], R2
00001132 A889                    		MOV.L 0CH[R0], R1
00001134 FED12E                  		MOVU.W [R1,R2], R14
00001137 610E                    		CMP #00H, R14
00001139 21rr                    		BNE L612
0000113B                         L614:	; bb111
                                 ;    1666 		nent = (n + 25) / 13;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1666
0000113B 711119                  		ADD #19H, R1
0000113E FD74910D                		DIVU #0DH, R1
00001142 A101                    		MOV.L R1, 10H[R0]
00001144 08                   S  		BRA L616
00001145                         L615:	; bb115
                                 ;    1667 	} else {						/* Otherwise allocate an entry for an SFN  */
                                 ;    1668 		nent = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1668
00001145 3E0401                  		MOV.L #00000001H, 10H[R0]
00001148                         L616:	; bb124
                                 ;    1669 	}
                                 ;    1670 	res = dir_alloc(dp, nent);		/* Allocate entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1670
00001148 A902                    		MOV.L 10H[R0], R2
0000114A AB01                    		MOV.L 30H[R0], R1
0000114C 39rrrr               W  		BSR __$dir_alloc
0000114F A081                    		MOV.L R1, 08H[R0]
00001151                         L617:	; bb124.split
                                 ;    1671 
                                 ;    1672 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1672
00001151 A881                    		MOV.L 08H[R0], R1
00001153 6101                    		CMP #00H, R1
00001155 20rr                    		BEQ L631
00001157 2Err                 B  		BRA L633
00001159                         L618:	; bb129
                                 ;    1673 		res = dir_sdi(dp, dp->index - nent);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1673
00001159 AB01                    		MOV.L 30H[R0], R1
0000115B B89A                    		MOVU.W 06H[R1], R2
0000115D 06810204                		SUB 10H[R0].L, R2
00001161 39rrrr               W  		BSR __$dir_sdi
00001164 A081                    		MOV.L R1, 08H[R0]
00001166                         L619:	; bb129.split
                                 ;    1674 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1674
00001166 A881                    		MOV.L 08H[R0], R1
00001168 6101                    		CMP #00H, R1
0000116A 21rr                    		BNE L635
0000116C                         L620:	; bb139
                                 ;    1675 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1675
0000116C AB01                    		MOV.L 30H[R0], R1
0000116E A991                    		MOV.L 18H[R1], R1
00001170 39rrrr               W  		BSR __$sum_sfn
00001173 C70127                  		MOV.B R1, 27H[R0]
00001176                         L621:	; bb144
                                 ;    1676 			do {					/* Store LFN entries in bottom first */
                                 ;    1677 				res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1677
00001176 AB01                    		MOV.L 30H[R0], R1
00001178 A912                    		MOV.L 10H[R1], R2
0000117A EC11                    		MOV.L [R1], R1
0000117C 39rrrr               W  		BSR __$move_window
0000117F A081                    		MOV.L R1, 08H[R0]
00001181                         L622:	; bb144.split
                                 ;    1678 				if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1678
00001181 A881                    		MOV.L 08H[R0], R1
00001183 6101                    		CMP #00H, R1
00001185 21rr                    		BNE L635
00001187                         L623:	; bb159
                                 ;    1679 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1679
00001187 AB01                    		MOV.L 30H[R0], R1
00001189 A91A                    		MOV.L 14H[R1], R2
0000118B A999                    		MOV.L 1CH[R1], R1
0000118D 590427                  		MOVU.B 27H[R0], R4
00001190 B403                    		MOVU.B 10H[R0], R3
00001192 39rrrr               W  		BSR __$fit_lfn
00001195                         L624:	; bb159.split
                                 ;    1680 				dp->fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1680
00001195 AB01                    		MOV.L 30H[R0], R1
00001197 EC11                    		MOV.L [R1], R1
00001199 3C1401                  		MOV.B #01H, 04H[R1]
0000119C                         L625:	; bb159.split4
                                 ;    1681 				res = dir_next(dp, 0);	/* Next entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1681
0000119C AB01                    		MOV.L 30H[R0], R1
0000119E 6602                    		MOV.L #00000000H, R2
000011A0 39rrrr               W  		BSR __$dir_next
000011A3 A081                    		MOV.L R1, 08H[R0]
000011A5                         L626:	; bb159.split5
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1676
000011A5 A881                    		MOV.L 08H[R0], R1
000011A7 6101                    		CMP #00H, R1
000011A9 21rr                    		BNE L629
000011AB                         L627:	; bb178
000011AB A901                    		MOV.L 10H[R0], R1
000011AD 6011                    		SUB #01H, R1
000011AF A101                    		MOV.L R1, 10H[R0]
000011B1 6101                    		CMP #00H, R1
000011B3 10                   S  		BEQ L629
000011B4                         L628:	; bb184
000011B4 F80601                  		MOV.L #00000001H, [R0]
000011B7 08                   S  		BRA L630
000011B8                         L629:	; bb185
000011B8 F80600                  		MOV.L #00000000H, [R0]
000011BB                         L630:	; bb186
000011BB EC01                    		MOV.L [R0], R1
000011BD 6101                    		CMP #00H, R1
000011BF 21rr                    		BNE L621
000011C1 2Err                 B  		BRA L635
000011C3                         L631:	; bb201
000011C3 A901                    		MOV.L 10H[R0], R1
000011C5 6011                    		SUB #01H, R1
000011C7 A101                    		MOV.L R1, 10H[R0]
000011C9 6101                    		CMP #00H, R1
000011CB 10                   S  		BEQ L633
000011CC                         L632:	; bb207
000011CC F80601                  		MOV.L #00000001H, [R0]
000011CF 08                   S  		BRA L634
000011D0                         L633:	; bb208
000011D0 F80600                  		MOV.L #00000000H, [R0]
000011D3                         L634:	; bb209
000011D3 EC01                    		MOV.L [R0], R1
000011D5 6101                    		CMP #00H, R1
000011D7 3Brrrr               W  		BNE L618
000011DA                         L635:	; bb215
                                 ;    1682 			} while (res == FR_OK && --nent);
                                 ;    1683 		}
                                 ;    1684 	}
                                 ;    1685 #else	/* Non LFN configuration */
                                 ;    1686 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
                                 ;    1687 #endif
                                 ;    1688 
                                 ;    1689 	if (res == FR_OK) {				/* Set SFN entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1689
000011DA A881                    		MOV.L 08H[R0], R1
000011DC 6101                    		CMP #00H, R1
000011DE 21rr                    		BNE L642
000011E0                         L636:	; bb216
                                 ;    1690 		res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1690
000011E0 AB01                    		MOV.L 30H[R0], R1
000011E2 A912                    		MOV.L 10H[R1], R2
000011E4 EC11                    		MOV.L [R1], R1
000011E6 39rrrr               W  		BSR __$move_window
000011E9 A081                    		MOV.L R1, 08H[R0]
000011EB                         L637:	; bb216.split
                                 ;    1691 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1691
000011EB A881                    		MOV.L 08H[R0], R1
000011ED 6101                    		CMP #00H, R1
000011EF 21rr                    		BNE L642
000011F1                         L638:	; bb225
                                 ;    1692 			mem_set(dp->dir, 0, SZ_DIR);	/* Clean the entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1692
000011F1 AB01                    		MOV.L 30H[R0], R1
000011F3 A919                    		MOV.L 14H[R1], R1
000011F5 754320                  		MOV.L #00000020H, R3
000011F8 6602                    		MOV.L #00000000H, R2
000011FA 39rrrr               W  		BSR __$mem_set
000011FD                         L639:	; bb225.split
                                 ;    1693 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1693
000011FD AB01                    		MOV.L 30H[R0], R1
000011FF A992                    		MOV.L 18H[R1], R2
00001201 A919                    		MOV.L 14H[R1], R1
00001203 66B3                    		MOV.L #0000000BH, R3
00001205 39rrrr               W  		BSR __$mem_cpy
00001208                         L640:	; bb225.split6
                                 ;    1694 #if _USE_LFN
                                 ;    1695 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1695
00001208 AB01                    		MOV.L 30H[R0], R1
0000120A A992                    		MOV.L 18H[R1], R2
0000120C B2AA                    		MOVU.B 0BH[R2], R2
0000120E 752218                  		AND #18H, R2
00001211 A919                    		MOV.L 14H[R1], R1
00001213 8312                    		MOV.B R2, 0CH[R1]
00001215                         L641:	; bb225.split7
                                 ;    1696 #endif
                                 ;    1697 			dp->fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1697
00001215 AB01                    		MOV.L 30H[R0], R1
00001217 EC11                    		MOV.L [R1], R1
00001219 3C1401                  		MOV.B #01H, 04H[R1]
0000121C                         L642:	; bb260
                                 ;    1698 		}
                                 ;    1699 	}
                                 ;    1700 
                                 ;    1701 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1701
0000121C E5000201                		MOV.L 08H[R0], 04H[R0]
00001220                         L643:	; bb263
00001220 A809                    		MOV.L 04H[R0], R1
00001222 A289                    		MOV.L R1, 2CH[R0]
                                 ;    1702 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1702
00001224 670D                    		RTSD #34H
00001226                         __$dir_remove:
                                 		.STACK	__$dir_remove=24
                                 ;    1703 #endif /* !_FS_READONLY */
                                 ;    1704 
                                 ;    1705 
                                 ;    1706 
                                 ;    1707 
                                 ;    1708 /*-----------------------------------------------------------------------*/
                                 ;    1709 /* Remove an object from the directory                                   */
                                 ;    1710 /*-----------------------------------------------------------------------*/
                                 ;    1711 #if !_FS_READONLY && !_FS_MINIMIZE
                                 ;    1712 static
                                 ;    1713 FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1713
00001226 7100EC                  		ADD #0FFFFFFECH, R0
00001229 A101                    		MOV.L R1, 10H[R0]
                                 ;    1714 	DIR* dp				/* Directory object pointing the entry to be removed */
                                 ;    1715 )
                                 ;    1716 {
                                 ;    1717 	FRESULT res;
                                 ;    1718 #if _USE_LFN	/* LFN configuration */
                                 ;    1719 	UINT i;
                                 ;    1720 
                                 ;    1721 	i = dp->index;	/* SFN index */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1721
0000122B B899                    		MOVU.W 06H[R1], R1
0000122D A081                    		MOV.L R1, 08H[R0]
0000122F                         L645:	; entry.split
                                 ;    1722 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1722
0000122F A901                    		MOV.L 10H[R0], R1
00001231 BC12                    		MOVU.W 20H[R1], R2
00001233 7702FFFF00              		CMP #0FFFFH, R2
00001238 18                   S  		BNE L647
00001239                         L646:	; bb
00001239 E10002                  		MOV.L 08H[R0], [R0]
0000123C 08                   S  		BRA L648
0000123D                         L647:	; bb16
0000123D A902                    		MOV.L 10H[R0], R2
0000123F BC22                    		MOVU.W 20H[R2], R2
00001241 E302                    		MOV.L R2, [R0]
00001243                         L648:	; bb21
00001243 EC02                    		MOV.L [R0], R2
00001245 39rrrr               W  		BSR __$dir_sdi
00001248 A009                    		MOV.L R1, 04H[R0]
                                 ;    1723 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1723
0000124A 6101                    		CMP #00H, R1
0000124C 21rr                    		BNE L659
0000124E                         L649:	; bb26
                                 ;    1724 		do {
                                 ;    1725 			res = move_window(dp->fs, dp->sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1725
0000124E A901                    		MOV.L 10H[R0], R1
00001250 A912                    		MOV.L 10H[R1], R2
00001252 EC11                    		MOV.L [R1], R1
00001254 39rrrr               W  		BSR __$move_window
00001257 A009                    		MOV.L R1, 04H[R0]
00001259                         L650:	; bb26.split
                                 ;    1726 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1726
00001259 A809                    		MOV.L 04H[R0], R1
0000125B 6101                    		CMP #00H, R1
0000125D 21rr                    		BNE L657
0000125F                         L651:	; bb41
                                 ;    1727 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1727
0000125F A901                    		MOV.L 10H[R0], R1
00001261 A919                    		MOV.L 14H[R1], R1
00001263 754320                  		MOV.L #00000020H, R3
00001266 6602                    		MOV.L #00000000H, R2
00001268 39rrrr               W  		BSR __$mem_set
0000126B                         L652:	; bb41.split
                                 ;    1728 			*dp->dir = DDE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1728
0000126B A901                    		MOV.L 10H[R0], R1
0000126D A919                    		MOV.L 14H[R1], R1
0000126F F814E5                  		MOV.B #0E5H, [R1]
00001272                         L653:	; bb41.split1
                                 ;    1729 			dp->fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1729
00001272 A901                    		MOV.L 10H[R0], R1
00001274 EC11                    		MOV.L [R1], R1
00001276 3C1401                  		MOV.B #01H, 04H[R1]
00001279                         L654:	; bb41.split2
                                 ;    1730 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1730
00001279 A901                    		MOV.L 10H[R0], R1
0000127B B899                    		MOVU.W 06H[R1], R1
0000127D 06850102                		CMP 08H[R0].L, R1
00001281 22rr                    		BGEU L657
00001283                         L655:	; bb63
                                 ;    1731 			res = dir_next(dp, 0);		/* Next entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1731
00001283 A901                    		MOV.L 10H[R0], R1
00001285 6602                    		MOV.L #00000000H, R2
00001287 39rrrr               W  		BSR __$dir_next
0000128A A009                    		MOV.L R1, 04H[R0]
0000128C                         L656:	; bb63.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1724
0000128C A809                    		MOV.L 04H[R0], R1
0000128E 6101                    		CMP #00H, R1
00001290 20rr                    		BEQ L649
00001292                         L657:	; bb73
                                 ;    1732 		} while (res == FR_OK);
                                 ;    1733 		if (res == FR_NO_FILE) res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1733
00001292 A809                    		MOV.L 04H[R0], R1
00001294 6141                    		CMP #04H, R1
00001296 18                   S  		BNE L659
00001297                         L658:	; bb74
00001297 3E0102                  		MOV.L #00000002H, 04H[R0]
0000129A                         L659:	; bb84
                                 ;    1734 	}
                                 ;    1735 
                                 ;    1736 #else			/* Non LFN configuration */
                                 ;    1737 	res = dir_sdi(dp, dp->index);
                                 ;    1738 	if (res == FR_OK) {
                                 ;    1739 		res = move_window(dp->fs, dp->sect);
                                 ;    1740 		if (res == FR_OK) {
                                 ;    1741 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
                                 ;    1742 			*dp->dir = DDE;
                                 ;    1743 			dp->fs->wflag = 1;
                                 ;    1744 		}
                                 ;    1745 	}
                                 ;    1746 #endif
                                 ;    1747 
                                 ;    1748 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1748
0000129A A809                    		MOV.L 04H[R0], R1
0000129C A089                    		MOV.L R1, 0CH[R0]
0000129E                         L660:	; bb84.split
                                 ;    1749 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1749
0000129E 6705                    		RTSD #14H
000012A0                         __$get_fileinfo:
                                 		.STACK	__$get_fileinfo=40
                                 ;    1750 #endif /* !_FS_READONLY */
                                 ;    1751 
                                 ;    1752 
                                 ;    1753 
                                 ;    1754 
                                 ;    1755 /*-----------------------------------------------------------------------*/
                                 ;    1756 /* Get file information from directory entry                             */
                                 ;    1757 /*-----------------------------------------------------------------------*/
                                 ;    1758 #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
                                 ;    1759 static
                                 ;    1760 void get_fileinfo (		/* No return code */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1760
000012A0 7100DC                  		ADD #0FFFFFFDCH, R0
000012A3 A201                    		MOV.L R1, 20H[R0]
000012A5 A18A                    		MOV.L R2, 1CH[R0]
                                 ;    1761 	DIR* dp,			/* Pointer to the directory object */
                                 ;    1762 	FILINFO* fno	 	/* Pointer to the file information to be filled */
                                 ;    1763 )
                                 ;    1764 {
                                 ;    1765 	UINT i;
                                 ;    1766 	TCHAR *p, c;
                                 ;    1767 
                                 ;    1768 
                                 ;    1769 	p = fno->fname;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1769
000012A7 6292                    		ADD #09H, R2
000012A9 A082                    		MOV.L R2, 08H[R0]
000012AB                         L662:	; entry.split
                                 ;    1770 	if (dp->sect) {		/* Get SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1770
000012AB AA01                    		MOV.L 20H[R0], R1
000012AD A911                    		MOV.L 10H[R1], R1
000012AF 6101                    		CMP #00H, R1
000012B1 3Arrrr               W  		BEQ L690
000012B4                         L663:	; bb11
                                 ;    1771 		BYTE *dir = dp->dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1771
000012B4 AA01                    		MOV.L 20H[R0], R1
000012B6 E5100504                		MOV.L 14H[R1], 10H[R0]
000012BA                         L664:	; bb11.split
                                 ;    1772 
                                 ;    1773 		i = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1773
000012BA 3E0100                  		MOV.L #00000000H, 04H[R0]
000012BD 38rrrr               W  		BRA L685
000012C0                         L665:	; bb15
                                 ;    1774 		while (i < 11) {		/* Copy name body and extension */
                                 ;    1775 			c = (TCHAR)dir[i++];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1775
000012C0 A809                    		MOV.L 04H[R0], R1
000012C2 A902                    		MOV.L 10H[R0], R2
000012C4 FEC211                  		MOVU.B [R2,R1], R1
000012C7 8389                    		MOV.B R1, 0FH[R0]
000012C9 A809                    		MOV.L 04H[R0], R1
000012CB 6211                    		ADD #01H, R1
000012CD A009                    		MOV.L R1, 04H[R0]
000012CF                         L666:	; bb15.split
                                 ;    1776 			if (c == ' ') continue;			/* Skip padding spaces */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1776
000012CF B389                    		MOVU.B 0FH[R0], R1
000012D1 755120                  		CMP #20H, R1
000012D4 20rr                    		BEQ L685
000012D6                         L667:	; bb30
                                 ;    1777 			if (c == NDDE) c = (TCHAR)DDE;	/* Restore replaced DDE character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1777
000012D6 B389                    		MOVU.B 0FH[R0], R1
000012D8 6151                    		CMP #05H, R1
000012DA 18                   S  		BNE L669
000012DB                         L668:	; bb31
000012DB 3C0FE5                  		MOV.B #0E5H, 0FH[R0]
000012DE                         L669:	; bb38
                                 ;    1778 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1778
000012DE A809                    		MOV.L 04H[R0], R1
000012E0 6191                    		CMP #09H, R1
000012E2 21rr                    		BNE L671
000012E4                         L670:	; bb39
000012E4 A881                    		MOV.L 08H[R0], R1
000012E6 F8142E                  		MOV.B #2EH, [R1]
000012E9 A881                    		MOV.L 08H[R0], R1
000012EB 6211                    		ADD #01H, R1
000012ED A081                    		MOV.L R1, 08H[R0]
000012EF                         L671:	; bb48
                                 ;    1779 #if _USE_LFN
                                 ;    1780 			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1780
000012EF B389                    		MOVU.B 0FH[R0], R1
000012F1 755140                  		CMP #40H, R1
000012F4 2Arr                    		BGT L673
000012F6 2Err                 B  		BRA L675
000012F8                         L672:	; bb49
                                 ;    1781 				c += 0x20;			/* To lower */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1781
000012F8 B389                    		MOVU.B 0FH[R0], R1
000012FA 711120                  		ADD #20H, R1
000012FD 8389                    		MOV.B R1, 0FH[R0]
000012FF 2Err                 B  		BRA L684
00001301                         L673:	; bb58
00001301 B389                    		MOVU.B 0FH[R0], R1
00001303 75515A                  		CMP #5AH, R1
00001306 2Arr                    		BGT L675
00001308                         L674:	; bb63
00001308 F80601                  		MOV.L #00000001H, [R0]
0000130B 08                   S  		BRA L676
0000130C                         L675:	; bb64
0000130C F80600                  		MOV.L #00000000H, [R0]
0000130F                         L676:	; bb65
0000130F EC01                    		MOV.L [R0], R1
00001311 6101                    		CMP #00H, R1
00001313 20rr                    		BEQ L682
00001315                         L677:	; bb69
00001315 A809                    		MOV.L 04H[R0], R1
00001317 6191                    		CMP #09H, R1
00001319 A901                    		MOV.L 10H[R0], R1
0000131B B311                    		MOVU.B 0CH[R1], R1
0000131D 23rr                    		BLTU L679
0000131F                         L678:	; bb77
0000131F F80610                  		MOV.L #00000010H, [R0]
00001322 08                   S  		BRA L680
00001323                         L679:	; bb78
00001323 F80608                  		MOV.L #00000008H, [R0]
00001326                         L680:	; bb79
00001326 06A00C01                		TST [R0].L, R1
0000132A 10                   S  		BEQ L682
0000132B                         L681:	; bb85
0000132B F80601                  		MOV.L #00000001H, [R0]
0000132E 08                   S  		BRA L683
0000132F                         L682:	; bb86
0000132F F80600                  		MOV.L #00000000H, [R0]
00001332                         L683:	; bb87
00001332 EC01                    		MOV.L [R0], R1
00001334 6101                    		CMP #00H, R1
00001336 21rr                    		BNE L672
00001338                         L684:	; bb92
                                 ;    1782 #if _LFN_UNICODE
                                 ;    1783 			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
                                 ;    1784 				c = c << 8 | dir[i++];
                                 ;    1785 			c = ff_convert(c, 1);	/* OEM -> Unicode */
                                 ;    1786 			if (!c) c = '?';
                                 ;    1787 #endif
                                 ;    1788 #endif
                                 ;    1789 			*p++ = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1789
00001338 B389                    		MOVU.B 0FH[R0], R1
0000133A A882                    		MOV.L 08H[R0], R2
0000133C C321                    		MOV.B R1, [R2]
0000133E A881                    		MOV.L 08H[R0], R1
00001340 6211                    		ADD #01H, R1
00001342 A081                    		MOV.L R1, 08H[R0]
00001344                         L685:	; bb98
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1774
00001344 A809                    		MOV.L 04H[R0], R1
00001346 61B1                    		CMP #0BH, R1
00001348 22rr                  * 		BLTU L665
         38rrrr                  
0000134D                         L686:	; bb103
                                 ;    1790 		}
                                 ;    1791 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1791
0000134D A901                    		MOV.L 10H[R0], R1
0000134F A98A                    		MOV.L 1CH[R0], R2
00001351 C5120B08                		MOV.B 0BH[R1], 08H[R2]
00001355                         L687:	; bb103.split
                                 ;    1792 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1792
00001355 A901                    		MOV.L 10H[R0], R1
00001357 A98A                    		MOV.L 1CH[R0], R2
00001359 E11207                  		MOV.L 1CH[R1], [R2]
0000135C                         L688:	; bb103.split1
                                 ;    1793 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1793
0000135C A901                    		MOV.L 10H[R0], R1
0000135E A98A                    		MOV.L 1CH[R0], R2
00001360 D5120C02                		MOV.W 18H[R1], 04H[R2]
00001364                         L689:	; bb103.split2
                                 ;    1794 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1794
00001364 A901                    		MOV.L 10H[R0], R1
00001366 A98A                    		MOV.L 1CH[R0], R2
00001368 D5120B03                		MOV.W 16H[R1], 06H[R2]
0000136C                         L690:	; bb133
                                 ;    1795 	}
                                 ;    1796 	*p = 0;		/* Terminate SFN string by a \0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1796
0000136C A881                    		MOV.L 08H[R0], R1
0000136E F81400                  		MOV.B #00H, [R1]
00001371                         L691:	; bb133.split
                                 ;    1797 
                                 ;    1798 #if _USE_LFN
                                 ;    1799 	if (fno->lfname) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1799
00001371 A989                    		MOV.L 1CH[R0], R1
00001373 A991                    		MOV.L 18H[R1], R1
00001375 6101                    		CMP #00H, R1
00001377 3Arrrr               W  		BEQ L715
0000137A                         L692:	; bb136
                                 ;    1800 		WCHAR w, *lfn;
                                 ;    1801 
                                 ;    1802 		i = 0; p = fno->lfname;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1802
0000137A 3E0100                  		MOV.L #00000000H, 04H[R0]
0000137D                         L693:	; bb136.split
0000137D A989                    		MOV.L 1CH[R0], R1
0000137F E5100602                		MOV.L 18H[R1], 08H[R0]
00001383                         L694:	; bb136.split3
                                 ;    1803 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1803
00001383 AA01                    		MOV.L 20H[R0], R1
00001385 A911                    		MOV.L 10H[R1], R1
00001387 6101                    		CMP #00H, R1
00001389 21rr                    		BNE L706
0000138B 2Err                 B  		BRA L708
0000138D                         L695:	; bb141
                                 ;    1804 			lfn = dp->lfn;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1804
0000138D AA01                    		MOV.L 20H[R0], R1
0000138F E5100706                		MOV.L 1CH[R1], 18H[R0]
00001393 2Err                 B  		BRA L705
00001395                         L696:	; bb145
                                 ;    1805 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
                                 ;    1806 #if !_LFN_UNICODE
                                 ;    1807 				w = ff_convert(w, 0);		/* Unicode -> OEM */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1807
00001395 BA89                    		MOVU.W 16H[R0], R1
00001397 6602                    		MOV.L #00000000H, R2
00001399 05rrrrrr             A  		BSR _ff_convert
0000139D 9289                    		MOV.W R1, 16H[R0]
0000139F                         L697:	; bb145.split
                                 ;    1808 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1808
0000139F BA89                    		MOVU.W 16H[R0], R1
000013A1 6101                    		CMP #00H, R1
000013A3 18                   S  		BNE L699
000013A4 08                   S  		BRA L700
000013A5                         L698:	; bb149
000013A5 3E0100                  		MOV.L #00000000H, 04H[R0]
000013A8 2Err                 B  		BRA L714
000013AA                         L699:	; bb155
000013AA F80600                  		MOV.L #00000000H, [R0]
000013AD 08                   S  		BRA L701
000013AE                         L700:	; bb156
000013AE F80601                  		MOV.L #00000001H, [R0]
000013B1                         L701:	; bb157
000013B1 EC01                    		MOV.L [R0], R1
000013B3 6101                    		CMP #00H, R1
000013B5 21rr                    		BNE L698
000013B7                         L702:	; bb174.split
                                 ;    1809 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
                                 ;    1810 					p[i++] = (TCHAR)(w >> 8);
                                 ;    1811 #endif
                                 ;    1812 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1812
000013B7 A989                    		MOV.L 1CH[R0], R1
000013B9 A999                    		MOV.L 1CH[R1], R1
000013BB 6011                    		SUB #01H, R1
000013BD 06850101                		CMP 04H[R0].L, R1
000013C1 24rr                    		BGTU L704
000013C3                         L703:	; bb175
000013C3 3E0100                  		MOV.L #00000000H, 04H[R0]
000013C6 2Err                 B  		BRA L714
000013C8                         L704:	; bb185
                                 ;    1813 				p[i++] = (TCHAR)w;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1813
000013C8 B581                    		MOVU.B 16H[R0], R1
000013CA A80A                    		MOV.L 04H[R0], R2
000013CC A883                    		MOV.L 08H[R0], R3
000013CE FE0321                  		MOV.B R1, [R3,R2]
000013D1 A809                    		MOV.L 04H[R0], R1
000013D3 6211                    		ADD #01H, R1
000013D5 A009                    		MOV.L R1, 04H[R0]
000013D7                         L705:	; bb193
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1805
000013D7 A981                    		MOV.L 18H[R0], R1
000013D9 5C11                    		MOVU.W [R1], R1
000013DB 9289                    		MOV.W R1, 16H[R0]
000013DD A982                    		MOV.L 18H[R0], R2
000013DF 6222                    		ADD #02H, R2
000013E1 A182                    		MOV.L R2, 18H[R0]
000013E3 6101                    		CMP #00H, R1
000013E5 21rr                    		BNE L696
000013E7 2Err                 B  		BRA L714
000013E9                         L706:	; bb210
000013E9 A989                    		MOV.L 1CH[R0], R1
000013EB A999                    		MOV.L 1CH[R1], R1
000013ED 6101                    		CMP #00H, R1
000013EF 10                   S  		BEQ L708
000013F0                         L707:	; bb216
000013F0 F80601                  		MOV.L #00000001H, [R0]
000013F3 08                   S  		BRA L709
000013F4                         L708:	; bb217
000013F4 F80600                  		MOV.L #00000000H, [R0]
000013F7                         L709:	; bb218
000013F7 EC01                    		MOV.L [R0], R1
000013F9 6101                    		CMP #00H, R1
000013FB 20rr                    		BEQ L712
000013FD                         L710:	; bb222
000013FD AA01                    		MOV.L 20H[R0], R1
000013FF BC11                    		MOVU.W 20H[R1], R1
00001401 7701FFFF00              		CMP #0FFFFH, R1
00001406 10                   S  		BEQ L712
00001407                         L711:	; bb229
00001407 F80601                  		MOV.L #00000001H, [R0]
0000140A 08                   S  		BRA L713
0000140B                         L712:	; bb230
0000140B F80600                  		MOV.L #00000000H, [R0]
0000140E                         L713:	; bb231
0000140E EC01                    		MOV.L [R0], R1
00001410 6101                    		CMP #00H, R1
00001412 3Brrrr               W  		BNE L695
00001415                         L714:	; bb236
00001415 660E                    		MOV.L #00000000H, R14
                                 ;    1814 			}
                                 ;    1815 		}
                                 ;    1816 		p[i] = 0;	/* Terminate LFN string by a \0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1816
00001417 A809                    		MOV.L 04H[R0], R1
00001419 A882                    		MOV.L 08H[R0], R2
0000141B FE021E                  		MOV.B R14, [R2,R1]
0000141E 6709                    		RTSD #24H
00001420                         L715:	; return
                                 ;    1817 	}
                                 ;    1818 #endif
                                 ;    1819 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1819
00001420 6709                    		RTSD #24H
00001422                         __$create_name:
                                 		.STACK	__$create_name=52
                                 ;    1820 #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2*/
                                 ;    1821 
                                 ;    1822 
                                 ;    1823 
                                 ;    1824 
                                 ;    1825 /*-----------------------------------------------------------------------*/
                                 ;    1826 /* Pick a segment and create the object name in directory form           */
                                 ;    1827 /*-----------------------------------------------------------------------*/
                                 ;    1828 
                                 ;    1829 static
                                 ;    1830 FRESULT create_name (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1830
00001422 7100D0                  		ADD #0FFFFFFD0H, R0
00001425 A289                    		MOV.L R1, 2CH[R0]
00001427 A282                    		MOV.L R2, 28H[R0]
                                 ;    1831 	DIR* dp,			/* Pointer to the directory object */
                                 ;    1832 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
                                 ;    1833 )
                                 ;    1834 {
                                 ;    1835 #if _USE_LFN	/* LFN configuration */
                                 ;    1836 	BYTE b, cf;
                                 ;    1837 	WCHAR w, *lfn;
                                 ;    1838 	UINT i, ni, si, di;
                                 ;    1839 	const TCHAR *p;
                                 ;    1840 
                                 ;    1841 	/* Create LFN in Unicode */
                                 ;    1842 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1842
00001429 E42008                  		MOV.L [R2], 20H[R0]
0000142C 08                   S  		BRA L718
0000142D                         L717:	; bb
0000142D AA01                    		MOV.L 20H[R0], R1
0000142F 6211                    		ADD #01H, R1
00001431 A201                    		MOV.L R1, 20H[R0]
00001433                         L718:	; bb16
00001433 AA01                    		MOV.L 20H[R0], R1
00001435 581E                    		MOVU.B [R1], R14
00001437 755E2F                  		CMP #2FH, R14
0000143A 10                   S  		BEQ L720
0000143B                         L719:	; bb22
0000143B AA01                    		MOV.L 20H[R0], R1
0000143D 581E                    		MOVU.B [R1], R14
0000143F 755E5C                  		CMP #5CH, R14
00001442 18                   S  		BNE L721
00001443                         L720:	; bb28
00001443 F80601                  		MOV.L #00000001H, [R0]
00001446 08                   S  		BRA L722
00001447                         L721:	; bb29
00001447 F80600                  		MOV.L #00000000H, [R0]
0000144A                         L722:	; bb30
0000144A EC01                    		MOV.L [R0], R1
0000144C 6101                    		CMP #00H, R1
0000144E 21rr                    		BNE L717
00001450                         L723:	; bb34
                                 ;    1843 	lfn = dp->lfn;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1843
00001450 AA89                    		MOV.L 2CH[R0], R1
00001452 E5100703                		MOV.L 1CH[R1], 0CH[R0]
00001456                         L724:	; bb34.split
                                 ;    1844 	si = di = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1844
00001456 3E0700                  		MOV.L #00000000H, 1CH[R0]
00001459 3E0600                  		MOV.L #00000000H, 18H[R0]
0000145C 38rrrr               W  		BRA L749
0000145F                         L725:	; bb54
0000145F B909                    		MOVU.W 0AH[R0], R1
00001461 75512F                  		CMP #2FH, R1
00001464 18                   S  		BNE L727
00001465                         L726:	; bb59
00001465 F80601                  		MOV.L #00000001H, [R0]
00001468 08                   S  		BRA L728
00001469                         L727:	; bb60
00001469 F80600                  		MOV.L #00000000H, [R0]
0000146C                         L728:	; bb61
0000146C EC01                    		MOV.L [R0], R1
0000146E 6101                    		CMP #00H, R1
00001470 18                   S  		BNE L730
00001471                         L729:	; bb65
00001471 B909                    		MOVU.W 0AH[R0], R1
00001473 75515C                  		CMP #5CH, R1
00001476 18                   S  		BNE L731
00001477                         L730:	; bb70
00001477 F80601                  		MOV.L #00000001H, [R0]
0000147A 08                   S  		BRA L732
0000147B                         L731:	; bb71
0000147B F80600                  		MOV.L #00000000H, [R0]
0000147E                         L732:	; bb72
0000147E EC01                    		MOV.L [R0], R1
00001480 6101                    		CMP #00H, R1
00001482 3Brrrr               W  		BNE L751
00001485                         L733:	; bb78
                                 ;    1845 	for (;;) {
                                 ;    1846 		w = p[si++];					/* Get a character */
                                 ;    1847 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
                                 ;    1848 		if (di >= _MAX_LFN)				/* Reject too long name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1848
00001485 A989                    		MOV.L 1CH[R0], R1
00001487 7551FF                  		CMP #0FFH, R1
0000148A 23rr                    		BLTU L735
0000148C                         L734:	; bb79
                                 ;    1849 			return FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1849
0000148C 3E0106                  		MOV.L #00000006H, 04H[R0]
0000148F 38rrrr               W  		BRA L890
00001492                         L735:	; bb85
                                 ;    1850 #if !_LFN_UNICODE
                                 ;    1851 		w &= 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1851
00001492 B281                    		MOVU.B 0AH[R0], R1
00001494 9109                    		MOV.W R1, 0AH[R0]
00001496                         L736:	; bb85.split1
                                 ;    1852 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
                                 ;    1853 			b = (BYTE)p[si++];			/* Get 2nd byte */
                                 ;    1854 			if (!IsDBCS2(b))
                                 ;    1855 				return FR_INVALID_NAME;	/* Reject invalid sequence */
                                 ;    1856 			w = (w << 8) + b;			/* Create a DBC */
                                 ;    1857 		}
                                 ;    1858 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1858
00001496 B909                    		MOVU.W 0AH[R0], R1
00001498 6612                    		MOV.L #00000001H, R2
0000149A 05rrrrrr             A  		BSR _ff_convert
0000149E 9109                    		MOV.W R1, 0AH[R0]
000014A0                         L737:	; bb85.split2
                                 ;    1859 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1859
000014A0 B909                    		MOVU.W 0AH[R0], R1
000014A2 6101                    		CMP #00H, R1
000014A4 18                   S  		BNE L739
000014A5 2Err                 B  		BRA L740
000014A7                         L738:	; bb113
000014A7 3E0106                  		MOV.L #00000006H, 04H[R0]
000014AA 38rrrr               W  		BRA L890
000014AD                         L739:	; bb119
000014AD F80600                  		MOV.L #00000000H, [R0]
000014B0 08                   S  		BRA L741
000014B1                         L740:	; bb120
000014B1 F80601                  		MOV.L #00000001H, [R0]
000014B4                         L741:	; bb121
000014B4 EC01                    		MOV.L [R0], R1
000014B6 6101                    		CMP #00H, R1
000014B8 21rr                    		BNE L738
000014BA                         L742:	; bb126
                                 ;    1860 #endif
                                 ;    1861 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1861
000014BA B909                    		MOVU.W 0AH[R0], R1
000014BC 755180                  		CMP #80H, R1
000014BF 29rr                    		BLT L744
000014C1 2Err                 B  		BRA L746
000014C3                         L743:	; bb127
                                 ;    1862 			return FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1862
000014C3 3E0106                  		MOV.L #00000006H, 04H[R0]
000014C6 38rrrr               W  		BRA L890
000014C9                         L744:	; bb133
000014C9 B90A                    		MOVU.W 0AH[R0], R2
000014CB FB12rrrrrrrr            		MOV.L #_L10, R1
000014D1 39rrrr               W  		BSR __$chk_chr
000014D4 6101                    		CMP #00H, R1
000014D6 10                   S  		BEQ L746
000014D7                         L745:	; bb139
000014D7 F80601                  		MOV.L #00000001H, [R0]
000014DA 08                   S  		BRA L747
000014DB                         L746:	; bb140
000014DB F80600                  		MOV.L #00000000H, [R0]
000014DE                         L747:	; bb141
000014DE EC01                    		MOV.L [R0], R1
000014E0 6101                    		CMP #00H, R1
000014E2 21rr                    		BNE L743
000014E4                         L748:	; bb146
                                 ;    1863 		lfn[di++] = w;					/* Store the Unicode character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1863
000014E4 9909                    		MOV.W 0AH[R0], R1
000014E6 A98A                    		MOV.L 1CH[R0], R2
000014E8 A88B                    		MOV.L 0CH[R0], R3
000014EA FE1231                  		MOV.W R1, [R2,R3]
000014ED A989                    		MOV.L 1CH[R0], R1
000014EF 6211                    		ADD #01H, R1
000014F1 A189                    		MOV.L R1, 1CH[R0]
000014F3                         L749:	; bb153.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1846
000014F3 A981                    		MOV.L 18H[R0], R1
000014F5 AA02                    		MOV.L 20H[R0], R2
000014F7 FEC211                  		MOVU.B [R2,R1], R1
000014FA 9109                    		MOV.W R1, 0AH[R0]
000014FC A981                    		MOV.L 18H[R0], R1
000014FE 6211                    		ADD #01H, R1
00001500 A181                    		MOV.L R1, 18H[R0]
00001502                         L750:	; bb153.split3
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1847
00001502 B909                    		MOVU.W 0AH[R0], R1
00001504 755120                  		CMP #20H, R1
00001507 28rr                  * 		BLT L726
         38rrrr                  
0000150C 38rrrr               W  		BRA L725
0000150F                         L751:	; bb155
                                 ;    1864 	}
                                 ;    1865 	*path = &p[si];						/* Return pointer to the next segment */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1865
0000150F AA01                    		MOV.L 20H[R0], R1
00001511 06890106                		ADD 18H[R0].L, R1
00001515 AA82                    		MOV.L 28H[R0], R2
00001517 E321                    		MOV.L R1, [R2]
00001519                         L752:	; bb155.split
                                 ;    1866 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1866
00001519 B909                    		MOVU.W 0AH[R0], R1
0000151B 75511F                  		CMP #1FH, R1
0000151E 2Arr                    		BGT L754
00001520                         L753:	; bb164
00001520 F80604                  		MOV.L #00000004H, [R0]
00001523 08                   S  		BRA L755
00001524                         L754:	; bb165
00001524 F80600                  		MOV.L #00000000H, [R0]
00001527                         L755:	; bb166
00001527 EC01                    		MOV.L [R0], R1
00001529 8209                    		MOV.B R1, 09H[R0]
                                 ;    1867 #if _FS_RPATH
                                 ;    1868 	if ((di == 1 && lfn[di-1] == '.') || /* Is this a dot entry? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1868
0000152B A989                    		MOV.L 1CH[R0], R1
0000152D 6111                    		CMP #01H, R1
0000152F 20rr                    		BEQ L765
00001531 2Err                 B  		BRA L767
00001533                         L756:	; bb171
00001533 660E                    		MOV.L #00000000H, R14
                                 ;    1869 		(di == 2 && lfn[di-1] == '.' && lfn[di-2] == '.')) {
                                 ;    1870 		lfn[di] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1870
00001535 A989                    		MOV.L 1CH[R0], R1
00001537 A88A                    		MOV.L 0CH[R0], R2
00001539 FE112E                  		MOV.W R14, [R1,R2]
0000153C                         L757:	; bb171.split
                                 ;    1871 		for (i = 0; i < 11; i++)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1871
0000153C 3E0400                  		MOV.L #00000000H, 10H[R0]
0000153F 2Err                 B  		BRA L762
00001541                         L758:	; bb175
                                 ;    1872 			dp->fn[i] = (i < di) ? '.' : ' ';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1872
00001541 A903                    		MOV.L 10H[R0], R3
00001543 06850307                		CMP 1CH[R0].L, R3
00001547 22rr                    		BGEU L760
00001549                         L759:	; bb185
00001549 F8062E                  		MOV.L #0000002EH, [R0]
0000154C 08                   S  		BRA L761
0000154D                         L760:	; bb186
0000154D F80620                  		MOV.L #00000020H, [R0]
00001550                         L761:	; bb187
00001550 EC03                    		MOV.L [R0], R3
00001552 FE0213                  		MOV.B R3, [R2,R1]
00001555 A901                    		MOV.L 10H[R0], R1
00001557 6211                    		ADD #01H, R1
00001559 A101                    		MOV.L R1, 10H[R0]
0000155B                         L762:	; bb193
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1871
0000155B A902                    		MOV.L 10H[R0], R2
0000155D 61B2                    		CMP #0BH, R2
0000155F AA89                    		MOV.L 2CH[R0], R1
00001561 A991                    		MOV.L 18H[R1], R1
00001563 23rr                    		BLTU L758
00001565                         L763:	; bb198
                                 ;    1873 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1873
00001565 B20B                    		MOVU.B 09H[R0], R3
00001567 7853                    		BSET #05H, R3
00001569 FE0213                  		MOV.B R3, [R2,R1]
0000156C                         L764:	; bb198.split
                                 ;    1874 		return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1874
0000156C 3E0100                  		MOV.L #00000000H, 04H[R0]
0000156F 38rrrr               W  		BRA L890
00001572                         L765:	; bb212
00001572 A989                    		MOV.L 1CH[R0], R1
00001574 6C11                    		SHLL #01H, R1
00001576 06890103                		ADD 0CH[R0].L, R1
0000157A 6021                    		SUB #02H, R1
0000157C 5C1E                    		MOVU.W [R1], R14
0000157E 755E2E                  		CMP #2EH, R14
00001581 18                   S  		BNE L767
00001582                         L766:	; bb221
00001582 F80601                  		MOV.L #00000001H, [R0]
00001585 08                   S  		BRA L768
00001586                         L767:	; bb222
00001586 F80600                  		MOV.L #00000000H, [R0]
00001589                         L768:	; bb223
00001589 EC01                    		MOV.L [R0], R1
0000158B 6101                    		CMP #00H, R1
0000158D 21rr                    		BNE L778
0000158F                         L769:	; bb227
0000158F A989                    		MOV.L 1CH[R0], R1
00001591 6121                    		CMP #02H, R1
00001593 21rr                    		BNE L772
00001595                         L770:	; bb231
00001595 A989                    		MOV.L 1CH[R0], R1
00001597 6C11                    		SHLL #01H, R1
00001599 06890103                		ADD 0CH[R0].L, R1
0000159D 6021                    		SUB #02H, R1
0000159F 5C1E                    		MOVU.W [R1], R14
000015A1 755E2E                  		CMP #2EH, R14
000015A4 18                   S  		BNE L772
000015A5                         L771:	; bb240
000015A5 F80601                  		MOV.L #00000001H, [R0]
000015A8 08                   S  		BRA L773
000015A9                         L772:	; bb241
000015A9 F80600                  		MOV.L #00000000H, [R0]
000015AC                         L773:	; bb242
000015AC EC01                    		MOV.L [R0], R1
000015AE 6101                    		CMP #00H, R1
000015B0 20rr                    		BEQ L776
000015B2                         L774:	; bb246
000015B2 A989                    		MOV.L 1CH[R0], R1
000015B4 6C11                    		SHLL #01H, R1
000015B6 06890103                		ADD 0CH[R0].L, R1
000015BA 6041                    		SUB #04H, R1
000015BC 5C1E                    		MOVU.W [R1], R14
000015BE 755E2E                  		CMP #2EH, R14
000015C1 18                   S  		BNE L776
000015C2                         L775:	; bb255
000015C2 F80601                  		MOV.L #00000001H, [R0]
000015C5 08                   S  		BRA L777
000015C6                         L776:	; bb256
000015C6 F80600                  		MOV.L #00000000H, [R0]
000015C9                         L777:	; bb257
000015C9 EC01                    		MOV.L [R0], R1
000015CB 6101                    		CMP #00H, R1
000015CD 10                   S  		BEQ L779
000015CE                         L778:	; bb261
000015CE F80601                  		MOV.L #00000001H, [R0]
000015D1 08                   S  		BRA L780
000015D2                         L779:	; bb262
000015D2 F80600                  		MOV.L #00000000H, [R0]
000015D5                         L780:	; bb263
000015D5 EC01                    		MOV.L [R0], R1
000015D7 6101                    		CMP #00H, R1
000015D9 3Brrrr               W  		BNE L756
000015DC 2Err                 B  		BRA L788
000015DE                         L781:	; bb269
                                 ;    1875 	}
                                 ;    1876 #endif
                                 ;    1877 	while (di) {						/* Strip trailing spaces and dots */
                                 ;    1878 		w = lfn[di-1];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1878
000015DE A989                    		MOV.L 1CH[R0], R1
000015E0 6C11                    		SHLL #01H, R1
000015E2 06890103                		ADD 0CH[R0].L, R1
000015E6 6021                    		SUB #02H, R1
000015E8 D41005                  		MOV.W [R1], 0AH[R0]
000015EB                         L782:	; bb269.split
                                 ;    1879 		if (w != ' ' && w != '.') break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1879
000015EB B909                    		MOVU.W 0AH[R0], R1
000015ED 755120                  		CMP #20H, R1
000015F0 20rr                    		BEQ L785
000015F2                         L783:	; bb282
000015F2 B909                    		MOVU.W 0AH[R0], R1
000015F4 75512E                  		CMP #2EH, R1
000015F7 10                   S  		BEQ L785
000015F8                         L784:	; bb287
000015F8 F80601                  		MOV.L #00000001H, [R0]
000015FB 08                   S  		BRA L786
000015FC                         L785:	; bb288
000015FC F80600                  		MOV.L #00000000H, [R0]
000015FF                         L786:	; bb289
000015FF EC01                    		MOV.L [R0], R1
00001601 6101                    		CMP #00H, R1
00001603 21rr                    		BNE L789
00001605                         L787:	; bb294
                                 ;    1880 		di--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1880
00001605 A989                    		MOV.L 1CH[R0], R1
00001607 6011                    		SUB #01H, R1
00001609 A189                    		MOV.L R1, 1CH[R0]
0000160B                         L788:	; bb297
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1877
0000160B A989                    		MOV.L 1CH[R0], R1
0000160D 6101                    		CMP #00H, R1
0000160F 21rr                    		BNE L781
00001611                         L789:	; bb304
                                 ;    1881 	}
                                 ;    1882 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1882
00001611 A989                    		MOV.L 1CH[R0], R1
00001613 6101                    		CMP #00H, R1
00001615 18                   S  		BNE L791
00001616 2Err                 B  		BRA L792
00001618                         L790:	; bb305
00001618 3E0106                  		MOV.L #00000006H, 04H[R0]
0000161B 38rrrr               W  		BRA L890
0000161E                         L791:	; bb310
0000161E F80600                  		MOV.L #00000000H, [R0]
00001621 08                   S  		BRA L793
00001622                         L792:	; bb311
00001622 F80601                  		MOV.L #00000001H, [R0]
00001625                         L793:	; bb312
00001625 EC01                    		MOV.L [R0], R1
00001627 6101                    		CMP #00H, R1
00001629 21rr                    		BNE L790
0000162B                         L794:	; bb316
0000162B 660E                    		MOV.L #00000000H, R14
                                 ;    1883 
                                 ;    1884 	lfn[di] = 0;						/* LFN is created */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1884
0000162D A989                    		MOV.L 1CH[R0], R1
0000162F A88A                    		MOV.L 0CH[R0], R2
00001631 FE112E                  		MOV.W R14, [R1,R2]
00001634                         L795:	; bb316.split
                                 ;    1885 
                                 ;    1886 	/* Create SFN in directory form */
                                 ;    1887 	mem_set(dp->fn, ' ', 11);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1887
00001634 AA89                    		MOV.L 2CH[R0], R1
00001636 A991                    		MOV.L 18H[R1], R1
00001638 66B3                    		MOV.L #0000000BH, R3
0000163A 754220                  		MOV.L #00000020H, R2
0000163D 39rrrr               W  		BSR __$mem_set
00001640                         L796:	; bb316.split4
                                 ;    1888 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1888
00001640 3E0600                  		MOV.L #00000000H, 18H[R0]
00001643 08                   S  		BRA L798
00001644                         L797:	; bb323
00001644 6211                    		ADD #01H, R1
00001646 A181                    		MOV.L R1, 18H[R0]
00001648                         L798:	; bb326
00001648 A889                    		MOV.L 0CH[R0], R1
0000164A A982                    		MOV.L 18H[R0], R2
0000164C FED21E                  		MOVU.W [R2,R1], R14
0000164F 755E20                  		CMP #20H, R14
00001652 20rr                    		BEQ L800
00001654                         L799:	; bb334
00001654 A889                    		MOV.L 0CH[R0], R1
00001656 A982                    		MOV.L 18H[R0], R2
00001658 FED21E                  		MOVU.W [R2,R1], R14
0000165B 755E2E                  		CMP #2EH, R14
0000165E 18                   S  		BNE L801
0000165F                         L800:	; bb342
0000165F F80601                  		MOV.L #00000001H, [R0]
00001662 08                   S  		BRA L802
00001663                         L801:	; bb343
00001663 F80600                  		MOV.L #00000000H, [R0]
00001666                         L802:	; bb344
00001666 EC01                    		MOV.L [R0], R1
00001668 6101                    		CMP #00H, R1
0000166A A981                    		MOV.L 18H[R0], R1
0000166C 21rr                    		BNE L797
0000166E                         L803:	; bb350
                                 ;    1889 	if (si) cf |= NS_LOSS | NS_LFN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1889
0000166E 6101                    		CMP #00H, R1
00001670 20rr                    		BEQ L806
00001672                         L804:	; bb351
00001672 B209                    		MOVU.B 09H[R0], R1
00001674 6531                    		OR #03H, R1
00001676 8209                    		MOV.B R1, 09H[R0]
00001678 08                   S  		BRA L806
00001679                         L805:	; bb361
00001679 A989                    		MOV.L 1CH[R0], R1
0000167B 6011                    		SUB #01H, R1
0000167D A189                    		MOV.L R1, 1CH[R0]
0000167F                         L806:	; bb364
                                 ;    1890 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1890
0000167F A989                    		MOV.L 1CH[R0], R1
00001681 6101                    		CMP #00H, R1
00001683 20rr                    		BEQ L809
00001685                         L807:	; bb368
00001685 A989                    		MOV.L 1CH[R0], R1
00001687 6C11                    		SHLL #01H, R1
00001689 06890103                		ADD 0CH[R0].L, R1
0000168D 6021                    		SUB #02H, R1
0000168F 5C1E                    		MOVU.W [R1], R14
00001691 755E2E                  		CMP #2EH, R14
00001694 10                   S  		BEQ L809
00001695                         L808:	; bb377
00001695 F80601                  		MOV.L #00000001H, [R0]
00001698 08                   S  		BRA L810
00001699                         L809:	; bb378
00001699 F80600                  		MOV.L #00000000H, [R0]
0000169C                         L810:	; bb379
0000169C EC01                    		MOV.L [R0], R1
0000169E 6101                    		CMP #00H, R1
000016A0 21rr                    		BNE L805
000016A2                         L811:	; bb384
                                 ;    1891 
                                 ;    1892 	b = i = 0; ni = 8;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1892
000016A2 3E0400                  		MOV.L #00000000H, 10H[R0]
000016A5 3C0800                  		MOV.B #00H, 08H[R0]
000016A8 3E0508                  		MOV.L #00000008H, 14H[R0]
000016AB 38rrrr               W  		BRA L868
000016AE                         L812:	; bb401
000016AE F80600                  		MOV.L #00000000H, [R0]
000016B1 08                   S  		BRA L814
000016B2                         L813:	; bb402
000016B2 F80601                  		MOV.L #00000001H, [R0]
000016B5                         L814:	; bb403
000016B5 EC01                    		MOV.L [R0], R1
000016B7 6101                    		CMP #00H, R1
000016B9 3Brrrr               W  		BNE L870
000016BC                         L815:	; bb408
                                 ;    1893 	for (;;) {
                                 ;    1894 		w = lfn[si++];					/* Get an LFN character */
                                 ;    1895 		if (!w) break;					/* Break on end of the LFN */
                                 ;    1896 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1896
000016BC B909                    		MOVU.W 0AH[R0], R1
000016BE 755120                  		CMP #20H, R1
000016C1 20rr                    		BEQ L822
000016C3 08                   S  		BRA L817
000016C4                         L816:	; bb409
                                 ;    1897 			cf |= NS_LOSS | NS_LFN; continue;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1897
000016C4 B209                    		MOVU.B 09H[R0], R1
000016C6 6531                    		OR #03H, R1
000016C8 8209                    		MOV.B R1, 09H[R0]
000016CA 38rrrr               W  		BRA L868
000016CD                         L817:	; bb419
000016CD B909                    		MOVU.W 0AH[R0], R1
000016CF 75512E                  		CMP #2EH, R1
000016D2 21rr                    		BNE L820
000016D4                         L818:	; bb424
000016D4 A981                    		MOV.L 18H[R0], R1
000016D6 06850107                		CMP 1CH[R0].L, R1
000016DA 10                   S  		BEQ L820
000016DB                         L819:	; bb429
000016DB F80601                  		MOV.L #00000001H, [R0]
000016DE 08                   S  		BRA L821
000016DF                         L820:	; bb430
000016DF F80600                  		MOV.L #00000000H, [R0]
000016E2                         L821:	; bb431
000016E2 EC01                    		MOV.L [R0], R1
000016E4 6101                    		CMP #00H, R1
000016E6 10                   S  		BEQ L823
000016E7                         L822:	; bb435
000016E7 F80601                  		MOV.L #00000001H, [R0]
000016EA 08                   S  		BRA L824
000016EB                         L823:	; bb436
000016EB F80600                  		MOV.L #00000000H, [R0]
000016EE                         L824:	; bb437
000016EE EC01                    		MOV.L [R0], R1
000016F0 6101                    		CMP #00H, R1
000016F2 21rr                    		BNE L816
000016F4                         L825:	; bb443
                                 ;    1898 		}
                                 ;    1899 
                                 ;    1900 		if (i >= ni || si == di) {		/* Extension or end of SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1900
000016F4 A901                    		MOV.L 10H[R0], R1
000016F6 06850105                		CMP 14H[R0].L, R1
000016FA 22rr                    		BGEU L836
000016FC 2Err                 B  		BRA L835
000016FE                         L826:	; bb445
                                 ;    1901 			if (ni == 11) {				/* Long extension */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1901
000016FE A909                    		MOV.L 14H[R0], R1
00001700 61B1                    		CMP #0BH, R1
00001702 18                   S  		BNE L828
00001703                         L827:	; bb446
                                 ;    1902 				cf |= NS_LOSS | NS_LFN; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1902
00001703 B209                    		MOVU.B 09H[R0], R1
00001705 6531                    		OR #03H, R1
00001707 8209                    		MOV.B R1, 09H[R0]
00001709 38rrrr               W  		BRA L870
0000170C                         L828:	; bb457
                                 ;    1903 			}
                                 ;    1904 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1904
0000170C A981                    		MOV.L 18H[R0], R1
0000170E 06850107                		CMP 1CH[R0].L, R1
00001712 10                   S  		BEQ L830
00001713                         L829:	; bb458
00001713 B209                    		MOVU.B 09H[R0], R1
00001715 6531                    		OR #03H, R1
00001717 8209                    		MOV.B R1, 09H[R0]
00001719                         L830:	; bb469
                                 ;    1905 			if (si > di) break;			/* No extension */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1905
00001719 A981                    		MOV.L 18H[R0], R1
0000171B 06850107                		CMP 1CH[R0].L, R1
0000171F 25rr                  * 		BGTU L870
         38rrrr                  
00001724                         L831:	; bb477
                                 ;    1906 			si = di; i = 8; ni = 11;	/* Enter extension section */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1906
00001724 E5000706                		MOV.L 1CH[R0], 18H[R0]
00001728                         L832:	; bb477.split
00001728 3E0408                  		MOV.L #00000008H, 10H[R0]
0000172B                         L833:	; bb477.split5
0000172B 3E050B                  		MOV.L #0000000BH, 14H[R0]
0000172E                         L834:	; bb477.split6
                                 ;    1907 			b <<= 2; continue;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1907
0000172E B201                    		MOVU.B 08H[R0], R1
00001730 6C21                    		SHLL #02H, R1
00001732 8201                    		MOV.B R1, 08H[R0]
00001734 38rrrr               W  		BRA L868
00001737                         L835:	; bb488
00001737 A981                    		MOV.L 18H[R0], R1
00001739 06850107                		CMP 1CH[R0].L, R1
0000173D 18                   S  		BNE L837
0000173E                         L836:	; bb493
0000173E F80601                  		MOV.L #00000001H, [R0]
00001741 08                   S  		BRA L838
00001742                         L837:	; bb494
00001742 F80600                  		MOV.L #00000000H, [R0]
00001745                         L838:	; bb495
00001745 EC01                    		MOV.L [R0], R1
00001747 6101                    		CMP #00H, R1
00001749 21rr                    		BNE L826
0000174B                         L839:	; bb501
                                 ;    1908 		}
                                 ;    1909 
                                 ;    1910 		if (w >= 0x80) {				/* Non ASCII character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1910
0000174B B909                    		MOVU.W 0AH[R0], R1
0000174D 755180                  		CMP #80H, R1
00001750 29rr                    		BLT L844
00001752                         L840:	; bb502
                                 ;    1911 #ifdef _EXCVT
                                 ;    1912 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1912
00001752 B909                    		MOVU.W 0AH[R0], R1
00001754 6602                    		MOV.L #00000000H, R2
00001756 05rrrrrr             A  		BSR _ff_convert
0000175A 9109                    		MOV.W R1, 0AH[R0]
0000175C                         L841:	; bb502.split
                                 ;    1913 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1913
0000175C B909                    		MOVU.W 0AH[R0], R1
0000175E 6101                    		CMP #00H, R1
00001760 20rr                    		BEQ L843
00001762                         L842:	; bb506
00001762 FBE2rrrrrrrr            		MOV.L #__$ExCvt, R14
00001768 06C90E05                		ADD 0AH[R0].UW, R14
0000176C FBF680                  		MOV.L #0FFFFFF80H, R15
0000176F FECEF1                  		MOVU.B [R14,R15], R1
00001772 9109                    		MOV.W R1, 0AH[R0]
00001774                         L843:	; bb518
                                 ;    1914 #else
                                 ;    1915 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
                                 ;    1916 #endif
                                 ;    1917 			cf |= NS_LFN;				/* Force create LFN entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1917
00001774 F10109                  		BSET #01H, 09H[R0].B
00001777                         L844:	; bb558.split
                                 ;    1918 		}
                                 ;    1919 
                                 ;    1920 		if (_DF1S && w >= 0x100) {		/* Double byte character (always false on SBCS cfg) */
                                 ;    1921 			if (i >= ni - 1) {
                                 ;    1922 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
                                 ;    1923 			}
                                 ;    1924 			dp->fn[i++] = (BYTE)(w >> 8);
                                 ;    1925 		} else {						/* Single byte character */
                                 ;    1926 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1926
00001777 B909                    		MOVU.W 0AH[R0], R1
00001779 6101                    		CMP #00H, R1
0000177B 21rr                    		BNE L860
0000177D 2Err                 B  		BRA L861
0000177F                         L845:	; bb559
                                 ;    1927 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1927
0000177F 3D055F                  		MOV.W #005FH, 0AH[R0]
00001782                         L846:	; bb559.split
00001782 B209                    		MOVU.B 09H[R0], R1
00001784 6531                    		OR #03H, R1
00001786 8209                    		MOV.B R1, 09H[R0]
00001788 38rrrr               W  		BRA L867
0000178B                         L847:	; bb565
                                 ;    1928 			} else {
                                 ;    1929 				if (IsUpper(w)) {		/* ASCII large capital */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1929
0000178B B909                    		MOVU.W 0AH[R0], R1
0000178D 755140                  		CMP #40H, R1
00001790 2Arr                    		BGT L856
00001792 2Err                 B  		BRA L858
00001794                         L848:	; bb566
                                 ;    1930 					b |= 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1930
00001794 F10108                  		BSET #01H, 08H[R0].B
00001797 2Err                 B  		BRA L867
00001799                         L849:	; bb572
                                 ;    1931 				} else {
                                 ;    1932 					if (IsLower(w)) {	/* ASCII small capital */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1932
00001799 B909                    		MOVU.W 0AH[R0], R1
0000179B 755160                  		CMP #60H, R1
0000179E 2Arr                    		BGT L852
000017A0 2Err                 B  		BRA L854
000017A2                         L850:	; bb573
                                 ;    1933 						b |= 1; w -= 0x20;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1933
000017A2 F10008                  		BSET #00H, 08H[R0].B
000017A5                         L851:	; bb573.split
000017A5 B909                    		MOVU.W 0AH[R0], R1
000017A7 7111E0                  		ADD #0FFFFFFE0H, R1
000017AA 9109                    		MOV.W R1, 0AH[R0]
000017AC 2Err                 B  		BRA L867
000017AE                         L852:	; bb586
000017AE B909                    		MOVU.W 0AH[R0], R1
000017B0 75517A                  		CMP #7AH, R1
000017B3 2Arr                    		BGT L854
000017B5                         L853:	; bb591
000017B5 F80601                  		MOV.L #00000001H, [R0]
000017B8 08                   S  		BRA L855
000017B9                         L854:	; bb592
000017B9 F80600                  		MOV.L #00000000H, [R0]
000017BC                         L855:	; bb593
000017BC EC01                    		MOV.L [R0], R1
000017BE 6101                    		CMP #00H, R1
000017C0 21rr                    		BNE L850
000017C2 2Err                 B  		BRA L867
000017C4                         L856:	; bb603
000017C4 B909                    		MOVU.W 0AH[R0], R1
000017C6 75515A                  		CMP #5AH, R1
000017C9 2Arr                    		BGT L858
000017CB                         L857:	; bb608
000017CB F80601                  		MOV.L #00000001H, [R0]
000017CE 08                   S  		BRA L859
000017CF                         L858:	; bb609
000017CF F80600                  		MOV.L #00000000H, [R0]
000017D2                         L859:	; bb610
000017D2 EC01                    		MOV.L [R0], R1
000017D4 6101                    		CMP #00H, R1
000017D6 21rr                    		BNE L848
000017D8 2Err                 B  		BRA L849
000017DA                         L860:	; bb620
000017DA F80600                  		MOV.L #00000000H, [R0]
000017DD 08                   S  		BRA L862
000017DE                         L861:	; bb621
000017DE F80601                  		MOV.L #00000001H, [R0]
000017E1                         L862:	; bb622
000017E1 EC01                    		MOV.L [R0], R1
000017E3 6101                    		CMP #00H, R1
000017E5 21rr                    		BNE L864
000017E7                         L863:	; bb625
000017E7 B90A                    		MOVU.W 0AH[R0], R2
000017E9 FB12rrrrrrrr            		MOV.L #_L11, R1
000017EF 39rrrr               W  		BSR __$chk_chr
000017F2 6101                    		CMP #00H, R1
000017F4 10                   S  		BEQ L865
000017F5                         L864:	; bb631
000017F5 F80601                  		MOV.L #00000001H, [R0]
000017F8 08                   S  		BRA L866
000017F9                         L865:	; bb632
000017F9 F80600                  		MOV.L #00000000H, [R0]
000017FC                         L866:	; bb633
000017FC EC01                    		MOV.L [R0], R1
000017FE 6101                    		CMP #00H, R1
00001800 3Brrrr               W  		BNE L845
00001803 2Err                 B  		BRA L847
00001805                         L867:	; bb639
                                 ;    1934 					}
                                 ;    1935 				}
                                 ;    1936 			}
                                 ;    1937 		}
                                 ;    1938 		dp->fn[i++] = (BYTE)w;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1938
00001805 AA89                    		MOV.L 2CH[R0], R1
00001807 A991                    		MOV.L 18H[R1], R1
00001809 B282                    		MOVU.B 0AH[R0], R2
0000180B A903                    		MOV.L 10H[R0], R3
0000180D FE0132                  		MOV.B R2, [R1,R3]
00001810 A901                    		MOV.L 10H[R0], R1
00001812 6211                    		ADD #01H, R1
00001814 A101                    		MOV.L R1, 10H[R0]
00001816                         L868:	; bb650.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1894
00001816 A889                    		MOV.L 0CH[R0], R1
00001818 A982                    		MOV.L 18H[R0], R2
0000181A FE5211                  		MOV.W [R2,R1], R1
0000181D 9109                    		MOV.W R1, 0AH[R0]
0000181F A981                    		MOV.L 18H[R0], R1
00001821 6211                    		ADD #01H, R1
00001823 A181                    		MOV.L R1, 18H[R0]
00001825                         L869:	; bb650.split8
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1895
00001825 B909                    		MOVU.W 0AH[R0], R1
00001827 6101                    		CMP #00H, R1
00001829 3Brrrr               W  		BNE L812
0000182C 38rrrr               W  		BRA L813
0000182F                         L870:	; bb653
                                 ;    1939 	}
                                 ;    1940 
                                 ;    1941 	if (dp->fn[0] == DDE) dp->fn[0] = NDDE;	/* If the first character collides with deleted mark, replace it with 0x05 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1941
0000182F AA89                    		MOV.L 2CH[R0], R1
00001831 A991                    		MOV.L 18H[R1], R1
00001833 581E                    		MOVU.B [R1], R14
00001835 755EE5                  		CMP #0E5H, R14
00001838 18                   S  		BNE L872
00001839                         L871:	; bb654
00001839 AA89                    		MOV.L 2CH[R0], R1
0000183B A991                    		MOV.L 18H[R1], R1
0000183D F81405                  		MOV.B #05H, [R1]
00001840                         L872:	; bb669
                                 ;    1942 
                                 ;    1943 	if (ni == 8) b <<= 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1943
00001840 A909                    		MOV.L 14H[R0], R1
00001842 6181                    		CMP #08H, R1
00001844 18                   S  		BNE L874
00001845                         L873:	; bb670
00001845 B201                    		MOVU.B 08H[R0], R1
00001847 6C21                    		SHLL #02H, R1
00001849 8201                    		MOV.B R1, 08H[R0]
0000184B                         L874:	; bb680
                                 ;    1944 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capitals */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1944
0000184B B201                    		MOVU.B 08H[R0], R1
0000184D 64C1                    		AND #0CH, R1
0000184F 61C1                    		CMP #0CH, R1
00001851 20rr                    		BEQ L877
00001853 08                   S  		BRA L876
00001854                         L875:	; bb681
                                 ;    1945 		cf |= NS_LFN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1945
00001854 F10109                  		BSET #01H, 09H[R0].B
00001857 2Err                 B  		BRA L880
00001859                         L876:	; bb691
00001859 B201                    		MOVU.B 08H[R0], R1
0000185B 6431                    		AND #03H, R1
0000185D 6131                    		CMP #03H, R1
0000185F 18                   S  		BNE L878
00001860                         L877:	; bb697
00001860 F80601                  		MOV.L #00000001H, [R0]
00001863 08                   S  		BRA L879
00001864                         L878:	; bb698
00001864 F80600                  		MOV.L #00000000H, [R0]
00001867                         L879:	; bb699
00001867 EC01                    		MOV.L [R0], R1
00001869 6101                    		CMP #00H, R1
0000186B 21rr                    		BNE L875
0000186D                         L880:	; bb705
                                 ;    1946 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are created */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1946
0000186D F50109                  		BTST #01H, 09H[R0].B
00001870 21rr                    		BNE L885
00001872 2Err                 B  		BRA L886
00001874                         L881:	; bb707
                                 ;    1947 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1947
00001874 B201                    		MOVU.B 08H[R0], R1
00001876 6431                    		AND #03H, R1
00001878 6111                    		CMP #01H, R1
0000187A 18                   S  		BNE L883
0000187B                         L882:	; bb708
0000187B F10409                  		BSET #04H, 09H[R0].B
0000187E                         L883:	; bb720
                                 ;    1948 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1948
0000187E B201                    		MOVU.B 08H[R0], R1
00001880 64C1                    		AND #0CH, R1
00001882 6141                    		CMP #04H, R1
00001884 21rr                    		BNE L888
00001886                         L884:	; bb721
00001886 F10309                  		BSET #03H, 09H[R0].B
00001889 2Err                 B  		BRA L888
0000188B                         L885:	; bb738
0000188B F80600                  		MOV.L #00000000H, [R0]
0000188E 08                   S  		BRA L887
0000188F                         L886:	; bb739
0000188F F80601                  		MOV.L #00000001H, [R0]
00001892                         L887:	; bb740
00001892 EC01                    		MOV.L [R0], R1
00001894 6101                    		CMP #00H, R1
00001896 21rr                    		BNE L881
00001898                         L888:	; bb744
                                 ;    1949 	}
                                 ;    1950 
                                 ;    1951 	dp->fn[NSFLAG] = cf;	/* SFN is created */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1951
00001898 AA89                    		MOV.L 2CH[R0], R1
0000189A A991                    		MOV.L 18H[R1], R1
0000189C C501090B                		MOV.B 09H[R0], 0BH[R1]
000018A0                         L889:	; bb744.split
                                 ;    1952 
                                 ;    1953 	return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",1953
000018A0 3E0100                  		MOV.L #00000000H, 04H[R0]
000018A3                         L890:	; bb751
000018A3 A809                    		MOV.L 04H[R0], R1
000018A5 A209                    		MOV.L R1, 24H[R0]
                                 ;    1954 
                                 ;    1955 
                                 ;    1956 #else	/* Non-LFN configuration */
                                 ;    1957 	BYTE b, c, d, *sfn;
                                 ;    1958 	UINT ni, si, i;
                                 ;    1959 	const char *p;
                                 ;    1960 
                                 ;    1961 	/* Create file name in directory form */
                                 ;    1962 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
                                 ;    1963 	sfn = dp->fn;
                                 ;    1964 	mem_set(sfn, ' ', 11);
                                 ;    1965 	si = i = b = 0; ni = 8;
                                 ;    1966 #if _FS_RPATH
                                 ;    1967 	if (p[si] == '.') { /* Is this a dot entry? */
                                 ;    1968 		for (;;) {
                                 ;    1969 			c = (BYTE)p[si++];
                                 ;    1970 			if (c != '.' || si >= 3) break;
                                 ;    1971 			sfn[i++] = c;
                                 ;    1972 		}
                                 ;    1973 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
                                 ;    1974 		*path = &p[si];									/* Return pointer to the next segment */
                                 ;    1975 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
                                 ;    1976 		return FR_OK;
                                 ;    1977 	}
                                 ;    1978 #endif
                                 ;    1979 	for (;;) {
                                 ;    1980 		c = (BYTE)p[si++];
                                 ;    1981 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
                                 ;    1982 		if (c == '.' || i >= ni) {
                                 ;    1983 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
                                 ;    1984 			i = 8; ni = 11;
                                 ;    1985 			b <<= 2; continue;
                                 ;    1986 		}
                                 ;    1987 		if (c >= 0x80) {				/* Extended character? */
                                 ;    1988 			b |= 3;						/* Eliminate NT flag */
                                 ;    1989 #ifdef _EXCVT
                                 ;    1990 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
                                 ;    1991 #else
                                 ;    1992 #if !_DF1S
                                 ;    1993 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
                                 ;    1994 #endif
                                 ;    1995 #endif
                                 ;    1996 		}
                                 ;    1997 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
                                 ;    1998 			d = (BYTE)p[si++];			/* Get 2nd byte */
                                 ;    1999 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
                                 ;    2000 				return FR_INVALID_NAME;
                                 ;    2001 			sfn[i++] = c;
                                 ;    2002 			sfn[i++] = d;
                                 ;    2003 		} else {						/* Single byte code */
                                 ;    2004 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
                                 ;    2005 				return FR_INVALID_NAME;
                                 ;    2006 			if (IsUpper(c)) {			/* ASCII large capital? */
                                 ;    2007 				b |= 2;
                                 ;    2008 			} else {
                                 ;    2009 				if (IsLower(c)) {		/* ASCII small capital? */
                                 ;    2010 					b |= 1; c -= 0x20;
                                 ;    2011 				}
                                 ;    2012 			}
                                 ;    2013 			sfn[i++] = c;
                                 ;    2014 		}
                                 ;    2015 	}
                                 ;    2016 	*path = &p[si];						/* Return pointer to the next segment */
                                 ;    2017 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
                                 ;    2018 
                                 ;    2019 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
                                 ;    2020 	if (sfn[0] == DDE) sfn[0] = NDDE;	/* When first character collides with DDE, replace it with 0x05 */
                                 ;    2021 
                                 ;    2022 	if (ni == 8) b <<= 2;
                                 ;    2023 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
                                 ;    2024 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
                                 ;    2025 
                                 ;    2026 	sfn[NSFLAG] = c;		/* Store NT flag, File name is created */
                                 ;    2027 
                                 ;    2028 	return FR_OK;
                                 ;    2029 #endif
                                 ;    2030 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2030
000018A7 670C                    		RTSD #30H
000018A9                         __$follow_path:
                                 		.STACK	__$follow_path=36
                                 ;    2031 
                                 ;    2032 
                                 ;    2033 
                                 ;    2034 
                                 ;    2035 /*-----------------------------------------------------------------------*/
                                 ;    2036 /* Follow a file path                                                    */
                                 ;    2037 /*-----------------------------------------------------------------------*/
                                 ;    2038 
                                 ;    2039 static
                                 ;    2040 FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2040
000018A9 7EA6                    		PUSH.L R6
000018AB 7100E4                  		ADD #0FFFFFFE4H, R0
000018AE A181                    		MOV.L R1, 18H[R0]
000018B0 A10A                    		MOV.L R2, 14H[R0]
                                 ;    2041 	DIR* dp,			/* Directory object to return last directory and found object */
                                 ;    2042 	const TCHAR* path	/* Full-path string to find a file or directory */
                                 ;    2043 )
                                 ;    2044 {
                                 ;    2045 	FRESULT res;
                                 ;    2046 	BYTE *dir, ns;
                                 ;    2047 
                                 ;    2048 
                                 ;    2049 #if _FS_RPATH
                                 ;    2050 	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2050
000018B2 582E                    		MOVU.B [R2], R14
000018B4 755E2F                  		CMP #2FH, R14
000018B7 20rr                    		BEQ L896
000018B9 2Err                 B  		BRA L895
000018BB                         L892:	; bb6
                                 ;    2051 		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2051
000018BB A909                    		MOV.L 14H[R0], R1
000018BD 6211                    		ADD #01H, R1
000018BF A109                    		MOV.L R1, 14H[R0]
000018C1                         L893:	; bb6.split
000018C1 A981                    		MOV.L 18H[R0], R1
000018C3 3E1200                  		MOV.L #00000000H, 08H[R1]
000018C6 2Err                 B  		BRA L899
000018C8                         L894:	; bb11
                                 ;    2052 	} else {								/* No heading separator */
                                 ;    2053 		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2053
000018C8 A981                    		MOV.L 18H[R0], R1
000018CA EC1E                    		MOV.L [R1], R14
000018CC E5E10502                		MOV.L 14H[R14], 08H[R1]
000018D0 2Err                 B  		BRA L899
000018D2                         L895:	; bb24
000018D2 A909                    		MOV.L 14H[R0], R1
000018D4 581E                    		MOVU.B [R1], R14
000018D6 755E5C                  		CMP #5CH, R14
000018D9 18                   S  		BNE L897
000018DA                         L896:	; bb30
000018DA F80601                  		MOV.L #00000001H, [R0]
000018DD 08                   S  		BRA L898
000018DE                         L897:	; bb31
000018DE F80600                  		MOV.L #00000000H, [R0]
000018E1                         L898:	; bb32
000018E1 EC01                    		MOV.L [R0], R1
000018E3 6101                    		CMP #00H, R1
000018E5 21rr                    		BNE L892
000018E7 2Err                 B  		BRA L894
000018E9                         L899:	; bb37
                                 ;    2054 	}
                                 ;    2055 #else
                                 ;    2056 	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
                                 ;    2057 		path++;
                                 ;    2058 	dp->sclust = 0;							/* Always start from the root directory */
                                 ;    2059 #endif
                                 ;    2060 
                                 ;    2061 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2061
000018E9 A909                    		MOV.L 14H[R0], R1
000018EB 581E                    		MOVU.B [R1], R14
000018ED 755E1F                  		CMP #1FH, R14
000018F0 25rr                  * 		BGTU L930
         38rrrr                  
000018F5                         L900:	; bb38
                                 ;    2062 		res = dir_sdi(dp, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2062
000018F5 A981                    		MOV.L 18H[R0], R1
000018F7 6602                    		MOV.L #00000000H, R2
000018F9 39rrrr               W  		BSR __$dir_sdi
000018FC A009                    		MOV.L R1, 04H[R0]
000018FE                         L901:	; bb38.split
                                 ;    2063 		dp->dir = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2063
000018FE A981                    		MOV.L 18H[R0], R1
00001900 3E1500                  		MOV.L #00000000H, 14H[R1]
00001903 38rrrr               W  		BRA L932
00001906                         L902:	; bb54
                                 ;    2064 	} else {								/* Follow path */
                                 ;    2065 		for (;;) {
                                 ;    2066 			res = create_name(dp, &path);	/* Get a segment name of the path */
                                 ;    2067 			if (res != FR_OK) break;
                                 ;    2068 			res = dir_find(dp);				/* Find an object with the sagment name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2068
00001906 A981                    		MOV.L 18H[R0], R1
00001908 39rrrr               W  		BSR __$dir_find
0000190B A009                    		MOV.L R1, 04H[R0]
0000190D                         L903:	; bb54.split
                                 ;    2069 			ns = dp->fn[NSFLAG];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2069
0000190D A981                    		MOV.L 18H[R0], R1
0000190F A991                    		MOV.L 18H[R1], R1
00001911 C5100B0F                		MOV.B 0BH[R1], 0FH[R0]
00001915                         L904:	; bb54.split1
                                 ;    2070 			if (res != FR_OK) {				/* Failed to find the object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2070
00001915 A809                    		MOV.L 04H[R0], R1
00001917 6101                    		CMP #00H, R1
00001919 20rr                    		BEQ L922
0000191B                         L905:	; bb64
                                 ;    2071 				if (res == FR_NO_FILE) {	/* Object is not found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2071
0000191B A809                    		MOV.L 04H[R0], R1
0000191D 6141                    		CMP #04H, R1
0000191F 20rr                    		BEQ L918
00001921 38rrrr               W  		BRA L932
00001924                         L906:	; bb67
                                 ;    2072 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
                                 ;    2073 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2073
00001924 A981                    		MOV.L 18H[R0], R1
00001926 3E1200                  		MOV.L #00000000H, 08H[R1]
00001929                         L907:	; bb67.split
00001929 A981                    		MOV.L 18H[R0], R1
0000192B 3E1500                  		MOV.L #00000000H, 14H[R1]
0000192E                         L908:	; bb67.split2
                                 ;    2074 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2074
0000192E F5020F                  		BTST #02H, 0FH[R0].B
00001931 10                   S  		BEQ L910
00001932                         L909:	; bb80
00001932 F80600                  		MOV.L #00000000H, [R0]
00001935 08                   S  		BRA L911
00001936                         L910:	; bb81
00001936 F80601                  		MOV.L #00000001H, [R0]
00001939                         L911:	; bb82
00001939 EC01                    		MOV.L [R0], R1
0000193B 6101                    		CMP #00H, R1
0000193D 21rr                    		BNE L930
0000193F                         L912:	; bb86
                                 ;    2075 						res = FR_OK;					/* Ended at the root directroy. Function completed. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2075
0000193F 3E0100                  		MOV.L #00000000H, 04H[R0]
00001942 2Err                 B  		BRA L932
00001944                         L913:	; bb88
                                 ;    2076 					} else {							/* Could not find the object */
                                 ;    2077 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2077
00001944 F5020F                  		BTST #02H, 0FH[R0].B
00001947 18                   S  		BNE L915
00001948 08                   S  		BRA L916
00001949                         L914:	; bb89
00001949 3E0105                  		MOV.L #00000005H, 04H[R0]
0000194C 2Err                 B  		BRA L932
0000194E                         L915:	; bb95
0000194E F80600                  		MOV.L #00000000H, [R0]
00001951 08                   S  		BRA L917
00001952                         L916:	; bb96
00001952 F80601                  		MOV.L #00000001H, [R0]
00001955                         L917:	; bb97
00001955 EC01                    		MOV.L [R0], R1
00001957 6101                    		CMP #00H, R1
00001959 21rr                    		BNE L914
0000195B 2Err                 B  		BRA L932
0000195D                         L918:	; bb102
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2072
0000195D F5050F                  		BTST #05H, 0FH[R0].B
00001960 10                   S  		BEQ L920
00001961                         L919:	; bb108
00001961 F80601                  		MOV.L #00000001H, [R0]
00001964 08                   S  		BRA L921
00001965                         L920:	; bb109
00001965 F80600                  		MOV.L #00000000H, [R0]
00001968                         L921:	; bb110
00001968 EC01                    		MOV.L [R0], R1
0000196A 6101                    		CMP #00H, R1
0000196C 21rr                    		BNE L906
0000196E 2Err                 B  		BRA L913
00001970                         L922:	; bb126
                                 ;    2078 					}
                                 ;    2079 				}
                                 ;    2080 				break;
                                 ;    2081 			}
                                 ;    2082 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2082
00001970 F5020F                  		BTST #02H, 0FH[R0].B
00001973 21rr                    		BNE L932
00001975                         L923:	; bb135
                                 ;    2083 			dir = dp->dir;						/* Follow the sub-directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2083
00001975 A981                    		MOV.L 18H[R0], R1
00001977 E5100502                		MOV.L 14H[R1], 08H[R0]
0000197B                         L924:	; bb135.split
                                 ;    2084 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2084
0000197B A881                    		MOV.L 08H[R0], R1
0000197D F5140B                  		BTST #04H, 0BH[R1].B
00001980 18                   S  		BNE L926
00001981 08                   S  		BRA L927
00001982                         L925:	; bb140
                                 ;    2085 				res = FR_NO_PATH; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2085
00001982 3E0105                  		MOV.L #00000005H, 04H[R0]
00001985 2Err                 B  		BRA L932
00001987                         L926:	; bb149
00001987 F80600                  		MOV.L #00000000H, [R0]
0000198A 08                   S  		BRA L928
0000198B                         L927:	; bb150
0000198B F80601                  		MOV.L #00000001H, [R0]
0000198E                         L928:	; bb151
0000198E EC01                    		MOV.L [R0], R1
00001990 6101                    		CMP #00H, R1
00001992 21rr                    		BNE L925
00001994                         L929:	; bb155
                                 ;    2086 			}
                                 ;    2087 			dp->sclust = ld_clust(dp->fs, dir);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2087
00001994 A986                    		MOV.L 18H[R0], R6
00001996 EC61                    		MOV.L [R6], R1
00001998 A882                    		MOV.L 08H[R0], R2
0000199A 39rrrr               W  		BSR __$ld_clust
0000199D A0E1                    		MOV.L R1, 08H[R6]
0000199F                         L930:	; bb164.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2066
0000199F A981                    		MOV.L 18H[R0], R1
000019A1 710214                  		ADD #14H, R0, R2
000019A4 39rrrr               W  		BSR __$create_name
000019A7 A009                    		MOV.L R1, 04H[R0]
000019A9                         L931:	; bb164.split3
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2067
000019A9 A809                    		MOV.L 04H[R0], R1
000019AB 6101                    		CMP #00H, R1
000019AD 3Arrrr               W  		BEQ L902
000019B0                         L932:	; bb173
                                 ;    2088 		}
                                 ;    2089 	}
                                 ;    2090 
                                 ;    2091 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2091
000019B0 A809                    		MOV.L 04H[R0], R1
000019B2 A101                    		MOV.L R1, 10H[R0]
000019B4                         L933:	; bb173.split
                                 ;    2092 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2092
000019B4 3F6608                  		RTSD #20H, R6-R6
000019B7                         __$get_ldnumber:
                                 		.STACK	__$get_ldnumber=36
                                 ;    2093 
                                 ;    2094 
                                 ;    2095 
                                 ;    2096 
                                 ;    2097 /*-----------------------------------------------------------------------*/
                                 ;    2098 /* Get logical drive number from path name                               */
                                 ;    2099 /*-----------------------------------------------------------------------*/
                                 ;    2100 
                                 ;    2101 static
                                 ;    2102 int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2102
000019B7 7100E0                  		ADD #0FFFFFFE0H, R0
000019BA A189                    		MOV.L R1, 1CH[R0]
                                 ;    2103 	const TCHAR** path	/* Pointer to pointer to the path name */
                                 ;    2104 )
                                 ;    2105 {
                                 ;    2106 	const TCHAR *tp, *tt;
                                 ;    2107 	UINT i;
                                 ;    2108 	int vol = -1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2108
000019BC F90605FF                		MOV.L #0FFFFFFFFH, 14H[R0]
000019C0                         L935:	; entry.split
                                 ;    2109 
                                 ;    2110 
                                 ;    2111 	if (*path) {	/* If the pointer is not a null */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2111
000019C0 A989                    		MOV.L 1CH[R0], R1
000019C2 EC1E                    		MOV.L [R1], R14
000019C4 610E                    		CMP #00H, R14
000019C6 3Arrrr               W  		BEQ L956
000019C9                         L936:	; bb6
                                 ;    2112 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2112
000019C9 A989                    		MOV.L 1CH[R0], R1
000019CB E41003                  		MOV.L [R1], 0CH[R0]
000019CE 08                   S  		BRA L938
000019CF                         L937:	; bb9
000019CF 6211                    		ADD #01H, R1
000019D1 A089                    		MOV.L R1, 0CH[R0]
000019D3                         L938:	; bb12
000019D3 A889                    		MOV.L 0CH[R0], R1
000019D5 581E                    		MOVU.B [R1], R14
000019D7 755E20                  		CMP #20H, R14
000019DA 23rr                    		BLTU L941
000019DC                         L939:	; bb18
000019DC A889                    		MOV.L 0CH[R0], R1
000019DE 581E                    		MOVU.B [R1], R14
000019E0 755E3A                  		CMP #3AH, R14
000019E3 10                   S  		BEQ L941
000019E4                         L940:	; bb24
000019E4 F80601                  		MOV.L #00000001H, [R0]
000019E7 08                   S  		BRA L942
000019E8                         L941:	; bb25
000019E8 F80600                  		MOV.L #00000000H, [R0]
000019EB                         L942:	; bb26
000019EB EC01                    		MOV.L [R0], R1
000019ED 6101                    		CMP #00H, R1
000019EF A889                    		MOV.L 0CH[R0], R1
000019F1 21rr                    		BNE L937
000019F3                         L943:	; bb31
                                 ;    2113 		if (*tt == ':') {	/* If a ':' is exist in the path name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2113
000019F3 581E                    		MOVU.B [R1], R14
000019F5 755E3A                  		CMP #3AH, R14
000019F8 21rr                    		BNE L955
000019FA                         L944:	; bb32
                                 ;    2114 			tp = *path;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2114
000019FA A989                    		MOV.L 1CH[R0], R1
000019FC E41002                  		MOV.L [R1], 08H[R0]
000019FF                         L945:	; bb32.split
                                 ;    2115 			i = *tp++ - '0'; 
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2115
000019FF A881                    		MOV.L 08H[R0], R1
00001A01 5811                    		MOVU.B [R1], R1
00001A03 7111D0                  		ADD #0FFFFFFD0H, R1
00001A06 A101                    		MOV.L R1, 10H[R0]
00001A08 A881                    		MOV.L 08H[R0], R1
00001A0A 6211                    		ADD #01H, R1
00001A0C A081                    		MOV.L R1, 08H[R0]
00001A0E                         L946:	; bb32.split1
                                 ;    2116 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2116
00001A0E A901                    		MOV.L 10H[R0], R1
00001A10 61A1                    		CMP #0AH, R1
00001A12 23rr                    		BLTU L950
00001A14 2Err                 B  		BRA L952
00001A16                         L947:	; bb43
                                 ;    2117 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2117
00001A16 A901                    		MOV.L 10H[R0], R1
00001A18 6101                    		CMP #00H, R1
00001A1A 21rr                    		BNE L954
00001A1C                         L948:	; bb44
                                 ;    2118 					vol = (int)i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2118
00001A1C E5000405                		MOV.L 10H[R0], 14H[R0]
00001A20                         L949:	; bb44.split
                                 ;    2119 					*path = ++tt;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2119
00001A20 A889                    		MOV.L 0CH[R0], R1
00001A22 6211                    		ADD #01H, R1
00001A24 A98A                    		MOV.L 1CH[R0], R2
00001A26 A089                    		MOV.L R1, 0CH[R0]
00001A28 E321                    		MOV.L R1, [R2]
00001A2A 2Err                 B  		BRA L954
00001A2C                         L950:	; bb59
00001A2C A881                    		MOV.L 08H[R0], R1
00001A2E 06850103                		CMP 0CH[R0].L, R1
00001A32 18                   S  		BNE L952
00001A33                         L951:	; bb64
00001A33 F80601                  		MOV.L #00000001H, [R0]
00001A36 08                   S  		BRA L953
00001A37                         L952:	; bb65
00001A37 F80600                  		MOV.L #00000000H, [R0]
00001A3A                         L953:	; bb66
00001A3A EC01                    		MOV.L [R0], R1
00001A3C 6101                    		CMP #00H, R1
00001A3E 21rr                    		BNE L947
00001A40                         L954:	; bb71
                                 ;    2120 				}
                                 ;    2121 			} else {	/* No numeric drive number */
                                 ;    2122 #if _STR_VOLUME_ID		/* Find string drive id */
                                 ;    2123 				static const char* const str[] = {_VOLUME_STRS};
                                 ;    2124 				const char *sp;
                                 ;    2125 				char c;
                                 ;    2126 				TCHAR tc;
                                 ;    2127 
                                 ;    2128 				i = 0; tt++;
                                 ;    2129 				do {
                                 ;    2130 					sp = str[i]; tp = *path;
                                 ;    2131 					do {	/* Compare a string drive id with path name */
                                 ;    2132 						c = *sp++; tc = *tp++;
                                 ;    2133 						if (IsLower(tc)) tc -= 0x20;
                                 ;    2134 					} while (c && (TCHAR)c == tc);
                                 ;    2135 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
                                 ;    2136 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
                                 ;    2137 					vol = (int)i;
                                 ;    2138 					*path = tt;
                                 ;    2139 				}
                                 ;    2140 #endif
                                 ;    2141 			}
                                 ;    2142 			return vol;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2142
00001A40 E5000501                		MOV.L 14H[R0], 04H[R0]
00001A44 08                   S  		BRA L957
00001A45                         L955:	; bb80
                                 ;    2143 		}
                                 ;    2144 #if _FS_RPATH && _VOLUMES >= 2
                                 ;    2145 		vol = CurrVol;	/* Current drive */
                                 ;    2146 #else
                                 ;    2147 		vol = 0;		/* Drive 0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2147
00001A45 3E0500                  		MOV.L #00000000H, 14H[R0]
00001A48                         L956:	; bb86
                                 ;    2148 #endif
                                 ;    2149 	}
                                 ;    2150 	return vol;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2150
00001A48 E5000501                		MOV.L 14H[R0], 04H[R0]
00001A4C                         L957:	; bb89
00001A4C A809                    		MOV.L 04H[R0], R1
00001A4E A181                    		MOV.L R1, 18H[R0]
                                 ;    2151 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2151
00001A50 6708                    		RTSD #20H
00001A52                         __$check_fs:
                                 		.STACK	__$check_fs=16
                                 ;    2152 
                                 ;    2153 
                                 ;    2154 
                                 ;    2155 
                                 ;    2156 /*-----------------------------------------------------------------------*/
                                 ;    2157 /* Load a sector and check if it is an FAT boot sector                   */
                                 ;    2158 /*-----------------------------------------------------------------------*/
                                 ;    2159 
                                 ;    2160 static
                                 ;    2161 BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2161
00001A52 60C0                    		SUB #0CH, R0
00001A54 A081                    		MOV.L R1, 08H[R0]
00001A56 A00A                    		MOV.L R2, 04H[R0]
                                 ;    2162 	FATFS* fs,	/* File system object */
                                 ;    2163 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
                                 ;    2164 )
                                 ;    2165 {
                                 ;    2166 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2166
00001A58 A881                    		MOV.L 08H[R0], R1
00001A5A 3C1400                  		MOV.B #00H, 04H[R1]
00001A5D A881                    		MOV.L 08H[R0], R1
00001A5F F9160CFF                		MOV.L #0FFFFFFFFH, 30H[R1]
00001A63                         L959:	; entry.split
                                 ;    2167 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2167
00001A63 A80A                    		MOV.L 04H[R0], R2
00001A65 A881                    		MOV.L 08H[R0], R1
00001A67 39rrrr               W  		BSR __$move_window
00001A6A 6101                    		CMP #00H, R1
00001A6C 10                   S  		BEQ L961
00001A6D                         L960:	; bb7
                                 ;    2168 		return 3;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2168
00001A6D 3C0203                  		MOV.B #03H, 02H[R0]
00001A70 2Err                 B  		BRA L968
00001A72                         L961:	; bb15
                                 ;    2169 
                                 ;    2170 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offset 510 even if the sector size is >512) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2170
00001A72 A881                    		MOV.L 08H[R0], R1
00001A74 5E1E1901                		MOVU.W 0232H[R1], R14
00001A78 770E55AA00              		CMP #0AA55H, R14
00001A7D 10                   S  		BEQ L963
00001A7E                         L962:	; bb16
                                 ;    2171 		return 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2171
00001A7E 3C0202                  		MOV.B #02H, 02H[R0]
00001A81 2Err                 B  		BRA L968
00001A83                         L963:	; bb29
                                 ;    2172 
                                 ;    2173 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2173
00001A83 A881                    		MOV.L 08H[R0], R1
00001A85 71116A                  		ADD #6AH, R1
00001A88 EC1E                    		MOV.L [R1], R14
00001A8A 742EFFFFFF00            		AND #00FFFFFFH, R14
00001A90 770E464154              		CMP #00544146H, R14
00001A95 18                   S  		BNE L965
00001A96                         L964:	; bb30
                                 ;    2174 		return 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2174
00001A96 3C0200                  		MOV.B #00H, 02H[R0]
00001A99 2Err                 B  		BRA L968
00001A9B                         L965:	; bb43
                                 ;    2175 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2175
00001A9B A881                    		MOV.L 08H[R0], R1
00001A9D 72118600                		ADD #86H, R1
00001AA1 EC1E                    		MOV.L [R1], R14
00001AA3 742EFFFFFF00            		AND #00FFFFFFH, R14
00001AA9 770E464154              		CMP #00544146H, R14
00001AAE 18                   S  		BNE L967
00001AAF                         L966:	; bb44
                                 ;    2176 		return 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2176
00001AAF 3C0200                  		MOV.B #00H, 02H[R0]
00001AB2 08                   S  		BRA L968
00001AB3                         L967:	; bb56
                                 ;    2177 
                                 ;    2178 	return 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2178
00001AB3 3C0201                  		MOV.B #01H, 02H[R0]
00001AB6                         L968:	; bb58
00001AB6 C5000203                		MOV.B 02H[R0], 03H[R0]
                                 ;    2179 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2179
00001ABA B089                    		MOVU.B 03H[R0], R1
00001ABC 6703                    		RTSD #0CH
00001ABE                         __$find_volume:
                                 		.STACK	__$find_volume=96
                                 ;    2180 
                                 ;    2181 
                                 ;    2182 
                                 ;    2183 
                                 ;    2184 /*-----------------------------------------------------------------------*/
                                 ;    2185 /* Find logical drive and check if the volume is mounted                 */
                                 ;    2186 /*-----------------------------------------------------------------------*/
                                 ;    2187 
                                 ;    2188 static
                                 ;    2189 FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2189
00001ABE 7100A4                  		ADD #0FFFFFFA4H, R0
00001AC1 A581                    		MOV.L R1, 58H[R0]
00001AC3 A50A                    		MOV.L R2, 54H[R0]
00001AC5 C70353                  		MOV.B R3, 53H[R0]
                                 ;    2190 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
                                 ;    2191 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
                                 ;    2192 	BYTE wmode			/* !=0: Check write protection for write access */
                                 ;    2193 )
                                 ;    2194 {
                                 ;    2195 	BYTE fmt;
                                 ;    2196 	int vol;
                                 ;    2197 	DSTATUS stat;
                                 ;    2198 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat;
                                 ;    2199 	WORD nrsv;
                                 ;    2200 	FATFS *fs;
                                 ;    2201 
                                 ;    2202 
                                 ;    2203 	/* Get logical drive number from the path name */
                                 ;    2204 	*rfs = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2204
00001AC8 AD81                    		MOV.L 58H[R0], R1
00001ACA F81600                  		MOV.L #00000000H, [R1]
00001ACD                         L970:	; entry.split
                                 ;    2205 	vol = get_ldnumber(path);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2205
00001ACD AD09                    		MOV.L 54H[R0], R1
00001ACF 39rrrr               W  		BSR __$get_ldnumber
00001AD2 A089                    		MOV.L R1, 0CH[R0]
00001AD4                         L971:	; entry.split1
                                 ;    2206 	if (vol < 0) return FR_INVALID_DRIVE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2206
00001AD4 A889                    		MOV.L 0CH[R0], R1
00001AD6 69F1                    		SHLR #1FH, R1
00001AD8 6101                    		CMP #00H, R1
00001ADA 10                   S  		BEQ L973
00001ADB                         L972:	; bb21
00001ADB 3E010B                  		MOV.L #0000000BH, 04H[R0]
00001ADE 38rrrr               W  		BRA L1150
00001AE1                         L973:	; bb26
                                 ;    2207 
                                 ;    2208 	/* Check if the file system object is valid or not */
                                 ;    2209 	fs = FatFs[vol];					/* Get pointer to the file system object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2209
00001AE1 FBE2rrrrrrrr            		MOV.L #__$FatFs, R14
00001AE7 A889                    		MOV.L 0CH[R0], R1
00001AE9 FE61E1                  		MOV.L [R1,R14], R1
00001AEC A301                    		MOV.L R1, 30H[R0]
00001AEE                         L974:	; bb26.split
                                 ;    2210 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2210
00001AEE AB01                    		MOV.L 30H[R0], R1
00001AF0 6101                    		CMP #00H, R1
00001AF2 18                   S  		BNE L976
00001AF3 2Err                 B  		BRA L977
00001AF5                         L975:	; bb31
00001AF5 3E010C                  		MOV.L #0000000CH, 04H[R0]
00001AF8 38rrrr               W  		BRA L1150
00001AFB                         L976:	; bb36
00001AFB F80600                  		MOV.L #00000000H, [R0]
00001AFE 08                   S  		BRA L978
00001AFF                         L977:	; bb37
00001AFF F80601                  		MOV.L #00000001H, [R0]
00001B02                         L978:	; bb38
00001B02 EC01                    		MOV.L [R0], R1
00001B04 6101                    		CMP #00H, R1
00001B06 21rr                    		BNE L975
00001B08                         L979:	; bb42
                                 ;    2211 
                                 ;    2212 	ENTER_FF(fs);						/* Lock the volume */
                                 ;    2213 	*rfs = fs;							/* Return pointer to the file system object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2213
00001B08 AB01                    		MOV.L 30H[R0], R1
00001B0A AD82                    		MOV.L 58H[R0], R2
00001B0C E321                    		MOV.L R1, [R2]
00001B0E                         L980:	; bb42.split
                                 ;    2214 
                                 ;    2215 	if (fs->fs_type) {					/* If the volume has been mounted */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2215
00001B0E AB01                    		MOV.L 30H[R0], R1
00001B10 581E                    		MOVU.B [R1], R14
00001B12 610E                    		CMP #00H, R14
00001B14 20rr                    		BEQ L996
00001B16                         L981:	; bb46
                                 ;    2216 		stat = disk_status(fs->drv);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2216
00001B16 AB01                    		MOV.L 30H[R0], R1
00001B18 B019                    		MOVU.B 01H[R1], R1
00001B1A 05rrrrrr             A  		BSR _disk_status
00001B1E 8489                    		MOV.B R1, 13H[R0]
00001B20                         L982:	; bb46.split
                                 ;    2217 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2217
00001B20 F50013                  		BTST #00H, 13H[R0].B
00001B23 21rr                    		BNE L993
00001B25 2Err                 B  		BRA L994
00001B27                         L983:	; bb54
                                 ;    2218 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
                                 ;    2219 				return FR_WRITE_PROTECTED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2219
00001B27 3E010A                  		MOV.L #0000000AH, 04H[R0]
00001B2A 38rrrr               W  		BRA L1150
00001B2D                         L984:	; bb56
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2218
00001B2D 590153                  		MOVU.B 53H[R0], R1
00001B30 6101                    		CMP #00H, R1
00001B32 10                   S  		BEQ L986
00001B33                         L985:	; bb61
00001B33 F80601                  		MOV.L #00000001H, [R0]
00001B36 08                   S  		BRA L987
00001B37                         L986:	; bb62
00001B37 F80600                  		MOV.L #00000000H, [R0]
00001B3A                         L987:	; bb63
00001B3A EC01                    		MOV.L [R0], R1
00001B3C 6101                    		CMP #00H, R1
00001B3E 10                   S  		BEQ L990
00001B3F                         L988:	; bb66
00001B3F F50213                  		BTST #02H, 13H[R0].B
00001B42 10                   S  		BEQ L990
00001B43                         L989:	; bb72
00001B43 F80601                  		MOV.L #00000001H, [R0]
00001B46 08                   S  		BRA L991
00001B47                         L990:	; bb73
00001B47 F80600                  		MOV.L #00000000H, [R0]
00001B4A                         L991:	; bb74
00001B4A EC01                    		MOV.L [R0], R1
00001B4C 6101                    		CMP #00H, R1
00001B4E 21rr                    		BNE L983
00001B50                         L992:	; bb79
                                 ;    2220 			return FR_OK;				/* The file system object is valid */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2220
00001B50 3E0100                  		MOV.L #00000000H, 04H[R0]
00001B53 38rrrr               W  		BRA L1150
00001B56                         L993:	; bb86
00001B56 F80600                  		MOV.L #00000000H, [R0]
00001B59 08                   S  		BRA L995
00001B5A                         L994:	; bb87
00001B5A F80601                  		MOV.L #00000001H, [R0]
00001B5D                         L995:	; bb88
00001B5D EC01                    		MOV.L [R0], R1
00001B5F 6101                    		CMP #00H, R1
00001B61 21rr                    		BNE L984
00001B63                         L996:	; bb100
                                 ;    2221 		}
                                 ;    2222 	}
                                 ;    2223 
                                 ;    2224 	/* The file system object is not valid. */
                                 ;    2225 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
                                 ;    2226 
                                 ;    2227 	fs->fs_type = 0;					/* Clear the file system object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2227
00001B63 AB01                    		MOV.L 30H[R0], R1
00001B65 F81400                  		MOV.B #00H, [R1]
00001B68                         L997:	; bb100.split
                                 ;    2228 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2228
00001B68 A889                    		MOV.L 0CH[R0], R1
00001B6A AB02                    		MOV.L 30H[R0], R2
00001B6C 8029                    		MOV.B R1, 01H[R2]
00001B6E                         L998:	; bb100.split2
                                 ;    2229 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2229
00001B6E AB01                    		MOV.L 30H[R0], R1
00001B70 B019                    		MOVU.B 01H[R1], R1
00001B72 05rrrrrr             A  		BSR _disk_initialize
00001B76 8489                    		MOV.B R1, 13H[R0]
00001B78                         L999:	; bb100.split3
                                 ;    2230 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2230
00001B78 F50013                  		BTST #00H, 13H[R0].B
00001B7B 20rr                    		BEQ L1002
00001B7D                         L1000:	; bb112
                                 ;    2231 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2231
00001B7D 3E0103                  		MOV.L #00000003H, 04H[R0]
00001B80 38rrrr               W  		BRA L1150
00001B83                         L1001:	; bb122
                                 ;    2232 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
                                 ;    2233 		return FR_WRITE_PROTECTED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2233
00001B83 3E010A                  		MOV.L #0000000AH, 04H[R0]
00001B86 38rrrr               W  		BRA L1150
00001B89                         L1002:	; bb124
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2232
00001B89 590153                  		MOVU.B 53H[R0], R1
00001B8C 6101                    		CMP #00H, R1
00001B8E 10                   S  		BEQ L1004
00001B8F                         L1003:	; bb129
00001B8F F80601                  		MOV.L #00000001H, [R0]
00001B92 08                   S  		BRA L1005
00001B93                         L1004:	; bb130
00001B93 F80600                  		MOV.L #00000000H, [R0]
00001B96                         L1005:	; bb131
00001B96 EC01                    		MOV.L [R0], R1
00001B98 6101                    		CMP #00H, R1
00001B9A 10                   S  		BEQ L1008
00001B9B                         L1006:	; bb134
00001B9B F50213                  		BTST #02H, 13H[R0].B
00001B9E 10                   S  		BEQ L1008
00001B9F                         L1007:	; bb140
00001B9F F80601                  		MOV.L #00000001H, [R0]
00001BA2 08                   S  		BRA L1009
00001BA3                         L1008:	; bb141
00001BA3 F80600                  		MOV.L #00000000H, [R0]
00001BA6                         L1009:	; bb142
00001BA6 EC01                    		MOV.L [R0], R1
00001BA8 6101                    		CMP #00H, R1
00001BAA 21rr                    		BNE L1001
00001BAC                         L1010:	; bb147
                                 ;    2234 #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
                                 ;    2235 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK
                                 ;    2236 		|| SS(fs) < _MIN_SS || SS(fs) > _MAX_SS) return FR_DISK_ERR;
                                 ;    2237 #endif
                                 ;    2238 	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
                                 ;    2239 	bsect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2239
00001BAC 3E0500                  		MOV.L #00000000H, 14H[R0]
00001BAF                         L1011:	; bb147.split
                                 ;    2240 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2240
00001BAF A90A                    		MOV.L 14H[R0], R2
00001BB1 AB01                    		MOV.L 30H[R0], R1
00001BB3 39rrrr               W  		BSR __$check_fs
00001BB6 8289                    		MOV.B R1, 0BH[R0]
00001BB8                         L1012:	; bb147.split4
                                 ;    2241 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2241
00001BB8 B289                    		MOVU.B 0BH[R0], R1
00001BBA 6111                    		CMP #01H, R1
00001BBC 3Arrrr               W  		BEQ L1039
00001BBF 38rrrr               W  		BRA L1035
00001BC2                         L1013:	; bb152
                                 ;    2242 		UINT i;
                                 ;    2243 		DWORD br[4];
                                 ;    2244 
                                 ;    2245 		for (i = 0; i < 4; i++) {			/* Get partition offset */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2245
00001BC2 3E0D00                  		MOV.L #00000000H, 34H[R0]
00001BC5 2Err                 B  		BRA L1019
00001BC7                         L1014:	; bb153
                                 ;    2246 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2246
00001BC7 AB09                    		MOV.L 34H[R0], R1
00001BC9 6C41                    		SHLL #04H, R1
00001BCB 0689010C                		ADD 30H[R0].L, R1
00001BCF 7211F201                		ADD #01F2H, R1
00001BD3 A481                    		MOV.L R1, 48H[R0]
00001BD5                         L1015:	; bb153.split
                                 ;    2247 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2247
00001BD5 AC81                    		MOV.L 48H[R0], R1
00001BD7 B111                    		MOVU.B 04H[R1], R1
00001BD9 6101                    		CMP #00H, R1
00001BDB AB09                    		MOV.L 34H[R0], R1
00001BDD 10                   S  		BEQ L1017
00001BDE                         L1016:	; bb170
00001BDE AC82                    		MOV.L 48H[R0], R2
00001BE0 E12002                  		MOV.L 08H[R2], [R0]
00001BE3 08                   S  		BRA L1018
00001BE4                         L1017:	; bb175
00001BE4 F80600                  		MOV.L #00000000H, [R0]
00001BE7                         L1018:	; bb176
00001BE7 6C21                    		SHLL #02H, R1
00001BE9 710E38                  		ADD #38H, R0, R14
00001BEC 4BE1                    		ADD R14, R1
00001BEE E001                    		MOV.L [R0], [R1]
00001BF0 AB09                    		MOV.L 34H[R0], R1
00001BF2 6211                    		ADD #01H, R1
00001BF4 A309                    		MOV.L R1, 34H[R0]
00001BF6                         L1019:	; bb181
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2245
00001BF6 AB09                    		MOV.L 34H[R0], R1
00001BF8 6141                    		CMP #04H, R1
00001BFA 23rr                    		BLTU L1014
00001BFC                         L1020:	; bb186
                                 ;    2248 		}
                                 ;    2249 		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2249
00001BFC 3E0D00                  		MOV.L #00000000H, 34H[R0]
00001BFF                         L1021:	; bb186.split
                                 ;    2250 		if (i) i--;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2250
00001BFF AB09                    		MOV.L 34H[R0], R1
00001C01 6101                    		CMP #00H, R1
00001C03 10                   S  		BEQ L1023
00001C04                         L1022:	; bb188
00001C04 AB09                    		MOV.L 34H[R0], R1
00001C06 6011                    		SUB #01H, R1
00001C08 A309                    		MOV.L R1, 34H[R0]
00001C0A                         L1023:	; bb196
00001C0A 710E38                  		ADD #38H, R0, R14
                                 ;    2251 		do {								/* Find an FAT volume */
                                 ;    2252 			bsect = br[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2252
00001C0D AB09                    		MOV.L 34H[R0], R1
00001C0F FE61E1                  		MOV.L [R1,R14], R1
00001C12 A109                    		MOV.L R1, 14H[R0]
00001C14                         L1024:	; bb196.split
                                 ;    2253 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2253
00001C14 A909                    		MOV.L 14H[R0], R1
00001C16 6101                    		CMP #00H, R1
00001C18 20rr                    		BEQ L1026
00001C1A                         L1025:	; bb204
00001C1A A90A                    		MOV.L 14H[R0], R2
00001C1C AB01                    		MOV.L 30H[R0], R1
00001C1E 39rrrr               W  		BSR __$check_fs
00001C21 E301                    		MOV.L R1, [R0]
00001C23 08                   S  		BRA L1027
00001C24                         L1026:	; bb209
00001C24 F80602                  		MOV.L #00000002H, [R0]
00001C27                         L1027:	; bb210
00001C27 5801                    		MOVU.B [R0], R1
00001C29 8289                    		MOV.B R1, 0BH[R0]
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2251
00001C2B 6101                    		CMP #00H, R1
00001C2D 10                   S  		BEQ L1029
00001C2E                         L1028:	; bb219
00001C2E F80601                  		MOV.L #00000001H, [R0]
00001C31 08                   S  		BRA L1030
00001C32                         L1029:	; bb220
00001C32 F80600                  		MOV.L #00000000H, [R0]
00001C35                         L1030:	; bb221
00001C35 EC01                    		MOV.L [R0], R1
00001C37 6101                    		CMP #00H, R1
00001C39 20rr                    		BEQ L1033
00001C3B                         L1031:	; bb224
00001C3B AB09                    		MOV.L 34H[R0], R1
00001C3D 6211                    		ADD #01H, R1
00001C3F A309                    		MOV.L R1, 34H[R0]
00001C41 6131                    		CMP #03H, R1
00001C43 24rr                    		BGTU L1033
00001C45                         L1032:	; bb230
00001C45 F80601                  		MOV.L #00000001H, [R0]
00001C48 08                   S  		BRA L1034
00001C49                         L1033:	; bb231
00001C49 F80600                  		MOV.L #00000000H, [R0]
00001C4C                         L1034:	; bb232
00001C4C EC01                    		MOV.L [R0], R1
00001C4E 6101                    		CMP #00H, R1
00001C50 21rr                    		BNE L1023
00001C52 2Err                 B  		BRA L1042
00001C54                         L1035:	; bb242
00001C54 B289                    		MOVU.B 0BH[R0], R1
00001C56 6101                    		CMP #00H, R1
00001C58 10                   S  		BEQ L1037
00001C59                         L1036:	; bb247
00001C59 F80600                  		MOV.L #00000000H, [R0]
00001C5C 08                   S  		BRA L1038
00001C5D                         L1037:	; bb248
00001C5D F80601                  		MOV.L #00000001H, [R0]
00001C60                         L1038:	; bb249
00001C60 F80600                  		MOV.L #00000000H, [R0]
00001C63 08                   S  		BRA L1040
00001C64                         L1039:	; bb258
00001C64 F80601                  		MOV.L #00000001H, [R0]
00001C67 08                   S  		BRA L1041
00001C68                         L1040:	; bb259
00001C68 F80600                  		MOV.L #00000000H, [R0]
00001C6B                         L1041:	; bb260
00001C6B EC01                    		MOV.L [R0], R1
00001C6D 6101                    		CMP #00H, R1
00001C6F 3Brrrr               W  		BNE L1013
00001C72                         L1042:	; bb266
                                 ;    2254 		} while (!LD2PT(vol) && fmt && ++i < 4);
                                 ;    2255 	}
                                 ;    2256 	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2256
00001C72 B289                    		MOVU.B 0BH[R0], R1
00001C74 6131                    		CMP #03H, R1
00001C76 18                   S  		BNE L1044
00001C77                         L1043:	; bb267
00001C77 3E0101                  		MOV.L #00000001H, 04H[R0]
00001C7A 38rrrr               W  		BRA L1150
00001C7D                         L1044:	; bb275
                                 ;    2257 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2257
00001C7D B289                    		MOVU.B 0BH[R0], R1
00001C7F 6101                    		CMP #00H, R1
00001C81 10                   S  		BEQ L1046
00001C82                         L1045:	; bb276
00001C82 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001C85 38rrrr               W  		BRA L1150
00001C88                         L1046:	; bb284
                                 ;    2258 
                                 ;    2259 	/* An FAT volume is found. Following code initializes the file system object */
                                 ;    2260 
                                 ;    2261 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical sector size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2261
00001C88 AB01                    		MOV.L 30H[R0], R1
00001C8A 71113F                  		ADD #3FH, R1
00001C8D 5C1E                    		MOVU.W [R1], R14
00001C8F 760E0002                		CMP #0200H, R14
00001C93 10                   S  		BEQ L1048
00001C94                         L1047:	; bb285
                                 ;    2262 		return FR_NO_FILESYSTEM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2262
00001C94 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001C97 38rrrr               W  		BRA L1150
00001C9A                         L1048:	; bb297
                                 ;    2263 
                                 ;    2264 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2264
00001C9A AB01                    		MOV.L 30H[R0], R1
00001C9C 5D1125                  		MOVU.W 4AH[R1], R1
00001C9F A181                    		MOV.L R1, 18H[R0]
00001CA1                         L1049:	; bb297.split
                                 ;    2265 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2265
00001CA1 A981                    		MOV.L 18H[R0], R1
00001CA3 6101                    		CMP #00H, R1
00001CA5 21rr                    		BNE L1051
00001CA7 2Err                 B  		BRA L1052
00001CA9                         L1050:	; bb306
00001CA9 AB01                    		MOV.L 30H[R0], R1
00001CAB E5101606                		MOV.L 58H[R1], 18H[R0]
00001CAF 2Err                 B  		BRA L1054
00001CB1                         L1051:	; bb316
00001CB1 F80600                  		MOV.L #00000000H, [R0]
00001CB4 08                   S  		BRA L1053
00001CB5                         L1052:	; bb317
00001CB5 F80601                  		MOV.L #00000001H, [R0]
00001CB8                         L1053:	; bb318
00001CB8 EC01                    		MOV.L [R0], R1
00001CBA 6101                    		CMP #00H, R1
00001CBC 21rr                    		BNE L1050
00001CBE                         L1054:	; bb322
                                 ;    2266 	fs->fsize = fasize;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2266
00001CBE A981                    		MOV.L 18H[R0], R1
00001CC0 AB02                    		MOV.L 30H[R0], R2
00001CC2 A1A9                    		MOV.L R1, 1CH[R2]
00001CC4                         L1055:	; bb322.split
                                 ;    2267 
                                 ;    2268 	fs->n_fats = fs->win[BPB_NumFATs];					/* Number of FAT copies */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2268
00001CC4 AB01                    		MOV.L 30H[R0], R1
00001CC6 C5114403                		MOV.B 44H[R1], 03H[R1]
00001CCA                         L1056:	; bb322.split5
                                 ;    2269 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2269
00001CCA AB01                    		MOV.L 30H[R0], R1
00001CCC B099                    		MOVU.B 03H[R1], R1
00001CCE 6111                    		CMP #01H, R1
00001CD0 18                   S  		BNE L1058
00001CD1 2Err                 B  		BRA L1060
00001CD3                         L1057:	; bb334
                                 ;    2270 		return FR_NO_FILESYSTEM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2270
00001CD3 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001CD6 38rrrr               W  		BRA L1150
00001CD9                         L1058:	; bb342
00001CD9 AB01                    		MOV.L 30H[R0], R1
00001CDB B099                    		MOVU.B 03H[R1], R1
00001CDD 6121                    		CMP #02H, R1
00001CDF 10                   S  		BEQ L1060
00001CE0                         L1059:	; bb349
00001CE0 F80601                  		MOV.L #00000001H, [R0]
00001CE3 08                   S  		BRA L1061
00001CE4                         L1060:	; bb350
00001CE4 F80600                  		MOV.L #00000000H, [R0]
00001CE7                         L1061:	; bb351
00001CE7 EC01                    		MOV.L [R0], R1
00001CE9 6101                    		CMP #00H, R1
00001CEB 21rr                    		BNE L1057
00001CED                         L1062:	; bb356
                                 ;    2271 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2271
00001CED AB01                    		MOV.L 30H[R0], R1
00001CEF B099                    		MOVU.B 03H[R1], R1
00001CF1 068D0106                		MUL 18H[R0].L, R1
00001CF5 A181                    		MOV.L R1, 18H[R0]
00001CF7                         L1063:	; bb356.split
                                 ;    2272 
                                 ;    2273 	fs->csize = fs->win[BPB_SecPerClus];				/* Number of sectors per cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2273
00001CF7 AB01                    		MOV.L 30H[R0], R1
00001CF9 C5114102                		MOV.B 41H[R1], 02H[R1]
00001CFD                         L1064:	; bb356.split6
                                 ;    2274 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2274
00001CFD AB01                    		MOV.L 30H[R0], R1
00001CFF B091                    		MOVU.B 02H[R1], R1
00001D01 6101                    		CMP #00H, R1
00001D03 18                   S  		BNE L1066
00001D04 2Err                 B  		BRA L1067
00001D06                         L1065:	; bb371
                                 ;    2275 		return FR_NO_FILESYSTEM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2275
00001D06 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001D09 38rrrr               W  		BRA L1150
00001D0C                         L1066:	; bb379
00001D0C F80600                  		MOV.L #00000000H, [R0]
00001D0F 08                   S  		BRA L1068
00001D10                         L1067:	; bb380
00001D10 F80601                  		MOV.L #00000001H, [R0]
00001D13                         L1068:	; bb381
00001D13 EC01                    		MOV.L [R0], R1
00001D15 6101                    		CMP #00H, R1
00001D17 21rr                    		BNE L1070
00001D19                         L1069:	; bb384
00001D19 AB01                    		MOV.L 30H[R0], R1
00001D1B B091                    		MOVU.B 02H[R1], R1
00001D1D 711EFF                  		ADD #0FFFFFFFFH, R1, R14
00001D20 FC33E1                  		TST R14, R1
00001D23 10                   S  		BEQ L1071
00001D24                         L1070:	; bb397
00001D24 F80601                  		MOV.L #00000001H, [R0]
00001D27 08                   S  		BRA L1072
00001D28                         L1071:	; bb398
00001D28 F80600                  		MOV.L #00000000H, [R0]
00001D2B                         L1072:	; bb399
00001D2B EC01                    		MOV.L [R0], R1
00001D2D 6101                    		CMP #00H, R1
00001D2F 21rr                    		BNE L1065
00001D31                         L1073:	; bb404
                                 ;    2276 
                                 ;    2277 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2277
00001D31 AB01                    		MOV.L 30H[R0], R1
00001D33 711E45                  		ADD #45H, R1, R14
00001D36 D4E104                  		MOV.W [R14], 08H[R1]
00001D39                         L1074:	; bb404.split
                                 ;    2278 	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2278
00001D39 AB01                    		MOV.L 30H[R0], R1
00001D3B 66FE                    		MOV.L #0000000FH, R14
00001D3D 06E10C1E04              		TST 08H[R1].UW, R14
00001D42 10                   S  		BEQ L1076
00001D43                         L1075:	; bb414
                                 ;    2279 		return FR_NO_FILESYSTEM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2279
00001D43 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001D46 38rrrr               W  		BRA L1150
00001D49                         L1076:	; bb424
                                 ;    2280 
                                 ;    2281 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2281
00001D49 AB01                    		MOV.L 30H[R0], R1
00001D4B 711147                  		ADD #47H, R1
00001D4E 5C11                    		MOVU.W [R1], R1
00001D50 A189                    		MOV.L R1, 1CH[R0]
00001D52                         L1077:	; bb424.split
                                 ;    2282 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2282
00001D52 A989                    		MOV.L 1CH[R0], R1
00001D54 6101                    		CMP #00H, R1
00001D56 21rr                    		BNE L1079
00001D58 2Err                 B  		BRA L1080
00001D5A                         L1078:	; bb433
00001D5A AB01                    		MOV.L 30H[R0], R1
00001D5C E5101507                		MOV.L 54H[R1], 1CH[R0]
00001D60 2Err                 B  		BRA L1082
00001D62                         L1079:	; bb443
00001D62 F80600                  		MOV.L #00000000H, [R0]
00001D65 08                   S  		BRA L1081
00001D66                         L1080:	; bb444
00001D66 F80601                  		MOV.L #00000001H, [R0]
00001D69                         L1081:	; bb445
00001D69 EC01                    		MOV.L [R0], R1
00001D6B 6101                    		CMP #00H, R1
00001D6D 21rr                    		BNE L1078
00001D6F                         L1082:	; bb449
                                 ;    2283 
                                 ;    2284 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2284
00001D6F AB01                    		MOV.L 30H[R0], R1
00001D71 D5102117                		MOV.W 42H[R1], 2EH[R0]
00001D75                         L1083:	; bb449.split
                                 ;    2285 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2285
00001D75 BD89                    		MOVU.W 2EH[R0], R1
00001D77 6101                    		CMP #00H, R1
00001D79 18                   S  		BNE L1085
00001D7A 2Err                 B  		BRA L1086
00001D7C                         L1084:	; bb457
00001D7C 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001D7F 38rrrr               W  		BRA L1150
00001D82                         L1085:	; bb463
00001D82 F80600                  		MOV.L #00000000H, [R0]
00001D85 08                   S  		BRA L1087
00001D86                         L1086:	; bb464
00001D86 F80601                  		MOV.L #00000001H, [R0]
00001D89                         L1087:	; bb465
00001D89 EC01                    		MOV.L [R0], R1
00001D8B 6101                    		CMP #00H, R1
00001D8D 21rr                    		BNE L1084
00001D8F                         L1088:	; bb469
                                 ;    2286 
                                 ;    2287 	/* Determine the FAT sub type */
                                 ;    2288 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2288
00001D8F BD89                    		MOVU.W 2EH[R0], R1
00001D91 06890106                		ADD 18H[R0].L, R1
00001D95 AB02                    		MOV.L 30H[R0], R2
00001D97 B922                    		MOVU.W 08H[R2], R2
00001D99 6842                    		SHLR #04H, R2
00001D9B 4B21                    		ADD R2, R1
00001D9D A201                    		MOV.L R1, 20H[R0]
00001D9F                         L1089:	; bb469.split
                                 ;    2289 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2289
00001D9F A989                    		MOV.L 1CH[R0], R1
00001DA1 06850108                		CMP 20H[R0].L, R1
00001DA5 22rr                    		BGEU L1091
00001DA7                         L1090:	; bb481
00001DA7 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001DAA 38rrrr               W  		BRA L1150
00001DAD                         L1091:	; bb488
                                 ;    2290 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2290
00001DAD A989                    		MOV.L 1CH[R0], R1
00001DAF 06810108                		SUB 20H[R0].L, R1
00001DB3 AB02                    		MOV.L 30H[R0], R2
00001DB5 FC252102                		DIVU 02H[R2].UB, R1
00001DB9 A209                    		MOV.L R1, 24H[R0]
00001DBB                         L1092:	; bb488.split
                                 ;    2291 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2291
00001DBB AA09                    		MOV.L 24H[R0], R1
00001DBD 6101                    		CMP #00H, R1
00001DBF 18                   S  		BNE L1094
00001DC0 2Err                 B  		BRA L1095
00001DC2                         L1093:	; bb498
00001DC2 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001DC5 38rrrr               W  		BRA L1150
00001DC8                         L1094:	; bb503
00001DC8 F80600                  		MOV.L #00000000H, [R0]
00001DCB 08                   S  		BRA L1096
00001DCC                         L1095:	; bb504
00001DCC F80601                  		MOV.L #00000001H, [R0]
00001DCF                         L1096:	; bb505
00001DCF EC01                    		MOV.L [R0], R1
00001DD1 6101                    		CMP #00H, R1
00001DD3 21rr                    		BNE L1093
00001DD5                         L1097:	; bb509
                                 ;    2292 	fmt = FS_FAT12;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2292
00001DD5 3C0B01                  		MOV.B #01H, 0BH[R0]
00001DD8                         L1098:	; bb509.split
                                 ;    2293 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2293
00001DD8 AA09                    		MOV.L 24H[R0], R1
00001DDA 7601F60F                		CMP #0FF6H, R1
00001DDE 23rr                    		BLTU L1100
00001DE0                         L1099:	; bb511
00001DE0 3C0B02                  		MOV.B #02H, 0BH[R0]
00001DE3                         L1100:	; bb517
                                 ;    2294 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2294
00001DE3 AA09                    		MOV.L 24H[R0], R1
00001DE5 7701F6FF00              		CMP #0FFF6H, R1
00001DEA 23rr                    		BLTU L1102
00001DEC                         L1101:	; bb518
00001DEC 3C0B03                  		MOV.B #03H, 0BH[R0]
00001DEF                         L1102:	; bb523
                                 ;    2295 
                                 ;    2296 	/* Boundaries and Limits */
                                 ;    2297 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2297
00001DEF AA09                    		MOV.L 24H[R0], R1
00001DF1 6221                    		ADD #02H, R1
00001DF3 AB02                    		MOV.L 30H[R0], R2
00001DF5 A1A1                    		MOV.L R1, 18H[R2]
00001DF7                         L1103:	; bb523.split
                                 ;    2298 	fs->volbase = bsect;								/* Volume start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2298
00001DF7 A909                    		MOV.L 14H[R0], R1
00001DF9 AB02                    		MOV.L 30H[R0], R2
00001DFB A221                    		MOV.L R1, 20H[R2]
00001DFD                         L1104:	; bb523.split7
                                 ;    2299 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2299
00001DFD A909                    		MOV.L 14H[R0], R1
00001DFF 06C90117                		ADD 2EH[R0].UW, R1
00001E03 AB02                    		MOV.L 30H[R0], R2
00001E05 A229                    		MOV.L R1, 24H[R2]
00001E07                         L1105:	; bb523.split8
                                 ;    2300 	fs->database = bsect + sysect;						/* Data start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2300
00001E07 A909                    		MOV.L 14H[R0], R1
00001E09 06890108                		ADD 20H[R0].L, R1
00001E0D AB02                    		MOV.L 30H[R0], R2
00001E0F A2A9                    		MOV.L R1, 2CH[R2]
00001E11                         L1106:	; bb523.split9
                                 ;    2301 	if (fmt == FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2301
00001E11 B289                    		MOVU.B 0BH[R0], R1
00001E13 6131                    		CMP #03H, R1
00001E15 AB01                    		MOV.L 30H[R0], R1
00001E17 B911                    		MOVU.W 08H[R1], R1
00001E19 21rr                    		BNE L1111
00001E1B                         L1107:	; bb544
                                 ;    2302 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2302
00001E1B 6101                    		CMP #00H, R1
00001E1D 10                   S  		BEQ L1109
00001E1E                         L1108:	; bb545
00001E1E 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001E21 38rrrr               W  		BRA L1150
00001E24                         L1109:	; bb554
                                 ;    2303 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2303
00001E24 AB01                    		MOV.L 30H[R0], R1
00001E26 E511180A                		MOV.L 60H[R1], 28H[R1]
00001E2A                         L1110:	; bb554.split
                                 ;    2304 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2304
00001E2A AB01                    		MOV.L 30H[R0], R1
00001E2C A991                    		MOV.L 18H[R1], R1
00001E2E 6C21                    		SHLL #02H, R1
00001E30 A281                    		MOV.L R1, 28H[R0]
00001E32 2Err                 B  		BRA L1121
00001E34                         L1111:	; bb568
00001E34 6101                    		CMP #00H, R1
                                 ;    2305 	} else {
                                 ;    2306 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2306
00001E36 18                   S  		BNE L1113
00001E37 2Err                 B  		BRA L1114
00001E39                         L1112:	; bb569
00001E39 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001E3C 38rrrr               W  		BRA L1150
00001E3F                         L1113:	; bb577
00001E3F F80600                  		MOV.L #00000000H, [R0]
00001E42 08                   S  		BRA L1115
00001E43                         L1114:	; bb578
00001E43 F80601                  		MOV.L #00000001H, [R0]
00001E46                         L1115:	; bb579
00001E46 EC01                    		MOV.L [R0], R1
00001E48 6101                    		CMP #00H, R1
00001E4A 21rr                    		BNE L1112
00001E4C                         L1116:	; bb583
                                 ;    2307 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2307
00001E4C AB01                    		MOV.L 30H[R0], R1
00001E4E AA1A                    		MOV.L 24H[R1], R2
00001E50 06890206                		ADD 18H[R0].L, R2
00001E54 A292                    		MOV.L R2, 28H[R1]
00001E56                         L1117:	; bb583.split
                                 ;    2308 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2308
00001E56 B289                    		MOVU.B 0BH[R0], R1
00001E58 6121                    		CMP #02H, R1
00001E5A AB01                    		MOV.L 30H[R0], R1
00001E5C A991                    		MOV.L 18H[R1], R1
00001E5E 18                   S  		BNE L1119
00001E5F                         L1118:	; bb595
00001E5F 6C11                    		SHLL #01H, R1
00001E61 E301                    		MOV.L R1, [R0]
00001E63 2Err                 B  		BRA L1120
00001E65                         L1119:	; bb600
00001E65 6331                    		MUL #03H, R1
00001E67 6811                    		SHLR #01H, R1
00001E69 AB02                    		MOV.L 30H[R0], R2
00001E6B A9A2                    		MOV.L 18H[R2], R2
00001E6D 6412                    		AND #01H, R2
00001E6F 4B21                    		ADD R2, R1
00001E71 E301                    		MOV.L R1, [R0]
00001E73                         L1120:	; bb611
00001E73 E4000A                  		MOV.L [R0], 28H[R0]
00001E76                         L1121:	; bb620
                                 ;    2309 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
                                 ;    2310 	}
                                 ;    2311 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than the size needed) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2311
00001E76 AB01                    		MOV.L 30H[R0], R1
00001E78 AA82                    		MOV.L 28H[R0], R2
00001E7A 7222FF01                		ADD #01FFH, R2
00001E7E 6892                    		SHLR #09H, R2
00001E80 06851207                		CMP 1CH[R1].L, R2
00001E84 25rr                    		BLEU L1123
00001E86                         L1122:	; bb621
                                 ;    2312 		return FR_NO_FILESYSTEM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2312
00001E86 3E010D                  		MOV.L #0000000DH, 04H[R0]
00001E89 38rrrr               W  		BRA L1150
00001E8C                         L1123:	; bb632
                                 ;    2313 
                                 ;    2314 #if !_FS_READONLY
                                 ;    2315 	/* Initialize cluster allocation information */
                                 ;    2316 	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2316
00001E8C AB01                    		MOV.L 30H[R0], R1
00001E8E F91604FF                		MOV.L #0FFFFFFFFH, 10H[R1]
00001E92 F91603FF                		MOV.L #0FFFFFFFFH, 0CH[R1]
00001E96                         L1124:	; bb632.split
                                 ;    2317 
                                 ;    2318 	/* Get fsinfo if available */
                                 ;    2319 	fs->fsi_flag = 0x80;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2319
00001E96 AB01                    		MOV.L 30H[R0], R1
00001E98 3C1580                  		MOV.B #80H, 05H[R1]
00001E9B                         L1125:	; bb632.split10
                                 ;    2320 #if (_FS_NOFSINFO & 3) != 3
                                 ;    2321 	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2321
00001E9B B289                    		MOVU.B 0BH[R0], R1
00001E9D 6131                    		CMP #03H, R1
00001E9F 20rr                    		BEQ L1138
00001EA1 2Err                 B  		BRA L1140
00001EA3                         L1126:	; bb641
                                 ;    2322 		&& LD_WORD(fs->win+BPB_FSInfo) == 1
                                 ;    2323 		&& move_window(fs, bsect + 1) == FR_OK)
                                 ;    2324 	{
                                 ;    2325 		fs->fsi_flag = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2325
00001EA3 AB01                    		MOV.L 30H[R0], R1
00001EA5 3C1500                  		MOV.B #00H, 05H[R1]
00001EA8                         L1127:	; bb641.split
                                 ;    2326 		if (LD_WORD(fs->win+BS_55AA) == 0xAA55	/* Load FSINFO data if available */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2326
00001EA8 AB01                    		MOV.L 30H[R0], R1
00001EAA 5E1E1901                		MOVU.W 0232H[R1], R14
00001EAE 770E55AA00              		CMP #0AA55H, R14
00001EB3 20rr                    		BEQ L1130
00001EB5 2Err                 B  		BRA L1132
00001EB7                         L1128:	; bb645
                                 ;    2327 			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
                                 ;    2328 			&& LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272)
                                 ;    2329 		{
                                 ;    2330 #if (_FS_NOFSINFO & 1) == 0
                                 ;    2331 			fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2331
00001EB7 AB01                    		MOV.L 30H[R0], R1
00001EB9 E5118704                		MOV.L 021CH[R1], 10H[R1]
00001EBD                         L1129:	; bb645.split
                                 ;    2332 #endif
                                 ;    2333 #if (_FS_NOFSINFO & 2) == 0
                                 ;    2334 			fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2334
00001EBD AB01                    		MOV.L 30H[R0], R1
00001EBF E5118803                		MOV.L 0220H[R1], 0CH[R1]
00001EC3 2Err                 B  		BRA L1146
00001EC5                         L1130:	; bb671
00001EC5 AB01                    		MOV.L 30H[R0], R1
00001EC7 AB19                    		MOV.L 34H[R1], R1
00001EC9 740152526141            		CMP #41615252H, R1
00001ECF 18                   S  		BNE L1132
00001ED0                         L1131:	; bb680
00001ED0 F80601                  		MOV.L #00000001H, [R0]
00001ED3 08                   S  		BRA L1133
00001ED4                         L1132:	; bb681
00001ED4 F80600                  		MOV.L #00000000H, [R0]
00001ED7                         L1133:	; bb682
00001ED7 EC01                    		MOV.L [R0], R1
00001ED9 6101                    		CMP #00H, R1
00001EDB 20rr                    		BEQ L1136
00001EDD                         L1134:	; bb686
00001EDD AB01                    		MOV.L 30H[R0], R1
00001EDF ED1E86                  		MOV.L 0218H[R1], R14
00001EE2 740E72724161            		CMP #61417272H, R14
00001EE8 18                   S  		BNE L1136
00001EE9                         L1135:	; bb695
00001EE9 F80601                  		MOV.L #00000001H, [R0]
00001EEC 08                   S  		BRA L1137
00001EED                         L1136:	; bb696
00001EED F80600                  		MOV.L #00000000H, [R0]
00001EF0                         L1137:	; bb697
00001EF0 EC01                    		MOV.L [R0], R1
00001EF2 6101                    		CMP #00H, R1
00001EF4 21rr                    		BNE L1128
00001EF6 2Err                 B  		BRA L1146
00001EF8                         L1138:	; bb707
00001EF8 AB01                    		MOV.L 30H[R0], R1
00001EFA 5D1E32                  		MOVU.W 64H[R1], R14
00001EFD 611E                    		CMP #01H, R14
00001EFF 18                   S  		BNE L1140
00001F00                         L1139:	; bb717
00001F00 F80601                  		MOV.L #00000001H, [R0]
00001F03 08                   S  		BRA L1141
00001F04                         L1140:	; bb718
00001F04 F80600                  		MOV.L #00000000H, [R0]
00001F07                         L1141:	; bb719
00001F07 EC01                    		MOV.L [R0], R1
00001F09 6101                    		CMP #00H, R1
00001F0B 20rr                    		BEQ L1144
00001F0D                         L1142:	; bb723
00001F0D A90A                    		MOV.L 14H[R0], R2
00001F0F AB01                    		MOV.L 30H[R0], R1
00001F11 6212                    		ADD #01H, R2
00001F13 39rrrr               W  		BSR __$move_window
00001F16 6101                    		CMP #00H, R1
00001F18 18                   S  		BNE L1144
00001F19                         L1143:	; bb730
00001F19 F80601                  		MOV.L #00000001H, [R0]
00001F1C 08                   S  		BRA L1145
00001F1D                         L1144:	; bb731
00001F1D F80600                  		MOV.L #00000000H, [R0]
00001F20                         L1145:	; bb732
00001F20 EC01                    		MOV.L [R0], R1
00001F22 6101                    		CMP #00H, R1
00001F24 3Brrrr               W  		BNE L1126
00001F27                         L1146:	; bb737
                                 ;    2335 #endif
                                 ;    2336 		}
                                 ;    2337 	}
                                 ;    2338 #endif
                                 ;    2339 #endif
                                 ;    2340 	fs->fs_type = fmt;	/* FAT sub-type */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2340
00001F27 B289                    		MOVU.B 0BH[R0], R1
00001F29 AB02                    		MOV.L 30H[R0], R2
00001F2B C321                    		MOV.B R1, [R2]
00001F2D                         L1147:	; bb737.split
                                 ;    2341 	fs->id = ++Fsid;	/* File system mount ID */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2341
00001F2D FBE2rrrrrrrr            		MOV.L #__$Fsid, R14
00001F33 DCE1                    		MOV.W [R14], R1
00001F35 6211                    		ADD #01H, R1
00001F37 AB02                    		MOV.L 30H[R0], R2
00001F39 D3E1                    		MOV.W R1, [R14]
00001F3B 90A9                    		MOV.W R1, 06H[R2]
00001F3D                         L1148:	; bb737.split11
                                 ;    2342 #if _FS_RPATH
                                 ;    2343 	fs->cdir = 0;		/* Set current directory to root */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2343
00001F3D AB01                    		MOV.L 30H[R0], R1
00001F3F 3E1500                  		MOV.L #00000000H, 14H[R1]
00001F42                         L1149:	; bb737.split12
                                 ;    2344 #endif
                                 ;    2345 #if _FS_LOCK			/* Clear file lock semaphores */
                                 ;    2346 	clear_lock(fs);
                                 ;    2347 #endif
                                 ;    2348 
                                 ;    2349 	return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2349
00001F42 3E0100                  		MOV.L #00000000H, 04H[R0]
00001F45                         L1150:	; bb749
00001F45 A809                    		MOV.L 04H[R0], R1
00001F47 A489                    		MOV.L R1, 4CH[R0]
                                 ;    2350 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2350
00001F49 6717                    		RTSD #5CH
00001F4B                         __$validate:
                                 		.STACK	__$validate=24
                                 ;    2351 
                                 ;    2352 
                                 ;    2353 
                                 ;    2354 
                                 ;    2355 /*-----------------------------------------------------------------------*/
                                 ;    2356 /* Check if the file/directory object is valid or not                    */
                                 ;    2357 /*-----------------------------------------------------------------------*/
                                 ;    2358 
                                 ;    2359 static
                                 ;    2360 FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2360
00001F4B 7100EC                  		ADD #0FFFFFFECH, R0
00001F4E A101                    		MOV.L R1, 10H[R0]
                                 ;    2361 	void* obj		/* Pointer to the object FIL/DIR to check validity */
                                 ;    2362 )
                                 ;    2363 {
                                 ;    2364 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2364
00001F50 A081                    		MOV.L R1, 08H[R0]
00001F52                         L1152:	; entry.split
                                 ;    2365 
                                 ;    2366 
                                 ;    2367 	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2367
00001F52 A881                    		MOV.L 08H[R0], R1
00001F54 6101                    		CMP #00H, R1
00001F56 18                   S  		BNE L1154
00001F57 2Err                 B  		BRA L1155
00001F59                         L1153:	; bb5
                                 ;    2368 		return FR_INVALID_OBJECT;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2368
00001F59 3E0109                  		MOV.L #00000009H, 04H[R0]
00001F5C 38rrrr               W  		BRA L1178
00001F5F                         L1154:	; bb10
00001F5F F80600                  		MOV.L #00000000H, [R0]
00001F62 08                   S  		BRA L1156
00001F63                         L1155:	; bb11
00001F63 F80601                  		MOV.L #00000001H, [R0]
00001F66                         L1156:	; bb12
00001F66 EC01                    		MOV.L [R0], R1
00001F68 6101                    		CMP #00H, R1
00001F6A 21rr                    		BNE L1161
00001F6C                         L1157:	; bb14
00001F6C A881                    		MOV.L 08H[R0], R1
00001F6E EC1E                    		MOV.L [R1], R14
00001F70 610E                    		CMP #00H, R14
00001F72 10                   S  		BEQ L1159
00001F73                         L1158:	; bb20
00001F73 F80600                  		MOV.L #00000000H, [R0]
00001F76 08                   S  		BRA L1160
00001F77                         L1159:	; bb21
00001F77 F80601                  		MOV.L #00000001H, [R0]
00001F7A                         L1160:	; bb22
00001F7A EC01                    		MOV.L [R0], R1
00001F7C 6101                    		CMP #00H, R1
00001F7E 10                   S  		BEQ L1162
00001F7F                         L1161:	; bb25
00001F7F F80601                  		MOV.L #00000001H, [R0]
00001F82 08                   S  		BRA L1163
00001F83                         L1162:	; bb26
00001F83 F80600                  		MOV.L #00000000H, [R0]
00001F86                         L1163:	; bb27
00001F86 EC01                    		MOV.L [R0], R1
00001F88 6101                    		CMP #00H, R1
00001F8A 21rr                    		BNE L1168
00001F8C                         L1164:	; bb31
00001F8C A881                    		MOV.L 08H[R0], R1
00001F8E EC1E                    		MOV.L [R1], R14
00001F90 58EE                    		MOVU.B [R14], R14
00001F92 610E                    		CMP #00H, R14
00001F94 10                   S  		BEQ L1166
00001F95                         L1165:	; bb41
00001F95 F80600                  		MOV.L #00000000H, [R0]
00001F98 08                   S  		BRA L1167
00001F99                         L1166:	; bb42
00001F99 F80601                  		MOV.L #00000001H, [R0]
00001F9C                         L1167:	; bb43
00001F9C EC01                    		MOV.L [R0], R1
00001F9E 6101                    		CMP #00H, R1
00001FA0 10                   S  		BEQ L1169
00001FA1                         L1168:	; bb46
00001FA1 F80601                  		MOV.L #00000001H, [R0]
00001FA4 08                   S  		BRA L1170
00001FA5                         L1169:	; bb47
00001FA5 F80600                  		MOV.L #00000000H, [R0]
00001FA8                         L1170:	; bb48
00001FA8 EC01                    		MOV.L [R0], R1
00001FAA 6101                    		CMP #00H, R1
00001FAC 21rr                    		BNE L1172
00001FAE                         L1171:	; bb52
00001FAE A881                    		MOV.L 08H[R0], R1
00001FB0 EC12                    		MOV.L [R1], R2
00001FB2 B8AA                    		MOVU.W 06H[R2], R2
00001FB4 06C51202                		CMP 04H[R1].UW, R2
00001FB8 10                   S  		BEQ L1173
00001FB9                         L1172:	; bb65
00001FB9 F80601                  		MOV.L #00000001H, [R0]
00001FBC 08                   S  		BRA L1174
00001FBD                         L1173:	; bb66
00001FBD F80600                  		MOV.L #00000000H, [R0]
00001FC0                         L1174:	; bb67
00001FC0 EC01                    		MOV.L [R0], R1
00001FC2 6101                    		CMP #00H, R1
00001FC4 21rr                    		BNE L1153
00001FC6                         L1175:	; bb73
                                 ;    2369 
                                 ;    2370 	ENTER_FF(fil->fs);		/* Lock file system */
                                 ;    2371 
                                 ;    2372 	if (disk_status(fil->fs->drv) & STA_NOINIT)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2372
00001FC6 A881                    		MOV.L 08H[R0], R1
00001FC8 EC11                    		MOV.L [R1], R1
00001FCA B019                    		MOVU.B 01H[R1], R1
00001FCC 05rrrrrr             A  		BSR _disk_status
00001FD0 7C01                    		BTST #00H, R1
00001FD2 10                   S  		BEQ L1177
00001FD3                         L1176:	; bb74
                                 ;    2373 		return FR_NOT_READY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2373
00001FD3 3E0103                  		MOV.L #00000003H, 04H[R0]
00001FD6 08                   S  		BRA L1178
00001FD7                         L1177:	; bb87
                                 ;    2374 
                                 ;    2375 	return FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2375
00001FD7 3E0100                  		MOV.L #00000000H, 04H[R0]
00001FDA                         L1178:	; bb89
00001FDA A809                    		MOV.L 04H[R0], R1
00001FDC A089                    		MOV.L R1, 0CH[R0]
                                 ;    2376 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2376
00001FDE 6705                    		RTSD #14H
00001FE0                         _f_mount:
                                 		.STACK	_f_mount=44
                                 ;    2377 
                                 ;    2378 
                                 ;    2379 
                                 ;    2380 
                                 ;    2381 /*--------------------------------------------------------------------------
                                 ;    2382 
                                 ;    2383    Public Functions
                                 ;    2384 
                                 ;    2385 --------------------------------------------------------------------------*/
                                 ;    2386 
                                 ;    2387 
                                 ;    2388 
                                 ;    2389 /*-----------------------------------------------------------------------*/
                                 ;    2390 /* Mount/Unmount a Logical Drive                                         */
                                 ;    2391 /*-----------------------------------------------------------------------*/
                                 ;    2392 
                                 ;    2393 FRESULT f_mount (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2393
00001FE0 7100D8                  		ADD #0FFFFFFD8H, R0
00001FE3 A209                    		MOV.L R1, 24H[R0]
00001FE5 A202                    		MOV.L R2, 20H[R0]
00001FE7 878B                    		MOV.B R3, 1FH[R0]
                                 ;    2394 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
                                 ;    2395 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
                                 ;    2396 	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
                                 ;    2397 )
                                 ;    2398 {
                                 ;    2399 	FATFS *cfs;
                                 ;    2400 	int vol;
                                 ;    2401 	FRESULT res;
                                 ;    2402 	const TCHAR *rp = path;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2402
00001FE9 E5000805                		MOV.L 20H[R0], 14H[R0]
00001FED                         L1180:	; entry.split
00001FED 710114                  		ADD #14H, R0, R1
                                 ;    2403 
                                 ;    2404 
                                 ;    2405 	vol = get_ldnumber(&rp);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2405
00001FF0 39rrrr               W  		BSR __$get_ldnumber
00001FF3 A089                    		MOV.L R1, 0CH[R0]
00001FF5                         L1181:	; entry.split1
                                 ;    2406 	if (vol < 0) return FR_INVALID_DRIVE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2406
00001FF5 A889                    		MOV.L 0CH[R0], R1
00001FF7 69F1                    		SHLR #1FH, R1
00001FF9 6101                    		CMP #00H, R1
00001FFB 10                   S  		BEQ L1183
00001FFC                         L1182:	; bb10
00001FFC 3E010B                  		MOV.L #0000000BH, 04H[R0]
00001FFF 2Err                 B  		BRA L1200
00002001                         L1183:	; bb15
                                 ;    2407 	cfs = FatFs[vol];					/* Pointer to fs object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2407
00002001 FBE2rrrrrrrr            		MOV.L #__$FatFs, R14
00002007 A889                    		MOV.L 0CH[R0], R1
00002009 FE61E1                  		MOV.L [R1,R14], R1
0000200C A081                    		MOV.L R1, 08H[R0]
0000200E                         L1184:	; bb15.split
                                 ;    2408 
                                 ;    2409 	if (cfs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2409
0000200E A881                    		MOV.L 08H[R0], R1
00002010 6101                    		CMP #00H, R1
00002012 10                   S  		BEQ L1186
00002013                         L1185:	; bb20
                                 ;    2410 #if _FS_LOCK
                                 ;    2411 		clear_lock(cfs);
                                 ;    2412 #endif
                                 ;    2413 #if _FS_REENTRANT						/* Discard sync object of the current volume */
                                 ;    2414 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
                                 ;    2415 #endif
                                 ;    2416 		cfs->fs_type = 0;				/* Clear old fs object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2416
00002013 A881                    		MOV.L 08H[R0], R1
00002015 F81400                  		MOV.B #00H, [R1]
00002018                         L1186:	; bb28
                                 ;    2417 	}
                                 ;    2418 
                                 ;    2419 	if (fs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2419
00002018 AA09                    		MOV.L 24H[R0], R1
0000201A 6101                    		CMP #00H, R1
0000201C 10                   S  		BEQ L1188
0000201D                         L1187:	; bb29
                                 ;    2420 		fs->fs_type = 0;				/* Clear new fs object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2420
0000201D AA09                    		MOV.L 24H[R0], R1
0000201F F81400                  		MOV.B #00H, [R1]
00002022                         L1188:	; bb36
                                 ;    2421 #if _FS_REENTRANT						/* Create sync object for the new volume */
                                 ;    2422 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
                                 ;    2423 #endif
                                 ;    2424 	}
                                 ;    2425 	FatFs[vol] = fs;					/* Register new fs object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2425
00002022 FBE2rrrrrrrr            		MOV.L #__$FatFs, R14
00002028 AA09                    		MOV.L 24H[R0], R1
0000202A A88A                    		MOV.L 0CH[R0], R2
0000202C FE22E1                  		MOV.L R1, [R2,R14]
0000202F                         L1189:	; bb36.split
                                 ;    2426 
                                 ;    2427 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2427
0000202F AA09                    		MOV.L 24H[R0], R1
00002031 6101                    		CMP #00H, R1
00002033 18                   S  		BNE L1191
00002034 08                   S  		BRA L1192
00002035                         L1190:	; bb41
00002035 3E0100                  		MOV.L #00000000H, 04H[R0]
00002038 2Err                 B  		BRA L1200
0000203A                         L1191:	; bb46
0000203A F80600                  		MOV.L #00000000H, [R0]
0000203D 08                   S  		BRA L1193
0000203E                         L1192:	; bb47
0000203E F80601                  		MOV.L #00000001H, [R0]
00002041                         L1193:	; bb48
00002041 EC01                    		MOV.L [R0], R1
00002043 6101                    		CMP #00H, R1
00002045 18                   S  		BNE L1195
00002046                         L1194:	; bb51
00002046 B789                    		MOVU.B 1FH[R0], R1
00002048 6111                    		CMP #01H, R1
0000204A 10                   S  		BEQ L1196
0000204B                         L1195:	; bb56
0000204B F80601                  		MOV.L #00000001H, [R0]
0000204E 08                   S  		BRA L1197
0000204F                         L1196:	; bb57
0000204F F80600                  		MOV.L #00000000H, [R0]
00002052                         L1197:	; bb58
00002052 EC01                    		MOV.L [R0], R1
00002054 6101                    		CMP #00H, R1
00002056 21rr                    		BNE L1190
00002058                         L1198:	; bb63
00002058 6603                    		MOV.L #00000000H, R3
0000205A 710220                  		ADD #20H, R0, R2
0000205D 710124                  		ADD #24H, R0, R1
                                 ;    2428 
                                 ;    2429 	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2429
00002060 39rrrr               W  		BSR __$find_volume
00002063 A101                    		MOV.L R1, 10H[R0]
00002065                         L1199:	; bb63.split
                                 ;    2430 	LEAVE_FF(fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2430
00002065 E5000401                		MOV.L 10H[R0], 04H[R0]
00002069                         L1200:	; bb67
00002069 A809                    		MOV.L 04H[R0], R1
0000206B A181                    		MOV.L R1, 18H[R0]
                                 ;    2431 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2431
0000206D 670A                    		RTSD #28H
0000206F                         _f_open:
                                 		.STACK	_f_open=96
                                 ;    2432 
                                 ;    2433 
                                 ;    2434 
                                 ;    2435 
                                 ;    2436 /*-----------------------------------------------------------------------*/
                                 ;    2437 /* Open or Create a File                                                 */
                                 ;    2438 /*-----------------------------------------------------------------------*/
                                 ;    2439 
                                 ;    2440 FRESULT f_open (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2440
0000206F 7EA6                    		PUSH.L R6
00002071 7100A8                  		ADD #0FFFFFFA8H, R0
00002074 A509                    		MOV.L R1, 54H[R0]
00002076 A502                    		MOV.L R2, 50H[R0]
00002078 C7034F                  		MOV.B R3, 4FH[R0]
                                 ;    2441 	FIL* fp,			/* Pointer to the blank file object */
                                 ;    2442 	const TCHAR* path,	/* Pointer to the file name */
                                 ;    2443 	BYTE mode			/* Access mode and file open mode flags */
                                 ;    2444 )
                                 ;    2445 {
                                 ;    2446 	FRESULT res;
                                 ;    2447 	DIR dj;
                                 ;    2448 	BYTE *dir;
                                 ;    2449 	DEF_NAMEBUF;
                                 ;    2450 
                                 ;    2451 
                                 ;    2452 	if (!fp) return FR_INVALID_OBJECT;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2452
0000207B AD09                    		MOV.L 54H[R0], R1
0000207D 6101                    		CMP #00H, R1
0000207F 18                   S  		BNE L1203
00002080 2Err                 B  		BRA L1204
00002082                         L1202:	; bb10
00002082 3E0109                  		MOV.L #00000009H, 04H[R0]
00002085 38rrrr               W  		BRA L1272
00002088                         L1203:	; bb15
00002088 F80600                  		MOV.L #00000000H, [R0]
0000208B 08                   S  		BRA L1205
0000208C                         L1204:	; bb16
0000208C F80601                  		MOV.L #00000001H, [R0]
0000208F                         L1205:	; bb17
0000208F EC01                    		MOV.L [R0], R1
00002091 6101                    		CMP #00H, R1
00002093 21rr                    		BNE L1202
00002095                         L1206:	; bb20
                                 ;    2453 	fp->fs = 0;			/* Clear file object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2453
00002095 AD09                    		MOV.L 54H[R0], R1
00002097 F81600                  		MOV.L #00000000H, [R1]
0000209A                         L1207:	; bb20.split
                                 ;    2454 
                                 ;    2455 	/* Get logical drive number */
                                 ;    2456 #if !_FS_READONLY
                                 ;    2457 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2457
0000209A 59014F                  		MOVU.B 4FH[R0], R1
0000209D 75211F                  		AND #1FH, R1
000020A0 C7014F                  		MOV.B R1, 4FH[R0]
000020A3                         L1208:	; bb20.split1
000020A3 7543FE                  		MOV.L #000000FEH, R3
                                 ;    2458 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2458
000020A6 51034F                  		AND 4FH[R0].UB, R3
000020A9 710250                  		ADD #50H, R0, R2
000020AC 71010C                  		ADD #0CH, R0, R1
000020AF 39rrrr               W  		BSR __$find_volume
000020B2 A081                    		MOV.L R1, 08H[R0]
000020B4                         L1209:	; bb20.split2
                                 ;    2459 #else
                                 ;    2460 	mode &= FA_READ;
                                 ;    2461 	res = find_volume(&dj.fs, &path, 0);
                                 ;    2462 #endif
                                 ;    2463 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2463
000020B4 A881                    		MOV.L 08H[R0], R1
000020B6 6101                    		CMP #00H, R1
000020B8 3Brrrr               W  		BNE L1271
000020BB                         L1210:	; bb34
000020BB 710134                  		ADD #34H, R0, R1
                                 ;    2464 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2464
000020BE A209                    		MOV.L R1, 24H[R0]
000020C0                         L1211:	; bb34.split
000020C0 FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
000020C6 A281                    		MOV.L R1, 28H[R0]
000020C8                         L1212:	; bb34.split3
                                 ;    2465 		res = follow_path(&dj, path);	/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2465
000020C8 AD02                    		MOV.L 50H[R0], R2
000020CA 71010C                  		ADD #0CH, R0, R1
000020CD 39rrrr               W  		BSR __$follow_path
000020D0 A081                    		MOV.L R1, 08H[R0]
000020D2                         L1213:	; bb34.split4
                                 ;    2466 		dir = dj.dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2466
000020D2 E500080C                		MOV.L 20H[R0], 30H[R0]
000020D6                         L1214:	; bb34.split5
                                 ;    2467 #if !_FS_READONLY	/* R/W configuration */
                                 ;    2468 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2468
000020D6 A881                    		MOV.L 08H[R0], R1
000020D8 6101                    		CMP #00H, R1
000020DA 21rr                    		BNE L1220
000020DC                         L1215:	; bb44
                                 ;    2469 			if (!dir)	/* Default directory itself */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2469
000020DC AB01                    		MOV.L 30H[R0], R1
000020DE 6101                    		CMP #00H, R1
000020E0 18                   S  		BNE L1217
000020E1 08                   S  		BRA L1218
000020E2                         L1216:	; bb45
                                 ;    2470 				res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2470
000020E2 3E0206                  		MOV.L #00000006H, 08H[R0]
000020E5 2Err                 B  		BRA L1220
000020E7                         L1217:	; bb49
000020E7 F80600                  		MOV.L #00000000H, [R0]
000020EA 08                   S  		BRA L1219
000020EB                         L1218:	; bb50
000020EB F80601                  		MOV.L #00000001H, [R0]
000020EE                         L1219:	; bb51
000020EE EC01                    		MOV.L [R0], R1
000020F0 6101                    		CMP #00H, R1
000020F2 21rr                    		BNE L1216
000020F4                         L1220:	; bb61
000020F4 754E1C                  		MOV.L #0000001CH, R14
                                 ;    2471 #if _FS_LOCK
                                 ;    2472 			else
                                 ;    2473 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
                                 ;    2474 #endif
                                 ;    2475 		}
                                 ;    2476 		/* Create or Open a file */
                                 ;    2477 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2477
000020F7 FC310E4F                		TST 4FH[R0].UB, R14
000020FB A881                    		MOV.L 08H[R0], R1
000020FD 3Arrrr               W  		BEQ L1248
00002100                         L1221:	; bb63
                                 ;    2478 			DWORD dw, cl;
                                 ;    2479 
                                 ;    2480 			if (res != FR_OK) {					/* No file, create new */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2480
00002100 6101                    		CMP #00H, R1
00002102 20rr                    		BEQ L1226
00002104                         L1222:	; bb65
                                 ;    2481 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2481
00002104 A881                    		MOV.L 08H[R0], R1
00002106 6141                    		CMP #04H, R1
00002108 18                   S  		BNE L1224
00002109                         L1223:	; bb66
00002109 71010C                  		ADD #0CH, R0, R1
                                 ;    2482 #if _FS_LOCK
                                 ;    2483 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
                                 ;    2484 #else
                                 ;    2485 					res = dir_register(&dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2485
0000210C 39rrrr               W  		BSR __$dir_register
0000210F A081                    		MOV.L R1, 08H[R0]
00002111                         L1224:	; bb72
                                 ;    2486 #endif
                                 ;    2487 				mode |= FA_CREATE_ALWAYS;		/* File is created */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2487
00002111 F1034F                  		BSET #03H, 4FH[R0].B
00002114                         L1225:	; bb72.split
                                 ;    2488 				dir = dj.dir;					/* New entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2488
00002114 E500080C                		MOV.L 20H[R0], 30H[R0]
00002118 2Err                 B  		BRA L1230
0000211A                         L1226:	; bb80
                                 ;    2489 			}
                                 ;    2490 			else {								/* Any object is already existing */
                                 ;    2491 				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2491
0000211A AB01                    		MOV.L 30H[R0], R1
0000211C 754E11                  		MOV.L #00000011H, R14
0000211F FC311E0B                		TST 0BH[R1].UB, R14
00002123 10                   S  		BEQ L1228
00002124                         L1227:	; bb81
                                 ;    2492 					res = FR_DENIED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2492
00002124 3E0207                  		MOV.L #00000007H, 08H[R0]
00002127 08                   S  		BRA L1230
00002128                         L1228:	; bb83
                                 ;    2493 				} else {
                                 ;    2494 					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2494
00002128 F5024F                  		BTST #02H, 4FH[R0].B
0000212B 10                   S  		BEQ L1230
0000212C                         L1229:	; bb84
                                 ;    2495 						res = FR_EXIST;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2495
0000212C 3E0208                  		MOV.L #00000008H, 08H[R0]
0000212F                         L1230:	; bb106
                                 ;    2496 				}
                                 ;    2497 			}
                                 ;    2498 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2498
0000212F A881                    		MOV.L 08H[R0], R1
00002131 6101                    		CMP #00H, R1
00002133 20rr                    		BEQ L1244
00002135 2Err                 B  		BRA L1246
00002137                         L1231:	; bb107
                                 ;    2499 				dw = GET_FATTIME();				/* Created time */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2499
00002137 F9021000006945          		MOV.L #45690000H, 40H[R0]
0000213E                         L1232:	; bb107.split
                                 ;    2500 				ST_DWORD(dir+DIR_CrtTime, dw);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2500
0000213E AB01                    		MOV.L 30H[R0], R1
00002140 62E1                    		ADD #0EH, R1
00002142 E10110                  		MOV.L 40H[R0], [R1]
00002145                         L1233:	; bb107.split6
                                 ;    2501 				dir[DIR_Attr] = 0;				/* Reset attribute */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2501
00002145 AB01                    		MOV.L 30H[R0], R1
00002147 3C1B00                  		MOV.B #00H, 0BH[R1]
0000214A                         L1234:	; bb107.split7
                                 ;    2502 				ST_DWORD(dir+DIR_FileSize, 0);	/* size = 0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2502
0000214A AB01                    		MOV.L 30H[R0], R1
0000214C 3E1700                  		MOV.L #00000000H, 1CH[R1]
0000214F                         L1235:	; bb107.split8
                                 ;    2503 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2503
0000214F AB02                    		MOV.L 30H[R0], R2
00002151 A889                    		MOV.L 0CH[R0], R1
00002153 39rrrr               W  		BSR __$ld_clust
00002156 A409                    		MOV.L R1, 44H[R0]
00002158                         L1236:	; bb107.split9
                                 ;    2504 				st_clust(dir, 0);				/* cluster = 0 */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2504
00002158 AB01                    		MOV.L 30H[R0], R1
0000215A 6602                    		MOV.L #00000000H, R2
0000215C 39rrrr               W  		BSR __$st_clust
0000215F                         L1237:	; bb107.split10
                                 ;    2505 				dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2505
0000215F A889                    		MOV.L 0CH[R0], R1
00002161 3C1401                  		MOV.B #01H, 04H[R1]
00002164                         L1238:	; bb107.split11
                                 ;    2506 				if (cl) {						/* Remove the cluster chain if exist */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2506
00002164 AC09                    		MOV.L 44H[R0], R1
00002166 6101                    		CMP #00H, R1
00002168 20rr                    		BEQ L1257
0000216A                         L1239:	; bb126
                                 ;    2507 					dw = dj.fs->winsect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2507
0000216A A889                    		MOV.L 0CH[R0], R1
0000216C E5100C10                		MOV.L 30H[R1], 40H[R0]
00002170                         L1240:	; bb126.split
                                 ;    2508 					res = remove_chain(dj.fs, cl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2508
00002170 AC0A                    		MOV.L 44H[R0], R2
00002172 A889                    		MOV.L 0CH[R0], R1
00002174 39rrrr               W  		BSR __$remove_chain
00002177 A081                    		MOV.L R1, 08H[R0]
00002179                         L1241:	; bb126.split12
                                 ;    2509 					if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2509
00002179 A881                    		MOV.L 08H[R0], R1
0000217B 6101                    		CMP #00H, R1
0000217D 21rr                    		BNE L1257
0000217F                         L1242:	; bb136
                                 ;    2510 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2510
0000217F AC09                    		MOV.L 44H[R0], R1
00002181 6011                    		SUB #01H, R1
00002183 A88A                    		MOV.L 0CH[R0], R2
00002185 A0A9                    		MOV.L R1, 0CH[R2]
00002187                         L1243:	; bb136.split
                                 ;    2511 						res = move_window(dj.fs, dw);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2511
00002187 AC02                    		MOV.L 40H[R0], R2
00002189 A889                    		MOV.L 0CH[R0], R1
0000218B 39rrrr               W  		BSR __$move_window
0000218E A081                    		MOV.L R1, 08H[R0]
00002190 2Err                 B  		BRA L1257
00002192                         L1244:	; bb159
00002192 F5034F                  		BTST #03H, 4FH[R0].B
00002195 10                   S  		BEQ L1246
00002196                         L1245:	; bb165
00002196 F80601                  		MOV.L #00000001H, [R0]
00002199 08                   S  		BRA L1247
0000219A                         L1246:	; bb166
0000219A F80600                  		MOV.L #00000000H, [R0]
0000219D                         L1247:	; bb167
0000219D EC01                    		MOV.L [R0], R1
0000219F 6101                    		CMP #00H, R1
000021A1 21rr                    		BNE L1231
000021A3 2Err                 B  		BRA L1257
000021A5                         L1248:	; bb174
                                 ;    2512 					}
                                 ;    2513 				}
                                 ;    2514 			}
                                 ;    2515 		}
                                 ;    2516 		else {	/* Open an existing file */
                                 ;    2517 			if (res == FR_OK) {					/* Follow succeeded */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2517
000021A5 6101                    		CMP #00H, R1
000021A7 21rr                    		BNE L1257
000021A9                         L1249:	; bb176
                                 ;    2518 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2518
000021A9 AB01                    		MOV.L 30H[R0], R1
000021AB F5140B                  		BTST #04H, 0BH[R1].B
000021AE 10                   S  		BEQ L1251
000021AF                         L1250:	; bb177
                                 ;    2519 					res = FR_NO_FILE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2519
000021AF 3E0204                  		MOV.L #00000004H, 08H[R0]
000021B2 2Err                 B  		BRA L1257
000021B4                         L1251:	; bb179
                                 ;    2520 				} else {
                                 ;    2521 					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2521
000021B4 F5014F                  		BTST #01H, 4FH[R0].B
000021B7 18                   S  		BNE L1253
000021B8 2Err                 B  		BRA L1255
000021BA                         L1252:	; bb180
                                 ;    2522 						res = FR_DENIED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2522
000021BA 3E0207                  		MOV.L #00000007H, 08H[R0]
000021BD 2Err                 B  		BRA L1257
000021BF                         L1253:	; bb186
000021BF AB01                    		MOV.L 30H[R0], R1
000021C1 F5100B                  		BTST #00H, 0BH[R1].B
000021C4 10                   S  		BEQ L1255
000021C5                         L1254:	; bb194
000021C5 F80601                  		MOV.L #00000001H, [R0]
000021C8 08                   S  		BRA L1256
000021C9                         L1255:	; bb195
000021C9 F80600                  		MOV.L #00000000H, [R0]
000021CC                         L1256:	; bb196
000021CC EC01                    		MOV.L [R0], R1
000021CE 6101                    		CMP #00H, R1
000021D0 21rr                    		BNE L1252
000021D2                         L1257:	; bb223
                                 ;    2523 				}
                                 ;    2524 			}
                                 ;    2525 		}
                                 ;    2526 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2526
000021D2 A881                    		MOV.L 08H[R0], R1
000021D4 6101                    		CMP #00H, R1
000021D6 21rr                    		BNE L1262
000021D8                         L1258:	; bb225
                                 ;    2527 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2527
000021D8 F5034F                  		BTST #03H, 4FH[R0].B
000021DB 10                   S  		BEQ L1260
000021DC                         L1259:	; bb226
                                 ;    2528 				mode |= FA__WRITTEN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2528
000021DC F1054F                  		BSET #05H, 4FH[R0].B
000021DF                         L1260:	; bb237
                                 ;    2529 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2529
000021DF A889                    		MOV.L 0CH[R0], R1
000021E1 AD0A                    		MOV.L 54H[R0], R2
000021E3 E5120C07                		MOV.L 30H[R1], 1CH[R2]
000021E7                         L1261:	; bb237.split
                                 ;    2530 			fp->dir_ptr = dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2530
000021E7 AB01                    		MOV.L 30H[R0], R1
000021E9 AD0A                    		MOV.L 54H[R0], R2
000021EB A221                    		MOV.L R1, 20H[R2]
000021ED                         L1262:	; bb252
                                 ;    2531 #if _FS_LOCK
                                 ;    2532 			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
                                 ;    2533 			if (!fp->lockid) res = FR_INT_ERR;
                                 ;    2534 #endif
                                 ;    2535 		}
                                 ;    2536 
                                 ;    2537 #else				/* R/O configuration */
                                 ;    2538 		if (res == FR_OK) {					/* Follow succeeded */
                                 ;    2539 			dir = dj.dir;
                                 ;    2540 			if (!dir) {						/* Current directory itself */
                                 ;    2541 				res = FR_INVALID_NAME;
                                 ;    2542 			} else {
                                 ;    2543 				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
                                 ;    2544 					res = FR_NO_FILE;
                                 ;    2545 			}
                                 ;    2546 		}
                                 ;    2547 #endif
                                 ;    2548 		FREE_BUF();
                                 ;    2549 
                                 ;    2550 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2550
000021ED A881                    		MOV.L 08H[R0], R1
000021EF 6101                    		CMP #00H, R1
000021F1 21rr                    		BNE L1271
000021F3                         L1263:	; bb253
                                 ;    2551 			fp->flag = mode;					/* File access mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2551
000021F3 59014F                  		MOVU.B 4FH[R0], R1
000021F6 AD0A                    		MOV.L 54H[R0], R2
000021F8 81A1                    		MOV.B R1, 06H[R2]
000021FA                         L1264:	; bb253.split
                                 ;    2552 			fp->err = 0;						/* Clear error flag */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2552
000021FA AD09                    		MOV.L 54H[R0], R1
000021FC 3C1700                  		MOV.B #00H, 07H[R1]
000021FF                         L1265:	; bb253.split13
                                 ;    2553 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2553
000021FF AB02                    		MOV.L 30H[R0], R2
00002201 A889                    		MOV.L 0CH[R0], R1
00002203 AD0E                    		MOV.L 54H[R0], R6
00002205 39rrrr               W  		BSR __$ld_clust
00002208 A161                    		MOV.L R1, 10H[R6]
0000220A                         L1266:	; bb253.split14
                                 ;    2554 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2554
0000220A AB01                    		MOV.L 30H[R0], R1
0000220C AD0A                    		MOV.L 54H[R0], R2
0000220E E5120703                		MOV.L 1CH[R1], 0CH[R2]
00002212                         L1267:	; bb253.split15
                                 ;    2555 			fp->fptr = 0;						/* File pointer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2555
00002212 AD09                    		MOV.L 54H[R0], R1
00002214 3E1200                  		MOV.L #00000000H, 08H[R1]
00002217                         L1268:	; bb253.split16
                                 ;    2556 			fp->dsect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2556
00002217 AD09                    		MOV.L 54H[R0], R1
00002219 3E1600                  		MOV.L #00000000H, 18H[R1]
0000221C                         L1269:	; bb253.split17
                                 ;    2557 #if _USE_FASTSEEK
                                 ;    2558 			fp->cltbl = 0;						/* Normal seek mode */
                                 ;    2559 #endif
                                 ;    2560 			fp->fs = dj.fs;	 					/* Validate file object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2560
0000221C A889                    		MOV.L 0CH[R0], R1
0000221E AD0A                    		MOV.L 54H[R0], R2
00002220 E321                    		MOV.L R1, [R2]
00002222                         L1270:	; bb253.split18
                                 ;    2561 			fp->id = fp->fs->id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2561
00002222 AD09                    		MOV.L 54H[R0], R1
00002224 EC1E                    		MOV.L [R1], R14
00002226 D5E10302                		MOV.W 06H[R14], 04H[R1]
0000222A                         L1271:	; bb295
                                 ;    2562 		}
                                 ;    2563 	}
                                 ;    2564 
                                 ;    2565 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2565
0000222A E5000201                		MOV.L 08H[R0], 04H[R0]
0000222E                         L1272:	; bb298
0000222E A809                    		MOV.L 04H[R0], R1
00002230 A481                    		MOV.L R1, 48H[R0]
                                 ;    2566 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2566
00002232 3F6617                  		RTSD #5CH, R6-R6
00002235                         _f_read:
                                 		.STACK	_f_read=64
                                 ;    2567 
                                 ;    2568 
                                 ;    2569 
                                 ;    2570 
                                 ;    2571 /*-----------------------------------------------------------------------*/
                                 ;    2572 /* Read File                                                             */
                                 ;    2573 /*-----------------------------------------------------------------------*/
                                 ;    2574 
                                 ;    2575 FRESULT f_read (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2575
00002235 7100C4                  		ADD #0FFFFFFC4H, R0
00002238 A381                    		MOV.L R1, 38H[R0]
0000223A A30A                    		MOV.L R2, 34H[R0]
0000223C A303                    		MOV.L R3, 30H[R0]
0000223E A28C                    		MOV.L R4, 2CH[R0]
                                 ;    2576 	FIL* fp, 		/* Pointer to the file object */
                                 ;    2577 	void* buff,		/* Pointer to data buffer */
                                 ;    2578 	UINT btr,		/* Number of bytes to read */
                                 ;    2579 	UINT* br		/* Pointer to number of bytes read */
                                 ;    2580 )
                                 ;    2581 {
                                 ;    2582 	FRESULT res;
                                 ;    2583 	DWORD clst, sect, remain;
                                 ;    2584 	UINT rcnt, cc;
                                 ;    2585 	BYTE csect, *rbuff = (BYTE*)buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2585
00002240 E5000D09                		MOV.L 34H[R0], 24H[R0]
00002244                         L1274:	; entry.split
                                 ;    2586 
                                 ;    2587 
                                 ;    2588 	*br = 0;	/* Clear read byte counter */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2588
00002244 AA89                    		MOV.L 2CH[R0], R1
00002246 F81600                  		MOV.L #00000000H, [R1]
00002249                         L1275:	; entry.split1
                                 ;    2589 
                                 ;    2590 	res = validate(fp);							/* Check validity */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2590
00002249 AB81                    		MOV.L 38H[R0], R1
0000224B 39rrrr               W  		BSR __$validate
0000224E A081                    		MOV.L R1, 08H[R0]
00002250                         L1276:	; entry.split2
                                 ;    2591 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2591
00002250 A881                    		MOV.L 08H[R0], R1
00002252 6101                    		CMP #00H, R1
00002254 10                   S  		BEQ L1278
00002255                         L1277:	; bb18
00002255 E5000201                		MOV.L 08H[R0], 04H[R0]
00002259 38rrrr               W  		BRA L1340
0000225C                         L1278:	; bb25
                                 ;    2592 	if (fp->err)								/* Check error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2592
0000225C AB81                    		MOV.L 38H[R0], R1
0000225E B19A                    		MOVU.B 07H[R1], R2
00002260 6102                    		CMP #00H, R2
00002262 10                   S  		BEQ L1280
00002263                         L1279:	; bb26
                                 ;    2593 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2593
00002263 B199                    		MOVU.B 07H[R1], R1
00002265 A009                    		MOV.L R1, 04H[R0]
00002267 38rrrr               W  		BRA L1340
0000226A                         L1280:	; bb40
                                 ;    2594 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2594
0000226A F51006                  		BTST #00H, 06H[R1].B
0000226D 18                   S  		BNE L1282
0000226E 2Err                 B  		BRA L1283
00002270                         L1281:	; bb41
                                 ;    2595 		LEAVE_FF(fp->fs, FR_DENIED);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2595
00002270 3E0107                  		MOV.L #00000007H, 04H[R0]
00002273 38rrrr               W  		BRA L1340
00002276                         L1282:	; bb50
00002276 F80600                  		MOV.L #00000000H, [R0]
00002279 08                   S  		BRA L1284
0000227A                         L1283:	; bb51
0000227A F80601                  		MOV.L #00000001H, [R0]
0000227D                         L1284:	; bb52
0000227D EC01                    		MOV.L [R0], R1
0000227F 6101                    		CMP #00H, R1
00002281 21rr                    		BNE L1281
00002283                         L1285:	; bb56
                                 ;    2596 	remain = fp->fsize - fp->fptr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2596
00002283 AB81                    		MOV.L 38H[R0], R1
00002285 A89A                    		MOV.L 0CH[R1], R2
00002287 06811202                		SUB 08H[R1].L, R2
0000228B A10A                    		MOV.L R2, 14H[R0]
0000228D                         L1286:	; bb56.split
                                 ;    2597 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2597
0000228D AB01                    		MOV.L 30H[R0], R1
0000228F 06850105                		CMP 14H[R0].L, R1
00002293 24rr                  * 		BLEU L1338
         38rrrr                  
00002298                         L1287:	; bb65
00002298 E500050C                		MOV.L 14H[R0], 30H[R0]
0000229C 38rrrr               W  		BRA L1338
0000229F                         L1288:	; bb74
                                 ;    2598 
                                 ;    2599 	for ( ;  btr;								/* Repeat until all data read */
                                 ;    2600 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
                                 ;    2601 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2601
0000229F AB81                    		MOV.L 38H[R0], R1
000022A1 FBEAFF01                		MOV.L #000001FFH, R14
000022A5 06A10C1E02              		TST 08H[R1].L, R14
000022AA 3Brrrr               W  		BNE L1333
000022AD                         L1289:	; bb75
                                 ;    2602 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2602
000022AD AB81                    		MOV.L 38H[R0], R1
000022AF A892                    		MOV.L 08H[R1], R2
000022B1 6892                    		SHLR #09H, R2
000022B3 EC11                    		MOV.L [R1], R1
000022B5 B091                    		MOVU.B 02H[R1], R1
000022B7 6011                    		SUB #01H, R1
000022B9 5312                    		AND R1, R2
000022BB C70223                  		MOV.B R2, 23H[R0]
000022BE                         L1290:	; bb75.split
                                 ;    2603 			if (!csect) {						/* On the cluster boundary? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2603
000022BE 590123                  		MOVU.B 23H[R0], R1
000022C1 6101                    		CMP #00H, R1
000022C3 21rr                    		BNE L1299
000022C5 2Err                 B  		BRA L1300
000022C7                         L1291:	; bb91
                                 ;    2604 				if (fp->fptr == 0) {			/* On the top of the file? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2604
000022C7 AB81                    		MOV.L 38H[R0], R1
000022C9 A892                    		MOV.L 08H[R1], R2
000022CB 6102                    		CMP #00H, R2
000022CD 18                   S  		BNE L1293
000022CE                         L1292:	; bb92
                                 ;    2605 					clst = fp->sclust;			/* Follow from the origin */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2605
000022CE E5100403                		MOV.L 10H[R1], 0CH[R0]
000022D2 2Err                 B  		BRA L1294
000022D4                         L1293:	; bb96
                                 ;    2606 				} else {						/* Middle or end of the file */
                                 ;    2607 #if _USE_FASTSEEK
                                 ;    2608 					if (fp->cltbl)
                                 ;    2609 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
                                 ;    2610 					else
                                 ;    2611 #endif
                                 ;    2612 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2612
000022D4 AB82                    		MOV.L 38H[R0], R2
000022D6 A92A                    		MOV.L 14H[R2], R2
000022D8 EC11                    		MOV.L [R1], R1
000022DA 39rrrr               W  		BSR _get_fat
000022DD A089                    		MOV.L R1, 0CH[R0]
000022DF                         L1294:	; bb111
                                 ;    2613 				}
                                 ;    2614 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2614
000022DF A889                    		MOV.L 0CH[R0], R1
000022E1 6111                    		CMP #01H, R1
000022E3 24rr                    		BGTU L1296
000022E5                         L1295:	; bb112
000022E5 AB81                    		MOV.L 38H[R0], R1
000022E7 3C1702                  		MOV.B #02H, 07H[R1]
000022EA 3E0102                  		MOV.L #00000002H, 04H[R0]
000022ED 38rrrr               W  		BRA L1340
000022F0                         L1296:	; bb121
                                 ;    2615 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2615
000022F0 A889                    		MOV.L 0CH[R0], R1
000022F2 7501FF                  		CMP #0FFFFFFFFH, R1
000022F5 AB81                    		MOV.L 38H[R0], R1
000022F7 18                   S  		BNE L1298
000022F8                         L1297:	; bb122
000022F8 3C1701                  		MOV.B #01H, 07H[R1]
000022FB 3E0101                  		MOV.L #00000001H, 04H[R0]
000022FE 38rrrr               W  		BRA L1340
00002301                         L1298:	; bb130
                                 ;    2616 				fp->clust = clst;				/* Update current cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2616
00002301 E5010305                		MOV.L 0CH[R0], 14H[R1]
00002305 2Err                 B  		BRA L1302
00002307                         L1299:	; bb138
00002307 F80600                  		MOV.L #00000000H, [R0]
0000230A 08                   S  		BRA L1301
0000230B                         L1300:	; bb139
0000230B F80601                  		MOV.L #00000001H, [R0]
0000230E                         L1301:	; bb140
0000230E EC01                    		MOV.L [R0], R1
00002310 6101                    		CMP #00H, R1
00002312 21rr                    		BNE L1291
00002314                         L1302:	; bb144
                                 ;    2617 			}
                                 ;    2618 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2618
00002314 AB81                    		MOV.L 38H[R0], R1
00002316 A91A                    		MOV.L 14H[R1], R2
00002318 EC11                    		MOV.L [R1], R1
0000231A 39rrrr               W  		BSR _clust2sect
0000231D A101                    		MOV.L R1, 10H[R0]
0000231F                         L1303:	; bb144.split
                                 ;    2619 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2619
0000231F A901                    		MOV.L 10H[R0], R1
00002321 6101                    		CMP #00H, R1
00002323 21rr                    		BNE L1305
00002325 2Err                 B  		BRA L1306
00002327                         L1304:	; bb153
00002327 AB81                    		MOV.L 38H[R0], R1
00002329 3C1702                  		MOV.B #02H, 07H[R1]
0000232C 3E0102                  		MOV.L #00000002H, 04H[R0]
0000232F 38rrrr               W  		BRA L1340
00002332                         L1305:	; bb160
00002332 F80600                  		MOV.L #00000000H, [R0]
00002335 08                   S  		BRA L1307
00002336                         L1306:	; bb161
00002336 F80601                  		MOV.L #00000001H, [R0]
00002339                         L1307:	; bb162
00002339 EC01                    		MOV.L [R0], R1
0000233B 6101                    		CMP #00H, R1
0000233D 21rr                    		BNE L1304
0000233F                         L1308:	; bb166
                                 ;    2620 			sect += csect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2620
0000233F A901                    		MOV.L 10H[R0], R1
00002341 490123                  		ADD 23H[R0].UB, R1
00002344 A101                    		MOV.L R1, 10H[R0]
00002346                         L1309:	; bb166.split
                                 ;    2621 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2621
00002346 AB01                    		MOV.L 30H[R0], R1
00002348 6891                    		SHLR #09H, R1
0000234A A189                    		MOV.L R1, 1CH[R0]
0000234C                         L1310:	; bb166.split3
                                 ;    2622 			if (cc) {							/* Read maximum contiguous sectors directly */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2622
0000234C A989                    		MOV.L 1CH[R0], R1
0000234E 6101                    		CMP #00H, R1
00002350 3Arrrr               W  		BEQ L1323
00002353                         L1311:	; bb175
                                 ;    2623 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2623
00002353 590123                  		MOVU.B 23H[R0], R1
00002356 06890107                		ADD 1CH[R0].L, R1
0000235A AB82                    		MOV.L 38H[R0], R2
0000235C EC2E                    		MOV.L [R2], R14
0000235E 45E102                  		CMP 02H[R14].UB, R1
00002361 25rr                    		BLEU L1313
00002363                         L1312:	; bb176
                                 ;    2624 					cc = fp->fs->csize - csect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2624
00002363 AB81                    		MOV.L 38H[R0], R1
00002365 EC11                    		MOV.L [R1], R1
00002367 B091                    		MOVU.B 02H[R1], R1
00002369 410123                  		SUB 23H[R0].UB, R1
0000236C A189                    		MOV.L R1, 1CH[R0]
0000236E                         L1313:	; bb200
                                 ;    2625 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2625
0000236E AB81                    		MOV.L 38H[R0], R1
00002370 EC11                    		MOV.L [R1], R1
00002372 B019                    		MOVU.B 01H[R1], R1
00002374 A98C                    		MOV.L 1CH[R0], R4
00002376 A903                    		MOV.L 10H[R0], R3
00002378 AA0A                    		MOV.L 24H[R0], R2
0000237A 05rrrrrr             A  		BSR _disk_read
0000237E 6101                    		CMP #00H, R1
00002380 AB81                    		MOV.L 38H[R0], R1
00002382 10                   S  		BEQ L1316
00002383                         L1314:	; bb201
                                 ;    2626 					ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2626
00002383 3C1701                  		MOV.B #01H, 07H[R1]
00002386                         L1315:	; bb201.split
00002386 3E0101                  		MOV.L #00000001H, 04H[R0]
00002389 38rrrr               W  		BRA L1340
0000238C                         L1316:	; bb218
                                 ;    2627 #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it contains a dirty sector */
                                 ;    2628 #if _FS_TINY
                                 ;    2629 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
                                 ;    2630 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win, SS(fp->fs));
                                 ;    2631 #else
                                 ;    2632 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2632
0000238C F51606                  		BTST #06H, 06H[R1].B
0000238F 21rr                    		BNE L1318
00002391 2Err                 B  		BRA L1320
00002393                         L1317:	; bb219
                                 ;    2633 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2633
00002393 AB82                    		MOV.L 38H[R0], R2
00002395 A9A1                    		MOV.L 18H[R2], R1
00002397 06810104                		SUB 10H[R0].L, R1
0000239B 6C91                    		SHLL #09H, R1
0000239D 06890109                		ADD 24H[R0].L, R1
000023A1 712224                  		ADD #24H, R2
000023A4 FB3A0002                		MOV.L #00000200H, R3
000023A8 39rrrr               W  		BSR __$mem_cpy
000023AB 2Err                 B  		BRA L1322
000023AD                         L1318:	; bb238
000023AD AB81                    		MOV.L 38H[R0], R1
000023AF A991                    		MOV.L 18H[R1], R1
000023B1 06810104                		SUB 10H[R0].L, R1
000023B5 06850107                		CMP 1CH[R0].L, R1
000023B9 22rr                    		BGEU L1320
000023BB                         L1319:	; bb247
000023BB F80601                  		MOV.L #00000001H, [R0]
000023BE 08                   S  		BRA L1321
000023BF                         L1320:	; bb248
000023BF F80600                  		MOV.L #00000000H, [R0]
000023C2                         L1321:	; bb249
000023C2 EC01                    		MOV.L [R0], R1
000023C4 6101                    		CMP #00H, R1
000023C6 21rr                    		BNE L1317
000023C8                         L1322:	; bb254
                                 ;    2634 #endif
                                 ;    2635 #endif
                                 ;    2636 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2636
000023C8 A989                    		MOV.L 1CH[R0], R1
000023CA 6C91                    		SHLL #09H, R1
000023CC A181                    		MOV.L R1, 18H[R0]
000023CE 38rrrr               W  		BRA L1337
000023D1                         L1323:	; bb263
                                 ;    2637 				continue;
                                 ;    2638 			}
                                 ;    2639 #if !_FS_TINY
                                 ;    2640 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2640
000023D1 AB81                    		MOV.L 38H[R0], R1
000023D3 A991                    		MOV.L 18H[R1], R1
000023D5 06850104                		CMP 10H[R0].L, R1
000023D9 20rr                    		BEQ L1332
000023DB                         L1324:	; bb265
                                 ;    2641 #if !_FS_READONLY
                                 ;    2642 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2642
000023DB AB81                    		MOV.L 38H[R0], R1
000023DD F51606                  		BTST #06H, 06H[R1].B
000023E0 20rr                    		BEQ L1329
000023E2                         L1325:	; bb267
                                 ;    2643 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2643
000023E2 AB82                    		MOV.L 38H[R0], R2
000023E4 A9A3                    		MOV.L 18H[R2], R3
000023E6 EC21                    		MOV.L [R2], R1
000023E8 B019                    		MOVU.B 01H[R1], R1
000023EA 712224                  		ADD #24H, R2
000023ED 6614                    		MOV.L #00000001H, R4
000023EF 05rrrrrr             A  		BSR _disk_write
000023F3 6101                    		CMP #00H, R1
000023F5 AB81                    		MOV.L 38H[R0], R1
000023F7 10                   S  		BEQ L1328
000023F8                         L1326:	; bb268
                                 ;    2644 						ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2644
000023F8 3C1701                  		MOV.B #01H, 07H[R1]
000023FB                         L1327:	; bb268.split
000023FB 3E0101                  		MOV.L #00000001H, 04H[R0]
000023FE 38rrrr               W  		BRA L1340
00002401                         L1328:	; bb287
                                 ;    2645 					fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2645
00002401 F11E06                  		BCLR #06H, 06H[R1].B
00002404                         L1329:	; bb303
                                 ;    2646 				}
                                 ;    2647 #endif
                                 ;    2648 				if (disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)	/* Fill sector cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2648
00002404 AB82                    		MOV.L 38H[R0], R2
00002406 EC21                    		MOV.L [R2], R1
00002408 B019                    		MOVU.B 01H[R1], R1
0000240A A903                    		MOV.L 10H[R0], R3
0000240C 712224                  		ADD #24H, R2
0000240F 6614                    		MOV.L #00000001H, R4
00002411 05rrrrrr             A  		BSR _disk_read
00002415 6101                    		CMP #00H, R1
00002417 20rr                    		BEQ L1332
00002419                         L1330:	; bb304
                                 ;    2649 					ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2649
00002419 AB81                    		MOV.L 38H[R0], R1
0000241B 3C1701                  		MOV.B #01H, 07H[R1]
0000241E                         L1331:	; bb304.split
0000241E 3E0101                  		MOV.L #00000001H, 04H[R0]
00002421 2Err                 B  		BRA L1340
00002423                         L1332:	; bb329
                                 ;    2650 			}
                                 ;    2651 #endif
                                 ;    2652 			fp->dsect = sect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2652
00002423 A901                    		MOV.L 10H[R0], R1
00002425 AB82                    		MOV.L 38H[R0], R2
00002427 A1A1                    		MOV.L R1, 18H[R2]
00002429                         L1333:	; bb340
                                 ;    2653 		}
                                 ;    2654 		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2654
00002429 AB81                    		MOV.L 38H[R0], R1
0000242B A891                    		MOV.L 08H[R1], R1
0000242D 7621FF01                		AND #01FFH, R1
00002431 FB2A0002                		MOV.L #00000200H, R2
00002435 4312                    		SUB R1, R2
00002437 A182                    		MOV.L R2, 18H[R0]
00002439                         L1334:	; bb340.split
                                 ;    2655 		if (rcnt > btr) rcnt = btr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2655
00002439 A981                    		MOV.L 18H[R0], R1
0000243B 0685010C                		CMP 30H[R0].L, R1
0000243F 25rr                    		BLEU L1336
00002441                         L1335:	; bb347
00002441 E5000C06                		MOV.L 30H[R0], 18H[R0]
00002445                         L1336:	; bb354
                                 ;    2656 #if _FS_TINY
                                 ;    2657 		if (move_window(fp->fs, fp->dsect) != FR_OK)		/* Move sector window */
                                 ;    2658 			ABORT(fp->fs, FR_DISK_ERR);
                                 ;    2659 		mem_cpy(rbuff, &fp->fs->win[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
                                 ;    2660 #else
                                 ;    2661 		mem_cpy(rbuff, &fp->buf[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2661
00002445 AB82                    		MOV.L 38H[R0], R2
00002447 A8A4                    		MOV.L 08H[R2], R4
00002449 A983                    		MOV.L 18H[R0], R3
0000244B AA09                    		MOV.L 24H[R0], R1
0000244D 7624FF01                		AND #01FFH, R4
00002451 4B42                    		ADD R4, R2
00002453 712224                  		ADD #24H, R2
00002456 39rrrr               W  		BSR __$mem_cpy
00002459                         L1337:	; bb365
00002459 AA09                    		MOV.L 24H[R0], R1
0000245B 06890106                		ADD 18H[R0].L, R1
0000245F A209                    		MOV.L R1, 24H[R0]
00002461 AB81                    		MOV.L 38H[R0], R1
00002463 A892                    		MOV.L 08H[R1], R2
00002465 06890206                		ADD 18H[R0].L, R2
00002469 A092                    		MOV.L R2, 08H[R1]
0000246B AA89                    		MOV.L 2CH[R0], R1
0000246D EC1E                    		MOV.L [R1], R14
0000246F 06890E06                		ADD 18H[R0].L, R14
00002473 E31E                    		MOV.L R14, [R1]
00002475 AB01                    		MOV.L 30H[R0], R1
00002477 06810106                		SUB 18H[R0].L, R1
0000247B A301                    		MOV.L R1, 30H[R0]
0000247D                         L1338:	; bb385
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2599
0000247D AB01                    		MOV.L 30H[R0], R1
0000247F 6101                    		CMP #00H, R1
00002481 3Brrrr               W  		BNE L1288
00002484                         L1339:	; bb390
                                 ;    2662 #endif
                                 ;    2663 	}
                                 ;    2664 
                                 ;    2665 	LEAVE_FF(fp->fs, FR_OK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2665
00002484 3E0100                  		MOV.L #00000000H, 04H[R0]
00002487                         L1340:	; bb392
00002487 A809                    		MOV.L 04H[R0], R1
00002489 A281                    		MOV.L R1, 28H[R0]
                                 ;    2666 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2666
0000248B 670F                    		RTSD #3CH
0000248D                         _f_write:
                                 		.STACK	_f_write=60
                                 ;    2667 
                                 ;    2668 
                                 ;    2669 
                                 ;    2670 
                                 ;    2671 #if !_FS_READONLY
                                 ;    2672 /*-----------------------------------------------------------------------*/
                                 ;    2673 /* Write File                                                            */
                                 ;    2674 /*-----------------------------------------------------------------------*/
                                 ;    2675 
                                 ;    2676 FRESULT f_write (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2676
0000248D 7100C8                  		ADD #0FFFFFFC8H, R0
00002490 A309                    		MOV.L R1, 34H[R0]
00002492 A302                    		MOV.L R2, 30H[R0]
00002494 A28B                    		MOV.L R3, 2CH[R0]
00002496 A284                    		MOV.L R4, 28H[R0]
                                 ;    2677 	FIL* fp,			/* Pointer to the file object */
                                 ;    2678 	const void *buff,	/* Pointer to the data to be written */
                                 ;    2679 	UINT btw,			/* Number of bytes to write */
                                 ;    2680 	UINT* bw			/* Pointer to number of bytes written */
                                 ;    2681 )
                                 ;    2682 {
                                 ;    2683 	FRESULT res;
                                 ;    2684 	DWORD clst, sect;
                                 ;    2685 	UINT wcnt, cc;
                                 ;    2686 	const BYTE *wbuff = (const BYTE*)buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2686
00002498 E5000C07                		MOV.L 30H[R0], 1CH[R0]
0000249C                         L1342:	; entry.split
                                 ;    2687 	BYTE csect;
                                 ;    2688 
                                 ;    2689 
                                 ;    2690 	*bw = 0;	/* Clear write byte counter */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2690
0000249C AA81                    		MOV.L 28H[R0], R1
0000249E F81600                  		MOV.L #00000000H, [R1]
000024A1                         L1343:	; entry.split1
                                 ;    2691 
                                 ;    2692 	res = validate(fp);						/* Check validity */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2692
000024A1 AB09                    		MOV.L 34H[R0], R1
000024A3 39rrrr               W  		BSR __$validate
000024A6 A081                    		MOV.L R1, 08H[R0]
000024A8                         L1344:	; entry.split2
                                 ;    2693 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2693
000024A8 A881                    		MOV.L 08H[R0], R1
000024AA 6101                    		CMP #00H, R1
000024AC 10                   S  		BEQ L1346
000024AD                         L1345:	; bb17
000024AD E5000201                		MOV.L 08H[R0], 04H[R0]
000024B1 38rrrr               W  		BRA L1417
000024B4                         L1346:	; bb24
                                 ;    2694 	if (fp->err)							/* Check error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2694
000024B4 AB09                    		MOV.L 34H[R0], R1
000024B6 B19A                    		MOVU.B 07H[R1], R2
000024B8 6102                    		CMP #00H, R2
000024BA 10                   S  		BEQ L1348
000024BB                         L1347:	; bb25
                                 ;    2695 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2695
000024BB B199                    		MOVU.B 07H[R1], R1
000024BD A009                    		MOV.L R1, 04H[R0]
000024BF 38rrrr               W  		BRA L1417
000024C2                         L1348:	; bb39
                                 ;    2696 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2696
000024C2 F51106                  		BTST #01H, 06H[R1].B
000024C5 18                   S  		BNE L1350
000024C6 2Err                 B  		BRA L1351
000024C8                         L1349:	; bb40
                                 ;    2697 		LEAVE_FF(fp->fs, FR_DENIED);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2697
000024C8 3E0107                  		MOV.L #00000007H, 04H[R0]
000024CB 38rrrr               W  		BRA L1417
000024CE                         L1350:	; bb49
000024CE F80600                  		MOV.L #00000000H, [R0]
000024D1 08                   S  		BRA L1352
000024D2                         L1351:	; bb50
000024D2 F80601                  		MOV.L #00000001H, [R0]
000024D5                         L1352:	; bb51
000024D5 EC01                    		MOV.L [R0], R1
000024D7 6101                    		CMP #00H, R1
000024D9 21rr                    		BNE L1349
000024DB                         L1353:	; bb56
                                 ;    2698 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2698
000024DB AB09                    		MOV.L 34H[R0], R1
000024DD A891                    		MOV.L 08H[R1], R1
000024DF EF1E                    		MOV.L R1, R14
000024E1 06890E0B                		ADD 2CH[R0].L, R14
000024E5 471E                    		CMP R1, R14
000024E7 23rr                  * 		BGEU L1412
         38rrrr                  
000024EC                         L1354:	; bb57
000024EC 3E0B00                  		MOV.L #00000000H, 2CH[R0]
000024EF 38rrrr               W  		BRA L1412
000024F2                         L1355:	; bb71
                                 ;    2699 
                                 ;    2700 	for ( ;  btw;							/* Repeat until all data written */
                                 ;    2701 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
                                 ;    2702 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2702
000024F2 AB09                    		MOV.L 34H[R0], R1
000024F4 FBEAFF01                		MOV.L #000001FFH, R14
000024F8 06A10C1E02              		TST 08H[R1].L, R14
000024FD 3Brrrr               W  		BNE L1406
00002500                         L1356:	; bb72
                                 ;    2703 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2703
00002500 AB09                    		MOV.L 34H[R0], R1
00002502 A892                    		MOV.L 08H[R1], R2
00002504 6892                    		SHLR #09H, R2
00002506 EC11                    		MOV.L [R1], R1
00002508 B091                    		MOVU.B 02H[R1], R1
0000250A 6011                    		SUB #01H, R1
0000250C 5312                    		AND R1, R2
0000250E C70223                  		MOV.B R2, 23H[R0]
00002511                         L1357:	; bb72.split
                                 ;    2704 			if (!csect) {					/* On the cluster boundary? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2704
00002511 590123                  		MOVU.B 23H[R0], R1
00002514 6101                    		CMP #00H, R1
00002516 21rr                    		BNE L1371
00002518 2Err                 B  		BRA L1372
0000251A                         L1358:	; bb88
                                 ;    2705 				if (fp->fptr == 0) {		/* On the top of the file? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2705
0000251A AB09                    		MOV.L 34H[R0], R1
0000251C A892                    		MOV.L 08H[R1], R2
0000251E 6102                    		CMP #00H, R2
00002520 21rr                    		BNE L1362
00002522                         L1359:	; bb89
                                 ;    2706 					clst = fp->sclust;		/* Follow from the origin */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2706
00002522 E5100403                		MOV.L 10H[R1], 0CH[R0]
00002526                         L1360:	; bb89.split
                                 ;    2707 					if (clst == 0)			/* When no cluster is allocated, */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2707
00002526 A889                    		MOV.L 0CH[R0], R1
00002528 6101                    		CMP #00H, R1
0000252A 21rr                    		BNE L1363
0000252C                         L1361:	; bb94
                                 ;    2708 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2708
0000252C AB09                    		MOV.L 34H[R0], R1
0000252E EC11                    		MOV.L [R1], R1
00002530 6602                    		MOV.L #00000000H, R2
00002532 39rrrr               W  		BSR __$create_chain
00002535 A089                    		MOV.L R1, 0CH[R0]
00002537 2Err                 B  		BRA L1363
00002539                         L1362:	; bb104
                                 ;    2709 				} else {					/* Middle or end of the file */
                                 ;    2710 #if _USE_FASTSEEK
                                 ;    2711 					if (fp->cltbl)
                                 ;    2712 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
                                 ;    2713 					else
                                 ;    2714 #endif
                                 ;    2715 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2715
00002539 AB0A                    		MOV.L 34H[R0], R2
0000253B A92A                    		MOV.L 14H[R2], R2
0000253D EC11                    		MOV.L [R1], R1
0000253F 39rrrr               W  		BSR __$create_chain
00002542 A089                    		MOV.L R1, 0CH[R0]
00002544                         L1363:	; bb119
                                 ;    2716 				}
                                 ;    2717 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2717
00002544 A889                    		MOV.L 0CH[R0], R1
00002546 6101                    		CMP #00H, R1
00002548 3Arrrr               W  		BEQ L1413
0000254B                         L1364:	; bb127
                                 ;    2718 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2718
0000254B A889                    		MOV.L 0CH[R0], R1
0000254D 6111                    		CMP #01H, R1
0000254F 21rr                    		BNE L1366
00002551                         L1365:	; bb128
00002551 AB09                    		MOV.L 34H[R0], R1
00002553 3C1702                  		MOV.B #02H, 07H[R1]
00002556 3E0102                  		MOV.L #00000002H, 04H[R0]
00002559 38rrrr               W  		BRA L1417
0000255C                         L1366:	; bb137
                                 ;    2719 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2719
0000255C A889                    		MOV.L 0CH[R0], R1
0000255E 7501FF                  		CMP #0FFFFFFFFH, R1
00002561 AB09                    		MOV.L 34H[R0], R1
00002563 18                   S  		BNE L1368
00002564                         L1367:	; bb138
00002564 3C1701                  		MOV.B #01H, 07H[R1]
00002567 3E0101                  		MOV.L #00000001H, 04H[R0]
0000256A 38rrrr               W  		BRA L1417
0000256D                         L1368:	; bb146
                                 ;    2720 				fp->clust = clst;			/* Update current cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2720
0000256D E5010305                		MOV.L 0CH[R0], 14H[R1]
00002571                         L1369:	; bb146.split
                                 ;    2721 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2721
00002571 AB09                    		MOV.L 34H[R0], R1
00002573 A911                    		MOV.L 10H[R1], R1
00002575 6101                    		CMP #00H, R1
00002577 21rr                    		BNE L1374
00002579                         L1370:	; bb151
00002579 A889                    		MOV.L 0CH[R0], R1
0000257B AB0A                    		MOV.L 34H[R0], R2
0000257D A121                    		MOV.L R1, 10H[R2]
0000257F 2Err                 B  		BRA L1374
00002581                         L1371:	; bb166
00002581 F80600                  		MOV.L #00000000H, [R0]
00002584 08                   S  		BRA L1373
00002585                         L1372:	; bb167
00002585 F80601                  		MOV.L #00000001H, [R0]
00002588                         L1373:	; bb168
00002588 EC01                    		MOV.L [R0], R1
0000258A 6101                    		CMP #00H, R1
0000258C 21rr                    		BNE L1358
0000258E                         L1374:	; bb173
                                 ;    2722 			}
                                 ;    2723 #if _FS_TINY
                                 ;    2724 			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
                                 ;    2725 				ABORT(fp->fs, FR_DISK_ERR);
                                 ;    2726 #else
                                 ;    2727 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2727
0000258E AB09                    		MOV.L 34H[R0], R1
00002590 F51606                  		BTST #06H, 06H[R1].B
00002593 20rr                    		BEQ L1379
00002595                         L1375:	; bb175
                                 ;    2728 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2728
00002595 AB0A                    		MOV.L 34H[R0], R2
00002597 A9A3                    		MOV.L 18H[R2], R3
00002599 EC21                    		MOV.L [R2], R1
0000259B B019                    		MOVU.B 01H[R1], R1
0000259D 712224                  		ADD #24H, R2
000025A0 6614                    		MOV.L #00000001H, R4
000025A2 05rrrrrr             A  		BSR _disk_write
000025A6 6101                    		CMP #00H, R1
000025A8 AB09                    		MOV.L 34H[R0], R1
000025AA 10                   S  		BEQ L1378
000025AB                         L1376:	; bb176
                                 ;    2729 					ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2729
000025AB 3C1701                  		MOV.B #01H, 07H[R1]
000025AE                         L1377:	; bb176.split
000025AE 3E0101                  		MOV.L #00000001H, 04H[R0]
000025B1 38rrrr               W  		BRA L1417
000025B4                         L1378:	; bb195
                                 ;    2730 				fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2730
000025B4 F11E06                  		BCLR #06H, 06H[R1].B
000025B7                         L1379:	; bb210
                                 ;    2731 			}
                                 ;    2732 #endif
                                 ;    2733 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2733
000025B7 AB09                    		MOV.L 34H[R0], R1
000025B9 A91A                    		MOV.L 14H[R1], R2
000025BB EC11                    		MOV.L [R1], R1
000025BD 39rrrr               W  		BSR _clust2sect
000025C0 A101                    		MOV.L R1, 10H[R0]
000025C2                         L1380:	; bb210.split
                                 ;    2734 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2734
000025C2 A901                    		MOV.L 10H[R0], R1
000025C4 6101                    		CMP #00H, R1
000025C6 21rr                    		BNE L1382
000025C8 2Err                 B  		BRA L1383
000025CA                         L1381:	; bb219
000025CA AB09                    		MOV.L 34H[R0], R1
000025CC 3C1702                  		MOV.B #02H, 07H[R1]
000025CF 3E0102                  		MOV.L #00000002H, 04H[R0]
000025D2 38rrrr               W  		BRA L1417
000025D5                         L1382:	; bb226
000025D5 F80600                  		MOV.L #00000000H, [R0]
000025D8 08                   S  		BRA L1384
000025D9                         L1383:	; bb227
000025D9 F80601                  		MOV.L #00000001H, [R0]
000025DC                         L1384:	; bb228
000025DC EC01                    		MOV.L [R0], R1
000025DE 6101                    		CMP #00H, R1
000025E0 21rr                    		BNE L1381
000025E2                         L1385:	; bb232
                                 ;    2735 			sect += csect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2735
000025E2 A901                    		MOV.L 10H[R0], R1
000025E4 490123                  		ADD 23H[R0].UB, R1
000025E7 A101                    		MOV.L R1, 10H[R0]
000025E9                         L1386:	; bb232.split
                                 ;    2736 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2736
000025E9 AA89                    		MOV.L 2CH[R0], R1
000025EB 6891                    		SHLR #09H, R1
000025ED A181                    		MOV.L R1, 18H[R0]
000025EF                         L1387:	; bb232.split3
                                 ;    2737 			if (cc) {						/* Write maximum contiguous sectors directly */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2737
000025EF A981                    		MOV.L 18H[R0], R1
000025F1 6101                    		CMP #00H, R1
000025F3 20rr                    		BEQ L1397
000025F5                         L1388:	; bb241
                                 ;    2738 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2738
000025F5 590123                  		MOVU.B 23H[R0], R1
000025F8 06890106                		ADD 18H[R0].L, R1
000025FC AB0A                    		MOV.L 34H[R0], R2
000025FE EC2E                    		MOV.L [R2], R14
00002600 45E102                  		CMP 02H[R14].UB, R1
00002603 25rr                    		BLEU L1390
00002605                         L1389:	; bb242
                                 ;    2739 					cc = fp->fs->csize - csect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2739
00002605 AB09                    		MOV.L 34H[R0], R1
00002607 EC11                    		MOV.L [R1], R1
00002609 B091                    		MOVU.B 02H[R1], R1
0000260B 410123                  		SUB 23H[R0].UB, R1
0000260E A181                    		MOV.L R1, 18H[R0]
00002610                         L1390:	; bb266
                                 ;    2740 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2740
00002610 AB09                    		MOV.L 34H[R0], R1
00002612 EC11                    		MOV.L [R1], R1
00002614 B019                    		MOVU.B 01H[R1], R1
00002616 A984                    		MOV.L 18H[R0], R4
00002618 A903                    		MOV.L 10H[R0], R3
0000261A A98A                    		MOV.L 1CH[R0], R2
0000261C 05rrrrrr             A  		BSR _disk_write
00002620 6101                    		CMP #00H, R1
00002622 AB09                    		MOV.L 34H[R0], R1
00002624 10                   S  		BEQ L1393
00002625                         L1391:	; bb267
                                 ;    2741 					ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2741
00002625 3C1701                  		MOV.B #01H, 07H[R1]
00002628                         L1392:	; bb267.split
00002628 3E0101                  		MOV.L #00000001H, 04H[R0]
0000262B 38rrrr               W  		BRA L1417
0000262E                         L1393:	; bb284
                                 ;    2742 #if _FS_MINIMIZE <= 2
                                 ;    2743 #if _FS_TINY
                                 ;    2744 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct write */
                                 ;    2745 					mem_cpy(fp->fs->win, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
                                 ;    2746 					fp->fs->wflag = 0;
                                 ;    2747 				}
                                 ;    2748 #else
                                 ;    2749 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2749
0000262E A991                    		MOV.L 18H[R1], R1
00002630 06810104                		SUB 10H[R0].L, R1
00002634 06850106                		CMP 18H[R0].L, R1
00002638 22rr                    		BGEU L1396
0000263A                         L1394:	; bb285
                                 ;    2750 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2750
0000263A AB09                    		MOV.L 34H[R0], R1
0000263C A992                    		MOV.L 18H[R1], R2
0000263E 06810204                		SUB 10H[R0].L, R2
00002642 6C92                    		SHLL #09H, R2
00002644 06890207                		ADD 1CH[R0].L, R2
00002648 711124                  		ADD #24H, R1
0000264B FB3A0002                		MOV.L #00000200H, R3
0000264F 39rrrr               W  		BSR __$mem_cpy
00002652                         L1395:	; bb285.split
                                 ;    2751 					fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2751
00002652 AB09                    		MOV.L 34H[R0], R1
00002654 F11E06                  		BCLR #06H, 06H[R1].B
00002657                         L1396:	; bb312
                                 ;    2752 				}
                                 ;    2753 #endif
                                 ;    2754 #endif
                                 ;    2755 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2755
00002657 A981                    		MOV.L 18H[R0], R1
00002659 6C91                    		SHLL #09H, R1
0000265B A109                    		MOV.L R1, 14H[R0]
0000265D 38rrrr               W  		BRA L1411
00002660                         L1397:	; bb321
                                 ;    2756 				continue;
                                 ;    2757 			}
                                 ;    2758 #if _FS_TINY
                                 ;    2759 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
                                 ;    2760 				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
                                 ;    2761 				fp->fs->winsect = sect;
                                 ;    2762 			}
                                 ;    2763 #else
                                 ;    2764 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2764
00002660 AB09                    		MOV.L 34H[R0], R1
00002662 A991                    		MOV.L 18H[R1], R1
00002664 06850104                		CMP 10H[R0].L, R1
00002668 20rr                    		BEQ L1405
0000266A                         L1398:	; bb323
                                 ;    2765 				if (fp->fptr < fp->fsize &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2765
0000266A AB09                    		MOV.L 34H[R0], R1
0000266C A892                    		MOV.L 08H[R1], R2
0000266E 06851203                		CMP 0CH[R1].L, R2
00002672 23rr                    		BLTU L1401
00002674 2Err                 B  		BRA L1403
00002676                         L1399:	; bb324
                                 ;    2766 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
                                 ;    2767 						ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2767
00002676 AB09                    		MOV.L 34H[R0], R1
00002678 3C1701                  		MOV.B #01H, 07H[R1]
0000267B                         L1400:	; bb324.split
0000267B 3E0101                  		MOV.L #00000001H, 04H[R0]
0000267E 38rrrr               W  		BRA L1417
00002681                         L1401:	; bb336
00002681 AB0A                    		MOV.L 34H[R0], R2
00002683 EC21                    		MOV.L [R2], R1
00002685 B019                    		MOVU.B 01H[R1], R1
00002687 A903                    		MOV.L 10H[R0], R3
00002689 712224                  		ADD #24H, R2
0000268C 6614                    		MOV.L #00000001H, R4
0000268E 05rrrrrr             A  		BSR _disk_read
00002692 6101                    		CMP #00H, R1
00002694 10                   S  		BEQ L1403
00002695                         L1402:	; bb349
00002695 F80601                  		MOV.L #00000001H, [R0]
00002698 08                   S  		BRA L1404
00002699                         L1403:	; bb350
00002699 F80600                  		MOV.L #00000000H, [R0]
0000269C                         L1404:	; bb351
0000269C EC01                    		MOV.L [R0], R1
0000269E 6101                    		CMP #00H, R1
000026A0 21rr                    		BNE L1399
000026A2                         L1405:	; bb364
                                 ;    2768 			}
                                 ;    2769 #endif
                                 ;    2770 			fp->dsect = sect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2770
000026A2 A901                    		MOV.L 10H[R0], R1
000026A4 AB0A                    		MOV.L 34H[R0], R2
000026A6 A1A1                    		MOV.L R1, 18H[R2]
000026A8                         L1406:	; bb375
                                 ;    2771 		}
                                 ;    2772 		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2772
000026A8 AB09                    		MOV.L 34H[R0], R1
000026AA A891                    		MOV.L 08H[R1], R1
000026AC 7621FF01                		AND #01FFH, R1
000026B0 FB2A0002                		MOV.L #00000200H, R2
000026B4 4312                    		SUB R1, R2
000026B6 A10A                    		MOV.L R2, 14H[R0]
000026B8                         L1407:	; bb375.split
                                 ;    2773 		if (wcnt > btw) wcnt = btw;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2773
000026B8 A909                    		MOV.L 14H[R0], R1
000026BA 0685010B                		CMP 2CH[R0].L, R1
000026BE 25rr                    		BLEU L1409
000026C0                         L1408:	; bb382
000026C0 E5000B05                		MOV.L 2CH[R0], 14H[R0]
000026C4                         L1409:	; bb389
                                 ;    2774 #if _FS_TINY
                                 ;    2775 		if (move_window(fp->fs, fp->dsect) != FR_OK)	/* Move sector window */
                                 ;    2776 			ABORT(fp->fs, FR_DISK_ERR);
                                 ;    2777 		mem_cpy(&fp->fs->win[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
                                 ;    2778 		fp->fs->wflag = 1;
                                 ;    2779 #else
                                 ;    2780 		mem_cpy(&fp->buf[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2780
000026C4 AB09                    		MOV.L 34H[R0], R1
000026C6 A894                    		MOV.L 08H[R1], R4
000026C8 A90B                    		MOV.L 14H[R0], R3
000026CA A98A                    		MOV.L 1CH[R0], R2
000026CC 7624FF01                		AND #01FFH, R4
000026D0 4B41                    		ADD R4, R1
000026D2 711124                  		ADD #24H, R1
000026D5 39rrrr               W  		BSR __$mem_cpy
000026D8                         L1410:	; bb389.split
                                 ;    2781 		fp->flag |= FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2781
000026D8 AB09                    		MOV.L 34H[R0], R1
000026DA F11606                  		BSET #06H, 06H[R1].B
000026DD                         L1411:	; bb406
000026DD A989                    		MOV.L 1CH[R0], R1
000026DF 06890105                		ADD 14H[R0].L, R1
000026E3 A189                    		MOV.L R1, 1CH[R0]
000026E5 AB09                    		MOV.L 34H[R0], R1
000026E7 A892                    		MOV.L 08H[R1], R2
000026E9 06890205                		ADD 14H[R0].L, R2
000026ED A092                    		MOV.L R2, 08H[R1]
000026EF AA81                    		MOV.L 28H[R0], R1
000026F1 EC1E                    		MOV.L [R1], R14
000026F3 06890E05                		ADD 14H[R0].L, R14
000026F7 E31E                    		MOV.L R14, [R1]
000026F9 AA89                    		MOV.L 2CH[R0], R1
000026FB 06810105                		SUB 14H[R0].L, R1
000026FF A289                    		MOV.L R1, 2CH[R0]
00002701                         L1412:	; bb426
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2700
00002701 AA89                    		MOV.L 2CH[R0], R1
00002703 6101                    		CMP #00H, R1
00002705 3Brrrr               W  		BNE L1355
00002708                         L1413:	; bb433
                                 ;    2782 #endif
                                 ;    2783 	}
                                 ;    2784 
                                 ;    2785 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2785
00002708 AB09                    		MOV.L 34H[R0], R1
0000270A A892                    		MOV.L 08H[R1], R2
0000270C 06851203                		CMP 0CH[R1].L, R2
00002710 25rr                    		BLEU L1415
00002712                         L1414:	; bb434
00002712 AB09                    		MOV.L 34H[R0], R1
00002714 E5110203                		MOV.L 08H[R1], 0CH[R1]
00002718                         L1415:	; bb449
                                 ;    2786 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2786
00002718 AB09                    		MOV.L 34H[R0], R1
0000271A F11506                  		BSET #05H, 06H[R1].B
0000271D                         L1416:	; bb449.split
                                 ;    2787 
                                 ;    2788 	LEAVE_FF(fp->fs, FR_OK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2788
0000271D 3E0100                  		MOV.L #00000000H, 04H[R0]
00002720                         L1417:	; bb457
00002720 A809                    		MOV.L 04H[R0], R1
00002722 A209                    		MOV.L R1, 24H[R0]
                                 ;    2789 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2789
00002724 670E                    		RTSD #38H
00002726                         _f_sync:
                                 		.STACK	_f_sync=28
                                 ;    2790 
                                 ;    2791 
                                 ;    2792 
                                 ;    2793 
                                 ;    2794 /*-----------------------------------------------------------------------*/
                                 ;    2795 /* Synchronize the File                                                  */
                                 ;    2796 /*-----------------------------------------------------------------------*/
                                 ;    2797 
                                 ;    2798 FRESULT f_sync (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2798
00002726 7100E8                  		ADD #0FFFFFFE8H, R0
00002729 A109                    		MOV.L R1, 14H[R0]
                                 ;    2799 	FIL* fp		/* Pointer to the file object */
                                 ;    2800 )
                                 ;    2801 {
                                 ;    2802 	FRESULT res;
                                 ;    2803 	DWORD tm;
                                 ;    2804 	BYTE *dir;
                                 ;    2805 
                                 ;    2806 
                                 ;    2807 	res = validate(fp);					/* Check validity of the object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2807
0000272B 39rrrr               W  		BSR __$validate
0000272E A009                    		MOV.L R1, 04H[R0]
00002730                         L1419:	; entry.split
                                 ;    2808 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2808
00002730 A809                    		MOV.L 04H[R0], R1
00002732 6101                    		CMP #00H, R1
00002734 3Brrrr               W  		BNE L1437
00002737                         L1420:	; bb9
                                 ;    2809 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2809
00002737 A909                    		MOV.L 14H[R0], R1
00002739 F51506                  		BTST #05H, 06H[R1].B
0000273C 20rr                    		BEQ L1437
0000273E                         L1421:	; bb11
                                 ;    2810 			/* Write-back dirty buffer */
                                 ;    2811 #if !_FS_TINY
                                 ;    2812 			if (fp->flag & FA__DIRTY) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2812
0000273E A909                    		MOV.L 14H[R0], R1
00002740 F51606                  		BTST #06H, 06H[R1].B
00002743 20rr                    		BEQ L1425
00002745                         L1422:	; bb13
                                 ;    2813 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2813
00002745 A90A                    		MOV.L 14H[R0], R2
00002747 A9A3                    		MOV.L 18H[R2], R3
00002749 EC21                    		MOV.L [R2], R1
0000274B B019                    		MOVU.B 01H[R1], R1
0000274D 712224                  		ADD #24H, R2
00002750 6614                    		MOV.L #00000001H, R4
00002752 05rrrrrr             A  		BSR _disk_write
00002756 6101                    		CMP #00H, R1
00002758 10                   S  		BEQ L1424
00002759                         L1423:	; bb14
                                 ;    2814 					LEAVE_FF(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2814
00002759 F80601                  		MOV.L #00000001H, [R0]
0000275C 2Err                 B  		BRA L1438
0000275E                         L1424:	; bb30
                                 ;    2815 				fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2815
0000275E A909                    		MOV.L 14H[R0], R1
00002760 F11E06                  		BCLR #06H, 06H[R1].B
00002763                         L1425:	; bb45
                                 ;    2816 			}
                                 ;    2817 #endif
                                 ;    2818 			/* Update the directory entry */
                                 ;    2819 			res = move_window(fp->fs, fp->dir_sect);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2819
00002763 A909                    		MOV.L 14H[R0], R1
00002765 A99A                    		MOV.L 1CH[R1], R2
00002767 EC11                    		MOV.L [R1], R1
00002769 39rrrr               W  		BSR __$move_window
0000276C A009                    		MOV.L R1, 04H[R0]
0000276E                         L1426:	; bb45.split
                                 ;    2820 			if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2820
0000276E A809                    		MOV.L 04H[R0], R1
00002770 6101                    		CMP #00H, R1
00002772 21rr                    		BNE L1437
00002774                         L1427:	; bb54
                                 ;    2821 				dir = fp->dir_ptr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2821
00002774 A909                    		MOV.L 14H[R0], R1
00002776 E5100803                		MOV.L 20H[R1], 0CH[R0]
0000277A                         L1428:	; bb54.split
                                 ;    2822 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2822
0000277A A889                    		MOV.L 0CH[R0], R1
0000277C F1150B                  		BSET #05H, 0BH[R1].B
0000277F                         L1429:	; bb54.split1
                                 ;    2823 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2823
0000277F A909                    		MOV.L 14H[R0], R1
00002781 A88A                    		MOV.L 0CH[R0], R2
00002783 E5120307                		MOV.L 0CH[R1], 1CH[R2]
00002787                         L1430:	; bb54.split2
                                 ;    2824 				st_clust(dir, fp->sclust);					/* Update start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2824
00002787 A909                    		MOV.L 14H[R0], R1
00002789 A912                    		MOV.L 10H[R1], R2
0000278B A889                    		MOV.L 0CH[R0], R1
0000278D 39rrrr               W  		BSR __$st_clust
00002790                         L1431:	; bb54.split3
                                 ;    2825 				tm = GET_FATTIME();							/* Update updated time */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2825
00002790 F9020200006945          		MOV.L #45690000H, 08H[R0]
00002797                         L1432:	; bb54.split4
                                 ;    2826 				ST_DWORD(dir+DIR_WrtTime, tm);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2826
00002797 A889                    		MOV.L 0CH[R0], R1
00002799 711116                  		ADD #16H, R1
0000279C E10102                  		MOV.L 08H[R0], [R1]
0000279F                         L1433:	; bb54.split5
                                 ;    2827 				ST_WORD(dir+DIR_LstAccDate, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2827
0000279F A889                    		MOV.L 0CH[R0], R1
000027A1 3D1900                  		MOV.W #0000H, 12H[R1]
000027A4                         L1434:	; bb54.split6
                                 ;    2828 				fp->flag &= ~FA__WRITTEN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2828
000027A4 A909                    		MOV.L 14H[R0], R1
000027A6 F11D06                  		BCLR #05H, 06H[R1].B
000027A9                         L1435:	; bb54.split7
                                 ;    2829 				fp->fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2829
000027A9 A909                    		MOV.L 14H[R0], R1
000027AB EC11                    		MOV.L [R1], R1
000027AD 3C1401                  		MOV.B #01H, 04H[R1]
000027B0                         L1436:	; bb54.split8
                                 ;    2830 				res = sync_fs(fp->fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2830
000027B0 A909                    		MOV.L 14H[R0], R1
000027B2 EC11                    		MOV.L [R1], R1
000027B4 39rrrr               W  		BSR __$sync_fs
000027B7 A009                    		MOV.L R1, 04H[R0]
000027B9                         L1437:	; bb114
                                 ;    2831 			}
                                 ;    2832 		}
                                 ;    2833 	}
                                 ;    2834 
                                 ;    2835 	LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2835
000027B9 E10001                  		MOV.L 04H[R0], [R0]
000027BC                         L1438:	; bb117
000027BC EC01                    		MOV.L [R0], R1
000027BE A101                    		MOV.L R1, 10H[R0]
                                 ;    2836 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2836
000027C0 6706                    		RTSD #18H
000027C2                         _f_close:
                                 		.STACK	_f_close=16
                                 ;    2837 
                                 ;    2838 #endif /* !_FS_READONLY */
                                 ;    2839 
                                 ;    2840 
                                 ;    2841 
                                 ;    2842 
                                 ;    2843 /*-----------------------------------------------------------------------*/
                                 ;    2844 /* Close File                                                            */
                                 ;    2845 /*-----------------------------------------------------------------------*/
                                 ;    2846 
                                 ;    2847 FRESULT f_close (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2847
000027C2 60C0                    		SUB #0CH, R0
000027C4 A081                    		MOV.L R1, 08H[R0]
                                 ;    2848 	FIL *fp		/* Pointer to the file object to be closed */
                                 ;    2849 )
                                 ;    2850 {
                                 ;    2851 	FRESULT res;
                                 ;    2852 
                                 ;    2853 
                                 ;    2854 #if !_FS_READONLY
                                 ;    2855 	res = f_sync(fp);					/* Flush cached data */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2855
000027C6 39rrrr               W  		BSR _f_sync
000027C9 E301                    		MOV.L R1, [R0]
000027CB                         L1440:	; entry.split
                                 ;    2856 	if (res == FR_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2856
000027CB EC01                    		MOV.L [R0], R1
000027CD 6101                    		CMP #00H, R1
000027CF 21rr                    		BNE L1444
000027D1                         L1441:	; bb5
                                 ;    2857 #endif
                                 ;    2858 	{
                                 ;    2859 		res = validate(fp);				/* Lock volume */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2859
000027D1 A881                    		MOV.L 08H[R0], R1
000027D3 39rrrr               W  		BSR __$validate
000027D6 E301                    		MOV.L R1, [R0]
000027D8                         L1442:	; bb5.split
                                 ;    2860 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2860
000027D8 EC01                    		MOV.L [R0], R1
000027DA 6101                    		CMP #00H, R1
000027DC 18                   S  		BNE L1444
000027DD                         L1443:	; bb10
                                 ;    2861 #if _FS_REENTRANT
                                 ;    2862 			FATFS *fs = fp->fs;
                                 ;    2863 #endif
                                 ;    2864 #if _FS_LOCK
                                 ;    2865 			res = dec_lock(fp->lockid);	/* Decrement file open counter */
                                 ;    2866 			if (res == FR_OK)
                                 ;    2867 #endif
                                 ;    2868 				fp->fs = 0;				/* Invalidate file object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2868
000027DD A881                    		MOV.L 08H[R0], R1
000027DF F81600                  		MOV.L #00000000H, [R1]
000027E2                         L1444:	; bb21
                                 ;    2869 #if _FS_REENTRANT
                                 ;    2870 			unlock_fs(fs, FR_OK);		/* Unlock volume */
                                 ;    2871 #endif
                                 ;    2872 		}
                                 ;    2873 	}
                                 ;    2874 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2874
000027E2 EC01                    		MOV.L [R0], R1
000027E4 A009                    		MOV.L R1, 04H[R0]
000027E6                         L1445:	; bb21.split
                                 ;    2875 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2875
000027E6 6703                    		RTSD #0CH
000027E8                         _f_chdir:
                                 		.STACK	_f_chdir=72
                                 ;    2876 
                                 ;    2877 
                                 ;    2878 
                                 ;    2879 
                                 ;    2880 /*-----------------------------------------------------------------------*/
                                 ;    2881 /* Change Current Directory or Current Drive, Get Current Directory      */
                                 ;    2882 /*-----------------------------------------------------------------------*/
                                 ;    2883 
                                 ;    2884 #if _FS_RPATH >= 1
                                 ;    2885 #if _VOLUMES >= 2
                                 ;    2886 FRESULT f_chdrive (
                                 ;    2887 	const TCHAR* path		/* Drive number */
                                 ;    2888 )
                                 ;    2889 {
                                 ;    2890 	int vol;
                                 ;    2891 
                                 ;    2892 
                                 ;    2893 	vol = get_ldnumber(&path);
                                 ;    2894 	if (vol < 0) return FR_INVALID_DRIVE;
                                 ;    2895 
                                 ;    2896 	CurrVol = (BYTE)vol;
                                 ;    2897 
                                 ;    2898 	return FR_OK;
                                 ;    2899 }
                                 ;    2900 #endif
                                 ;    2901 
                                 ;    2902 
                                 ;    2903 FRESULT f_chdir (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2903
000027E8 7EA6                    		PUSH.L R6
000027EA 7100C0                  		ADD #0FFFFFFC0H, R0
000027ED A389                    		MOV.L R1, 3CH[R0]
000027EF 6603                    		MOV.L #00000000H, R3
000027F1 71023C                  		ADD #3CH, R0, R2
000027F4 710108                  		ADD #08H, R0, R1
                                 ;    2904 	const TCHAR* path	/* Pointer to the directory path */
                                 ;    2905 )
                                 ;    2906 {
                                 ;    2907 	FRESULT res;
                                 ;    2908 	DIR dj;
                                 ;    2909 	DEF_NAMEBUF;
                                 ;    2910 
                                 ;    2911 
                                 ;    2912 	/* Get logical drive number */
                                 ;    2913 	res = find_volume(&dj.fs, &path, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2913
000027F7 39rrrr               W  		BSR __$find_volume
000027FA A009                    		MOV.L R1, 04H[R0]
000027FC                         L1447:	; entry.split
                                 ;    2914 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2914
000027FC A809                    		MOV.L 04H[R0], R1
000027FE 6101                    		CMP #00H, R1
00002800 21rr                    		BNE L1462
00002802                         L1448:	; bb7
00002802 71012C                  		ADD #2CH, R0, R1
                                 ;    2915 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2915
00002805 A201                    		MOV.L R1, 20H[R0]
00002807                         L1449:	; bb7.split
00002807 FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
0000280D A209                    		MOV.L R1, 24H[R0]
0000280F                         L1450:	; bb7.split1
                                 ;    2916 		res = follow_path(&dj, path);		/* Follow the path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2916
0000280F AB8A                    		MOV.L 3CH[R0], R2
00002811 710108                  		ADD #08H, R0, R1
00002814 39rrrr               W  		BSR __$follow_path
00002817 A009                    		MOV.L R1, 04H[R0]
00002819                         L1451:	; bb7.split2
                                 ;    2917 		FREE_BUF();
                                 ;    2918 		if (res == FR_OK) {					/* Follow completed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2918
00002819 A809                    		MOV.L 04H[R0], R1
0000281B 6101                    		CMP #00H, R1
0000281D 21rr                    		BNE L1460
0000281F                         L1452:	; bb15
                                 ;    2919 			if (!dj.dir) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2919
0000281F A989                    		MOV.L 1CH[R0], R1
00002821 6101                    		CMP #00H, R1
00002823 21rr                    		BNE L1457
00002825 2Err                 B  		BRA L1458
00002827                         L1453:	; bb16
                                 ;    2920 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2920
00002827 A901                    		MOV.L 10H[R0], R1
00002829 A882                    		MOV.L 08H[R0], R2
0000282B A129                    		MOV.L R1, 14H[R2]
0000282D 2Err                 B  		BRA L1460
0000282F                         L1454:	; bb23
                                 ;    2921 			} else {
                                 ;    2922 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2922
0000282F A989                    		MOV.L 1CH[R0], R1
00002831 F5140B                  		BTST #04H, 0BH[R1].B
00002834 20rr                    		BEQ L1456
00002836                         L1455:	; bb24
                                 ;    2923 					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2923
00002836 A886                    		MOV.L 08H[R0], R6
00002838 A98A                    		MOV.L 1CH[R0], R2
0000283A EF61                    		MOV.L R6, R1
0000283C 39rrrr               W  		BSR __$ld_clust
0000283F A169                    		MOV.L R1, 14H[R6]
00002841 2Err                 B  		BRA L1460
00002843                         L1456:	; bb33
                                 ;    2924 				else
                                 ;    2925 					res = FR_NO_PATH;		/* Reached but a file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2925
00002843 3E0105                  		MOV.L #00000005H, 04H[R0]
00002846 2Err                 B  		BRA L1460
00002848                         L1457:	; bb47
00002848 F80600                  		MOV.L #00000000H, [R0]
0000284B 08                   S  		BRA L1459
0000284C                         L1458:	; bb48
0000284C F80601                  		MOV.L #00000001H, [R0]
0000284F                         L1459:	; bb49
0000284F EC01                    		MOV.L [R0], R1
00002851 6101                    		CMP #00H, R1
00002853 21rr                    		BNE L1453
00002855 2Err                 B  		BRA L1454
00002857                         L1460:	; bb59
                                 ;    2926 			}
                                 ;    2927 		}
                                 ;    2928 		if (res == FR_NO_FILE) res = FR_NO_PATH;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2928
00002857 A809                    		MOV.L 04H[R0], R1
00002859 6141                    		CMP #04H, R1
0000285B 18                   S  		BNE L1462
0000285C                         L1461:	; bb60
0000285C 3E0105                  		MOV.L #00000005H, 04H[R0]
0000285F                         L1462:	; bb70
                                 ;    2929 	}
                                 ;    2930 
                                 ;    2931 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2931
0000285F A809                    		MOV.L 04H[R0], R1
00002861 A381                    		MOV.L R1, 38H[R0]
00002863                         L1463:	; bb70.split
                                 ;    2932 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2932
00002863 3F6611                  		RTSD #44H, R6-R6
00002866                         _f_getcwd:
                                 		.STACK	_f_getcwd=120
                                 ;    2933 
                                 ;    2934 
                                 ;    2935 #if _FS_RPATH >= 2
                                 ;    2936 FRESULT f_getcwd (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2936
00002866 7EA6                    		PUSH.L R6
00002868 710090                  		ADD #0FFFFFF90H, R0
0000286B A689                    		MOV.L R1, 6CH[R0]
0000286D A682                    		MOV.L R2, 68H[R0]
                                 ;    2937 	TCHAR* buff,	/* Pointer to the directory path */
                                 ;    2938 	UINT len		/* Size of path */
                                 ;    2939 )
                                 ;    2940 {
                                 ;    2941 	FRESULT res;
                                 ;    2942 	DIR dj;
                                 ;    2943 	UINT i, n;
                                 ;    2944 	DWORD ccl;
                                 ;    2945 	TCHAR *tp;
                                 ;    2946 	FILINFO fno;
                                 ;    2947 	DEF_NAMEBUF;
                                 ;    2948 
                                 ;    2949 
                                 ;    2950 	*buff = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2950
0000286F AE89                    		MOV.L 6CH[R0], R1
00002871 F81400                  		MOV.B #00H, [R1]
00002874                         L1465:	; entry.split
00002874 6603                    		MOV.L #00000000H, R3
00002876 71026C                  		ADD #6CH, R0, R2
00002879 710104                  		ADD #04H, R0, R1
                                 ;    2951 	/* Get logical drive number */
                                 ;    2952 	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2952
0000287C 39rrrr               W  		BSR __$find_volume
0000287F E301                    		MOV.L R1, [R0]
00002881                         L1466:	; entry.split1
                                 ;    2953 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2953
00002881 EC01                    		MOV.L [R0], R1
00002883 6101                    		CMP #00H, R1
00002885 3Brrrr               W  		BNE L1508
00002888                         L1467:	; bb14
00002888 710158                  		ADD #58H, R0, R1
                                 ;    2954 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2954
0000288B A189                    		MOV.L R1, 1CH[R0]
0000288D                         L1468:	; bb14.split
0000288D FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
00002893 A201                    		MOV.L R1, 20H[R0]
00002895                         L1469:	; bb14.split2
                                 ;    2955 		i = len;			/* Bottom of buffer (directory stack base) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2955
00002895 E5001A0A                		MOV.L 68H[R0], 28H[R0]
00002899                         L1470:	; bb14.split3
                                 ;    2956 		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2956
00002899 A809                    		MOV.L 04H[R0], R1
0000289B E5100503                		MOV.L 14H[R1], 0CH[R0]
0000289F 38rrrr               W  		BRA L1500
000028A2                         L1471:	; bb24
000028A2 6612                    		MOV.L #00000001H, R2
000028A4 710104                  		ADD #04H, R0, R1
                                 ;    2957 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
                                 ;    2958 			res = dir_sdi(&dj, 1);			/* Get parent directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2958
000028A7 39rrrr               W  		BSR __$dir_sdi
000028AA E301                    		MOV.L R1, [R0]
000028AC                         L1472:	; bb24.split
                                 ;    2959 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2959
000028AC EC01                    		MOV.L [R0], R1
000028AE 6101                    		CMP #00H, R1
000028B0 3Brrrr               W  		BNE L1501
000028B3                         L1473:	; bb32
000028B3 6602                    		MOV.L #00000000H, R2
000028B5 710104                  		ADD #04H, R0, R1
                                 ;    2960 			res = dir_read(&dj, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2960
000028B8 39rrrr               W  		BSR __$dir_read
000028BB E301                    		MOV.L R1, [R0]
000028BD                         L1474:	; bb32.split
                                 ;    2961 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2961
000028BD EC01                    		MOV.L [R0], R1
000028BF 6101                    		CMP #00H, R1
000028C1 3Brrrr               W  		BNE L1501
000028C4                         L1475:	; bb41
                                 ;    2962 			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2962
000028C4 A982                    		MOV.L 18H[R0], R2
000028C6 A809                    		MOV.L 04H[R0], R1
000028C8 39rrrr               W  		BSR __$ld_clust
000028CB A089                    		MOV.L R1, 0CH[R0]
000028CD                         L1476:	; bb41.split
000028CD 6602                    		MOV.L #00000000H, R2
000028CF 710104                  		ADD #04H, R0, R1
                                 ;    2963 			res = dir_sdi(&dj, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2963
000028D2 39rrrr               W  		BSR __$dir_sdi
000028D5 E301                    		MOV.L R1, [R0]
000028D7                         L1477:	; bb41.split4
                                 ;    2964 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2964
000028D7 EC01                    		MOV.L [R0], R1
000028D9 6101                    		CMP #00H, R1
000028DB 3Brrrr               W  		BNE L1501
000028DE                         L1478:	; bb57
000028DE 6602                    		MOV.L #00000000H, R2
000028E0 710104                  		ADD #04H, R0, R1
                                 ;    2965 			do {							/* Find the entry links to the child directory */
                                 ;    2966 				res = dir_read(&dj, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2966
000028E3 39rrrr               W  		BSR __$dir_read
000028E6 E301                    		MOV.L R1, [R0]
000028E8                         L1479:	; bb57.split
                                 ;    2967 				if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2967
000028E8 EC01                    		MOV.L [R0], R1
000028EA 6101                    		CMP #00H, R1
000028EC 21rr                    		BNE L1483
000028EE                         L1480:	; bb67
                                 ;    2968 				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2968
000028EE A982                    		MOV.L 18H[R0], R2
000028F0 A809                    		MOV.L 04H[R0], R1
000028F2 AB06                    		MOV.L 30H[R0], R6
000028F4 39rrrr               W  		BSR __$ld_clust
000028F7 4761                    		CMP R6, R1
000028F9 20rr                    		BEQ L1483
000028FB                         L1481:	; bb79
000028FB 6602                    		MOV.L #00000000H, R2
000028FD 710104                  		ADD #04H, R0, R1
                                 ;    2969 				res = dir_next(&dj, 0);	
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2969
00002900 39rrrr               W  		BSR __$dir_next
00002903 E301                    		MOV.L R1, [R0]
00002905                         L1482:	; bb79.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2965
00002905 EC01                    		MOV.L [R0], R1
00002907 6101                    		CMP #00H, R1
00002909 20rr                    		BEQ L1478
0000290B                         L1483:	; bb87
                                 ;    2970 			} while (res == FR_OK);
                                 ;    2971 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2971
0000290B EC01                    		MOV.L [R0], R1
0000290D 6141                    		CMP #04H, R1
0000290F 18                   S  		BNE L1485
00002910                         L1484:	; bb88
00002910 F80602                  		MOV.L #00000002H, [R0]
00002913                         L1485:	; bb94
                                 ;    2972 			if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2972
00002913 EC01                    		MOV.L [R0], R1
00002915 6101                    		CMP #00H, R1
00002917 21rr                    		BNE L1501
00002919                         L1486:	; bb101
                                 ;    2973 #if _USE_LFN
                                 ;    2974 			fno.lfname = buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2974
00002919 E5001B14                		MOV.L 6CH[R0], 50H[R0]
0000291D                         L1487:	; bb101.split
                                 ;    2975 			fno.lfsize = i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2975
0000291D E5000A15                		MOV.L 28H[R0], 54H[R0]
00002921                         L1488:	; bb101.split5
00002921 710238                  		ADD #38H, R0, R2
00002924 710104                  		ADD #04H, R0, R1
                                 ;    2976 #endif
                                 ;    2977 			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2977
00002927 39rrrr               W  		BSR __$get_fileinfo
0000292A                         L1489:	; bb101.split6
                                 ;    2978 			tp = fno.fname;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2978
0000292A 710141                  		ADD #41H, R0, R1
0000292D A309                    		MOV.L R1, 34H[R0]
0000292F                         L1490:	; bb101.split7
                                 ;    2979 #if _USE_LFN
                                 ;    2980 			if (*buff) tp = buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2980
0000292F AE89                    		MOV.L 6CH[R0], R1
00002931 581E                    		MOVU.B [R1], R14
00002933 610E                    		CMP #00H, R14
00002935 10                   S  		BEQ L1492
00002936                         L1491:	; bb109
00002936 E5001B0D                		MOV.L 6CH[R0], 34H[R0]
0000293A                         L1492:	; bb117
                                 ;    2981 #endif
                                 ;    2982 			for (n = 0; tp[n]; n++) ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2982
0000293A 3E0B00                  		MOV.L #00000000H, 2CH[R0]
0000293D 08                   S  		BRA L1494
0000293E                         L1493:	; bb118
0000293E AA89                    		MOV.L 2CH[R0], R1
00002940 6211                    		ADD #01H, R1
00002942 A289                    		MOV.L R1, 2CH[R0]
00002944                         L1494:	; bb121
00002944 AA89                    		MOV.L 2CH[R0], R1
00002946 AB0A                    		MOV.L 34H[R0], R2
00002948 FEC21E                  		MOVU.B [R2,R1], R14
0000294B 610E                    		CMP #00H, R14
0000294D 21rr                    		BNE L1493
0000294F                         L1495:	; bb131
                                 ;    2983 			if (i < n + 3) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2983
0000294F AA89                    		MOV.L 2CH[R0], R1
00002951 6231                    		ADD #03H, R1
00002953 0685010A                		CMP 28H[R0].L, R1
00002957 25rr                    		BLEU L1498
00002959                         L1496:	; bb132
                                 ;    2984 				res = FR_NOT_ENOUGH_CORE; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2984
00002959 F80611                  		MOV.L #00000011H, [R0]
0000295C 2Err                 B  		BRA L1501
0000295E                         L1497:	; bb141
0000295E AA8B                    		MOV.L 2CH[R0], R3
00002960 6013                    		SUB #01H, R3
00002962 AB0C                    		MOV.L 34H[R0], R4
00002964 A28B                    		MOV.L R3, 2CH[R0]
00002966 FEC43E                  		MOVU.B [R4,R3], R14
00002969 FE021E                  		MOV.B R14, [R2,R1]
0000296C                         L1498:	; bb153
                                 ;    2985 			}
                                 ;    2986 			while (n) buff[--i] = tp[--n];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2986
0000296C AA82                    		MOV.L 28H[R0], R2
0000296E 6012                    		SUB #01H, R2
00002970 AA8B                    		MOV.L 2CH[R0], R3
00002972 AE89                    		MOV.L 6CH[R0], R1
00002974 A282                    		MOV.L R2, 28H[R0]
00002976 6103                    		CMP #00H, R3
00002978 21rr                    		BNE L1497
0000297A                         L1499:	; bb158
0000297A 754E2F                  		MOV.L #0000002FH, R14
                                 ;    2987 			buff[--i] = '/';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2987
0000297D FE021E                  		MOV.B R14, [R2,R1]
00002980                         L1500:	; bb164
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2957
00002980 A889                    		MOV.L 0CH[R0], R1
00002982 A301                    		MOV.L R1, 30H[R0]
00002984 6101                    		CMP #00H, R1
00002986 3Brrrr               W  		BNE L1471
00002989                         L1501:	; bb172
                                 ;    2988 		}
                                 ;    2989 		tp = buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2989
00002989 E5001B0D                		MOV.L 6CH[R0], 34H[R0]
0000298D                         L1502:	; bb172.split
                                 ;    2990 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2990
0000298D EC01                    		MOV.L [R0], R1
0000298F 6101                    		CMP #00H, R1
00002991 21rr                    		BNE L1507
00002993                         L1503:	; bb176
                                 ;    2991 #if _VOLUMES >= 2
                                 ;    2992 			*tp++ = '0' + CurrVol;			/* Put drive number */
                                 ;    2993 			*tp++ = ':';
                                 ;    2994 #endif
                                 ;    2995 			if (i == len) {					/* Root-directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2995
00002993 AA81                    		MOV.L 28H[R0], R1
00002995 0685011A                		CMP 68H[R0].L, R1
00002999 21rr                    		BNE L1505
0000299B                         L1504:	; bb177
                                 ;    2996 				*tp++ = '/';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2996
0000299B AB09                    		MOV.L 34H[R0], R1
0000299D F8142F                  		MOV.B #2FH, [R1]
000029A0 AB09                    		MOV.L 34H[R0], R1
000029A2 6211                    		ADD #01H, R1
000029A4 A309                    		MOV.L R1, 34H[R0]
000029A6 2Err                 B  		BRA L1507
000029A8                         L1505:	; bb182
                                 ;    2997 			} else {						/* Sub-directroy */
                                 ;    2998 				do		/* Add stacked path str */
                                 ;    2999 					*tp++ = buff[i++];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2999
000029A8 AA81                    		MOV.L 28H[R0], R1
000029AA AE8A                    		MOV.L 6CH[R0], R2
000029AC FEC21E                  		MOVU.B [R2,R1], R14
000029AF AB09                    		MOV.L 34H[R0], R1
000029B1 C31E                    		MOV.B R14, [R1]
000029B3 AB09                    		MOV.L 34H[R0], R1
000029B5 6211                    		ADD #01H, R1
000029B7 A309                    		MOV.L R1, 34H[R0]
000029B9 AA81                    		MOV.L 28H[R0], R1
000029BB 6211                    		ADD #01H, R1
000029BD A281                    		MOV.L R1, 28H[R0]
000029BF                         L1506:	; bb182.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",2998
000029BF AA81                    		MOV.L 28H[R0], R1
000029C1 0685011A                		CMP 68H[R0].L, R1
000029C5 23rr                    		BLTU L1505
000029C7                         L1507:	; bb208
                                 ;    3000 				while (i < len);
                                 ;    3001 			}
                                 ;    3002 		}
                                 ;    3003 		*tp = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3003
000029C7 AB09                    		MOV.L 34H[R0], R1
000029C9 F81400                  		MOV.B #00H, [R1]
000029CC                         L1508:	; bb214
                                 ;    3004 		FREE_BUF();
                                 ;    3005 	}
                                 ;    3006 
                                 ;    3007 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3007
000029CC EC01                    		MOV.L [R0], R1
000029CE A609                    		MOV.L R1, 64H[R0]
000029D0                         L1509:	; bb214.split
                                 ;    3008 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3008
000029D0 3F661D                  		RTSD #74H, R6-R6
000029D3                         _f_lseek:
                                 		.STACK	_f_lseek=44
                                 ;    3009 #endif /* _FS_RPATH >= 2 */
                                 ;    3010 #endif /* _FS_RPATH >= 1 */
                                 ;    3011 
                                 ;    3012 
                                 ;    3013 
                                 ;    3014 #if _FS_MINIMIZE <= 2
                                 ;    3015 /*-----------------------------------------------------------------------*/
                                 ;    3016 /* Seek File R/W Pointer                                                 */
                                 ;    3017 /*-----------------------------------------------------------------------*/
                                 ;    3018 
                                 ;    3019 FRESULT f_lseek (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3019
000029D3 7100D8                  		ADD #0FFFFFFD8H, R0
000029D6 A209                    		MOV.L R1, 24H[R0]
000029D8 A202                    		MOV.L R2, 20H[R0]
                                 ;    3020 	FIL* fp,		/* Pointer to the file object */
                                 ;    3021 	DWORD ofs		/* File pointer from top of file */
                                 ;    3022 )
                                 ;    3023 {
                                 ;    3024 	FRESULT res;
                                 ;    3025 
                                 ;    3026 
                                 ;    3027 	res = validate(fp);					/* Check validity of the object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3027
000029DA AA09                    		MOV.L 24H[R0], R1
000029DC 39rrrr               W  		BSR __$validate
000029DF A081                    		MOV.L R1, 08H[R0]
000029E1                         L1511:	; entry.split
                                 ;    3028 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3028
000029E1 A881                    		MOV.L 08H[R0], R1
000029E3 6101                    		CMP #00H, R1
000029E5 10                   S  		BEQ L1513
000029E6                         L1512:	; bb11
000029E6 E5000201                		MOV.L 08H[R0], 04H[R0]
000029EA 38rrrr               W  		BRA L1590
000029ED                         L1513:	; bb18
                                 ;    3029 	if (fp->err)						/* Check error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3029
000029ED AA09                    		MOV.L 24H[R0], R1
000029EF B199                    		MOVU.B 07H[R1], R1
000029F1 6101                    		CMP #00H, R1
000029F3 10                   S  		BEQ L1515
000029F4                         L1514:	; bb19
                                 ;    3030 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3030
000029F4 AA09                    		MOV.L 24H[R0], R1
000029F6 B199                    		MOVU.B 07H[R1], R1
000029F8 A009                    		MOV.L R1, 04H[R0]
000029FA 38rrrr               W  		BRA L1590
000029FD                         L1515:	; bb33
                                 ;    3031 
                                 ;    3032 #if _USE_FASTSEEK
                                 ;    3033 	if (fp->cltbl) {	/* Fast seek */
                                 ;    3034 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
                                 ;    3035 
                                 ;    3036 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
                                 ;    3037 			tbl = fp->cltbl;
                                 ;    3038 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
                                 ;    3039 			cl = fp->sclust;			/* Top of the chain */
                                 ;    3040 			if (cl) {
                                 ;    3041 				do {
                                 ;    3042 					/* Get a fragment */
                                 ;    3043 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
                                 ;    3044 					do {
                                 ;    3045 						pcl = cl; ncl++;
                                 ;    3046 						cl = get_fat(fp->fs, cl);
                                 ;    3047 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
                                 ;    3048 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 ;    3049 					} while (cl == pcl + 1);
                                 ;    3050 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
                                 ;    3051 						*tbl++ = ncl; *tbl++ = tcl;
                                 ;    3052 					}
                                 ;    3053 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
                                 ;    3054 			}
                                 ;    3055 			*fp->cltbl = ulen;	/* Number of items used */
                                 ;    3056 			if (ulen <= tlen)
                                 ;    3057 				*tbl = 0;		/* Terminate table */
                                 ;    3058 			else
                                 ;    3059 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
                                 ;    3060 
                                 ;    3061 		} else {						/* Fast seek */
                                 ;    3062 			if (ofs > fp->fsize)		/* Clip offset at the file size */
                                 ;    3063 				ofs = fp->fsize;
                                 ;    3064 			fp->fptr = ofs;				/* Set file pointer */
                                 ;    3065 			if (ofs) {
                                 ;    3066 				fp->clust = clmt_clust(fp, ofs - 1);
                                 ;    3067 				dsc = clust2sect(fp->fs, fp->clust);
                                 ;    3068 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
                                 ;    3069 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
                                 ;    3070 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
                                 ;    3071 #if !_FS_TINY
                                 ;    3072 #if !_FS_READONLY
                                 ;    3073 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
                                 ;    3074 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 ;    3075 							ABORT(fp->fs, FR_DISK_ERR);
                                 ;    3076 						fp->flag &= ~FA__DIRTY;
                                 ;    3077 					}
                                 ;    3078 #endif
                                 ;    3079 					if (disk_read(fp->fs->drv, fp->buf, dsc, 1) != RES_OK)	/* Load current sector */
                                 ;    3080 						ABORT(fp->fs, FR_DISK_ERR);
                                 ;    3081 #endif
                                 ;    3082 					fp->dsect = dsc;
                                 ;    3083 				}
                                 ;    3084 			}
                                 ;    3085 		}
                                 ;    3086 	} else
                                 ;    3087 #endif
                                 ;    3088 
                                 ;    3089 	/* Normal Seek */
                                 ;    3090 	{
                                 ;    3091 		DWORD clst, bcs, nsect, ifptr;
                                 ;    3092 
                                 ;    3093 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3093
000029FD AA09                    		MOV.L 24H[R0], R1
000029FF AA02                    		MOV.L 20H[R0], R2
00002A01 06851203                		CMP 0CH[R1].L, R2
00002A05 24rr                    		BGTU L1517
00002A07 2Err                 B  		BRA L1522
00002A09                         L1516:	; bb34
                                 ;    3094 #if !_FS_READONLY
                                 ;    3095 			 && !(fp->flag & FA_WRITE)
                                 ;    3096 #endif
                                 ;    3097 			) ofs = fp->fsize;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3097
00002A09 AA09                    		MOV.L 24H[R0], R1
00002A0B E5100308                		MOV.L 0CH[R1], 20H[R0]
00002A0F 2Err                 B  		BRA L1524
00002A11                         L1517:	; bb44
00002A11 AA09                    		MOV.L 24H[R0], R1
00002A13 F51106                  		BTST #01H, 06H[R1].B
00002A16 10                   S  		BEQ L1519
00002A17                         L1518:	; bb52
00002A17 F80600                  		MOV.L #00000000H, [R0]
00002A1A 08                   S  		BRA L1520
00002A1B                         L1519:	; bb53
00002A1B F80601                  		MOV.L #00000001H, [R0]
00002A1E                         L1520:	; bb54
00002A1E EC01                    		MOV.L [R0], R1
00002A20 6101                    		CMP #00H, R1
00002A22 10                   S  		BEQ L1522
00002A23                         L1521:	; bb57
00002A23 F80601                  		MOV.L #00000001H, [R0]
00002A26 08                   S  		BRA L1523
00002A27                         L1522:	; bb58
00002A27 F80600                  		MOV.L #00000000H, [R0]
00002A2A                         L1523:	; bb59
00002A2A EC01                    		MOV.L [R0], R1
00002A2C 6101                    		CMP #00H, R1
00002A2E 21rr                    		BNE L1516
00002A30                         L1524:	; bb64
                                 ;    3098 
                                 ;    3099 		ifptr = fp->fptr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3099
00002A30 AA09                    		MOV.L 24H[R0], R1
00002A32 E5100206                		MOV.L 08H[R1], 18H[R0]
00002A36                         L1525:	; bb64.split
                                 ;    3100 		fp->fptr = nsect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3100
00002A36 AA09                    		MOV.L 24H[R0], R1
00002A38 3E0500                  		MOV.L #00000000H, 14H[R0]
00002A3B 3E1200                  		MOV.L #00000000H, 08H[R1]
00002A3E                         L1526:	; bb64.split1
                                 ;    3101 		if (ofs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3101
00002A3E AA01                    		MOV.L 20H[R0], R1
00002A40 6101                    		CMP #00H, R1
00002A42 3Arrrr               W  		BEQ L1572
00002A45                         L1527:	; bb72
                                 ;    3102 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3102
00002A45 AA09                    		MOV.L 24H[R0], R1
00002A47 EC11                    		MOV.L [R1], R1
00002A49 B091                    		MOVU.B 02H[R1], R1
00002A4B 6C91                    		SHLL #09H, R1
00002A4D A101                    		MOV.L R1, 10H[R0]
00002A4F                         L1528:	; bb72.split
                                 ;    3103 			if (ifptr > 0 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3103
00002A4F A981                    		MOV.L 18H[R0], R1
00002A51 6101                    		CMP #00H, R1
00002A53 21rr                    		BNE L1541
00002A55 2Err                 B  		BRA L1543
00002A57                         L1529:	; bb81
                                 ;    3104 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
                                 ;    3105 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3105
00002A57 A982                    		MOV.L 18H[R0], R2
00002A59 6012                    		SUB #01H, R2
00002A5B A903                    		MOV.L 10H[R0], R3
00002A5D 6013                    		SUB #01H, R3
00002A5F 7E03                    		NOT R3
00002A61 5332                    		AND R3, R2
00002A63 A092                    		MOV.L R2, 08H[R1]
00002A65                         L1530:	; bb81.split
                                 ;    3106 				ofs -= fp->fptr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3106
00002A65 AA01                    		MOV.L 20H[R0], R1
00002A67 AA0A                    		MOV.L 24H[R0], R2
00002A69 06812102                		SUB 08H[R2].L, R1
00002A6D A201                    		MOV.L R1, 20H[R0]
00002A6F                         L1531:	; bb81.split2
                                 ;    3107 				clst = fp->clust;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3107
00002A6F AA09                    		MOV.L 24H[R0], R1
00002A71 E5100503                		MOV.L 14H[R1], 0CH[R0]
00002A75 2Err                 B  		BRA L1545
00002A77                         L1532:	; bb98
                                 ;    3108 			} else {									/* When seek to back cluster, */
                                 ;    3109 				clst = fp->sclust;						/* start from the first cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3109
00002A77 E5100403                		MOV.L 10H[R1], 0CH[R0]
00002A7B                         L1533:	; bb98.split
                                 ;    3110 #if !_FS_READONLY
                                 ;    3111 				if (clst == 0) {						/* If no cluster chain, create a new chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3111
00002A7B A889                    		MOV.L 0CH[R0], R1
00002A7D 6101                    		CMP #00H, R1
00002A7F 21rr                    		BNE L1540
00002A81                         L1534:	; bb103
                                 ;    3112 					clst = create_chain(fp->fs, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3112
00002A81 AA09                    		MOV.L 24H[R0], R1
00002A83 EC11                    		MOV.L [R1], R1
00002A85 6602                    		MOV.L #00000000H, R2
00002A87 39rrrr               W  		BSR __$create_chain
00002A8A A089                    		MOV.L R1, 0CH[R0]
00002A8C                         L1535:	; bb103.split
                                 ;    3113 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3113
00002A8C A889                    		MOV.L 0CH[R0], R1
00002A8E 6111                    		CMP #01H, R1
00002A90 21rr                    		BNE L1537
00002A92                         L1536:	; bb109
00002A92 AA09                    		MOV.L 24H[R0], R1
00002A94 3C1702                  		MOV.B #02H, 07H[R1]
00002A97 3E0102                  		MOV.L #00000002H, 04H[R0]
00002A9A 38rrrr               W  		BRA L1590
00002A9D                         L1537:	; bb118
                                 ;    3114 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3114
00002A9D A889                    		MOV.L 0CH[R0], R1
00002A9F 7501FF                  		CMP #0FFFFFFFFH, R1
00002AA2 AA09                    		MOV.L 24H[R0], R1
00002AA4 18                   S  		BNE L1539
00002AA5                         L1538:	; bb119
00002AA5 3C1701                  		MOV.B #01H, 07H[R1]
00002AA8 3E0101                  		MOV.L #00000001H, 04H[R0]
00002AAB 38rrrr               W  		BRA L1590
00002AAE                         L1539:	; bb127
                                 ;    3115 					fp->sclust = clst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3115
00002AAE E5010304                		MOV.L 0CH[R0], 10H[R1]
00002AB2                         L1540:	; bb135
                                 ;    3116 				}
                                 ;    3117 #endif
                                 ;    3118 				fp->clust = clst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3118
00002AB2 A889                    		MOV.L 0CH[R0], R1
00002AB4 AA0A                    		MOV.L 24H[R0], R2
00002AB6 A129                    		MOV.L R1, 14H[R2]
00002AB8 2Err                 B  		BRA L1545
00002ABA                         L1541:	; bb142
00002ABA AA01                    		MOV.L 20H[R0], R1
00002ABC 6011                    		SUB #01H, R1
00002ABE A902                    		MOV.L 10H[R0], R2
00002AC0 FC2721                  		DIVU R2, R1
00002AC3 A983                    		MOV.L 18H[R0], R3
00002AC5 6013                    		SUB #01H, R3
00002AC7 FC2723                  		DIVU R2, R3
00002ACA 4731                    		CMP R3, R1
00002ACC 23rr                    		BLTU L1543
00002ACE                         L1542:	; bb153
00002ACE F80601                  		MOV.L #00000001H, [R0]
00002AD1 08                   S  		BRA L1544
00002AD2                         L1543:	; bb154
00002AD2 F80600                  		MOV.L #00000000H, [R0]
00002AD5                         L1544:	; bb155
00002AD5 EC01                    		MOV.L [R0], R1
00002AD7 6101                    		CMP #00H, R1
00002AD9 AA09                    		MOV.L 24H[R0], R1
00002ADB 3Brrrr               W  		BNE L1529
00002ADE 2Err                 B  		BRA L1532
00002AE0                         L1545:	; bb161
                                 ;    3119 			}
                                 ;    3120 			if (clst != 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3120
00002AE0 A889                    		MOV.L 0CH[R0], R1
00002AE2 6101                    		CMP #00H, R1
00002AE4 21rr                    		BNE L1562
00002AE6 38rrrr               W  		BRA L1572
00002AE9                         L1546:	; bb164
                                 ;    3121 				while (ofs > bcs) {						/* Cluster following loop */
                                 ;    3122 #if !_FS_READONLY
                                 ;    3123 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3123
00002AE9 AA09                    		MOV.L 24H[R0], R1
00002AEB F51106                  		BTST #01H, 06H[R1].B
00002AEE EC11                    		MOV.L [R1], R1
00002AF0 A88A                    		MOV.L 0CH[R0], R2
00002AF2 20rr                    		BEQ L1550
00002AF4                         L1547:	; bb165
                                 ;    3124 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3124
00002AF4 39rrrr               W  		BSR __$create_chain
00002AF7 A089                    		MOV.L R1, 0CH[R0]
00002AF9                         L1548:	; bb165.split
                                 ;    3125 						if (clst == 0) {				/* When disk gets full, clip file size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3125
00002AF9 A889                    		MOV.L 0CH[R0], R1
00002AFB 6101                    		CMP #00H, R1
00002AFD 21rr                    		BNE L1551
00002AFF                         L1549:	; bb172
                                 ;    3126 							ofs = bcs; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3126
00002AFF E5000408                		MOV.L 10H[R0], 20H[R0]
00002B03 2Err                 B  		BRA L1563
00002B05                         L1550:	; bb180
                                 ;    3127 						}
                                 ;    3128 					} else
                                 ;    3129 #endif
                                 ;    3130 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3130
00002B05 39rrrr               W  		BSR _get_fat
00002B08 A089                    		MOV.L R1, 0CH[R0]
00002B0A                         L1551:	; bb195
                                 ;    3131 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3131
00002B0A A889                    		MOV.L 0CH[R0], R1
00002B0C 7501FF                  		CMP #0FFFFFFFFH, R1
00002B0F 21rr                    		BNE L1553
00002B11                         L1552:	; bb196
00002B11 AA09                    		MOV.L 24H[R0], R1
00002B13 3C1701                  		MOV.B #01H, 07H[R1]
00002B16 3E0101                  		MOV.L #00000001H, 04H[R0]
00002B19 38rrrr               W  		BRA L1590
00002B1C                         L1553:	; bb205
                                 ;    3132 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3132
00002B1C A889                    		MOV.L 0CH[R0], R1
00002B1E 6121                    		CMP #02H, R1
00002B20 23rr                    		BLTU L1556
00002B22 08                   S  		BRA L1555
00002B23                         L1554:	; bb206
00002B23 3C1702                  		MOV.B #02H, 07H[R1]
00002B26 3E0102                  		MOV.L #00000002H, 04H[R0]
00002B29 38rrrr               W  		BRA L1590
00002B2C                         L1555:	; bb213
00002B2C AA09                    		MOV.L 24H[R0], R1
00002B2E EC1E                    		MOV.L [R1], R14
00002B30 A889                    		MOV.L 0CH[R0], R1
00002B32 0685E106                		CMP 18H[R14].L, R1
00002B36 23rr                    		BLTU L1557
00002B38                         L1556:	; bb222
00002B38 F80601                  		MOV.L #00000001H, [R0]
00002B3B 08                   S  		BRA L1558
00002B3C                         L1557:	; bb223
00002B3C F80600                  		MOV.L #00000000H, [R0]
00002B3F                         L1558:	; bb224
00002B3F EC01                    		MOV.L [R0], R1
00002B41 6101                    		CMP #00H, R1
00002B43 AA09                    		MOV.L 24H[R0], R1
00002B45 21rr                    		BNE L1554
00002B47                         L1559:	; bb229
                                 ;    3133 					fp->clust = clst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3133
00002B47 E5010305                		MOV.L 0CH[R0], 14H[R1]
00002B4B                         L1560:	; bb229.split
                                 ;    3134 					fp->fptr += bcs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3134
00002B4B AA09                    		MOV.L 24H[R0], R1
00002B4D A892                    		MOV.L 08H[R1], R2
00002B4F 06890204                		ADD 10H[R0].L, R2
00002B53 A092                    		MOV.L R2, 08H[R1]
00002B55                         L1561:	; bb229.split3
                                 ;    3135 					ofs -= bcs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3135
00002B55 AA01                    		MOV.L 20H[R0], R1
00002B57 06810104                		SUB 10H[R0].L, R1
00002B5B A201                    		MOV.L R1, 20H[R0]
00002B5D                         L1562:	; bb241
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3121
00002B5D AA01                    		MOV.L 20H[R0], R1
00002B5F 06850104                		CMP 10H[R0].L, R1
00002B63 24rr                    		BGTU L1546
00002B65                         L1563:	; bb248
                                 ;    3136 				}
                                 ;    3137 				fp->fptr += ofs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3137
00002B65 AA09                    		MOV.L 24H[R0], R1
00002B67 A892                    		MOV.L 08H[R1], R2
00002B69 06890208                		ADD 20H[R0].L, R2
00002B6D A092                    		MOV.L R2, 08H[R1]
00002B6F                         L1564:	; bb248.split
00002B6F FBEAFF01                		MOV.L #000001FFH, R14
                                 ;    3138 				if (ofs % SS(fp->fs)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3138
00002B73 06A10C0E08              		TST 20H[R0].L, R14
00002B78 20rr                    		BEQ L1572
00002B7A                         L1565:	; bb255
                                 ;    3139 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3139
00002B7A AA09                    		MOV.L 24H[R0], R1
00002B7C EC11                    		MOV.L [R1], R1
00002B7E A88A                    		MOV.L 0CH[R0], R2
00002B80 39rrrr               W  		BSR _clust2sect
00002B83 A109                    		MOV.L R1, 14H[R0]
00002B85                         L1566:	; bb255.split
                                 ;    3140 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3140
00002B85 A909                    		MOV.L 14H[R0], R1
00002B87 6101                    		CMP #00H, R1
00002B89 21rr                    		BNE L1568
00002B8B 2Err                 B  		BRA L1569
00002B8D                         L1567:	; bb262
00002B8D AA09                    		MOV.L 24H[R0], R1
00002B8F 3C1702                  		MOV.B #02H, 07H[R1]
00002B92 3E0102                  		MOV.L #00000002H, 04H[R0]
00002B95 38rrrr               W  		BRA L1590
00002B98                         L1568:	; bb269
00002B98 F80600                  		MOV.L #00000000H, [R0]
00002B9B 08                   S  		BRA L1570
00002B9C                         L1569:	; bb270
00002B9C F80601                  		MOV.L #00000001H, [R0]
00002B9F                         L1570:	; bb271
00002B9F EC01                    		MOV.L [R0], R1
00002BA1 6101                    		CMP #00H, R1
00002BA3 21rr                    		BNE L1567
00002BA5                         L1571:	; bb275
                                 ;    3141 					nsect += ofs / SS(fp->fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3141
00002BA5 AA01                    		MOV.L 20H[R0], R1
00002BA7 6891                    		SHLR #09H, R1
00002BA9 06890105                		ADD 14H[R0].L, R1
00002BAD A109                    		MOV.L R1, 14H[R0]
00002BAF                         L1572:	; bb296
                                 ;    3142 				}
                                 ;    3143 			}
                                 ;    3144 		}
                                 ;    3145 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3145
00002BAF AA09                    		MOV.L 24H[R0], R1
00002BB1 FBEAFF01                		MOV.L #000001FFH, R14
00002BB5 06A10C1E02              		TST 08H[R1].L, R14
00002BBA 21rr                    		BNE L1582
00002BBC 2Err                 B  		BRA L1584
00002BBE                         L1573:	; bb298
                                 ;    3146 #if !_FS_TINY
                                 ;    3147 #if !_FS_READONLY
                                 ;    3148 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3148
00002BBE AA09                    		MOV.L 24H[R0], R1
00002BC0 F51606                  		BTST #06H, 06H[R1].B
00002BC3 20rr                    		BEQ L1578
00002BC5                         L1574:	; bb300
                                 ;    3149 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3149
00002BC5 AA0A                    		MOV.L 24H[R0], R2
00002BC7 A9A3                    		MOV.L 18H[R2], R3
00002BC9 EC21                    		MOV.L [R2], R1
00002BCB B019                    		MOVU.B 01H[R1], R1
00002BCD 712224                  		ADD #24H, R2
00002BD0 6614                    		MOV.L #00000001H, R4
00002BD2 05rrrrrr             A  		BSR _disk_write
00002BD6 6101                    		CMP #00H, R1
00002BD8 AA09                    		MOV.L 24H[R0], R1
00002BDA 10                   S  		BEQ L1577
00002BDB                         L1575:	; bb301
                                 ;    3150 					ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3150
00002BDB 3C1701                  		MOV.B #01H, 07H[R1]
00002BDE                         L1576:	; bb301.split
00002BDE 3E0101                  		MOV.L #00000001H, 04H[R0]
00002BE1 2Err                 B  		BRA L1590
00002BE3                         L1577:	; bb320
                                 ;    3151 				fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3151
00002BE3 F11E06                  		BCLR #06H, 06H[R1].B
00002BE6                         L1578:	; bb336
                                 ;    3152 			}
                                 ;    3153 #endif
                                 ;    3154 			if (disk_read(fp->fs->drv, fp->buf, nsect, 1) != RES_OK)	/* Fill sector cache */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3154
00002BE6 AA0A                    		MOV.L 24H[R0], R2
00002BE8 EC21                    		MOV.L [R2], R1
00002BEA B019                    		MOVU.B 01H[R1], R1
00002BEC A90B                    		MOV.L 14H[R0], R3
00002BEE 712224                  		ADD #24H, R2
00002BF1 6614                    		MOV.L #00000001H, R4
00002BF3 05rrrrrr             A  		BSR _disk_read
00002BF7 6101                    		CMP #00H, R1
00002BF9 AA09                    		MOV.L 24H[R0], R1
00002BFB 10                   S  		BEQ L1581
00002BFC                         L1579:	; bb337
                                 ;    3155 				ABORT(fp->fs, FR_DISK_ERR);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3155
00002BFC 3C1701                  		MOV.B #01H, 07H[R1]
00002BFF                         L1580:	; bb337.split
00002BFF 3E0101                  		MOV.L #00000001H, 04H[R0]
00002C02 2Err                 B  		BRA L1590
00002C04                         L1581:	; bb354
                                 ;    3156 #endif
                                 ;    3157 			fp->dsect = nsect;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3157
00002C04 E5010506                		MOV.L 14H[R0], 18H[R1]
00002C08 2Err                 B  		BRA L1586
00002C0A                         L1582:	; bb364
00002C0A AA09                    		MOV.L 24H[R0], R1
00002C0C A90A                    		MOV.L 14H[R0], R2
00002C0E 06851206                		CMP 18H[R1].L, R2
00002C12 10                   S  		BEQ L1584
00002C13                         L1583:	; bb371
00002C13 F80601                  		MOV.L #00000001H, [R0]
00002C16 08                   S  		BRA L1585
00002C17                         L1584:	; bb372
00002C17 F80600                  		MOV.L #00000000H, [R0]
00002C1A                         L1585:	; bb373
00002C1A EC01                    		MOV.L [R0], R1
00002C1C 6101                    		CMP #00H, R1
00002C1E 21rr                    		BNE L1573
00002C20                         L1586:	; bb379
                                 ;    3158 		}
                                 ;    3159 #if !_FS_READONLY
                                 ;    3160 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3160
00002C20 AA09                    		MOV.L 24H[R0], R1
00002C22 A892                    		MOV.L 08H[R1], R2
00002C24 06851203                		CMP 0CH[R1].L, R2
00002C28 25rr                    		BLEU L1589
00002C2A                         L1587:	; bb380
                                 ;    3161 			fp->fsize = fp->fptr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3161
00002C2A AA09                    		MOV.L 24H[R0], R1
00002C2C E5110203                		MOV.L 08H[R1], 0CH[R1]
00002C30                         L1588:	; bb380.split
                                 ;    3162 			fp->flag |= FA__WRITTEN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3162
00002C30 AA09                    		MOV.L 24H[R0], R1
00002C32 F11506                  		BSET #05H, 06H[R1].B
00002C35                         L1589:	; bb401
                                 ;    3163 		}
                                 ;    3164 #endif
                                 ;    3165 	}
                                 ;    3166 
                                 ;    3167 	LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3167
00002C35 E5000201                		MOV.L 08H[R0], 04H[R0]
00002C39                         L1590:	; bb404
00002C39 A809                    		MOV.L 04H[R0], R1
00002C3B A189                    		MOV.L R1, 1CH[R0]
                                 ;    3168 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3168
00002C3D 670A                    		RTSD #28H
00002C3F                         _f_opendir:
                                 		.STACK	_f_opendir=48
                                 ;    3169 
                                 ;    3170 
                                 ;    3171 
                                 ;    3172 #if _FS_MINIMIZE <= 1
                                 ;    3173 /*-----------------------------------------------------------------------*/
                                 ;    3174 /* Create a Directory Object                                             */
                                 ;    3175 /*-----------------------------------------------------------------------*/
                                 ;    3176 
                                 ;    3177 FRESULT f_opendir (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3177
00002C3F 7EA6                    		PUSH.L R6
00002C41 7100D8                  		ADD #0FFFFFFD8H, R0
00002C44 A209                    		MOV.L R1, 24H[R0]
00002C46 A202                    		MOV.L R2, 20H[R0]
                                 ;    3178 	DIR* dp,			/* Pointer to directory object to create */
                                 ;    3179 	const TCHAR* path	/* Pointer to the directory path */
                                 ;    3180 )
                                 ;    3181 {
                                 ;    3182 	FRESULT res;
                                 ;    3183 	FATFS* fs;
                                 ;    3184 	DEF_NAMEBUF;
                                 ;    3185 
                                 ;    3186 
                                 ;    3187 	if (!dp) return FR_INVALID_OBJECT;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3187
00002C48 AA09                    		MOV.L 24H[R0], R1
00002C4A 6101                    		CMP #00H, R1
00002C4C 18                   S  		BNE L1593
00002C4D 2Err                 B  		BRA L1594
00002C4F                         L1592:	; bb6
00002C4F 3E0109                  		MOV.L #00000009H, 04H[R0]
00002C52 38rrrr               W  		BRA L1615
00002C55                         L1593:	; bb11
00002C55 F80600                  		MOV.L #00000000H, [R0]
00002C58 08                   S  		BRA L1595
00002C59                         L1594:	; bb12
00002C59 F80601                  		MOV.L #00000001H, [R0]
00002C5C                         L1595:	; bb13
00002C5C EC01                    		MOV.L [R0], R1
00002C5E 6101                    		CMP #00H, R1
00002C60 21rr                    		BNE L1592
00002C62                         L1596:	; bb16
00002C62 6603                    		MOV.L #00000000H, R3
00002C64 710220                  		ADD #20H, R0, R2
00002C67 71010C                  		ADD #0CH, R0, R1
                                 ;    3188 
                                 ;    3189 	/* Get logical drive number */
                                 ;    3190 	res = find_volume(&fs, &path, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3190
00002C6A 39rrrr               W  		BSR __$find_volume
00002C6D A081                    		MOV.L R1, 08H[R0]
00002C6F                         L1597:	; bb16.split
                                 ;    3191 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3191
00002C6F A881                    		MOV.L 08H[R0], R1
00002C71 6101                    		CMP #00H, R1
00002C73 21rr                    		BNE L1612
00002C75                         L1598:	; bb19
                                 ;    3192 		dp->fs = fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3192
00002C75 A889                    		MOV.L 0CH[R0], R1
00002C77 AA0A                    		MOV.L 24H[R0], R2
00002C79 E321                    		MOV.L R1, [R2]
00002C7B                         L1599:	; bb19.split
                                 ;    3193 		INIT_BUF(*dp);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3193
00002C7B AA09                    		MOV.L 24H[R0], R1
00002C7D 710210                  		ADD #10H, R0, R2
00002C80 A192                    		MOV.L R2, 18H[R1]
00002C82                         L1600:	; bb19.split1
00002C82 AA09                    		MOV.L 24H[R0], R1
00002C84 FB22rrrrrrrr            		MOV.L #__$LfnBuf, R2
00002C8A A19A                    		MOV.L R2, 1CH[R1]
00002C8C                         L1601:	; bb19.split2
                                 ;    3194 		res = follow_path(dp, path);			/* Follow the path to the directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3194
00002C8C AA02                    		MOV.L 20H[R0], R2
00002C8E AA09                    		MOV.L 24H[R0], R1
00002C90 39rrrr               W  		BSR __$follow_path
00002C93 A081                    		MOV.L R1, 08H[R0]
00002C95                         L1602:	; bb19.split3
                                 ;    3195 		FREE_BUF();
                                 ;    3196 		if (res == FR_OK) {						/* Follow completed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3196
00002C95 A881                    		MOV.L 08H[R0], R1
00002C97 6101                    		CMP #00H, R1
00002C99 21rr                    		BNE L1610
00002C9B                         L1603:	; bb33
                                 ;    3197 			if (dp->dir) {						/* It is not the origin directory itself */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3197
00002C9B AA09                    		MOV.L 24H[R0], R1
00002C9D A919                    		MOV.L 14H[R1], R1
00002C9F 6101                    		CMP #00H, R1
00002CA1 20rr                    		BEQ L1607
00002CA3                         L1604:	; bb35
                                 ;    3198 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3198
00002CA3 AA09                    		MOV.L 24H[R0], R1
00002CA5 A919                    		MOV.L 14H[R1], R1
00002CA7 F5140B                  		BTST #04H, 0BH[R1].B
00002CAA 20rr                    		BEQ L1606
00002CAC                         L1605:	; bb36
                                 ;    3199 					dp->sclust = ld_clust(fs, dp->dir);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3199
00002CAC AA0E                    		MOV.L 24H[R0], R6
00002CAE A96A                    		MOV.L 14H[R6], R2
00002CB0 A889                    		MOV.L 0CH[R0], R1
00002CB2 39rrrr               W  		BSR __$ld_clust
00002CB5 A0E1                    		MOV.L R1, 08H[R6]
00002CB7 08                   S  		BRA L1607
00002CB8                         L1606:	; bb44
                                 ;    3200 				else							/* The object is a file */
                                 ;    3201 					res = FR_NO_PATH;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3201
00002CB8 3E0205                  		MOV.L #00000005H, 08H[R0]
00002CBB                         L1607:	; bb63
                                 ;    3202 			}
                                 ;    3203 			if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3203
00002CBB A881                    		MOV.L 08H[R0], R1
00002CBD 6101                    		CMP #00H, R1
00002CBF 21rr                    		BNE L1610
00002CC1                         L1608:	; bb64
                                 ;    3204 				dp->id = fs->id;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3204
00002CC1 A889                    		MOV.L 0CH[R0], R1
00002CC3 AA0A                    		MOV.L 24H[R0], R2
00002CC5 D5120302                		MOV.W 06H[R1], 04H[R2]
00002CC9                         L1609:	; bb64.split
                                 ;    3205 				res = dir_sdi(dp, 0);			/* Rewind directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3205
00002CC9 AA09                    		MOV.L 24H[R0], R1
00002CCB 6602                    		MOV.L #00000000H, R2
00002CCD 39rrrr               W  		BSR __$dir_sdi
00002CD0 A081                    		MOV.L R1, 08H[R0]
00002CD2                         L1610:	; bb82
                                 ;    3206 #if _FS_LOCK
                                 ;    3207 				if (res == FR_OK) {
                                 ;    3208 					if (dp->sclust) {
                                 ;    3209 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
                                 ;    3210 						if (!dp->lockid)
                                 ;    3211 							res = FR_TOO_MANY_OPEN_FILES;
                                 ;    3212 					} else {
                                 ;    3213 						dp->lockid = 0;	/* Root directory need not to be locked */
                                 ;    3214 					}
                                 ;    3215 				}
                                 ;    3216 #endif
                                 ;    3217 			}
                                 ;    3218 		}
                                 ;    3219 		if (res == FR_NO_FILE) res = FR_NO_PATH;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3219
00002CD2 A881                    		MOV.L 08H[R0], R1
00002CD4 6141                    		CMP #04H, R1
00002CD6 18                   S  		BNE L1612
00002CD7                         L1611:	; bb83
00002CD7 3E0205                  		MOV.L #00000005H, 08H[R0]
00002CDA                         L1612:	; bb94
                                 ;    3220 	}
                                 ;    3221 	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3221
00002CDA A881                    		MOV.L 08H[R0], R1
00002CDC 6101                    		CMP #00H, R1
00002CDE 10                   S  		BEQ L1614
00002CDF                         L1613:	; bb95
00002CDF AA09                    		MOV.L 24H[R0], R1
00002CE1 F81600                  		MOV.L #00000000H, [R1]
00002CE4                         L1614:	; bb102
                                 ;    3222 
                                 ;    3223 	LEAVE_FF(fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3223
00002CE4 E5000201                		MOV.L 08H[R0], 04H[R0]
00002CE8                         L1615:	; bb105
00002CE8 A809                    		MOV.L 04H[R0], R1
00002CEA A189                    		MOV.L R1, 1CH[R0]
                                 ;    3224 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3224
00002CEC 3F660B                  		RTSD #2CH, R6-R6
00002CEF                         _f_closedir:
                                 		.STACK	_f_closedir=16
                                 ;    3225 
                                 ;    3226 
                                 ;    3227 
                                 ;    3228 
                                 ;    3229 /*-----------------------------------------------------------------------*/
                                 ;    3230 /* Close Directory                                                       */
                                 ;    3231 /*-----------------------------------------------------------------------*/
                                 ;    3232 
                                 ;    3233 FRESULT f_closedir (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3233
00002CEF 60C0                    		SUB #0CH, R0
00002CF1 A081                    		MOV.L R1, 08H[R0]
                                 ;    3234 	DIR *dp		/* Pointer to the directory object to be closed */
                                 ;    3235 )
                                 ;    3236 {
                                 ;    3237 	FRESULT res;
                                 ;    3238 
                                 ;    3239 
                                 ;    3240 	res = validate(dp);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3240
00002CF3 39rrrr               W  		BSR __$validate
00002CF6 E301                    		MOV.L R1, [R0]
00002CF8                         L1617:	; entry.split
                                 ;    3241 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3241
00002CF8 EC01                    		MOV.L [R0], R1
00002CFA 6101                    		CMP #00H, R1
00002CFC 18                   S  		BNE L1619
00002CFD                         L1618:	; bb6
                                 ;    3242 #if _FS_REENTRANT
                                 ;    3243 		FATFS *fs = dp->fs;
                                 ;    3244 #endif
                                 ;    3245 #if _FS_LOCK
                                 ;    3246 		if (dp->lockid)				/* Decrement sub-directory open counter */
                                 ;    3247 			res = dec_lock(dp->lockid);
                                 ;    3248 		if (res == FR_OK)
                                 ;    3249 #endif
                                 ;    3250 			dp->fs = 0;				/* Invalidate directory object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3250
00002CFD A881                    		MOV.L 08H[R0], R1
00002CFF F81600                  		MOV.L #00000000H, [R1]
00002D02                         L1619:	; bb12
                                 ;    3251 #if _FS_REENTRANT
                                 ;    3252 		unlock_fs(fs, FR_OK);		/* Unlock volume */
                                 ;    3253 #endif
                                 ;    3254 	}
                                 ;    3255 	return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3255
00002D02 EC01                    		MOV.L [R0], R1
00002D04 A009                    		MOV.L R1, 04H[R0]
00002D06                         L1620:	; bb12.split
                                 ;    3256 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3256
00002D06 6703                    		RTSD #0CH
00002D08                         _f_readdir:
                                 		.STACK	_f_readdir=36
                                 ;    3257 
                                 ;    3258 
                                 ;    3259 
                                 ;    3260 
                                 ;    3261 /*-----------------------------------------------------------------------*/
                                 ;    3262 /* Read Directory Entries in Sequence                                    */
                                 ;    3263 /*-----------------------------------------------------------------------*/
                                 ;    3264 
                                 ;    3265 FRESULT f_readdir (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3265
00002D08 7100E0                  		ADD #0FFFFFFE0H, R0
00002D0B A189                    		MOV.L R1, 1CH[R0]
00002D0D A182                    		MOV.L R2, 18H[R0]
                                 ;    3266 	DIR* dp,			/* Pointer to the open directory object */
                                 ;    3267 	FILINFO* fno		/* Pointer to file information to return */
                                 ;    3268 )
                                 ;    3269 {
                                 ;    3270 	FRESULT res;
                                 ;    3271 	DEF_NAMEBUF;
                                 ;    3272 
                                 ;    3273 
                                 ;    3274 	res = validate(dp);						/* Check validity of the object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3274
00002D0F A989                    		MOV.L 1CH[R0], R1
00002D11 39rrrr               W  		BSR __$validate
00002D14 A009                    		MOV.L R1, 04H[R0]
00002D16                         L1622:	; entry.split
                                 ;    3275 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3275
00002D16 A809                    		MOV.L 04H[R0], R1
00002D18 6101                    		CMP #00H, R1
00002D1A 21rr                    		BNE L1640
00002D1C                         L1623:	; bb9
                                 ;    3276 		if (!fno) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3276
00002D1C A981                    		MOV.L 18H[R0], R1
00002D1E 6101                    		CMP #00H, R1
00002D20 21rr                    		BNE L1637
00002D22 2Err                 B  		BRA L1638
00002D24                         L1624:	; bb10
00002D24 6602                    		MOV.L #00000000H, R2
                                 ;    3277 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3277
00002D26 39rrrr               W  		BSR __$dir_sdi
00002D29 A009                    		MOV.L R1, 04H[R0]
00002D2B 2Err                 B  		BRA L1640
00002D2D                         L1625:	; bb13
00002D2D 710208                  		ADD #08H, R0, R2
                                 ;    3278 		} else {
                                 ;    3279 			INIT_BUF(*dp);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3279
00002D30 A192                    		MOV.L R2, 18H[R1]
00002D32                         L1626:	; bb13.split
00002D32 A989                    		MOV.L 1CH[R0], R1
00002D34 FB22rrrrrrrr            		MOV.L #__$LfnBuf, R2
00002D3A A19A                    		MOV.L R2, 1CH[R1]
00002D3C                         L1627:	; bb13.split1
                                 ;    3280 			res = dir_read(dp, 0);			/* Read an item */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3280
00002D3C A989                    		MOV.L 1CH[R0], R1
00002D3E 6602                    		MOV.L #00000000H, R2
00002D40 39rrrr               W  		BSR __$dir_read
00002D43 A009                    		MOV.L R1, 04H[R0]
00002D45                         L1628:	; bb13.split2
                                 ;    3281 			if (res == FR_NO_FILE) {		/* Reached end of directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3281
00002D45 A809                    		MOV.L 04H[R0], R1
00002D47 6141                    		CMP #04H, R1
00002D49 18                   S  		BNE L1631
00002D4A                         L1629:	; bb22
                                 ;    3282 				dp->sect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3282
00002D4A A989                    		MOV.L 1CH[R0], R1
00002D4C 3E1400                  		MOV.L #00000000H, 10H[R1]
00002D4F                         L1630:	; bb22.split
                                 ;    3283 				res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3283
00002D4F 3E0100                  		MOV.L #00000000H, 04H[R0]
00002D52                         L1631:	; bb29
                                 ;    3284 			}
                                 ;    3285 			if (res == FR_OK) {				/* A valid entry is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3285
00002D52 A809                    		MOV.L 04H[R0], R1
00002D54 6101                    		CMP #00H, R1
00002D56 21rr                    		BNE L1640
00002D58                         L1632:	; bb30
                                 ;    3286 				get_fileinfo(dp, fno);		/* Get the object information */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3286
00002D58 A982                    		MOV.L 18H[R0], R2
00002D5A A989                    		MOV.L 1CH[R0], R1
00002D5C 39rrrr               W  		BSR __$get_fileinfo
00002D5F                         L1633:	; bb30.split
                                 ;    3287 				res = dir_next(dp, 0);		/* Increment index for next */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3287
00002D5F A989                    		MOV.L 1CH[R0], R1
00002D61 6602                    		MOV.L #00000000H, R2
00002D63 39rrrr               W  		BSR __$dir_next
00002D66 A009                    		MOV.L R1, 04H[R0]
00002D68                         L1634:	; bb30.split3
                                 ;    3288 				if (res == FR_NO_FILE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3288
00002D68 A809                    		MOV.L 04H[R0], R1
00002D6A 6141                    		CMP #04H, R1
00002D6C 21rr                    		BNE L1640
00002D6E                         L1635:	; bb36
                                 ;    3289 					dp->sect = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3289
00002D6E A989                    		MOV.L 1CH[R0], R1
00002D70 3E1400                  		MOV.L #00000000H, 10H[R1]
00002D73                         L1636:	; bb36.split
                                 ;    3290 					res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3290
00002D73 3E0100                  		MOV.L #00000000H, 04H[R0]
00002D76 2Err                 B  		BRA L1640
00002D78                         L1637:	; bb52
00002D78 F80600                  		MOV.L #00000000H, [R0]
00002D7B 08                   S  		BRA L1639
00002D7C                         L1638:	; bb53
00002D7C F80601                  		MOV.L #00000001H, [R0]
00002D7F                         L1639:	; bb54
00002D7F EC01                    		MOV.L [R0], R1
00002D81 6101                    		CMP #00H, R1
00002D83 A989                    		MOV.L 1CH[R0], R1
00002D85 21rr                    		BNE L1624
00002D87 2Err                 B  		BRA L1625
00002D89                         L1640:	; bb64
                                 ;    3291 				}
                                 ;    3292 			}
                                 ;    3293 			FREE_BUF();
                                 ;    3294 		}
                                 ;    3295 	}
                                 ;    3296 
                                 ;    3297 	LEAVE_FF(dp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3297
00002D89 A809                    		MOV.L 04H[R0], R1
00002D8B A109                    		MOV.L R1, 14H[R0]
00002D8D                         L1641:	; bb64.split
                                 ;    3298 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3298
00002D8D 6708                    		RTSD #20H
00002D8F                         _f_stat:
                                 		.STACK	_f_stat=68
                                 ;    3299 
                                 ;    3300 
                                 ;    3301 
                                 ;    3302 #if _FS_MINIMIZE == 0
                                 ;    3303 /*-----------------------------------------------------------------------*/
                                 ;    3304 /* Get File Status                                                       */
                                 ;    3305 /*-----------------------------------------------------------------------*/
                                 ;    3306 
                                 ;    3307 FRESULT f_stat (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3307
00002D8F 7100C0                  		ADD #0FFFFFFC0H, R0
00002D92 A389                    		MOV.L R1, 3CH[R0]
00002D94 A382                    		MOV.L R2, 38H[R0]
00002D96 6603                    		MOV.L #00000000H, R3
00002D98 71023C                  		ADD #3CH, R0, R2
00002D9B 710104                  		ADD #04H, R0, R1
                                 ;    3308 	const TCHAR* path,	/* Pointer to the file path */
                                 ;    3309 	FILINFO* fno		/* Pointer to file information to return */
                                 ;    3310 )
                                 ;    3311 {
                                 ;    3312 	FRESULT res;
                                 ;    3313 	DIR dj;
                                 ;    3314 	DEF_NAMEBUF;
                                 ;    3315 
                                 ;    3316 
                                 ;    3317 	/* Get logical drive number */
                                 ;    3318 	res = find_volume(&dj.fs, &path, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3318
00002D9E 39rrrr               W  		BSR __$find_volume
00002DA1 E301                    		MOV.L R1, [R0]
00002DA3                         L1643:	; entry.split
                                 ;    3319 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3319
00002DA3 EC01                    		MOV.L [R0], R1
00002DA5 6101                    		CMP #00H, R1
00002DA7 21rr                    		BNE L1652
00002DA9                         L1644:	; bb8
00002DA9 710128                  		ADD #28H, R0, R1
                                 ;    3320 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3320
00002DAC A189                    		MOV.L R1, 1CH[R0]
00002DAE                         L1645:	; bb8.split
00002DAE FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
00002DB4 A201                    		MOV.L R1, 20H[R0]
00002DB6                         L1646:	; bb8.split1
                                 ;    3321 		res = follow_path(&dj, path);	/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3321
00002DB6 AB8A                    		MOV.L 3CH[R0], R2
00002DB8 710104                  		ADD #04H, R0, R1
00002DBB 39rrrr               W  		BSR __$follow_path
00002DBE E301                    		MOV.L R1, [R0]
00002DC0                         L1647:	; bb8.split2
                                 ;    3322 		if (res == FR_OK) {				/* Follow completed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3322
00002DC0 EC01                    		MOV.L [R0], R1
00002DC2 6101                    		CMP #00H, R1
00002DC4 21rr                    		BNE L1652
00002DC6                         L1648:	; bb16
                                 ;    3323 			if (dj.dir) {		/* Found an object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3323
00002DC6 A981                    		MOV.L 18H[R0], R1
00002DC8 6101                    		CMP #00H, R1
00002DCA 20rr                    		BEQ L1651
00002DCC                         L1649:	; bb18
                                 ;    3324 				if (fno) get_fileinfo(&dj, fno);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3324
00002DCC AB81                    		MOV.L 38H[R0], R1
00002DCE 6101                    		CMP #00H, R1
00002DD0 20rr                    		BEQ L1652
00002DD2                         L1650:	; bb19
00002DD2 AB82                    		MOV.L 38H[R0], R2
00002DD4 710104                  		ADD #04H, R0, R1
00002DD7 39rrrr               W  		BSR __$get_fileinfo
00002DDA 08                   S  		BRA L1652
00002DDB                         L1651:	; bb25
                                 ;    3325 			} else {			/* It is root directory */
                                 ;    3326 				res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3326
00002DDB F80606                  		MOV.L #00000006H, [R0]
00002DDE                         L1652:	; bb41
                                 ;    3327 			}
                                 ;    3328 		}
                                 ;    3329 		FREE_BUF();
                                 ;    3330 	}
                                 ;    3331 
                                 ;    3332 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3332
00002DDE EC01                    		MOV.L [R0], R1
00002DE0 A309                    		MOV.L R1, 34H[R0]
00002DE2                         L1653:	; bb41.split
                                 ;    3333 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3333
00002DE2 6710                    		RTSD #40H
00002DE4                         _f_getfree:
                                 		.STACK	_f_getfree=60
                                 ;    3334 
                                 ;    3335 
                                 ;    3336 
                                 ;    3337 #if !_FS_READONLY
                                 ;    3338 /*-----------------------------------------------------------------------*/
                                 ;    3339 /* Get Number of Free Clusters                                           */
                                 ;    3340 /*-----------------------------------------------------------------------*/
                                 ;    3341 
                                 ;    3342 FRESULT f_getfree (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3342
00002DE4 7100C8                  		ADD #0FFFFFFC8H, R0
00002DE7 A309                    		MOV.L R1, 34H[R0]
00002DE9 A302                    		MOV.L R2, 30H[R0]
00002DEB A28B                    		MOV.L R3, 2CH[R0]
00002DED 660E                    		MOV.L #00000000H, R14
00002DEF 710234                  		ADD #34H, R0, R2
                                 ;    3343 	const TCHAR* path,	/* Path name of the logical drive number */
                                 ;    3344 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
                                 ;    3345 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
                                 ;    3346 )
                                 ;    3347 {
                                 ;    3348 	FRESULT res;
                                 ;    3349 	FATFS *fs;
                                 ;    3350 	DWORD n, clst, sect, stat;
                                 ;    3351 	UINT i;
                                 ;    3352 	BYTE fat, *p;
                                 ;    3353 
                                 ;    3354 
                                 ;    3355 	/* Get logical drive number */
                                 ;    3356 	res = find_volume(fatfs, &path, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3356
00002DF2 EF31                    		MOV.L R3, R1
00002DF4 EFE3                    		MOV.L R14, R3
00002DF6 39rrrr               W  		BSR __$find_volume
00002DF9 A009                    		MOV.L R1, 04H[R0]
00002DFB                         L1655:	; entry.split
                                 ;    3357 	fs = *fatfs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3357
00002DFB AA89                    		MOV.L 2CH[R0], R1
00002DFD E41002                  		MOV.L [R1], 08H[R0]
00002E00                         L1656:	; entry.split1
                                 ;    3358 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3358
00002E00 A809                    		MOV.L 04H[R0], R1
00002E02 6101                    		CMP #00H, R1
00002E04 3Brrrr               W  		BNE L1696
00002E07                         L1657:	; bb18
                                 ;    3359 		/* If free_clust is valid, return it without full cluster scan */
                                 ;    3360 		if (fs->free_clust <= fs->n_fatent - 2) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3360
00002E07 A881                    		MOV.L 08H[R0], R1
00002E09 A992                    		MOV.L 18H[R1], R2
00002E0B 6022                    		SUB #02H, R2
00002E0D 06851204                		CMP 10H[R1].L, R2
00002E11 23rr                    		BLTU L1659
00002E13                         L1658:	; bb19
                                 ;    3361 			*nclst = fs->free_clust;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3361
00002E13 A881                    		MOV.L 08H[R0], R1
00002E15 AB02                    		MOV.L 30H[R0], R2
00002E17 E11204                  		MOV.L 10H[R1], [R2]
00002E1A 38rrrr               W  		BRA L1696
00002E1D                         L1659:	; bb24
                                 ;    3362 		} else {
                                 ;    3363 			/* Get number of free clusters */
                                 ;    3364 			fat = fs->fs_type;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3364
00002E1D A881                    		MOV.L 08H[R0], R1
00002E1F C41023                  		MOV.B [R1], 23H[R0]
00002E22                         L1660:	; bb24.split
                                 ;    3365 			n = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3365
00002E22 3E0300                  		MOV.L #00000000H, 0CH[R0]
00002E25                         L1661:	; bb24.split2
                                 ;    3366 			if (fat == FS_FAT12) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3366
00002E25 590123                  		MOVU.B 23H[R0], R1
00002E28 6111                    		CMP #01H, R1
00002E2A 21rr                    		BNE L1671
00002E2C                         L1662:	; bb29
                                 ;    3367 				clst = 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3367
00002E2C 3E0402                  		MOV.L #00000002H, 10H[R0]
00002E2F                         L1663:	; bb30
                                 ;    3368 				do {
                                 ;    3369 					stat = get_fat(fs, clst);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3369
00002E2F A902                    		MOV.L 10H[R0], R2
00002E31 A881                    		MOV.L 08H[R0], R1
00002E33 39rrrr               W  		BSR _get_fat
00002E36 A181                    		MOV.L R1, 18H[R0]
00002E38                         L1664:	; bb30.split
                                 ;    3370 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3370
00002E38 A981                    		MOV.L 18H[R0], R1
00002E3A 7501FF                  		CMP #0FFFFFFFFH, R1
00002E3D 18                   S  		BNE L1666
00002E3E                         L1665:	; bb35
00002E3E 3E0101                  		MOV.L #00000001H, 04H[R0]
00002E41 38rrrr               W  		BRA L1693
00002E44                         L1666:	; bb41
                                 ;    3371 					if (stat == 1) { res = FR_INT_ERR; break; }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3371
00002E44 A981                    		MOV.L 18H[R0], R1
00002E46 6111                    		CMP #01H, R1
00002E48 18                   S  		BNE L1668
00002E49                         L1667:	; bb42
00002E49 3E0102                  		MOV.L #00000002H, 04H[R0]
00002E4C 38rrrr               W  		BRA L1693
00002E4F                         L1668:	; bb49
                                 ;    3372 					if (stat == 0) n++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3372
00002E4F A981                    		MOV.L 18H[R0], R1
00002E51 6101                    		CMP #00H, R1
00002E53 18                   S  		BNE L1670
00002E54                         L1669:	; bb50
00002E54 A889                    		MOV.L 0CH[R0], R1
00002E56 6211                    		ADD #01H, R1
00002E58 A089                    		MOV.L R1, 0CH[R0]
00002E5A                         L1670:	; bb57
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3368
00002E5A A901                    		MOV.L 10H[R0], R1
00002E5C 6211                    		ADD #01H, R1
00002E5E A101                    		MOV.L R1, 10H[R0]
00002E60 A882                    		MOV.L 08H[R0], R2
00002E62 06852106                		CMP 18H[R2].L, R1
00002E66 23rr                    		BLTU L1663
00002E68 38rrrr               W  		BRA L1693
00002E6B                         L1671:	; bb69
                                 ;    3373 				} while (++clst < fs->n_fatent);
                                 ;    3374 			} else {
                                 ;    3375 				clst = fs->n_fatent;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3375
00002E6B A881                    		MOV.L 08H[R0], R1
00002E6D E5100604                		MOV.L 18H[R1], 10H[R0]
00002E71                         L1672:	; bb69.split
                                 ;    3376 				sect = fs->fatbase;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3376
00002E71 A881                    		MOV.L 08H[R0], R1
00002E73 E5100905                		MOV.L 24H[R1], 14H[R0]
00002E77                         L1673:	; bb69.split3
                                 ;    3377 				i = 0; p = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3377
00002E77 3E0700                  		MOV.L #00000000H, 1CH[R0]
00002E7A                         L1674:	; bb69.split4
00002E7A 3E0900                  		MOV.L #00000000H, 24H[R0]
00002E7D                         L1675:	; bb77
                                 ;    3378 				do {
                                 ;    3379 					if (!i) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3379
00002E7D A989                    		MOV.L 1CH[R0], R1
00002E7F 6101                    		CMP #00H, R1
00002E81 21rr                    		BNE L1680
00002E83 2Err                 B  		BRA L1681
00002E85                         L1676:	; bb78
                                 ;    3380 						res = move_window(fs, sect++);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3380
00002E85 A90A                    		MOV.L 14H[R0], R2
00002E87 712301                  		ADD #01H, R2, R3
00002E8A A881                    		MOV.L 08H[R0], R1
00002E8C A10B                    		MOV.L R3, 14H[R0]
00002E8E 39rrrr               W  		BSR __$move_window
00002E91 A009                    		MOV.L R1, 04H[R0]
00002E93                         L1677:	; bb78.split
                                 ;    3381 						if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3381
00002E93 A809                    		MOV.L 04H[R0], R1
00002E95 6101                    		CMP #00H, R1
00002E97 21rr                    		BNE L1693
00002E99                         L1678:	; bb91
                                 ;    3382 						p = fs->win;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3382
00002E99 A881                    		MOV.L 08H[R0], R1
00002E9B 711134                  		ADD #34H, R1
00002E9E A209                    		MOV.L R1, 24H[R0]
00002EA0                         L1679:	; bb91.split
                                 ;    3383 						i = SS(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3383
00002EA0 F90A070002              		MOV.L #00000200H, 1CH[R0]
00002EA5 2Err                 B  		BRA L1683
00002EA7                         L1680:	; bb98
00002EA7 F80600                  		MOV.L #00000000H, [R0]
00002EAA 08                   S  		BRA L1682
00002EAB                         L1681:	; bb99
00002EAB F80601                  		MOV.L #00000001H, [R0]
00002EAE                         L1682:	; bb100
00002EAE EC01                    		MOV.L [R0], R1
00002EB0 6101                    		CMP #00H, R1
00002EB2 21rr                    		BNE L1676
00002EB4                         L1683:	; bb105
                                 ;    3384 					}
                                 ;    3385 					if (fat == FS_FAT16) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3385
00002EB4 590123                  		MOVU.B 23H[R0], R1
00002EB7 6121                    		CMP #02H, R1
00002EB9 AA09                    		MOV.L 24H[R0], R1
00002EBB 21rr                    		BNE L1688
00002EBD                         L1684:	; bb107
                                 ;    3386 						if (LD_WORD(p) == 0) n++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3386
00002EBD 5C1E                    		MOVU.W [R1], R14
00002EBF 610E                    		CMP #00H, R14
00002EC1 18                   S  		BNE L1686
00002EC2                         L1685:	; bb108
00002EC2 A889                    		MOV.L 0CH[R0], R1
00002EC4 6211                    		ADD #01H, R1
00002EC6 A089                    		MOV.L R1, 0CH[R0]
00002EC8                         L1686:	; bb118
                                 ;    3387 						p += 2; i -= 2;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3387
00002EC8 AA09                    		MOV.L 24H[R0], R1
00002ECA 6221                    		ADD #02H, R1
00002ECC A209                    		MOV.L R1, 24H[R0]
00002ECE                         L1687:	; bb118.split
00002ECE A989                    		MOV.L 1CH[R0], R1
00002ED0 6021                    		SUB #02H, R1
00002ED2 A189                    		MOV.L R1, 1CH[R0]
00002ED4 2Err                 B  		BRA L1692
00002ED6                         L1688:	; bb124
00002ED6 FBE2FFFFFF0F            		MOV.L #0FFFFFFFH, R14
                                 ;    3388 					} else {
                                 ;    3389 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3389
00002EDC 06A00C1E                		TST [R1].L, R14
00002EE0 18                   S  		BNE L1690
00002EE1                         L1689:	; bb125
00002EE1 A889                    		MOV.L 0CH[R0], R1
00002EE3 6211                    		ADD #01H, R1
00002EE5 A089                    		MOV.L R1, 0CH[R0]
00002EE7                         L1690:	; bb135
                                 ;    3390 						p += 4; i -= 4;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3390
00002EE7 AA09                    		MOV.L 24H[R0], R1
00002EE9 6241                    		ADD #04H, R1
00002EEB A209                    		MOV.L R1, 24H[R0]
00002EED                         L1691:	; bb135.split
00002EED A989                    		MOV.L 1CH[R0], R1
00002EEF 6041                    		SUB #04H, R1
00002EF1 A189                    		MOV.L R1, 1CH[R0]
00002EF3                         L1692:	; bb145
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3378
00002EF3 A901                    		MOV.L 10H[R0], R1
00002EF5 6011                    		SUB #01H, R1
00002EF7 A101                    		MOV.L R1, 10H[R0]
00002EF9 6101                    		CMP #00H, R1
00002EFB 3Brrrr               W  		BNE L1675
00002EFE                         L1693:	; bb159
                                 ;    3391 					}
                                 ;    3392 				} while (--clst);
                                 ;    3393 			}
                                 ;    3394 			fs->free_clust = n;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3394
00002EFE A889                    		MOV.L 0CH[R0], R1
00002F00 A882                    		MOV.L 08H[R0], R2
00002F02 A121                    		MOV.L R1, 10H[R2]
00002F04                         L1694:	; bb159.split
                                 ;    3395 			fs->fsi_flag |= 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3395
00002F04 A881                    		MOV.L 08H[R0], R1
00002F06 F11005                  		BSET #00H, 05H[R1].B
00002F09                         L1695:	; bb159.split5
                                 ;    3396 			*nclst = n;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3396
00002F09 A889                    		MOV.L 0CH[R0], R1
00002F0B AB02                    		MOV.L 30H[R0], R2
00002F0D E321                    		MOV.L R1, [R2]
00002F0F                         L1696:	; bb186
                                 ;    3397 		}
                                 ;    3398 	}
                                 ;    3399 	LEAVE_FF(fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3399
00002F0F A809                    		MOV.L 04H[R0], R1
00002F11 A281                    		MOV.L R1, 28H[R0]
00002F13                         L1697:	; bb186.split
                                 ;    3400 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3400
00002F13 670E                    		RTSD #38H
00002F15                         _f_truncate:
                                 		.STACK	_f_truncate=24
                                 ;    3401 
                                 ;    3402 
                                 ;    3403 
                                 ;    3404 
                                 ;    3405 /*-----------------------------------------------------------------------*/
                                 ;    3406 /* Truncate File                                                         */
                                 ;    3407 /*-----------------------------------------------------------------------*/
                                 ;    3408 
                                 ;    3409 FRESULT f_truncate (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3409
00002F15 7100EC                  		ADD #0FFFFFFECH, R0
00002F18 A101                    		MOV.L R1, 10H[R0]
                                 ;    3410 	FIL* fp		/* Pointer to the file object */
                                 ;    3411 )
                                 ;    3412 {
                                 ;    3413 	FRESULT res;
                                 ;    3414 	DWORD ncl;
                                 ;    3415 
                                 ;    3416 
                                 ;    3417 	res = validate(fp);						/* Check validity of the object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3417
00002F1A 39rrrr               W  		BSR __$validate
00002F1D A009                    		MOV.L R1, 04H[R0]
00002F1F                         L1699:	; entry.split
                                 ;    3418 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3418
00002F1F A809                    		MOV.L 04H[R0], R1
00002F21 6101                    		CMP #00H, R1
00002F23 21rr                    		BNE L1707
00002F25                         L1700:	; bb8
                                 ;    3419 		if (fp->err) {						/* Check error */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3419
00002F25 A901                    		MOV.L 10H[R0], R1
00002F27 B19A                    		MOVU.B 07H[R1], R2
00002F29 6102                    		CMP #00H, R2
00002F2B 10                   S  		BEQ L1702
00002F2C                         L1701:	; bb9
                                 ;    3420 			res = (FRESULT)fp->err;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3420
00002F2C B199                    		MOVU.B 07H[R1], R1
00002F2E A009                    		MOV.L R1, 04H[R0]
00002F30 2Err                 B  		BRA L1707
00002F32                         L1702:	; bb15
                                 ;    3421 		} else {
                                 ;    3422 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3422
00002F32 F51106                  		BTST #01H, 06H[R1].B
00002F35 18                   S  		BNE L1704
00002F36 08                   S  		BRA L1705
00002F37                         L1703:	; bb16
                                 ;    3423 				res = FR_DENIED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3423
00002F37 3E0107                  		MOV.L #00000007H, 04H[R0]
00002F3A 2Err                 B  		BRA L1707
00002F3C                         L1704:	; bb24
00002F3C F80600                  		MOV.L #00000000H, [R0]
00002F3F 08                   S  		BRA L1706
00002F40                         L1705:	; bb25
00002F40 F80601                  		MOV.L #00000001H, [R0]
00002F43                         L1706:	; bb26
00002F43 EC01                    		MOV.L [R0], R1
00002F45 6101                    		CMP #00H, R1
00002F47 21rr                    		BNE L1703
00002F49                         L1707:	; bb43
                                 ;    3424 		}
                                 ;    3425 	}
                                 ;    3426 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3426
00002F49 A809                    		MOV.L 04H[R0], R1
00002F4B 6101                    		CMP #00H, R1
00002F4D 3Brrrr               W  		BNE L1738
00002F50                         L1708:	; bb45
                                 ;    3427 		if (fp->fsize > fp->fptr) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3427
00002F50 A901                    		MOV.L 10H[R0], R1
00002F52 A89A                    		MOV.L 0CH[R1], R2
00002F54 06851202                		CMP 08H[R1].L, R2
00002F58 24rr                  * 		BLEU L1736
         38rrrr                  
00002F5D                         L1709:	; bb46
                                 ;    3428 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3428
00002F5D A901                    		MOV.L 10H[R0], R1
00002F5F E5110203                		MOV.L 08H[R1], 0CH[R1]
00002F63                         L1710:	; bb46.split
                                 ;    3429 			fp->flag |= FA__WRITTEN;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3429
00002F63 A901                    		MOV.L 10H[R0], R1
00002F65 F11506                  		BSET #05H, 06H[R1].B
00002F68                         L1711:	; bb46.split1
                                 ;    3430 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3430
00002F68 A902                    		MOV.L 10H[R0], R2
00002F6A A8A1                    		MOV.L 08H[R2], R1
00002F6C 6101                    		CMP #00H, R1
00002F6E EC21                    		MOV.L [R2], R1
00002F70 21rr                    		BNE L1714
00002F72                         L1712:	; bb59
                                 ;    3431 				res = remove_chain(fp->fs, fp->sclust);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3431
00002F72 A922                    		MOV.L 10H[R2], R2
00002F74 39rrrr               W  		BSR __$remove_chain
00002F77 A009                    		MOV.L R1, 04H[R0]
00002F79                         L1713:	; bb59.split
                                 ;    3432 				fp->sclust = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3432
00002F79 A902                    		MOV.L 10H[R0], R2
00002F7B 3E2400                  		MOV.L #00000000H, 10H[R2]
00002F7E 2Err                 B  		BRA L1728
00002F80                         L1714:	; bb69
                                 ;    3433 			} else {				/* When truncate a part of the file, remove remaining clusters */
                                 ;    3434 				ncl = get_fat(fp->fs, fp->clust);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3434
00002F80 A92A                    		MOV.L 14H[R2], R2
00002F82 39rrrr               W  		BSR _get_fat
00002F85 A081                    		MOV.L R1, 08H[R0]
00002F87                         L1715:	; bb69.split
                                 ;    3435 				res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3435
00002F87 3E0100                  		MOV.L #00000000H, 04H[R0]
00002F8A                         L1716:	; bb69.split2
                                 ;    3436 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3436
00002F8A A881                    		MOV.L 08H[R0], R1
00002F8C 7501FF                  		CMP #0FFFFFFFFH, R1
00002F8F 18                   S  		BNE L1718
00002F90                         L1717:	; bb78
00002F90 3E0101                  		MOV.L #00000001H, 04H[R0]
00002F93                         L1718:	; bb84
                                 ;    3437 				if (ncl == 1) res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3437
00002F93 A881                    		MOV.L 08H[R0], R1
00002F95 6111                    		CMP #01H, R1
00002F97 18                   S  		BNE L1720
00002F98                         L1719:	; bb85
00002F98 3E0102                  		MOV.L #00000002H, 04H[R0]
00002F9B                         L1720:	; bb91
                                 ;    3438 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3438
00002F9B A809                    		MOV.L 04H[R0], R1
00002F9D 6101                    		CMP #00H, R1
00002F9F 20rr                    		BEQ L1724
00002FA1 2Err                 B  		BRA L1726
00002FA3                         L1721:	; bb92
                                 ;    3439 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3439
00002FA3 A901                    		MOV.L 10H[R0], R1
00002FA5 A91A                    		MOV.L 14H[R1], R2
00002FA7 EC11                    		MOV.L [R1], R1
00002FA9 FB32FFFFFF0F            		MOV.L #0FFFFFFFH, R3
00002FAF 39rrrr               W  		BSR _put_fat
00002FB2 A009                    		MOV.L R1, 04H[R0]
00002FB4                         L1722:	; bb92.split
                                 ;    3440 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3440
00002FB4 A809                    		MOV.L 04H[R0], R1
00002FB6 6101                    		CMP #00H, R1
00002FB8 21rr                    		BNE L1728
00002FBA                         L1723:	; bb101
00002FBA A901                    		MOV.L 10H[R0], R1
00002FBC EC11                    		MOV.L [R1], R1
00002FBE A882                    		MOV.L 08H[R0], R2
00002FC0 39rrrr               W  		BSR __$remove_chain
00002FC3 A009                    		MOV.L R1, 04H[R0]
00002FC5 2Err                 B  		BRA L1728
00002FC7                         L1724:	; bb115
00002FC7 A901                    		MOV.L 10H[R0], R1
00002FC9 EC1E                    		MOV.L [R1], R14
00002FCB A881                    		MOV.L 08H[R0], R1
00002FCD 0685E106                		CMP 18H[R14].L, R1
00002FD1 22rr                    		BGEU L1726
00002FD3                         L1725:	; bb124
00002FD3 F80601                  		MOV.L #00000001H, [R0]
00002FD6 08                   S  		BRA L1727
00002FD7                         L1726:	; bb125
00002FD7 F80600                  		MOV.L #00000000H, [R0]
00002FDA                         L1727:	; bb126
00002FDA EC01                    		MOV.L [R0], R1
00002FDC 6101                    		CMP #00H, R1
00002FDE 21rr                    		BNE L1721
00002FE0                         L1728:	; bb139
                                 ;    3441 				}
                                 ;    3442 			}
                                 ;    3443 #if !_FS_TINY
                                 ;    3444 			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3444
00002FE0 A809                    		MOV.L 04H[R0], R1
00002FE2 6101                    		CMP #00H, R1
00002FE4 20rr                    		BEQ L1732
00002FE6 2Err                 B  		BRA L1734
00002FE8                         L1729:	; bb141
                                 ;    3445 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3445
00002FE8 A902                    		MOV.L 10H[R0], R2
00002FEA A9A3                    		MOV.L 18H[R2], R3
00002FEC EC21                    		MOV.L [R2], R1
00002FEE B019                    		MOVU.B 01H[R1], R1
00002FF0 712224                  		ADD #24H, R2
00002FF3 6614                    		MOV.L #00000001H, R4
00002FF5 05rrrrrr             A  		BSR _disk_write
00002FF9 6101                    		CMP #00H, R1
00002FFB 10                   S  		BEQ L1731
00002FFC                         L1730:	; bb142
                                 ;    3446 					res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3446
00002FFC 3E0101                  		MOV.L #00000001H, 04H[R0]
00002FFF 2Err                 B  		BRA L1736
00003001                         L1731:	; bb143
                                 ;    3447 				else
                                 ;    3448 					fp->flag &= ~FA__DIRTY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3448
00003001 A901                    		MOV.L 10H[R0], R1
00003003 F11E06                  		BCLR #06H, 06H[R1].B
00003006 2Err                 B  		BRA L1736
00003008                         L1732:	; bb169
00003008 A901                    		MOV.L 10H[R0], R1
0000300A F51606                  		BTST #06H, 06H[R1].B
0000300D 10                   S  		BEQ L1734
0000300E                         L1733:	; bb177
0000300E F80601                  		MOV.L #00000001H, [R0]
00003011 08                   S  		BRA L1735
00003012                         L1734:	; bb178
00003012 F80600                  		MOV.L #00000000H, [R0]
00003015                         L1735:	; bb179
00003015 EC01                    		MOV.L [R0], R1
00003017 6101                    		CMP #00H, R1
00003019 21rr                    		BNE L1729
0000301B                         L1736:	; bb195
                                 ;    3449 			}
                                 ;    3450 #endif
                                 ;    3451 		}
                                 ;    3452 		if (res != FR_OK) fp->err = (FRESULT)res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3452
0000301B A809                    		MOV.L 04H[R0], R1
0000301D 6101                    		CMP #00H, R1
0000301F 10                   S  		BEQ L1738
00003020                         L1737:	; bb196
00003020 A809                    		MOV.L 04H[R0], R1
00003022 A902                    		MOV.L 10H[R0], R2
00003024 81A9                    		MOV.B R1, 07H[R2]
00003026                         L1738:	; bb210
                                 ;    3453 	}
                                 ;    3454 
                                 ;    3455 	LEAVE_FF(fp->fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3455
00003026 A809                    		MOV.L 04H[R0], R1
00003028 A089                    		MOV.L R1, 0CH[R0]
0000302A                         L1739:	; bb210.split
                                 ;    3456 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3456
0000302A 6705                    		RTSD #14H
0000302C                         _f_unlink:
                                 		.STACK	_f_unlink=112
                                 ;    3457 
                                 ;    3458 
                                 ;    3459 
                                 ;    3460 
                                 ;    3461 /*-----------------------------------------------------------------------*/
                                 ;    3462 /* Delete a File or Directory                                            */
                                 ;    3463 /*-----------------------------------------------------------------------*/
                                 ;    3464 
                                 ;    3465 FRESULT f_unlink (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3465
0000302C 710094                  		ADD #0FFFFFF94H, R0
0000302F A681                    		MOV.L R1, 68H[R0]
                                 ;    3466 	const TCHAR* path		/* Pointer to the file or directory path */
                                 ;    3467 )
                                 ;    3468 {
                                 ;    3469 	FRESULT res;
                                 ;    3470 	DIR dj, sdj;
                                 ;    3471 	BYTE *dir;
                                 ;    3472 	DWORD dclst = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3472
00003031 3E8500                  		MOV.L #00000000H, 54H[R0]
00003034                         L1741:	; entry.split
00003034 6613                    		MOV.L #00000001H, R3
00003036 710268                  		ADD #68H, R0, R2
00003039 710108                  		ADD #08H, R0, R1
                                 ;    3473 	DEF_NAMEBUF;
                                 ;    3474 
                                 ;    3475 
                                 ;    3476 	/* Get logical drive number */
                                 ;    3477 	res = find_volume(&dj.fs, &path, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3477
0000303C 39rrrr               W  		BSR __$find_volume
0000303F A009                    		MOV.L R1, 04H[R0]
00003041                         L1742:	; entry.split1
                                 ;    3478 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3478
00003041 A809                    		MOV.L 04H[R0], R1
00003043 6101                    		CMP #00H, R1
00003045 3Brrrr               W  		BNE L1795
00003048                         L1743:	; bb10
00003048 710158                  		ADD #58H, R0, R1
                                 ;    3479 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3479
0000304B A201                    		MOV.L R1, 20H[R0]
0000304D                         L1744:	; bb10.split
0000304D FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
00003053 A209                    		MOV.L R1, 24H[R0]
00003055                         L1745:	; bb10.split2
                                 ;    3480 		res = follow_path(&dj, path);		/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3480
00003055 AE82                    		MOV.L 68H[R0], R2
00003057 710108                  		ADD #08H, R0, R1
0000305A 39rrrr               W  		BSR __$follow_path
0000305D A009                    		MOV.L R1, 04H[R0]
0000305F                         L1746:	; bb10.split3
                                 ;    3481 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3481
0000305F A809                    		MOV.L 04H[R0], R1
00003061 6101                    		CMP #00H, R1
00003063 10                   S  		BEQ L1748
00003064 08                   S  		BRA L1749
00003065                         L1747:	; bb17
                                 ;    3482 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3482
00003065 3E0106                  		MOV.L #00000006H, 04H[R0]
00003068 2Err                 B  		BRA L1755
0000306A                         L1748:	; bb22
0000306A F80601                  		MOV.L #00000001H, [R0]
0000306D 08                   S  		BRA L1750
0000306E                         L1749:	; bb23
0000306E F80600                  		MOV.L #00000000H, [R0]
00003071                         L1750:	; bb24
00003071 EC01                    		MOV.L [R0], R1
00003073 6101                    		CMP #00H, R1
00003075 20rr                    		BEQ L1753
00003077                         L1751:	; bb26
00003077 AA01                    		MOV.L 20H[R0], R1
00003079 F5150B                  		BTST #05H, 0BH[R1].B
0000307C 10                   S  		BEQ L1753
0000307D                         L1752:	; bb35
0000307D F80601                  		MOV.L #00000001H, [R0]
00003080 08                   S  		BRA L1754
00003081                         L1753:	; bb36
00003081 F80600                  		MOV.L #00000000H, [R0]
00003084                         L1754:	; bb37
00003084 EC01                    		MOV.L [R0], R1
00003086 6101                    		CMP #00H, R1
00003088 21rr                    		BNE L1747
0000308A                         L1755:	; bb43
                                 ;    3483 #if _FS_LOCK
                                 ;    3484 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open object */
                                 ;    3485 #endif
                                 ;    3486 		if (res == FR_OK) {					/* The object is accessible */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3486
0000308A A809                    		MOV.L 04H[R0], R1
0000308C 6101                    		CMP #00H, R1
0000308E 3Brrrr               W  		BNE L1795
00003091                         L1756:	; bb44
                                 ;    3487 			dir = dj.dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3487
00003091 E5000714                		MOV.L 1CH[R0], 50H[R0]
00003095                         L1757:	; bb44.split
                                 ;    3488 			if (!dir) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3488
00003095 AD01                    		MOV.L 50H[R0], R1
00003097 6101                    		CMP #00H, R1
00003099 21rr                    		BNE L1761
0000309B 2Err                 B  		BRA L1762
0000309D                         L1758:	; bb48
                                 ;    3489 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3489
0000309D 3E0106                  		MOV.L #00000006H, 04H[R0]
000030A0 2Err                 B  		BRA L1764
000030A2                         L1759:	; bb50
                                 ;    3490 			} else {
                                 ;    3491 				if (dir[DIR_Attr] & AM_RDO)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3491
000030A2 AD01                    		MOV.L 50H[R0], R1
000030A4 F5100B                  		BTST #00H, 0BH[R1].B
000030A7 20rr                    		BEQ L1764
000030A9                         L1760:	; bb51
                                 ;    3492 					res = FR_DENIED;		/* Cannot remove R/O object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3492
000030A9 3E0107                  		MOV.L #00000007H, 04H[R0]
000030AC 2Err                 B  		BRA L1764
000030AE                         L1761:	; bb64
000030AE F80600                  		MOV.L #00000000H, [R0]
000030B1 08                   S  		BRA L1763
000030B2                         L1762:	; bb65
000030B2 F80601                  		MOV.L #00000001H, [R0]
000030B5                         L1763:	; bb66
000030B5 EC01                    		MOV.L [R0], R1
000030B7 6101                    		CMP #00H, R1
000030B9 21rr                    		BNE L1758
000030BB 2Err                 B  		BRA L1759
000030BD                         L1764:	; bb71
                                 ;    3493 			}
                                 ;    3494 			if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3494
000030BD A809                    		MOV.L 04H[R0], R1
000030BF 6101                    		CMP #00H, R1
000030C1 3Brrrr               W  		BNE L1785
000030C4                         L1765:	; bb72
                                 ;    3495 				dclst = ld_clust(dj.fs, dir);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3495
000030C4 AD02                    		MOV.L 50H[R0], R2
000030C6 A881                    		MOV.L 08H[R0], R1
000030C8 39rrrr               W  		BSR __$ld_clust
000030CB A509                    		MOV.L R1, 54H[R0]
000030CD                         L1766:	; bb72.split
                                 ;    3496 				if (dir[DIR_Attr] & AM_DIR) {	/* Is it a sub-dir? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3496
000030CD AD01                    		MOV.L 50H[R0], R1
000030CF F5140B                  		BTST #04H, 0BH[R1].B
000030D2 20rr                    		BEQ L1785
000030D4                         L1767:	; bb79
                                 ;    3497 					if (!dclst) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3497
000030D4 AD09                    		MOV.L 54H[R0], R1
000030D6 6101                    		CMP #00H, R1
000030D8 21rr                    		BNE L1782
000030DA 2Err                 B  		BRA L1783
000030DC                         L1768:	; bb80
                                 ;    3498 						res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3498
000030DC 3E0102                  		MOV.L #00000002H, 04H[R0]
000030DF 2Err                 B  		BRA L1785
000030E1                         L1769:	; bb81
000030E1 754324                  		MOV.L #00000024H, R3
000030E4 710208                  		ADD #08H, R0, R2
000030E7 71012C                  		ADD #2CH, R0, R1
                                 ;    3499 					} else {					/* Make sure the sub-directory is empty */
                                 ;    3500 						mem_cpy(&sdj, &dj, sizeof (DIR));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3500
000030EA 39rrrr               W  		BSR __$mem_cpy
000030ED                         L1770:	; bb81.split
                                 ;    3501 						sdj.sclust = dclst;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3501
000030ED E500150D                		MOV.L 54H[R0], 34H[R0]
000030F1                         L1771:	; bb81.split4
000030F1 6622                    		MOV.L #00000002H, R2
000030F3 71012C                  		ADD #2CH, R0, R1
                                 ;    3502 						res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3502
000030F6 39rrrr               W  		BSR __$dir_sdi
000030F9 A009                    		MOV.L R1, 04H[R0]
000030FB                         L1772:	; bb81.split5
                                 ;    3503 						if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3503
000030FB A809                    		MOV.L 04H[R0], R1
000030FD 6101                    		CMP #00H, R1
000030FF 21rr                    		BNE L1785
00003101                         L1773:	; bb88
00003101 6602                    		MOV.L #00000000H, R2
00003103 71012C                  		ADD #2CH, R0, R1
                                 ;    3504 							res = dir_read(&sdj, 0);	/* Read an item */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3504
00003106 39rrrr               W  		BSR __$dir_read
00003109 A009                    		MOV.L R1, 04H[R0]
0000310B                         L1774:	; bb88.split
                                 ;    3505 							if (res == FR_OK		/* Not empty directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3505
0000310B A809                    		MOV.L 04H[R0], R1
0000310D 6101                    		CMP #00H, R1
0000310F 20rr                    		BEQ L1777
00003111 08                   S  		BRA L1776
00003112                         L1775:	; bb91
                                 ;    3506 #if _FS_RPATH
                                 ;    3507 							|| dclst == dj.fs->cdir	/* or current directory */
                                 ;    3508 #endif
                                 ;    3509 							) res = FR_DENIED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3509
00003112 3E0107                  		MOV.L #00000007H, 04H[R0]
00003115 2Err                 B  		BRA L1780
00003117                         L1776:	; bb95
00003117 A881                    		MOV.L 08H[R0], R1
00003119 AD0A                    		MOV.L 54H[R0], R2
0000311B 06851205                		CMP 14H[R1].L, R2
0000311F 18                   S  		BNE L1778
00003120                         L1777:	; bb103
00003120 F80601                  		MOV.L #00000001H, [R0]
00003123 08                   S  		BRA L1779
00003124                         L1778:	; bb104
00003124 F80600                  		MOV.L #00000000H, [R0]
00003127                         L1779:	; bb105
00003127 EC01                    		MOV.L [R0], R1
00003129 6101                    		CMP #00H, R1
0000312B 21rr                    		BNE L1775
0000312D                         L1780:	; bb111
                                 ;    3510 							if (res == FR_NO_FILE) res = FR_OK;	/* It is empty */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3510
0000312D A809                    		MOV.L 04H[R0], R1
0000312F 6141                    		CMP #04H, R1
00003131 21rr                    		BNE L1785
00003133                         L1781:	; bb112
00003133 3E0100                  		MOV.L #00000000H, 04H[R0]
00003136 2Err                 B  		BRA L1785
00003138                         L1782:	; bb126
00003138 F80600                  		MOV.L #00000000H, [R0]
0000313B 08                   S  		BRA L1784
0000313C                         L1783:	; bb127
0000313C F80601                  		MOV.L #00000001H, [R0]
0000313F                         L1784:	; bb128
0000313F EC01                    		MOV.L [R0], R1
00003141 6101                    		CMP #00H, R1
00003143 21rr                    		BNE L1768
00003145 2Err                 B  		BRA L1769
00003147                         L1785:	; bb147
                                 ;    3511 						}
                                 ;    3512 					}
                                 ;    3513 				}
                                 ;    3514 			}
                                 ;    3515 			if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3515
00003147 A809                    		MOV.L 04H[R0], R1
00003149 6101                    		CMP #00H, R1
0000314B 21rr                    		BNE L1795
0000314D                         L1786:	; bb148
0000314D 710108                  		ADD #08H, R0, R1
                                 ;    3516 				res = dir_remove(&dj);		/* Remove the directory entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3516
00003150 39rrrr               W  		BSR __$dir_remove
00003153 A009                    		MOV.L R1, 04H[R0]
00003155                         L1787:	; bb148.split
                                 ;    3517 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3517
00003155 A809                    		MOV.L 04H[R0], R1
00003157 6101                    		CMP #00H, R1
00003159 20rr                    		BEQ L1789
0000315B 2Err                 B  		BRA L1791
0000315D                         L1788:	; bb151
                                 ;    3518 					res = remove_chain(dj.fs, dclst);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3518
0000315D AD0A                    		MOV.L 54H[R0], R2
0000315F A881                    		MOV.L 08H[R0], R1
00003161 39rrrr               W  		BSR __$remove_chain
00003164 A009                    		MOV.L R1, 04H[R0]
00003166 2Err                 B  		BRA L1793
00003168                         L1789:	; bb159
00003168 AD09                    		MOV.L 54H[R0], R1
0000316A 6101                    		CMP #00H, R1
0000316C 10                   S  		BEQ L1791
0000316D                         L1790:	; bb163
0000316D F80601                  		MOV.L #00000001H, [R0]
00003170 08                   S  		BRA L1792
00003171                         L1791:	; bb164
00003171 F80600                  		MOV.L #00000000H, [R0]
00003174                         L1792:	; bb165
00003174 EC01                    		MOV.L [R0], R1
00003176 6101                    		CMP #00H, R1
00003178 21rr                    		BNE L1788
0000317A                         L1793:	; bb171
                                 ;    3519 				if (res == FR_OK) res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3519
0000317A A809                    		MOV.L 04H[R0], R1
0000317C 6101                    		CMP #00H, R1
0000317E 18                   S  		BNE L1795
0000317F                         L1794:	; bb172
0000317F A881                    		MOV.L 08H[R0], R1
00003181 39rrrr               W  		BSR __$sync_fs
00003184 A009                    		MOV.L R1, 04H[R0]
00003186                         L1795:	; bb195
                                 ;    3520 			}
                                 ;    3521 		}
                                 ;    3522 		FREE_BUF();
                                 ;    3523 	}
                                 ;    3524 
                                 ;    3525 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3525
00003186 A809                    		MOV.L 04H[R0], R1
00003188 A609                    		MOV.L R1, 64H[R0]
0000318A                         L1796:	; bb195.split
                                 ;    3526 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3526
0000318A 671B                    		RTSD #6CH
0000318C                         _f_mkdir:
                                 		.STACK	_f_mkdir=92
                                 ;    3527 
                                 ;    3528 
                                 ;    3529 
                                 ;    3530 
                                 ;    3531 /*-----------------------------------------------------------------------*/
                                 ;    3532 /* Create a Directory                                                    */
                                 ;    3533 /*-----------------------------------------------------------------------*/
                                 ;    3534 
                                 ;    3535 FRESULT f_mkdir (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3535
0000318C 7100A8                  		ADD #0FFFFFFA8H, R0
0000318F A509                    		MOV.L R1, 54H[R0]
                                 ;    3536 	const TCHAR* path		/* Pointer to the directory path */
                                 ;    3537 )
                                 ;    3538 {
                                 ;    3539 	FRESULT res;
                                 ;    3540 	DIR dj;
                                 ;    3541 	BYTE *dir, n;
                                 ;    3542 	DWORD dsc, dcl, pcl, tm = GET_FATTIME();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3542
00003191 F9021000006945          		MOV.L #45690000H, 40H[R0]
00003198                         L1798:	; entry.split
00003198 6613                    		MOV.L #00000001H, R3
0000319A 710254                  		ADD #54H, R0, R2
0000319D 710108                  		ADD #08H, R0, R1
                                 ;    3543 	DEF_NAMEBUF;
                                 ;    3544 
                                 ;    3545 
                                 ;    3546 	/* Get logical drive number */
                                 ;    3547 	res = find_volume(&dj.fs, &path, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3547
000031A0 39rrrr               W  		BSR __$find_volume
000031A3 A009                    		MOV.L R1, 04H[R0]
000031A5                         L1799:	; entry.split1
                                 ;    3548 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3548
000031A5 A809                    		MOV.L 04H[R0], R1
000031A7 6101                    		CMP #00H, R1
000031A9 3Brrrr               W  		BNE L1861
000031AC                         L1800:	; bb13
000031AC 710144                  		ADD #44H, R0, R1
                                 ;    3549 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3549
000031AF A201                    		MOV.L R1, 20H[R0]
000031B1                         L1801:	; bb13.split
000031B1 FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
000031B7 A209                    		MOV.L R1, 24H[R0]
000031B9                         L1802:	; bb13.split2
                                 ;    3550 		res = follow_path(&dj, path);			/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3550
000031B9 AD0A                    		MOV.L 54H[R0], R2
000031BB 710108                  		ADD #08H, R0, R1
000031BE 39rrrr               W  		BSR __$follow_path
000031C1 A009                    		MOV.L R1, 04H[R0]
000031C3                         L1803:	; bb13.split3
                                 ;    3551 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3551
000031C3 A809                    		MOV.L 04H[R0], R1
000031C5 6101                    		CMP #00H, R1
000031C7 18                   S  		BNE L1806
000031C8                         L1804:	; bb20
000031C8 3E0108                  		MOV.L #00000008H, 04H[R0]
000031CB 08                   S  		BRA L1806
000031CC                         L1805:	; bb26
                                 ;    3552 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
                                 ;    3553 			res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3553
000031CC 3E0106                  		MOV.L #00000006H, 04H[R0]
000031CF 2Err                 B  		BRA L1814
000031D1                         L1806:	; bb27
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3552
000031D1 A809                    		MOV.L 04H[R0], R1
000031D3 6141                    		CMP #04H, R1
000031D5 18                   S  		BNE L1808
000031D6                         L1807:	; bb31
000031D6 F80601                  		MOV.L #00000001H, [R0]
000031D9 08                   S  		BRA L1809
000031DA                         L1808:	; bb32
000031DA F80600                  		MOV.L #00000000H, [R0]
000031DD                         L1809:	; bb33
000031DD EC01                    		MOV.L [R0], R1
000031DF 6101                    		CMP #00H, R1
000031E1 20rr                    		BEQ L1812
000031E3                         L1810:	; bb36
000031E3 AA01                    		MOV.L 20H[R0], R1
000031E5 F5150B                  		BTST #05H, 0BH[R1].B
000031E8 10                   S  		BEQ L1812
000031E9                         L1811:	; bb45
000031E9 F80601                  		MOV.L #00000001H, [R0]
000031EC 08                   S  		BRA L1813
000031ED                         L1812:	; bb46
000031ED F80600                  		MOV.L #00000000H, [R0]
000031F0                         L1813:	; bb47
000031F0 EC01                    		MOV.L [R0], R1
000031F2 6101                    		CMP #00H, R1
000031F4 21rr                    		BNE L1805
000031F6                         L1814:	; bb53
                                 ;    3554 		if (res == FR_NO_FILE) {				/* Can create a new directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3554
000031F6 A809                    		MOV.L 04H[R0], R1
000031F8 6141                    		CMP #04H, R1
000031FA 3Brrrr               W  		BNE L1861
000031FD                         L1815:	; bb54
                                 ;    3555 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3555
000031FD A881                    		MOV.L 08H[R0], R1
000031FF 6602                    		MOV.L #00000000H, R2
00003201 39rrrr               W  		BSR __$create_chain
00003204 A381                    		MOV.L R1, 38H[R0]
00003206                         L1816:	; bb54.split
                                 ;    3556 			res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3556
00003206 3E0100                  		MOV.L #00000000H, 04H[R0]
00003209                         L1817:	; bb54.split4
                                 ;    3557 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3557
00003209 AB81                    		MOV.L 38H[R0], R1
0000320B 6101                    		CMP #00H, R1
0000320D 18                   S  		BNE L1819
0000320E                         L1818:	; bb59
0000320E 3E0107                  		MOV.L #00000007H, 04H[R0]
00003211                         L1819:	; bb65
                                 ;    3558 			if (dcl == 1) res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3558
00003211 AB81                    		MOV.L 38H[R0], R1
00003213 6111                    		CMP #01H, R1
00003215 18                   S  		BNE L1821
00003216                         L1820:	; bb66
00003216 3E0102                  		MOV.L #00000002H, 04H[R0]
00003219                         L1821:	; bb72
                                 ;    3559 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3559
00003219 AB81                    		MOV.L 38H[R0], R1
0000321B 7501FF                  		CMP #0FFFFFFFFH, R1
0000321E 18                   S  		BNE L1823
0000321F                         L1822:	; bb73
0000321F 3E0101                  		MOV.L #00000001H, 04H[R0]
00003222                         L1823:	; bb79
                                 ;    3560 			if (res == FR_OK)					/* Flush FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3560
00003222 A809                    		MOV.L 04H[R0], R1
00003224 6101                    		CMP #00H, R1
00003226 18                   S  		BNE L1825
00003227                         L1824:	; bb80
                                 ;    3561 				res = sync_window(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3561
00003227 A881                    		MOV.L 08H[R0], R1
00003229 39rrrr               W  		BSR __$sync_window
0000322C A009                    		MOV.L R1, 04H[R0]
0000322E                         L1825:	; bb89
                                 ;    3562 			if (res == FR_OK) {					/* Initialize the new directory table */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3562
0000322E A809                    		MOV.L 04H[R0], R1
00003230 6101                    		CMP #00H, R1
00003232 3Brrrr               W  		BNE L1851
00003235                         L1826:	; bb90
                                 ;    3563 				dsc = clust2sect(dj.fs, dcl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3563
00003235 AB82                    		MOV.L 38H[R0], R2
00003237 A881                    		MOV.L 08H[R0], R1
00003239 39rrrr               W  		BSR _clust2sect
0000323C A309                    		MOV.L R1, 34H[R0]
0000323E                         L1827:	; bb90.split
                                 ;    3564 				dir = dj.fs->win;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3564
0000323E A881                    		MOV.L 08H[R0], R1
00003240 711134                  		ADD #34H, R1
00003243 A289                    		MOV.L R1, 2CH[R0]
00003245                         L1828:	; bb90.split5
                                 ;    3565 				mem_set(dir, 0, SS(dj.fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3565
00003245 AA89                    		MOV.L 2CH[R0], R1
00003247 FB3A0002                		MOV.L #00000200H, R3
0000324B 6602                    		MOV.L #00000000H, R2
0000324D 39rrrr               W  		BSR __$mem_set
00003250                         L1829:	; bb90.split6
                                 ;    3566 				mem_set(dir+DIR_Name, ' ', 11);	/* Create "." entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3566
00003250 AA89                    		MOV.L 2CH[R0], R1
00003252 66B3                    		MOV.L #0000000BH, R3
00003254 754220                  		MOV.L #00000020H, R2
00003257 39rrrr               W  		BSR __$mem_set
0000325A                         L1830:	; bb90.split7
                                 ;    3567 				dir[DIR_Name] = '.';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3567
0000325A AA89                    		MOV.L 2CH[R0], R1
0000325C F8142E                  		MOV.B #2EH, [R1]
0000325F                         L1831:	; bb90.split8
                                 ;    3568 				dir[DIR_Attr] = AM_DIR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3568
0000325F AA89                    		MOV.L 2CH[R0], R1
00003261 3C1B10                  		MOV.B #10H, 0BH[R1]
00003264                         L1832:	; bb90.split9
                                 ;    3569 				ST_DWORD(dir+DIR_WrtTime, tm);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3569
00003264 AA89                    		MOV.L 2CH[R0], R1
00003266 711116                  		ADD #16H, R1
00003269 E10110                  		MOV.L 40H[R0], [R1]
0000326C                         L1833:	; bb90.split10
                                 ;    3570 				st_clust(dir, dcl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3570
0000326C AB82                    		MOV.L 38H[R0], R2
0000326E AA89                    		MOV.L 2CH[R0], R1
00003270 39rrrr               W  		BSR __$st_clust
00003273                         L1834:	; bb90.split11
                                 ;    3571 				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3571
00003273 AA8A                    		MOV.L 2CH[R0], R2
00003275 712120                  		ADD #20H, R2, R1
00003278 754320                  		MOV.L #00000020H, R3
0000327B 39rrrr               W  		BSR __$mem_cpy
0000327E                         L1835:	; bb90.split12
                                 ;    3572 				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3572
0000327E AA89                    		MOV.L 2CH[R0], R1
00003280 F914212E                		MOV.B #2EH, 21H[R1]
00003284                         L1836:	; bb90.split13
00003284 E500040F                		MOV.L 10H[R0], 3CH[R0]
00003288                         L1837:	; bb90.split14
                                 ;    3573 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3573
00003288 A881                    		MOV.L 08H[R0], R1
0000328A 581E                    		MOVU.B [R1], R14
0000328C 613E                    		CMP #03H, R14
0000328E 10                   S  		BEQ L1839
0000328F 2Err                 B  		BRA L1841
00003291                         L1838:	; bb120
                                 ;    3574 					pcl = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3574
00003291 3E0F00                  		MOV.L #00000000H, 3CH[R0]
00003294 2Err                 B  		BRA L1843
00003296                         L1839:	; bb128
00003296 A881                    		MOV.L 08H[R0], R1
00003298 AB8A                    		MOV.L 3CH[R0], R2
0000329A 0685120A                		CMP 28H[R1].L, R2
0000329E 18                   S  		BNE L1841
0000329F                         L1840:	; bb136
0000329F F80601                  		MOV.L #00000001H, [R0]
000032A2 08                   S  		BRA L1842
000032A3                         L1841:	; bb137
000032A3 F80600                  		MOV.L #00000000H, [R0]
000032A6                         L1842:	; bb138
000032A6 EC01                    		MOV.L [R0], R1
000032A8 6101                    		CMP #00H, R1
000032AA 21rr                    		BNE L1838
000032AC                         L1843:	; bb143
                                 ;    3575 				st_clust(dir+SZ_DIR, pcl);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3575
000032AC AB8A                    		MOV.L 3CH[R0], R2
000032AE AA89                    		MOV.L 2CH[R0], R1
000032B0 711120                  		ADD #20H, R1
000032B3 39rrrr               W  		BSR __$st_clust
000032B6                         L1844:	; bb143.split
                                 ;    3576 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3576
000032B6 A881                    		MOV.L 08H[R0], R1
000032B8 C5100233                		MOV.B 02H[R1], 33H[R0]
000032BC 2Err                 B  		BRA L1850
000032BE                         L1845:	; bb151
                                 ;    3577 					dj.fs->winsect = dsc++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3577
000032BE AB09                    		MOV.L 34H[R0], R1
000032C0 A882                    		MOV.L 08H[R0], R2
000032C2 A321                    		MOV.L R1, 30H[R2]
000032C4 AB09                    		MOV.L 34H[R0], R1
000032C6 6211                    		ADD #01H, R1
000032C8 A309                    		MOV.L R1, 34H[R0]
000032CA                         L1846:	; bb151.split
                                 ;    3578 					dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3578
000032CA A881                    		MOV.L 08H[R0], R1
000032CC 3C1401                  		MOV.B #01H, 04H[R1]
000032CF                         L1847:	; bb151.split15
                                 ;    3579 					res = sync_window(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3579
000032CF A881                    		MOV.L 08H[R0], R1
000032D1 39rrrr               W  		BSR __$sync_window
000032D4 A009                    		MOV.L R1, 04H[R0]
000032D6                         L1848:	; bb151.split16
                                 ;    3580 					if (res != FR_OK) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3580
000032D6 A809                    		MOV.L 04H[R0], R1
000032D8 6101                    		CMP #00H, R1
000032DA 21rr                    		BNE L1851
000032DC                         L1849:	; bb171
                                 ;    3581 					mem_set(dir, 0, SS(dj.fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3581
000032DC AA89                    		MOV.L 2CH[R0], R1
000032DE FB3A0002                		MOV.L #00000200H, R3
000032E2 6602                    		MOV.L #00000000H, R2
000032E4 39rrrr               W  		BSR __$mem_set
000032E7 590133                  		MOVU.B 33H[R0], R1
000032EA 6011                    		SUB #01H, R1
000032EC C70133                  		MOV.B R1, 33H[R0]
000032EF                         L1850:	; bb175
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3576
000032EF 590133                  		MOVU.B 33H[R0], R1
000032F2 6101                    		CMP #00H, R1
000032F4 21rr                    		BNE L1845
000032F6                         L1851:	; bb188
                                 ;    3582 				}
                                 ;    3583 			}
                                 ;    3584 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3584
000032F6 A809                    		MOV.L 04H[R0], R1
000032F8 6101                    		CMP #00H, R1
000032FA 18                   S  		BNE L1853
000032FB                         L1852:	; bb189
000032FB 710108                  		ADD #08H, R0, R1
000032FE 39rrrr               W  		BSR __$dir_register
00003301 A009                    		MOV.L R1, 04H[R0]
00003303                         L1853:	; bb196
                                 ;    3585 			if (res != FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3585
00003303 A809                    		MOV.L 04H[R0], R1
00003305 6101                    		CMP #00H, R1
00003307 10                   S  		BEQ L1855
00003308                         L1854:	; bb197
                                 ;    3586 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3586
00003308 AB82                    		MOV.L 38H[R0], R2
0000330A A881                    		MOV.L 08H[R0], R1
0000330C 39rrrr               W  		BSR __$remove_chain
0000330F 2Err                 B  		BRA L1861
00003311                         L1855:	; bb202
                                 ;    3587 			} else {
                                 ;    3588 				dir = dj.dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3588
00003311 E500070B                		MOV.L 1CH[R0], 2CH[R0]
00003315                         L1856:	; bb202.split
                                 ;    3589 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3589
00003315 AA89                    		MOV.L 2CH[R0], R1
00003317 3C1B10                  		MOV.B #10H, 0BH[R1]
0000331A                         L1857:	; bb202.split17
                                 ;    3590 				ST_DWORD(dir+DIR_WrtTime, tm);		/* Created time */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3590
0000331A AA89                    		MOV.L 2CH[R0], R1
0000331C 711116                  		ADD #16H, R1
0000331F E10110                  		MOV.L 40H[R0], [R1]
00003322                         L1858:	; bb202.split18
                                 ;    3591 				st_clust(dir, dcl);					/* Table start cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3591
00003322 AB82                    		MOV.L 38H[R0], R2
00003324 AA89                    		MOV.L 2CH[R0], R1
00003326 39rrrr               W  		BSR __$st_clust
00003329                         L1859:	; bb202.split19
                                 ;    3592 				dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3592
00003329 A881                    		MOV.L 08H[R0], R1
0000332B 3C1401                  		MOV.B #01H, 04H[R1]
0000332E                         L1860:	; bb202.split20
                                 ;    3593 				res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3593
0000332E A881                    		MOV.L 08H[R0], R1
00003330 39rrrr               W  		BSR __$sync_fs
00003333 A009                    		MOV.L R1, 04H[R0]
00003335                         L1861:	; bb233
                                 ;    3594 			}
                                 ;    3595 		}
                                 ;    3596 		FREE_BUF();
                                 ;    3597 	}
                                 ;    3598 
                                 ;    3599 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3599
00003335 A809                    		MOV.L 04H[R0], R1
00003337 A501                    		MOV.L R1, 50H[R0]
00003339                         L1862:	; bb233.split
                                 ;    3600 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3600
00003339 6716                    		RTSD #58H
0000333B                         _f_chmod:
                                 		.STACK	_f_chmod=76
                                 ;    3601 
                                 ;    3602 
                                 ;    3603 
                                 ;    3604 
                                 ;    3605 /*-----------------------------------------------------------------------*/
                                 ;    3606 /* Change Attribute                                                      */
                                 ;    3607 /*-----------------------------------------------------------------------*/
                                 ;    3608 
                                 ;    3609 FRESULT f_chmod (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3609
0000333B 7100B8                  		ADD #0FFFFFFB8H, R0
0000333E A409                    		MOV.L R1, 44H[R0]
00003340 C70243                  		MOV.B R2, 43H[R0]
00003343 C70342                  		MOV.B R3, 42H[R0]
00003346 6613                    		MOV.L #00000001H, R3
00003348 710244                  		ADD #44H, R0, R2
0000334B 710108                  		ADD #08H, R0, R1
                                 ;    3610 	const TCHAR* path,	/* Pointer to the file path */
                                 ;    3611 	BYTE value,			/* Attribute bits */
                                 ;    3612 	BYTE mask			/* Attribute mask to change */
                                 ;    3613 )
                                 ;    3614 {
                                 ;    3615 	FRESULT res;
                                 ;    3616 	DIR dj;
                                 ;    3617 	BYTE *dir;
                                 ;    3618 	DEF_NAMEBUF;
                                 ;    3619 
                                 ;    3620 
                                 ;    3621 	/* Get logical drive number */
                                 ;    3622 	res = find_volume(&dj.fs, &path, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3622
0000334E 39rrrr               W  		BSR __$find_volume
00003351 A009                    		MOV.L R1, 04H[R0]
00003353                         L1864:	; entry.split
                                 ;    3623 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3623
00003353 A809                    		MOV.L 04H[R0], R1
00003355 6101                    		CMP #00H, R1
00003357 3Brrrr               W  		BNE L1888
0000335A                         L1865:	; bb10
0000335A 710130                  		ADD #30H, R0, R1
                                 ;    3624 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3624
0000335D A201                    		MOV.L R1, 20H[R0]
0000335F                         L1866:	; bb10.split
0000335F FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
00003365 A209                    		MOV.L R1, 24H[R0]
00003367                         L1867:	; bb10.split1
                                 ;    3625 		res = follow_path(&dj, path);		/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3625
00003367 AC0A                    		MOV.L 44H[R0], R2
00003369 710108                  		ADD #08H, R0, R1
0000336C 39rrrr               W  		BSR __$follow_path
0000336F A009                    		MOV.L R1, 04H[R0]
00003371                         L1868:	; bb10.split2
                                 ;    3626 		FREE_BUF();
                                 ;    3627 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3627
00003371 A809                    		MOV.L 04H[R0], R1
00003373 6101                    		CMP #00H, R1
00003375 10                   S  		BEQ L1870
00003376 08                   S  		BRA L1871
00003377                         L1869:	; bb17
                                 ;    3628 			res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3628
00003377 3E0106                  		MOV.L #00000006H, 04H[R0]
0000337A 2Err                 B  		BRA L1877
0000337C                         L1870:	; bb22
0000337C F80601                  		MOV.L #00000001H, [R0]
0000337F 08                   S  		BRA L1872
00003380                         L1871:	; bb23
00003380 F80600                  		MOV.L #00000000H, [R0]
00003383                         L1872:	; bb24
00003383 EC01                    		MOV.L [R0], R1
00003385 6101                    		CMP #00H, R1
00003387 20rr                    		BEQ L1875
00003389                         L1873:	; bb26
00003389 AA01                    		MOV.L 20H[R0], R1
0000338B F5150B                  		BTST #05H, 0BH[R1].B
0000338E 10                   S  		BEQ L1875
0000338F                         L1874:	; bb35
0000338F F80601                  		MOV.L #00000001H, [R0]
00003392 08                   S  		BRA L1876
00003393                         L1875:	; bb36
00003393 F80600                  		MOV.L #00000000H, [R0]
00003396                         L1876:	; bb37
00003396 EC01                    		MOV.L [R0], R1
00003398 6101                    		CMP #00H, R1
0000339A 21rr                    		BNE L1869
0000339C                         L1877:	; bb43
                                 ;    3629 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3629
0000339C A809                    		MOV.L 04H[R0], R1
0000339E 6101                    		CMP #00H, R1
000033A0 21rr                    		BNE L1888
000033A2                         L1878:	; bb44
                                 ;    3630 			dir = dj.dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3630
000033A2 E500070B                		MOV.L 1CH[R0], 2CH[R0]
000033A6                         L1879:	; bb44.split
                                 ;    3631 			if (!dir) {						/* Is it a root directory? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3631
000033A6 AA89                    		MOV.L 2CH[R0], R1
000033A8 6101                    		CMP #00H, R1
000033AA 21rr                    		BNE L1885
000033AC 2Err                 B  		BRA L1886
000033AE                         L1880:	; bb48
                                 ;    3632 				res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3632
000033AE 3E0106                  		MOV.L #00000006H, 04H[R0]
000033B1 2Err                 B  		BRA L1888
000033B3                         L1881:	; bb49
                                 ;    3633 			} else {						/* File or sub directory */
                                 ;    3634 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3634
000033B3 590142                  		MOVU.B 42H[R0], R1
000033B6 752127                  		AND #27H, R1
000033B9 C70142                  		MOV.B R1, 42H[R0]
000033BC                         L1882:	; bb49.split
                                 ;    3635 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3635
000033BC 590142                  		MOVU.B 42H[R0], R1
000033BF FC3B1E                  		NOT R1, R14
000033C2 AA8A                    		MOV.L 2CH[R0], R2
000033C4 512E0B                  		AND 0BH[R2].UB, R14
000033C7 510143                  		AND 43H[R0].UB, R1
000033CA 57E1                    		OR R14, R1
000033CC 82A9                    		MOV.B R1, 0BH[R2]
000033CE                         L1883:	; bb49.split3
                                 ;    3636 				dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3636
000033CE A881                    		MOV.L 08H[R0], R1
000033D0 3C1401                  		MOV.B #01H, 04H[R1]
000033D3                         L1884:	; bb49.split4
                                 ;    3637 				res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3637
000033D3 A881                    		MOV.L 08H[R0], R1
000033D5 39rrrr               W  		BSR __$sync_fs
000033D8 A009                    		MOV.L R1, 04H[R0]
000033DA 2Err                 B  		BRA L1888
000033DC                         L1885:	; bb81
000033DC F80600                  		MOV.L #00000000H, [R0]
000033DF 08                   S  		BRA L1887
000033E0                         L1886:	; bb82
000033E0 F80601                  		MOV.L #00000001H, [R0]
000033E3                         L1887:	; bb83
000033E3 EC01                    		MOV.L [R0], R1
000033E5 6101                    		CMP #00H, R1
000033E7 21rr                    		BNE L1880
000033E9 2Err                 B  		BRA L1881
000033EB                         L1888:	; bb97
                                 ;    3638 			}
                                 ;    3639 		}
                                 ;    3640 	}
                                 ;    3641 
                                 ;    3642 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3642
000033EB A809                    		MOV.L 04H[R0], R1
000033ED A389                    		MOV.L R1, 3CH[R0]
000033EF                         L1889:	; bb97.split
                                 ;    3643 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3643
000033EF 6712                    		RTSD #48H
000033F1                         _f_rename:
                                 		.STACK	_f_rename=144
                                 ;    3644 
                                 ;    3645 
                                 ;    3646 
                                 ;    3647 
                                 ;    3648 /*-----------------------------------------------------------------------*/
                                 ;    3649 /* Rename File/Directory                                                 */
                                 ;    3650 /*-----------------------------------------------------------------------*/
                                 ;    3651 
                                 ;    3652 FRESULT f_rename (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3652
000033F1 7EA6                    		PUSH.L R6
000033F3 720078FF                		ADD #0FFFFFF78H, R0
000033F7 E70121                  		MOV.L R1, 84H[R0]
000033FA E70220                  		MOV.L R2, 80H[R0]
000033FD 6613                    		MOV.L #00000001H, R3
000033FF 72028400                		ADD #84H, R0, R2
00003403 710108                  		ADD #08H, R0, R1
                                 ;    3653 	const TCHAR* path_old,	/* Pointer to the object to be renamed */
                                 ;    3654 	const TCHAR* path_new	/* Pointer to the new name */
                                 ;    3655 )
                                 ;    3656 {
                                 ;    3657 	FRESULT res;
                                 ;    3658 	DIR djo, djn;
                                 ;    3659 	BYTE buf[21], *dir;
                                 ;    3660 	DWORD dw;
                                 ;    3661 	DEF_NAMEBUF;
                                 ;    3662 
                                 ;    3663 
                                 ;    3664 	/* Get logical drive number of the source object */
                                 ;    3665 	res = find_volume(&djo.fs, &path_old, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3665
00003406 39rrrr               W  		BSR __$find_volume
00003409 A009                    		MOV.L R1, 04H[R0]
0000340B                         L1891:	; entry.split
                                 ;    3666 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3666
0000340B A809                    		MOV.L 04H[R0], R1
0000340D 6101                    		CMP #00H, R1
0000340F 3Brrrr               W  		BNE L1949
00003412                         L1892:	; bb12
                                 ;    3667 		djn.fs = djo.fs;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3667
00003412 E500020B                		MOV.L 08H[R0], 2CH[R0]
00003416                         L1893:	; bb12.split
00003416 710170                  		ADD #70H, R0, R1
                                 ;    3668 		INIT_BUF(djo);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3668
00003419 A201                    		MOV.L R1, 20H[R0]
0000341B                         L1894:	; bb12.split1
0000341B FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
00003421 A209                    		MOV.L R1, 24H[R0]
00003423                         L1895:	; bb12.split2
                                 ;    3669 		res = follow_path(&djo, path_old);		/* Check old object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3669
00003423 ED0221                  		MOV.L 84H[R0], R2
00003426 710108                  		ADD #08H, R0, R1
00003429 39rrrr               W  		BSR __$follow_path
0000342C A009                    		MOV.L R1, 04H[R0]
0000342E                         L1896:	; bb12.split3
                                 ;    3670 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3670
0000342E A809                    		MOV.L 04H[R0], R1
00003430 6101                    		CMP #00H, R1
00003432 10                   S  		BEQ L1898
00003433 08                   S  		BRA L1899
00003434                         L1897:	; bb22
                                 ;    3671 			res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3671
00003434 3E0106                  		MOV.L #00000006H, 04H[R0]
00003437 2Err                 B  		BRA L1905
00003439                         L1898:	; bb27
00003439 F80601                  		MOV.L #00000001H, [R0]
0000343C 08                   S  		BRA L1900
0000343D                         L1899:	; bb28
0000343D F80600                  		MOV.L #00000000H, [R0]
00003440                         L1900:	; bb29
00003440 EC01                    		MOV.L [R0], R1
00003442 6101                    		CMP #00H, R1
00003444 20rr                    		BEQ L1903
00003446                         L1901:	; bb31
00003446 AA01                    		MOV.L 20H[R0], R1
00003448 F5150B                  		BTST #05H, 0BH[R1].B
0000344B 10                   S  		BEQ L1903
0000344C                         L1902:	; bb40
0000344C F80601                  		MOV.L #00000001H, [R0]
0000344F 08                   S  		BRA L1904
00003450                         L1903:	; bb41
00003450 F80600                  		MOV.L #00000000H, [R0]
00003453                         L1904:	; bb42
00003453 EC01                    		MOV.L [R0], R1
00003455 6101                    		CMP #00H, R1
00003457 21rr                    		BNE L1897
00003459                         L1905:	; bb48
                                 ;    3672 #if _FS_LOCK
                                 ;    3673 		if (res == FR_OK) res = chk_lock(&djo, 2);
                                 ;    3674 #endif
                                 ;    3675 		if (res == FR_OK) {						/* Old object is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3675
00003459 A809                    		MOV.L 04H[R0], R1
0000345B 6101                    		CMP #00H, R1
0000345D 3Brrrr               W  		BNE L1949
00003460                         L1906:	; bb50
                                 ;    3676 			if (!djo.dir) {						/* Is root dir? */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3676
00003460 A989                    		MOV.L 1CH[R0], R1
00003462 6101                    		CMP #00H, R1
00003464 3Brrrr               W  		BNE L1946
00003467 38rrrr               W  		BRA L1947
0000346A                         L1907:	; bb51
                                 ;    3677 				res = FR_NO_FILE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3677
0000346A 3E0104                  		MOV.L #00000004H, 04H[R0]
0000346D 38rrrr               W  		BRA L1949
00003470                         L1908:	; bb52
                                 ;    3678 			} else {
                                 ;    3679 				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3679
00003470 A98A                    		MOV.L 1CH[R0], R2
00003472 62B2                    		ADD #0BH, R2
00003474 754315                  		MOV.L #00000015H, R3
00003477 710153                  		ADD #53H, R0, R1
0000347A 39rrrr               W  		BSR __$mem_cpy
0000347D                         L1909:	; bb52.split
0000347D 754324                  		MOV.L #00000024H, R3
00003480 710208                  		ADD #08H, R0, R2
00003483 71012C                  		ADD #2CH, R0, R1
                                 ;    3680 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3680
00003486 39rrrr               W  		BSR __$mem_cpy
00003489                         L1910:	; bb52.split4
00003489 72018000                		ADD #80H, R0, R1
                                 ;    3681 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3681
0000348D 39rrrr               W  		BSR __$get_ldnumber
00003490 6101                    		CMP #00H, R1
00003492 29rr                    		BLT L1912
00003494                         L1911:	; bb60
                                 ;    3682 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3682
00003494 ED0220                  		MOV.L 80H[R0], R2
00003497 71012C                  		ADD #2CH, R0, R1
0000349A 39rrrr               W  		BSR __$follow_path
0000349D A009                    		MOV.L R1, 04H[R0]
0000349F 08                   S  		BRA L1913
000034A0                         L1912:	; bb63
                                 ;    3683 				else
                                 ;    3684 					res = FR_INVALID_DRIVE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3684
000034A0 3E010B                  		MOV.L #0000000BH, 04H[R0]
000034A3                         L1913:	; bb69
                                 ;    3685 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3685
000034A3 A809                    		MOV.L 04H[R0], R1
000034A5 6101                    		CMP #00H, R1
000034A7 18                   S  		BNE L1915
000034A8                         L1914:	; bb70
000034A8 3E0108                  		MOV.L #00000008H, 04H[R0]
000034AB                         L1915:	; bb76
                                 ;    3686 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3686
000034AB A809                    		MOV.L 04H[R0], R1
000034AD 6141                    		CMP #04H, R1
000034AF 3Brrrr               W  		BNE L1949
000034B2                         L1916:	; bb77
000034B2 71012C                  		ADD #2CH, R0, R1
                                 ;    3687 /* Start of critical section that any interruption can cause a cross-link */
                                 ;    3688 					res = dir_register(&djn);			/* Register the new entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3688
000034B5 39rrrr               W  		BSR __$dir_register
000034B8 A009                    		MOV.L R1, 04H[R0]
000034BA                         L1917:	; bb77.split
                                 ;    3689 					if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3689
000034BA A809                    		MOV.L 04H[R0], R1
000034BC 6101                    		CMP #00H, R1
000034BE 3Brrrr               W  		BNE L1949
000034C1                         L1918:	; bb80
                                 ;    3690 						dir = djn.dir;					/* Copy object information except name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3690
000034C1 E500101A                		MOV.L 40H[R0], 68H[R0]
000034C5                         L1919:	; bb80.split
                                 ;    3691 						mem_cpy(dir+13, buf+2, 19);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3691
000034C5 AE81                    		MOV.L 68H[R0], R1
000034C7 62D1                    		ADD #0DH, R1
000034C9 754313                  		MOV.L #00000013H, R3
000034CC 710255                  		ADD #55H, R0, R2
000034CF 39rrrr               W  		BSR __$mem_cpy
000034D2                         L1920:	; bb80.split5
                                 ;    3692 						dir[DIR_Attr] = buf[0] | AM_ARC;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3692
000034D2 590153                  		MOVU.B 53H[R0], R1
000034D5 7851                    		BSET #05H, R1
000034D7 AE82                    		MOV.L 68H[R0], R2
000034D9 82A9                    		MOV.B R1, 0BH[R2]
000034DB                         L1921:	; bb80.split6
                                 ;    3693 						djo.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3693
000034DB A881                    		MOV.L 08H[R0], R1
000034DD 3C1401                  		MOV.B #01H, 04H[R1]
000034E0                         L1922:	; bb80.split7
                                 ;    3694 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the directory if needed */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3694
000034E0 AE81                    		MOV.L 68H[R0], R1
000034E2 F5140B                  		BTST #04H, 0BH[R1].B
000034E5 21rr                    		BNE L1938
000034E7 2Err                 B  		BRA L1940
000034E9                         L1923:	; bb99
                                 ;    3695 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3695
000034E9 A886                    		MOV.L 08H[R0], R6
000034EB AE82                    		MOV.L 68H[R0], R2
000034ED EF61                    		MOV.L R6, R1
000034EF 39rrrr               W  		BSR __$ld_clust
000034F2 EF12                    		MOV.L R1, R2
000034F4 EF61                    		MOV.L R6, R1
000034F6 39rrrr               W  		BSR _clust2sect
000034F9 A689                    		MOV.L R1, 6CH[R0]
000034FB                         L1924:	; bb99.split
                                 ;    3696 							if (!dw) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3696
000034FB AE89                    		MOV.L 6CH[R0], R1
000034FD 6101                    		CMP #00H, R1
000034FF 21rr                    		BNE L1935
00003501 2Err                 B  		BRA L1936
00003503                         L1925:	; bb108
                                 ;    3697 								res = FR_INT_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3697
00003503 3E0102                  		MOV.L #00000002H, 04H[R0]
00003506 2Err                 B  		BRA L1942
00003508                         L1926:	; bb109
                                 ;    3698 							} else {
                                 ;    3699 								res = move_window(djo.fs, dw);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3699
00003508 AE8A                    		MOV.L 6CH[R0], R2
0000350A A881                    		MOV.L 08H[R0], R1
0000350C 39rrrr               W  		BSR __$move_window
0000350F A009                    		MOV.L R1, 04H[R0]
00003511                         L1927:	; bb109.split
                                 ;    3700 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3700
00003511 A881                    		MOV.L 08H[R0], R1
00003513 711154                  		ADD #54H, R1
00003516 A681                    		MOV.L R1, 68H[R0]
00003518                         L1928:	; bb109.split8
                                 ;    3701 								if (res == FR_OK && dir[1] == '.') {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3701
00003518 A809                    		MOV.L 04H[R0], R1
0000351A 6101                    		CMP #00H, R1
0000351C 20rr                    		BEQ L1931
0000351E 2Err                 B  		BRA L1933
00003520                         L1929:	; bb120
                                 ;    3702 									st_clust(dir, djn.sclust);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3702
00003520 AB0A                    		MOV.L 34H[R0], R2
00003522 AE81                    		MOV.L 68H[R0], R1
00003524 39rrrr               W  		BSR __$st_clust
00003527                         L1930:	; bb120.split
                                 ;    3703 									djo.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3703
00003527 A881                    		MOV.L 08H[R0], R1
00003529 3C1401                  		MOV.B #01H, 04H[R1]
0000352C 2Err                 B  		BRA L1942
0000352E                         L1931:	; bb130
0000352E AE81                    		MOV.L 68H[R0], R1
00003530 B019                    		MOVU.B 01H[R1], R1
00003532 75512E                  		CMP #2EH, R1
00003535 18                   S  		BNE L1933
00003536                         L1932:	; bb137
00003536 F80601                  		MOV.L #00000001H, [R0]
00003539 08                   S  		BRA L1934
0000353A                         L1933:	; bb138
0000353A F80600                  		MOV.L #00000000H, [R0]
0000353D                         L1934:	; bb139
0000353D EC01                    		MOV.L [R0], R1
0000353F 6101                    		CMP #00H, R1
00003541 21rr                    		BNE L1929
00003543 2Err                 B  		BRA L1942
00003545                         L1935:	; bb148
00003545 F80600                  		MOV.L #00000000H, [R0]
00003548 08                   S  		BRA L1937
00003549                         L1936:	; bb149
00003549 F80601                  		MOV.L #00000001H, [R0]
0000354C                         L1937:	; bb150
0000354C EC01                    		MOV.L [R0], R1
0000354E 6101                    		CMP #00H, R1
00003550 21rr                    		BNE L1925
00003552 2Err                 B  		BRA L1926
00003554                         L1938:	; bb162
00003554 A901                    		MOV.L 10H[R0], R1
00003556 0685010D                		CMP 34H[R0].L, R1
0000355A 10                   S  		BEQ L1940
0000355B                         L1939:	; bb169
0000355B F80601                  		MOV.L #00000001H, [R0]
0000355E 08                   S  		BRA L1941
0000355F                         L1940:	; bb170
0000355F F80600                  		MOV.L #00000000H, [R0]
00003562                         L1941:	; bb171
00003562 EC01                    		MOV.L [R0], R1
00003564 6101                    		CMP #00H, R1
00003566 3Brrrr               W  		BNE L1923
00003569                         L1942:	; bb177
                                 ;    3704 								}
                                 ;    3705 							}
                                 ;    3706 						}
                                 ;    3707 						if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3707
00003569 A809                    		MOV.L 04H[R0], R1
0000356B 6101                    		CMP #00H, R1
0000356D 21rr                    		BNE L1949
0000356F                         L1943:	; bb178
0000356F 710108                  		ADD #08H, R0, R1
                                 ;    3708 							res = dir_remove(&djo);		/* Remove old entry */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3708
00003572 39rrrr               W  		BSR __$dir_remove
00003575 A009                    		MOV.L R1, 04H[R0]
00003577                         L1944:	; bb178.split
                                 ;    3709 							if (res == FR_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3709
00003577 A809                    		MOV.L 04H[R0], R1
00003579 6101                    		CMP #00H, R1
0000357B 21rr                    		BNE L1949
0000357D                         L1945:	; bb181
                                 ;    3710 								res = sync_fs(djo.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3710
0000357D A881                    		MOV.L 08H[R0], R1
0000357F 39rrrr               W  		BSR __$sync_fs
00003582 A009                    		MOV.L R1, 04H[R0]
00003584 2Err                 B  		BRA L1949
00003586                         L1946:	; bb209
00003586 F80600                  		MOV.L #00000000H, [R0]
00003589 08                   S  		BRA L1948
0000358A                         L1947:	; bb210
0000358A F80601                  		MOV.L #00000001H, [R0]
0000358D                         L1948:	; bb211
0000358D EC01                    		MOV.L [R0], R1
0000358F 6101                    		CMP #00H, R1
00003591 3Brrrr               W  		BNE L1907
00003594 38rrrr               W  		BRA L1908
00003597                         L1949:	; bb225
                                 ;    3711 						}
                                 ;    3712 					}
                                 ;    3713 /* End of critical section */
                                 ;    3714 				}
                                 ;    3715 			}
                                 ;    3716 		}
                                 ;    3717 		FREE_BUF();
                                 ;    3718 	}
                                 ;    3719 
                                 ;    3720 	LEAVE_FF(djo.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3720
00003597 A809                    		MOV.L 04H[R0], R1
00003599 A789                    		MOV.L R1, 7CH[R0]
0000359B                         L1950:	; bb225.split
                                 ;    3721 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3721
0000359B 3F6623                  		RTSD #8CH, R6-R6
0000359E                         _f_utime:
                                 		.STACK	_f_utime=76
                                 ;    3722 
                                 ;    3723 
                                 ;    3724 
                                 ;    3725 
                                 ;    3726 /*-----------------------------------------------------------------------*/
                                 ;    3727 /* Change Timestamp                                                      */
                                 ;    3728 /*-----------------------------------------------------------------------*/
                                 ;    3729 
                                 ;    3730 FRESULT f_utime (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3730
0000359E 7100B8                  		ADD #0FFFFFFB8H, R0
000035A1 A409                    		MOV.L R1, 44H[R0]
000035A3 A402                    		MOV.L R2, 40H[R0]
000035A5 6613                    		MOV.L #00000001H, R3
000035A7 710244                  		ADD #44H, R0, R2
000035AA 710108                  		ADD #08H, R0, R1
                                 ;    3731 	const TCHAR* path,	/* Pointer to the file/directory name */
                                 ;    3732 	const FILINFO* fno	/* Pointer to the time stamp to be set */
                                 ;    3733 )
                                 ;    3734 {
                                 ;    3735 	FRESULT res;
                                 ;    3736 	DIR dj;
                                 ;    3737 	BYTE *dir;
                                 ;    3738 	DEF_NAMEBUF;
                                 ;    3739 
                                 ;    3740 
                                 ;    3741 	/* Get logical drive number */
                                 ;    3742 	res = find_volume(&dj.fs, &path, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3742
000035AD 39rrrr               W  		BSR __$find_volume
000035B0 A009                    		MOV.L R1, 04H[R0]
000035B2                         L1952:	; entry.split
                                 ;    3743 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3743
000035B2 A809                    		MOV.L 04H[R0], R1
000035B4 6101                    		CMP #00H, R1
000035B6 3Brrrr               W  		BNE L1976
000035B9                         L1953:	; bb9
000035B9 710130                  		ADD #30H, R0, R1
                                 ;    3744 		INIT_BUF(dj);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3744
000035BC A201                    		MOV.L R1, 20H[R0]
000035BE                         L1954:	; bb9.split
000035BE FB12rrrrrrrr            		MOV.L #__$LfnBuf, R1
000035C4 A209                    		MOV.L R1, 24H[R0]
000035C6                         L1955:	; bb9.split1
                                 ;    3745 		res = follow_path(&dj, path);	/* Follow the file path */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3745
000035C6 AC0A                    		MOV.L 44H[R0], R2
000035C8 710108                  		ADD #08H, R0, R1
000035CB 39rrrr               W  		BSR __$follow_path
000035CE A009                    		MOV.L R1, 04H[R0]
000035D0                         L1956:	; bb9.split2
                                 ;    3746 		FREE_BUF();
                                 ;    3747 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3747
000035D0 A809                    		MOV.L 04H[R0], R1
000035D2 6101                    		CMP #00H, R1
000035D4 10                   S  		BEQ L1958
000035D5 08                   S  		BRA L1959
000035D6                         L1957:	; bb16
                                 ;    3748 			res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3748
000035D6 3E0106                  		MOV.L #00000006H, 04H[R0]
000035D9 2Err                 B  		BRA L1965
000035DB                         L1958:	; bb21
000035DB F80601                  		MOV.L #00000001H, [R0]
000035DE 08                   S  		BRA L1960
000035DF                         L1959:	; bb22
000035DF F80600                  		MOV.L #00000000H, [R0]
000035E2                         L1960:	; bb23
000035E2 EC01                    		MOV.L [R0], R1
000035E4 6101                    		CMP #00H, R1
000035E6 20rr                    		BEQ L1963
000035E8                         L1961:	; bb25
000035E8 AA01                    		MOV.L 20H[R0], R1
000035EA F5150B                  		BTST #05H, 0BH[R1].B
000035ED 10                   S  		BEQ L1963
000035EE                         L1962:	; bb34
000035EE F80601                  		MOV.L #00000001H, [R0]
000035F1 08                   S  		BRA L1964
000035F2                         L1963:	; bb35
000035F2 F80600                  		MOV.L #00000000H, [R0]
000035F5                         L1964:	; bb36
000035F5 EC01                    		MOV.L [R0], R1
000035F7 6101                    		CMP #00H, R1
000035F9 21rr                    		BNE L1957
000035FB                         L1965:	; bb42
                                 ;    3749 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3749
000035FB A809                    		MOV.L 04H[R0], R1
000035FD 6101                    		CMP #00H, R1
000035FF 21rr                    		BNE L1976
00003601                         L1966:	; bb43
                                 ;    3750 			dir = dj.dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3750
00003601 E500070B                		MOV.L 1CH[R0], 2CH[R0]
00003605                         L1967:	; bb43.split
                                 ;    3751 			if (!dir) {					/* Root directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3751
00003605 AA89                    		MOV.L 2CH[R0], R1
00003607 6101                    		CMP #00H, R1
00003609 21rr                    		BNE L1973
0000360B 2Err                 B  		BRA L1974
0000360D                         L1968:	; bb47
                                 ;    3752 				res = FR_INVALID_NAME;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3752
0000360D 3E0106                  		MOV.L #00000006H, 04H[R0]
00003610 2Err                 B  		BRA L1976
00003612                         L1969:	; bb48
                                 ;    3753 			} else {					/* File or sub-directory */
                                 ;    3754 				ST_WORD(dir+DIR_WrtTime, fno->ftime);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3754
00003612 AC01                    		MOV.L 40H[R0], R1
00003614 AA8A                    		MOV.L 2CH[R0], R2
00003616 D512030B                		MOV.W 06H[R1], 16H[R2]
0000361A                         L1970:	; bb48.split
                                 ;    3755 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3755
0000361A AC01                    		MOV.L 40H[R0], R1
0000361C AA8A                    		MOV.L 2CH[R0], R2
0000361E D512020C                		MOV.W 04H[R1], 18H[R2]
00003622                         L1971:	; bb48.split3
                                 ;    3756 				dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3756
00003622 A881                    		MOV.L 08H[R0], R1
00003624 3C1401                  		MOV.B #01H, 04H[R1]
00003627                         L1972:	; bb48.split4
                                 ;    3757 				res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3757
00003627 A881                    		MOV.L 08H[R0], R1
00003629 39rrrr               W  		BSR __$sync_fs
0000362C A009                    		MOV.L R1, 04H[R0]
0000362E 2Err                 B  		BRA L1976
00003630                         L1973:	; bb70
00003630 F80600                  		MOV.L #00000000H, [R0]
00003633 08                   S  		BRA L1975
00003634                         L1974:	; bb71
00003634 F80601                  		MOV.L #00000001H, [R0]
00003637                         L1975:	; bb72
00003637 EC01                    		MOV.L [R0], R1
00003639 6101                    		CMP #00H, R1
0000363B 21rr                    		BNE L1968
0000363D 2Err                 B  		BRA L1969
0000363F                         L1976:	; bb86
                                 ;    3758 			}
                                 ;    3759 		}
                                 ;    3760 	}
                                 ;    3761 
                                 ;    3762 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3762
0000363F A809                    		MOV.L 04H[R0], R1
00003641 A389                    		MOV.L R1, 3CH[R0]
00003643                         L1977:	; bb86.split
                                 ;    3763 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3763
00003643 6712                    		RTSD #48H
00003645                         _f_getlabel:
                                 		.STACK	_f_getlabel=72
                                 ;    3764 
                                 ;    3765 #endif /* !_FS_READONLY */
                                 ;    3766 #endif /* _FS_MINIMIZE == 0 */
                                 ;    3767 #endif /* _FS_MINIMIZE <= 1 */
                                 ;    3768 #endif /* _FS_MINIMIZE <= 2 */
                                 ;    3769 
                                 ;    3770 
                                 ;    3771 
                                 ;    3772 #if _USE_LABEL
                                 ;    3773 /*-----------------------------------------------------------------------*/
                                 ;    3774 /* Get volume label                                                      */
                                 ;    3775 /*-----------------------------------------------------------------------*/
                                 ;    3776 
                                 ;    3777 FRESULT f_getlabel (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3777
00003645 7100BC                  		ADD #0FFFFFFBCH, R0
00003648 A401                    		MOV.L R1, 40H[R0]
0000364A A38A                    		MOV.L R2, 3CH[R0]
0000364C A383                    		MOV.L R3, 38H[R0]
0000364E 6603                    		MOV.L #00000000H, R3
00003650 710240                  		ADD #40H, R0, R2
00003653 710108                  		ADD #08H, R0, R1
                                 ;    3778 	const TCHAR* path,	/* Path name of the logical drive number */
                                 ;    3779 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
                                 ;    3780 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
                                 ;    3781 )
                                 ;    3782 {
                                 ;    3783 	FRESULT res;
                                 ;    3784 	DIR dj;
                                 ;    3785 	UINT i, j;
                                 ;    3786 
                                 ;    3787 
                                 ;    3788 	/* Get logical drive number */
                                 ;    3789 	res = find_volume(&dj.fs, &path, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3789
00003656 39rrrr               W  		BSR __$find_volume
00003659 A009                    		MOV.L R1, 04H[R0]
0000365B                         L1979:	; entry.split
                                 ;    3790 
                                 ;    3791 	/* Get volume label */
                                 ;    3792 	if (res == FR_OK && label) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3792
0000365B A809                    		MOV.L 04H[R0], R1
0000365D 6101                    		CMP #00H, R1
0000365F 20rr                    		BEQ L1996
00003661 2Err                 B  		BRA L1998
00003663                         L1980:	; bb10
                                 ;    3793 		dj.sclust = 0;					/* Open root directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3793
00003663 3E0400                  		MOV.L #00000000H, 10H[R0]
00003666                         L1981:	; bb10.split
00003666 6602                    		MOV.L #00000000H, R2
00003668 710108                  		ADD #08H, R0, R1
                                 ;    3794 		res = dir_sdi(&dj, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3794
0000366B 39rrrr               W  		BSR __$dir_sdi
0000366E A009                    		MOV.L R1, 04H[R0]
00003670                         L1982:	; bb10.split1
                                 ;    3795 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3795
00003670 A809                    		MOV.L 04H[R0], R1
00003672 6101                    		CMP #00H, R1
00003674 21rr                    		BNE L2000
00003676                         L1983:	; bb14
00003676 6612                    		MOV.L #00000001H, R2
00003678 710108                  		ADD #08H, R0, R1
                                 ;    3796 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3796
0000367B 39rrrr               W  		BSR __$dir_read
0000367E A009                    		MOV.L R1, 04H[R0]
00003680                         L1984:	; bb14.split
                                 ;    3797 			if (res == FR_OK) {			/* A volume label is exist */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3797
00003680 A809                    		MOV.L 04H[R0], R1
00003682 6101                    		CMP #00H, R1
00003684 21rr                    		BNE L1993
00003686                         L1985:	; bb17
                                 ;    3798 #if _USE_LFN && _LFN_UNICODE
                                 ;    3799 				WCHAR w;
                                 ;    3800 				i = j = 0;
                                 ;    3801 				do {
                                 ;    3802 					w = (i < 11) ? dj.dir[i++] : ' ';
                                 ;    3803 					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
                                 ;    3804 						w = w << 8 | dj.dir[i++];
                                 ;    3805 					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
                                 ;    3806 				} while (j < 11);
                                 ;    3807 #else
                                 ;    3808 				mem_cpy(label, dj.dir, 11);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3808
00003686 A98A                    		MOV.L 1CH[R0], R2
00003688 AB89                    		MOV.L 3CH[R0], R1
0000368A 66B3                    		MOV.L #0000000BH, R3
0000368C 39rrrr               W  		BSR __$mem_cpy
0000368F                         L1986:	; bb17.split
                                 ;    3809 #endif
                                 ;    3810 				j = 11;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3810
0000368F 3E0C0B                  		MOV.L #0000000BH, 30H[R0]
00003692                         L1987:	; bb21
00003692 660E                    		MOV.L #00000000H, R14
                                 ;    3811 				do {
                                 ;    3812 					label[j] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3812
00003694 AB01                    		MOV.L 30H[R0], R1
00003696 AB8A                    		MOV.L 3CH[R0], R2
00003698 FE021E                  		MOV.B R14, [R2,R1]
0000369B                         L1988:	; bb21.split
                                 ;    3813 					if (!j) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3813
0000369B AB01                    		MOV.L 30H[R0], R1
0000369D 6101                    		CMP #00H, R1
0000369F 10                   S  		BEQ L1990
000036A0                         L1989:	; bb31
000036A0 F80600                  		MOV.L #00000000H, [R0]
000036A3 08                   S  		BRA L1991
000036A4                         L1990:	; bb32
000036A4 F80601                  		MOV.L #00000001H, [R0]
000036A7                         L1991:	; bb33
000036A7 EC01                    		MOV.L [R0], R1
000036A9 6101                    		CMP #00H, R1
000036AB 21rr                    		BNE L1993
000036AD                         L1992:	; bb36
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3811
000036AD AB01                    		MOV.L 30H[R0], R1
000036AF 6011                    		SUB #01H, R1
000036B1 AB8A                    		MOV.L 3CH[R0], R2
000036B3 A301                    		MOV.L R1, 30H[R0]
000036B5 FEC21E                  		MOVU.B [R2,R1], R14
000036B8 755E20                  		CMP #20H, R14
000036BB 20rr                    		BEQ L1987
000036BD                         L1993:	; bb54
                                 ;    3814 				} while (label[--j] == ' ');
                                 ;    3815 			}
                                 ;    3816 			if (res == FR_NO_FILE) {	/* No label, return nul string */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3816
000036BD A809                    		MOV.L 04H[R0], R1
000036BF 6141                    		CMP #04H, R1
000036C1 21rr                    		BNE L2000
000036C3                         L1994:	; bb55
                                 ;    3817 				label[0] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3817
000036C3 AB89                    		MOV.L 3CH[R0], R1
000036C5 F81400                  		MOV.B #00H, [R1]
000036C8                         L1995:	; bb55.split
                                 ;    3818 				res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3818
000036C8 3E0100                  		MOV.L #00000000H, 04H[R0]
000036CB 2Err                 B  		BRA L2000
000036CD                         L1996:	; bb71
000036CD AB89                    		MOV.L 3CH[R0], R1
000036CF 6101                    		CMP #00H, R1
000036D1 10                   S  		BEQ L1998
000036D2                         L1997:	; bb75
000036D2 F80601                  		MOV.L #00000001H, [R0]
000036D5 08                   S  		BRA L1999
000036D6                         L1998:	; bb76
000036D6 F80600                  		MOV.L #00000000H, [R0]
000036D9                         L1999:	; bb77
000036D9 EC01                    		MOV.L [R0], R1
000036DB 6101                    		CMP #00H, R1
000036DD 21rr                    		BNE L1980
000036DF                         L2000:	; bb83
                                 ;    3819 			}
                                 ;    3820 		}
                                 ;    3821 	}
                                 ;    3822 
                                 ;    3823 	/* Get volume serial number */
                                 ;    3824 	if (res == FR_OK && vsn) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3824
000036DF A809                    		MOV.L 04H[R0], R1
000036E1 6101                    		CMP #00H, R1
000036E3 20rr                    		BEQ L2007
000036E5 2Err                 B  		BRA L2009
000036E7                         L2001:	; bb84
                                 ;    3825 		res = move_window(dj.fs, dj.fs->volbase);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3825
000036E7 A881                    		MOV.L 08H[R0], R1
000036E9 AA12                    		MOV.L 20H[R1], R2
000036EB 39rrrr               W  		BSR __$move_window
000036EE A009                    		MOV.L R1, 04H[R0]
000036F0                         L2002:	; bb84.split
                                 ;    3826 		if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3826
000036F0 A809                    		MOV.L 04H[R0], R1
000036F2 6101                    		CMP #00H, R1
000036F4 21rr                    		BNE L2011
000036F6                         L2003:	; bb93
                                 ;    3827 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3827
000036F6 A881                    		MOV.L 08H[R0], R1
000036F8 581E                    		MOVU.B [R1], R14
000036FA 613E                    		CMP #03H, R14
000036FC 18                   S  		BNE L2005
000036FD                         L2004:	; bb101
000036FD F80643                  		MOV.L #00000043H, [R0]
00003700 08                   S  		BRA L2006
00003701                         L2005:	; bb102
00003701 F80627                  		MOV.L #00000027H, [R0]
00003704                         L2006:	; bb103
00003704 EC01                    		MOV.L [R0], R1
00003706 A289                    		MOV.L R1, 2CH[R0]
                                 ;    3828 			*vsn = LD_DWORD(&dj.fs->win[i]);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3828
00003708 06890102                		ADD 08H[R0].L, R1
0000370C AB82                    		MOV.L 38H[R0], R2
0000370E E1120D                  		MOV.L 34H[R1], [R2]
00003711 2Err                 B  		BRA L2011
00003713                         L2007:	; bb123
00003713 AB81                    		MOV.L 38H[R0], R1
00003715 6101                    		CMP #00H, R1
00003717 10                   S  		BEQ L2009
00003718                         L2008:	; bb127
00003718 F80601                  		MOV.L #00000001H, [R0]
0000371B 08                   S  		BRA L2010
0000371C                         L2009:	; bb128
0000371C F80600                  		MOV.L #00000000H, [R0]
0000371F                         L2010:	; bb129
0000371F EC01                    		MOV.L [R0], R1
00003721 6101                    		CMP #00H, R1
00003723 21rr                    		BNE L2001
00003725                         L2011:	; bb134
                                 ;    3829 		}
                                 ;    3830 	}
                                 ;    3831 
                                 ;    3832 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3832
00003725 A809                    		MOV.L 04H[R0], R1
00003727 A309                    		MOV.L R1, 34H[R0]
00003729                         L2012:	; bb134.split
                                 ;    3833 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3833
00003729 6711                    		RTSD #44H
0000372B                         _f_setlabel:
                                 		.STACK	_f_setlabel=92
                                 ;    3834 
                                 ;    3835 
                                 ;    3836 
                                 ;    3837 #if !_FS_READONLY
                                 ;    3838 /*-----------------------------------------------------------------------*/
                                 ;    3839 /* Set volume label                                                      */
                                 ;    3840 /*-----------------------------------------------------------------------*/
                                 ;    3841 
                                 ;    3842 FRESULT f_setlabel (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3842
0000372B 7100A8                  		ADD #0FFFFFFA8H, R0
0000372E A509                    		MOV.L R1, 54H[R0]
00003730 6613                    		MOV.L #00000001H, R3
00003732 710254                  		ADD #54H, R0, R2
00003735 71010C                  		ADD #0CH, R0, R1
                                 ;    3843 	const TCHAR* label	/* Pointer to the volume label to set */
                                 ;    3844 )
                                 ;    3845 {
                                 ;    3846 	FRESULT res;
                                 ;    3847 	DIR dj;
                                 ;    3848 	BYTE vn[11];
                                 ;    3849 	UINT i, j, sl;
                                 ;    3850 	WCHAR w;
                                 ;    3851 	DWORD tm;
                                 ;    3852 
                                 ;    3853 
                                 ;    3854 	/* Get logical drive number */
                                 ;    3855 	res = find_volume(&dj.fs, &label, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3855
00003738 39rrrr               W  		BSR __$find_volume
0000373B A081                    		MOV.L R1, 08H[R0]
0000373D                         L2014:	; entry.split
                                 ;    3856 	if (res) LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3856
0000373D A881                    		MOV.L 08H[R0], R1
0000373F 6101                    		CMP #00H, R1
00003741 10                   S  		BEQ L2016
00003742                         L2015:	; bb12
00003742 E5000201                		MOV.L 08H[R0], 04H[R0]
00003746 38rrrr               W  		BRA L2077
00003749                         L2016:	; bb18
                                 ;    3857 
                                 ;    3858 	/* Create a volume label in directory form */
                                 ;    3859 	vn[0] = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3859
00003749 F9043100                		MOV.B #00H, 31H[R0]
0000374D                         L2017:	; bb18.split
                                 ;    3860 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3860
0000374D 3E8100                  		MOV.L #00000000H, 44H[R0]
00003750 08                   S  		BRA L2019
00003751                         L2018:	; bb21
00003751 AC09                    		MOV.L 44H[R0], R1
00003753 6211                    		ADD #01H, R1
00003755 A409                    		MOV.L R1, 44H[R0]
00003757                         L2019:	; bb24
00003757 AC09                    		MOV.L 44H[R0], R1
00003759 AD0A                    		MOV.L 54H[R0], R2
0000375B FEC21E                  		MOVU.B [R2,R1], R14
0000375E 610E                    		CMP #00H, R14
00003760 21rr                    		BNE L2018
00003762 08                   S  		BRA L2021
00003763                         L2020:	; bb34
00003763 6011                    		SUB #01H, R1
00003765 A409                    		MOV.L R1, 44H[R0]
00003767                         L2021:	; bb37
                                 ;    3861 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3861
00003767 AC09                    		MOV.L 44H[R0], R1
00003769 6101                    		CMP #00H, R1
0000376B 20rr                    		BEQ L2024
0000376D                         L2022:	; bb41
0000376D AC09                    		MOV.L 44H[R0], R1
0000376F 06890115                		ADD 54H[R0].L, R1
00003773 FBE6FF                  		MOV.L #0FFFFFFFFH, R14
00003776 FEC1EE                  		MOVU.B [R1,R14], R14
00003779 755E20                  		CMP #20H, R14
0000377C 18                   S  		BNE L2024
0000377D                         L2023:	; bb50
0000377D F80601                  		MOV.L #00000001H, [R0]
00003780 08                   S  		BRA L2025
00003781                         L2024:	; bb51
00003781 F80600                  		MOV.L #00000000H, [R0]
00003784                         L2025:	; bb52
00003784 EC01                    		MOV.L [R0], R1
00003786 6101                    		CMP #00H, R1
00003788 AC09                    		MOV.L 44H[R0], R1
0000378A 21rr                    		BNE L2020
0000378C                         L2026:	; bb58
                                 ;    3862 	if (sl) {	/* Create volume label in directory form */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3862
0000378C 6101                    		CMP #00H, R1
0000378E 3Arrrr               W  		BEQ L2052
00003791                         L2027:	; bb59
                                 ;    3863 		i = j = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3863
00003791 3E8000                  		MOV.L #00000000H, 40H[R0]
00003794 3E0F00                  		MOV.L #00000000H, 3CH[R0]
00003797                         L2028:	; bb61
                                 ;    3864 		do {
                                 ;    3865 #if _USE_LFN && _LFN_UNICODE
                                 ;    3866 			w = ff_convert(ff_wtoupper(label[i++]), 0);
                                 ;    3867 #else
                                 ;    3868 			w = (BYTE)label[i++];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3868
00003797 AB89                    		MOV.L 3CH[R0], R1
00003799 AD0A                    		MOV.L 54H[R0], R2
0000379B FEC211                  		MOVU.B [R2,R1], R1
0000379E D70125                  		MOV.W R1, 4AH[R0]
000037A1 AB89                    		MOV.L 3CH[R0], R1
000037A3 6211                    		ADD #01H, R1
000037A5 A389                    		MOV.L R1, 3CH[R0]
000037A7                         L2029:	; bb61.split1
                                 ;    3869 			if (IsDBCS1(w))
                                 ;    3870 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
                                 ;    3871 #if _USE_LFN
                                 ;    3872 			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3872
000037A7 5D0125                  		MOVU.W 4AH[R0], R1
000037AA 6612                    		MOV.L #00000001H, R2
000037AC 05rrrrrr             A  		BSR _ff_convert
000037B0 05rrrrrr             A  		BSR _ff_wtoupper
000037B4 6602                    		MOV.L #00000000H, R2
000037B6 05rrrrrr             A  		BSR _ff_convert
000037BA D70125                  		MOV.W R1, 4AH[R0]
000037BD                         L2030:	; bb61.split2
                                 ;    3873 #else
                                 ;    3874 			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
                                 ;    3875 #ifdef _EXCVT
                                 ;    3876 			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
                                 ;    3877 #else
                                 ;    3878 			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
                                 ;    3879 #endif
                                 ;    3880 #endif
                                 ;    3881 #endif
                                 ;    3882 			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject invalid characters for volume label */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3882
000037BD 5D0125                  		MOVU.W 4AH[R0], R1
000037C0 6101                    		CMP #00H, R1
000037C2 18                   S  		BNE L2032
000037C3 2Err                 B  		BRA L2033
000037C5                         L2031:	; bb114
                                 ;    3883 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3883
000037C5 3E0106                  		MOV.L #00000006H, 04H[R0]
000037C8 38rrrr               W  		BRA L2077
000037CB                         L2032:	; bb120
000037CB F80600                  		MOV.L #00000000H, [R0]
000037CE 08                   S  		BRA L2034
000037CF                         L2033:	; bb121
000037CF F80601                  		MOV.L #00000001H, [R0]
000037D2                         L2034:	; bb122
000037D2 EC01                    		MOV.L [R0], R1
000037D4 6101                    		CMP #00H, R1
000037D6 21rr                    		BNE L2036
000037D8                         L2035:	; bb125
000037D8 5D0225                  		MOVU.W 4AH[R0], R2
000037DB FB12rrrrrrrr            		MOV.L #_L12, R1
000037E1 39rrrr               W  		BSR __$chk_chr
000037E4 6101                    		CMP #00H, R1
000037E6 10                   S  		BEQ L2037
000037E7                         L2036:	; bb131
000037E7 F80601                  		MOV.L #00000001H, [R0]
000037EA 08                   S  		BRA L2038
000037EB                         L2037:	; bb132
000037EB F80600                  		MOV.L #00000000H, [R0]
000037EE                         L2038:	; bb133
000037EE EC01                    		MOV.L [R0], R1
000037F0 6101                    		CMP #00H, R1
000037F2 21rr                    		BNE L2043
000037F4                         L2039:	; bb137
000037F4 5D0125                  		MOVU.W 4AH[R0], R1
000037F7 76010001                		CMP #0100H, R1
000037FB AC01                    		MOV.L 40H[R0], R1
000037FD 29rr                    		BLT L2041
000037FF                         L2040:	; bb143
000037FF F8060A                  		MOV.L #0000000AH, [R0]
00003802 08                   S  		BRA L2042
00003803                         L2041:	; bb144
00003803 F8060B                  		MOV.L #0000000BH, [R0]
00003806                         L2042:	; bb145
00003806 068401                  		CMP [R0].L, R1
00003809 23rr                    		BLTU L2044
0000380B                         L2043:	; bb150
0000380B F80601                  		MOV.L #00000001H, [R0]
0000380E 08                   S  		BRA L2045
0000380F                         L2044:	; bb151
0000380F F80600                  		MOV.L #00000000H, [R0]
00003812                         L2045:	; bb152
00003812 EC01                    		MOV.L [R0], R1
00003814 6101                    		CMP #00H, R1
00003816 21rr                    		BNE L2031
00003818                         L2046:	; bb158
                                 ;    3884 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3884
00003818 5D0125                  		MOVU.W 4AH[R0], R1
0000381B 76010001                		CMP #0100H, R1
0000381F 29rr                    		BLT L2048
00003821                         L2047:	; bb159
00003821 5D0125                  		MOVU.W 4AH[R0], R1
00003824 6881                    		SHLR #08H, R1
00003826 710E31                  		ADD #31H, R0, R14
00003829 AC02                    		MOV.L 40H[R0], R2
0000382B FE0E21                  		MOV.B R1, [R14,R2]
0000382E AC01                    		MOV.L 40H[R0], R1
00003830 6211                    		ADD #01H, R1
00003832 A401                    		MOV.L R1, 40H[R0]
00003834                         L2048:	; bb174
00003834 710E31                  		ADD #31H, R0, R14
                                 ;    3885 			vn[j++] = (BYTE)w;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3885
00003837 59014A                  		MOVU.B 4AH[R0], R1
0000383A AC02                    		MOV.L 40H[R0], R2
0000383C FE0E21                  		MOV.B R1, [R14,R2]
0000383F AC01                    		MOV.L 40H[R0], R1
00003841 6211                    		ADD #01H, R1
00003843 A401                    		MOV.L R1, 40H[R0]
00003845                         L2049:	; bb174.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3864
00003845 AB89                    		MOV.L 3CH[R0], R1
00003847 06850111                		CMP 44H[R0].L, R1
0000384B 22rr                  * 		BLTU L2028
         38rrrr                  
00003850 2Err                 B  		BRA L2051
00003852                         L2050:	; bb188
00003852 AC01                    		MOV.L 40H[R0], R1
00003854 710E31                  		ADD #31H, R0, R14
00003857 754F20                  		MOV.L #00000020H, R15
0000385A FE0E1F                  		MOV.B R15, [R14,R1]
0000385D AC01                    		MOV.L 40H[R0], R1
0000385F 6211                    		ADD #01H, R1
00003861 A401                    		MOV.L R1, 40H[R0]
00003863                         L2051:	; bb194
                                 ;    3886 		} while (i < sl);
                                 ;    3887 		while (j < 11) vn[j++] = ' ';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3887
00003863 AC01                    		MOV.L 40H[R0], R1
00003865 61B1                    		CMP #0BH, R1
00003867 23rr                    		BLTU L2050
00003869                         L2052:	; bb204
                                 ;    3888 	}
                                 ;    3889 
                                 ;    3890 	/* Set volume label */
                                 ;    3891 	dj.sclust = 0;					/* Open root directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3891
00003869 3E0500                  		MOV.L #00000000H, 14H[R0]
0000386C                         L2053:	; bb204.split
0000386C 6602                    		MOV.L #00000000H, R2
0000386E 71010C                  		ADD #0CH, R0, R1
                                 ;    3892 	res = dir_sdi(&dj, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3892
00003871 39rrrr               W  		BSR __$dir_sdi
00003874 A081                    		MOV.L R1, 08H[R0]
00003876                         L2054:	; bb204.split3
                                 ;    3893 	if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3893
00003876 A881                    		MOV.L 08H[R0], R1
00003878 6101                    		CMP #00H, R1
0000387A 3Brrrr               W  		BNE L2076
0000387D                         L2055:	; bb208
0000387D 6612                    		MOV.L #00000001H, R2
0000387F 71010C                  		ADD #0CH, R0, R1
                                 ;    3894 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3894
00003882 39rrrr               W  		BSR __$dir_read
00003885 A081                    		MOV.L R1, 08H[R0]
00003887                         L2056:	; bb208.split
                                 ;    3895 		if (res == FR_OK) {			/* A volume label is found */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3895
00003887 A881                    		MOV.L 08H[R0], R1
00003889 6101                    		CMP #00H, R1
0000388B 21rr                    		BNE L2064
0000388D                         L2057:	; bb212
                                 ;    3896 			if (vn[0]) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3896
0000388D 590131                  		MOVU.B 31H[R0], R1
00003890 6101                    		CMP #00H, R1
00003892 AA01                    		MOV.L 20H[R0], R1
00003894 20rr                    		BEQ L2061
00003896                         L2058:	; bb213
00003896 66B3                    		MOV.L #0000000BH, R3
00003898 710231                  		ADD #31H, R0, R2
                                 ;    3897 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3897
0000389B 39rrrr               W  		BSR __$mem_cpy
0000389E                         L2059:	; bb213.split
                                 ;    3898 				tm = GET_FATTIME();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3898
0000389E F9021300006945          		MOV.L #45690000H, 4CH[R0]
000038A5                         L2060:	; bb213.split4
                                 ;    3899 				ST_DWORD(dj.dir+DIR_WrtTime, tm);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3899
000038A5 AA01                    		MOV.L 20H[R0], R1
000038A7 711116                  		ADD #16H, R1
000038AA E10113                  		MOV.L 4CH[R0], [R1]
000038AD 08                   S  		BRA L2062
000038AE                         L2061:	; bb222
                                 ;    3900 			} else {
                                 ;    3901 				dj.dir[0] = DDE;			/* Remove the volume label */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3901
000038AE F814E5                  		MOV.B #0E5H, [R1]
000038B1                         L2062:	; bb233
                                 ;    3902 			}
                                 ;    3903 			dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3903
000038B1 A889                    		MOV.L 0CH[R0], R1
000038B3 3C1401                  		MOV.B #01H, 04H[R1]
000038B6                         L2063:	; bb233.split
                                 ;    3904 			res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3904
000038B6 A889                    		MOV.L 0CH[R0], R1
000038B8 39rrrr               W  		BSR __$sync_fs
000038BB A081                    		MOV.L R1, 08H[R0]
000038BD 2Err                 B  		BRA L2076
000038BF                         L2064:	; bb241
                                 ;    3905 		} else {					/* No volume label is found or error */
                                 ;    3906 			if (res == FR_NO_FILE) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3906
000038BF A881                    		MOV.L 08H[R0], R1
000038C1 6141                    		CMP #04H, R1
000038C3 21rr                    		BNE L2076
000038C5                         L2065:	; bb242
                                 ;    3907 				res = FR_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3907
000038C5 3E0200                  		MOV.L #00000000H, 08H[R0]
000038C8                         L2066:	; bb242.split
                                 ;    3908 				if (vn[0]) {				/* Create volume label as new */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3908
000038C8 590131                  		MOVU.B 31H[R0], R1
000038CB 6101                    		CMP #00H, R1
000038CD 20rr                    		BEQ L2076
000038CF                         L2067:	; bb244
000038CF 6612                    		MOV.L #00000001H, R2
000038D1 71010C                  		ADD #0CH, R0, R1
                                 ;    3909 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3909
000038D4 39rrrr               W  		BSR __$dir_alloc
000038D7 A081                    		MOV.L R1, 08H[R0]
000038D9                         L2068:	; bb244.split
                                 ;    3910 					if (res == FR_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3910
000038D9 A881                    		MOV.L 08H[R0], R1
000038DB 6101                    		CMP #00H, R1
000038DD 21rr                    		BNE L2076
000038DF                         L2069:	; bb247
                                 ;    3911 						mem_set(dj.dir, 0, SZ_DIR);	/* Set volume label */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3911
000038DF AA01                    		MOV.L 20H[R0], R1
000038E1 754320                  		MOV.L #00000020H, R3
000038E4 6602                    		MOV.L #00000000H, R2
000038E6 39rrrr               W  		BSR __$mem_set
000038E9                         L2070:	; bb247.split
                                 ;    3912 						mem_cpy(dj.dir, vn, 11);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3912
000038E9 AA01                    		MOV.L 20H[R0], R1
000038EB 66B3                    		MOV.L #0000000BH, R3
000038ED 710231                  		ADD #31H, R0, R2
000038F0 39rrrr               W  		BSR __$mem_cpy
000038F3                         L2071:	; bb247.split5
                                 ;    3913 						dj.dir[DIR_Attr] = AM_VOL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3913
000038F3 AA01                    		MOV.L 20H[R0], R1
000038F5 3C1B08                  		MOV.B #08H, 0BH[R1]
000038F8                         L2072:	; bb247.split6
                                 ;    3914 						tm = GET_FATTIME();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3914
000038F8 F9021300006945          		MOV.L #45690000H, 4CH[R0]
000038FF                         L2073:	; bb247.split7
                                 ;    3915 						ST_DWORD(dj.dir+DIR_WrtTime, tm);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3915
000038FF AA01                    		MOV.L 20H[R0], R1
00003901 711116                  		ADD #16H, R1
00003904 E10113                  		MOV.L 4CH[R0], [R1]
00003907                         L2074:	; bb247.split8
                                 ;    3916 						dj.fs->wflag = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3916
00003907 A889                    		MOV.L 0CH[R0], R1
00003909 3C1401                  		MOV.B #01H, 04H[R1]
0000390C                         L2075:	; bb247.split9
                                 ;    3917 						res = sync_fs(dj.fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3917
0000390C A889                    		MOV.L 0CH[R0], R1
0000390E 39rrrr               W  		BSR __$sync_fs
00003911 A081                    		MOV.L R1, 08H[R0]
00003913                         L2076:	; bb294
                                 ;    3918 					}
                                 ;    3919 				}
                                 ;    3920 			}
                                 ;    3921 		}
                                 ;    3922 	}
                                 ;    3923 
                                 ;    3924 	LEAVE_FF(dj.fs, res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3924
00003913 E5000201                		MOV.L 08H[R0], 04H[R0]
00003917                         L2077:	; bb297
00003917 A809                    		MOV.L 04H[R0], R1
00003919 A501                    		MOV.L R1, 50H[R0]
                                 ;    3925 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",3925
0000391B 6716                    		RTSD #58H
0000391D                         _f_mkfs:
                                 		.STACK	_f_mkfs=104
                                 ;    3926 
                                 ;    3927 #endif /* !_FS_READONLY */
                                 ;    3928 #endif /* _USE_LABEL */
                                 ;    3929 
                                 ;    3930 
                                 ;    3931 
                                 ;    3932 /*-----------------------------------------------------------------------*/
                                 ;    3933 /* Forward data to the stream directly (available on only tiny cfg)      */
                                 ;    3934 /*-----------------------------------------------------------------------*/
                                 ;    3935 #if _USE_FORWARD && _FS_TINY
                                 ;    3936 
                                 ;    3937 FRESULT f_forward (
                                 ;    3938 	FIL* fp, 						/* Pointer to the file object */
                                 ;    3939 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
                                 ;    3940 	UINT btf,						/* Number of bytes to forward */
                                 ;    3941 	UINT* bf						/* Pointer to number of bytes forwarded */
                                 ;    3942 )
                                 ;    3943 {
                                 ;    3944 	FRESULT res;
                                 ;    3945 	DWORD remain, clst, sect;
                                 ;    3946 	UINT rcnt;
                                 ;    3947 	BYTE csect;
                                 ;    3948 
                                 ;    3949 
                                 ;    3950 	*bf = 0;	/* Clear transfer byte counter */
                                 ;    3951 
                                 ;    3952 	res = validate(fp);								/* Check validity of the object */
                                 ;    3953 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
                                 ;    3954 	if (fp->err)									/* Check error */
                                 ;    3955 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
                                 ;    3956 	if (!(fp->flag & FA_READ))						/* Check access mode */
                                 ;    3957 		LEAVE_FF(fp->fs, FR_DENIED);
                                 ;    3958 
                                 ;    3959 	remain = fp->fsize - fp->fptr;
                                 ;    3960 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
                                 ;    3961 
                                 ;    3962 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
                                 ;    3963 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
                                 ;    3964 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
                                 ;    3965 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
                                 ;    3966 			if (!csect) {							/* On the cluster boundary? */
                                 ;    3967 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
                                 ;    3968 					fp->sclust : get_fat(fp->fs, fp->clust);
                                 ;    3969 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
                                 ;    3970 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                                 ;    3971 				fp->clust = clst;					/* Update current cluster */
                                 ;    3972 			}
                                 ;    3973 		}
                                 ;    3974 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
                                 ;    3975 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
                                 ;    3976 		sect += csect;
                                 ;    3977 		if (move_window(fp->fs, sect) != FR_OK)		/* Move sector window */
                                 ;    3978 			ABORT(fp->fs, FR_DISK_ERR);
                                 ;    3979 		fp->dsect = sect;
                                 ;    3980 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
                                 ;    3981 		if (rcnt > btf) rcnt = btf;
                                 ;    3982 		rcnt = (*func)(&fp->fs->win[(WORD)fp->fptr % SS(fp->fs)], rcnt);
                                 ;    3983 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
                                 ;    3984 	}
                                 ;    3985 
                                 ;    3986 	LEAVE_FF(fp->fs, FR_OK);
                                 ;    3987 }
                                 ;    3988 #endif /* _USE_FORWARD */
                                 ;    3989 
                                 ;    3990 
                                 ;    3991 
                                 ;    3992 #if _USE_MKFS && !_FS_READONLY
                                 ;    3993 /*-----------------------------------------------------------------------*/
                                 ;    3994 /* Create File System on the Drive                                       */
                                 ;    3995 /*-----------------------------------------------------------------------*/
                                 ;    3996 #define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
                                 ;    3997 #define N_FATS		1		/* Number of FATs (1 or 2) */
                                 ;    3998 
                                 ;    3999 
                                 ;    4000 FRESULT f_mkfs (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4000
0000391D 71009C                  		ADD #0FFFFFF9CH, R0
00003920 A601                    		MOV.L R1, 60H[R0]
00003922 C7025F                  		MOV.B R2, 5FH[R0]
00003925 A583                    		MOV.L R3, 58H[R0]
                                 ;    4001 	const TCHAR* path,	/* Logical drive number */
                                 ;    4002 	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
                                 ;    4003 	UINT au				/* Size of allocation unit in unit of byte or sector */
                                 ;    4004 )
                                 ;    4005 {
                                 ;    4006 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
                                 ;    4007 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
                                 ;    4008 	int vol;
                                 ;    4009 	BYTE fmt, md, sys, *tbl, pdrv, part;
                                 ;    4010 	DWORD n_clst, vs, n, wsect;
                                 ;    4011 	UINT i;
                                 ;    4012 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
                                 ;    4013 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
                                 ;    4014 	FATFS *fs;
                                 ;    4015 	DSTATUS stat;
                                 ;    4016 
                                 ;    4017 
                                 ;    4018 	/* Check mounted drive and clear work area */
                                 ;    4019 	if (sfd > 1) return FR_INVALID_PARAMETER;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4019
00003927 59015F                  		MOVU.B 5FH[R0], R1
0000392A 6121                    		CMP #02H, R1
0000392C 29rr                    		BLT L2080
0000392E                         L2079:	; bb26
0000392E 3E0113                  		MOV.L #00000013H, 04H[R0]
00003931 38rrrr               W  		BRA L2293
00003934                         L2080:	; bb32
00003934 710160                  		ADD #60H, R0, R1
                                 ;    4020 	vol = get_ldnumber(&path);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4020
00003937 39rrrr               W  		BSR __$get_ldnumber
0000393A A081                    		MOV.L R1, 08H[R0]
0000393C                         L2081:	; bb32.split
                                 ;    4021 	if (vol < 0) return FR_INVALID_DRIVE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4021
0000393C A881                    		MOV.L 08H[R0], R1
0000393E 69F1                    		SHLR #1FH, R1
00003940 6101                    		CMP #00H, R1
00003942 10                   S  		BEQ L2083
00003943                         L2082:	; bb35
00003943 3E010B                  		MOV.L #0000000BH, 04H[R0]
00003946 38rrrr               W  		BRA L2293
00003949                         L2083:	; bb41
                                 ;    4022 	fs = FatFs[vol];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4022
00003949 FBE2rrrrrrrr            		MOV.L #__$FatFs, R14
0000394F A881                    		MOV.L 08H[R0], R1
00003951 FE61E1                  		MOV.L [R1,R14], R1
00003954 A489                    		MOV.L R1, 4CH[R0]
00003956                         L2084:	; bb41.split
                                 ;    4023 	if (!fs) return FR_NOT_ENABLED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4023
00003956 AC89                    		MOV.L 4CH[R0], R1
00003958 6101                    		CMP #00H, R1
0000395A 18                   S  		BNE L2086
0000395B 2Err                 B  		BRA L2087
0000395D                         L2085:	; bb46
0000395D 3E010C                  		MOV.L #0000000CH, 04H[R0]
00003960 38rrrr               W  		BRA L2293
00003963                         L2086:	; bb51
00003963 F80600                  		MOV.L #00000000H, [R0]
00003966 08                   S  		BRA L2088
00003967                         L2087:	; bb52
00003967 F80601                  		MOV.L #00000001H, [R0]
0000396A                         L2088:	; bb53
0000396A EC01                    		MOV.L [R0], R1
0000396C 6101                    		CMP #00H, R1
0000396E 21rr                    		BNE L2085
00003970                         L2089:	; bb57
                                 ;    4024 	fs->fs_type = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4024
00003970 AC89                    		MOV.L 4CH[R0], R1
00003972 F81400                  		MOV.B #00H, [R1]
00003975                         L2090:	; bb57.split
                                 ;    4025 	pdrv = LD2PD(vol);	/* Physical drive */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4025
00003975 A881                    		MOV.L 08H[R0], R1
00003977 8581                    		MOV.B R1, 16H[R0]
00003979                         L2091:	; bb57.split1
                                 ;    4026 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4026
00003979 3C8700                  		MOV.B #00H, 17H[R0]
0000397C                         L2092:	; bb57.split2
                                 ;    4027 
                                 ;    4028 	/* Get disk statics */
                                 ;    4029 	stat = disk_initialize(pdrv);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4029
0000397C B581                    		MOVU.B 16H[R0], R1
0000397E 05rrrrrr             A  		BSR _disk_initialize
00003982 C70153                  		MOV.B R1, 53H[R0]
00003985                         L2093:	; bb57.split3
                                 ;    4030 	if (stat & STA_NOINIT) return FR_NOT_READY;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4030
00003985 F50053                  		BTST #00H, 53H[R0].B
00003988 10                   S  		BEQ L2095
00003989                         L2094:	; bb65
00003989 3E0103                  		MOV.L #00000003H, 04H[R0]
0000398C 38rrrr               W  		BRA L2293
0000398F                         L2095:	; bb74
                                 ;    4031 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4031
0000398F F50253                  		BTST #02H, 53H[R0].B
00003992 10                   S  		BEQ L2097
00003993                         L2096:	; bb75
00003993 3E010A                  		MOV.L #0000000AH, 04H[R0]
00003996 38rrrr               W  		BRA L2293
00003999                         L2097:	; bb146.split
                                 ;    4032 #if _MAX_SS != _MIN_SS		/* Get disk sector size */
                                 ;    4033 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS || SS(fs) < _MIN_SS)
                                 ;    4034 		return FR_DISK_ERR;
                                 ;    4035 #endif
                                 ;    4036 	if (_MULTI_PARTITION && part) {
                                 ;    4037 		/* Get partition information from partition table in the MBR */
                                 ;    4038 		if (disk_read(pdrv, fs->win, 0, 1) != RES_OK) return FR_DISK_ERR;
                                 ;    4039 		if (LD_WORD(fs->win+BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
                                 ;    4040 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
                                 ;    4041 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
                                 ;    4042 		b_vol = LD_DWORD(tbl+8);	/* Volume start sector */
                                 ;    4043 		n_vol = LD_DWORD(tbl+12);	/* Volume size */
                                 ;    4044 	} else {
                                 ;    4045 		/* Create a partition in this function */
                                 ;    4046 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4046
00003999 B581                    		MOVU.B 16H[R0], R1
0000399B 71033C                  		ADD #3CH, R0, R3
0000399E 6612                    		MOV.L #00000001H, R2
000039A0 05rrrrrr             A  		BSR _disk_ioctl
000039A4 6101                    		CMP #00H, R1
000039A6 21rr                    		BNE L2100
000039A8 08                   S  		BRA L2099
000039A9                         L2098:	; bb147
                                 ;    4047 			return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4047
000039A9 3E0101                  		MOV.L #00000001H, 04H[R0]
000039AC 38rrrr               W  		BRA L2293
000039AF                         L2099:	; bb154
000039AF AB89                    		MOV.L 3CH[R0], R1
000039B1 75517F                  		CMP #7FH, R1
000039B4 24rr                    		BGTU L2101
000039B6                         L2100:	; bb158
000039B6 F80601                  		MOV.L #00000001H, [R0]
000039B9 08                   S  		BRA L2102
000039BA                         L2101:	; bb159
000039BA F80600                  		MOV.L #00000000H, [R0]
000039BD                         L2102:	; bb160
000039BD EC01                    		MOV.L [R0], R1
000039BF 6101                    		CMP #00H, R1
000039C1 21rr                    		BNE L2098
000039C3                         L2103:	; bb165
                                 ;    4048 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4048
000039C3 59015F                  		MOVU.B 5FH[R0], R1
000039C6 6101                    		CMP #00H, R1
000039C8 10                   S  		BEQ L2105
000039C9                         L2104:	; bb170
000039C9 F80600                  		MOV.L #00000000H, [R0]
000039CC 08                   S  		BRA L2106
000039CD                         L2105:	; bb171
000039CD F8063F                  		MOV.L #0000003FH, [R0]
000039D0                         L2106:	; bb172
000039D0 EC01                    		MOV.L [R0], R1
000039D2 A289                    		MOV.L R1, 2CH[R0]
                                 ;    4049 		n_vol -= b_vol;				/* Volume size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4049
000039D4 AB8A                    		MOV.L 3CH[R0], R2
000039D6 4312                    		SUB R1, R2
000039D8 A38A                    		MOV.L R2, 3CH[R0]
000039DA                         L2107:	; bb172.split
                                 ;    4050 	}
                                 ;    4051 
                                 ;    4052 	if (au & (au - 1)) au = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4052
000039DA AD81                    		MOV.L 58H[R0], R1
000039DC 711EFF                  		ADD #0FFFFFFFFH, R1, R14
000039DF FC33E1                  		TST R14, R1
000039E2 10                   S  		BEQ L2109
000039E3                         L2108:	; bb180
000039E3 3E8600                  		MOV.L #00000000H, 58H[R0]
000039E6                         L2109:	; bb189
                                 ;    4053 	if (!au) {						/* AU auto selection */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4053
000039E6 AD81                    		MOV.L 58H[R0], R1
000039E8 6101                    		CMP #00H, R1
000039EA 21rr                    		BNE L2115
000039EC 2Err                 B  		BRA L2116
000039EE                         L2110:	; bb190
                                 ;    4054 		vs = n_vol / (2000 / (SS(fs) / 512));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4054
000039EE AB89                    		MOV.L 3CH[R0], R1
000039F0 FD7891D007              		DIVU #07D0H, R1
000039F5 A189                    		MOV.L R1, 1CH[R0]
000039F7                         L2111:	; bb190.split
                                 ;    4055 		for (i = 0; vs < vst[i]; i++) ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4055
000039F7 3E0A00                  		MOV.L #00000000H, 28H[R0]
000039FA 08                   S  		BRA L2113
000039FB                         L2112:	; bb193
000039FB 6211                    		ADD #01H, R1
000039FD A281                    		MOV.L R1, 28H[R0]
000039FF                         L2113:	; bb196
000039FF FBE2rrrrrrrr            		MOV.L #__$vst$1, R14
00003A05 AA81                    		MOV.L 28H[R0], R1
00003A07 FED1EE                  		MOVU.W [R1,R14], R14
00003A0A 06850E07                		CMP 1CH[R0].L, R14
00003A0E 24rr                    		BGTU L2112
00003A10                         L2114:	; bb205
                                 ;    4056 		au = cst[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4056
00003A10 FBE2rrrrrrrr            		MOV.L #__$cst$2, R14
00003A16 FED1E1                  		MOVU.W [R1,R14], R1
00003A19 A581                    		MOV.L R1, 58H[R0]
00003A1B 2Err                 B  		BRA L2118
00003A1D                         L2115:	; bb213
00003A1D F80600                  		MOV.L #00000000H, [R0]
00003A20 08                   S  		BRA L2117
00003A21                         L2116:	; bb214
00003A21 F80601                  		MOV.L #00000001H, [R0]
00003A24                         L2117:	; bb215
00003A24 EC01                    		MOV.L [R0], R1
00003A26 6101                    		CMP #00H, R1
00003A28 21rr                    		BNE L2110
00003A2A                         L2118:	; bb220
                                 ;    4057 	}
                                 ;    4058 	if (au >= _MIN_SS) au /= SS(fs);	/* Number of sectors per cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4058
00003A2A AD81                    		MOV.L 58H[R0], R1
00003A2C 76010002                		CMP #0200H, R1
00003A30 23rr                    		BLTU L2120
00003A32                         L2119:	; bb221
00003A32 AD81                    		MOV.L 58H[R0], R1
00003A34 6891                    		SHLR #09H, R1
00003A36 A581                    		MOV.L R1, 58H[R0]
00003A38                         L2120:	; bb229
                                 ;    4059 	if (!au) au = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4059
00003A38 AD81                    		MOV.L 58H[R0], R1
00003A3A 6101                    		CMP #00H, R1
00003A3C 18                   S  		BNE L2122
00003A3D 08                   S  		BRA L2123
00003A3E                         L2121:	; bb230
00003A3E 3E8601                  		MOV.L #00000001H, 58H[R0]
00003A41 2Err                 B  		BRA L2125
00003A43                         L2122:	; bb234
00003A43 F80600                  		MOV.L #00000000H, [R0]
00003A46 08                   S  		BRA L2124
00003A47                         L2123:	; bb235
00003A47 F80601                  		MOV.L #00000001H, [R0]
00003A4A                         L2124:	; bb236
00003A4A EC01                    		MOV.L [R0], R1
00003A4C 6101                    		CMP #00H, R1
00003A4E 21rr                    		BNE L2121
00003A50                         L2125:	; bb241
                                 ;    4060 	if (au > 128) au = 128;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4060
00003A50 AD81                    		MOV.L 58H[R0], R1
00003A52 755181                  		CMP #81H, R1
00003A55 23rr                    		BLTU L2127
00003A57                         L2126:	; bb242
00003A57 3E8680                  		MOV.L #00000080H, 58H[R0]
00003A5A                         L2127:	; bb247
                                 ;    4061 
                                 ;    4062 	/* Pre-compute number of clusters and FAT sub-type */
                                 ;    4063 	n_clst = n_vol / au;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4063
00003A5A AB89                    		MOV.L 3CH[R0], R1
00003A5C 06A1090116              		DIVU 58H[R0].L, R1
00003A61 A181                    		MOV.L R1, 18H[R0]
00003A63                         L2128:	; bb247.split
                                 ;    4064 	fmt = FS_FAT12;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4064
00003A63 3C0D01                  		MOV.B #01H, 0DH[R0]
00003A66                         L2129:	; bb247.split4
                                 ;    4065 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4065
00003A66 A981                    		MOV.L 18H[R0], R1
00003A68 7601F60F                		CMP #0FF6H, R1
00003A6C 23rr                    		BLTU L2131
00003A6E                         L2130:	; bb252
00003A6E 3C0D02                  		MOV.B #02H, 0DH[R0]
00003A71                         L2131:	; bb258
                                 ;    4066 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4066
00003A71 A981                    		MOV.L 18H[R0], R1
00003A73 7701F6FF00              		CMP #0FFF6H, R1
00003A78 23rr                    		BLTU L2133
00003A7A                         L2132:	; bb259
00003A7A 3C0D03                  		MOV.B #03H, 0DH[R0]
00003A7D                         L2133:	; bb265
                                 ;    4067 
                                 ;    4068 	/* Determine offset and size of FAT structure */
                                 ;    4069 	if (fmt == FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4069
00003A7D B309                    		MOVU.B 0DH[R0], R1
00003A7F 6131                    		CMP #03H, R1
00003A81 21rr                    		BNE L2137
00003A83                         L2134:	; bb266
                                 ;    4070 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4070
00003A83 A981                    		MOV.L 18H[R0], R1
00003A85 6C21                    		SHLL #02H, R1
00003A87 72110702                		ADD #0207H, R1
00003A8B 6891                    		SHLR #09H, R1
00003A8D A409                    		MOV.L R1, 44H[R0]
00003A8F                         L2135:	; bb266.split
                                 ;    4071 		n_rsv = 32;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4071
00003A8F 3E8020                  		MOV.L #00000020H, 40H[R0]
00003A92                         L2136:	; bb266.split5
                                 ;    4072 		n_dir = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4072
00003A92 3E8200                  		MOV.L #00000000H, 48H[R0]
00003A95 2Err                 B  		BRA L2143
00003A97                         L2137:	; bb273
                                 ;    4073 	} else {
                                 ;    4074 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4074
00003A97 B309                    		MOVU.B 0DH[R0], R1
00003A99 6111                    		CMP #01H, R1
00003A9B A981                    		MOV.L 18H[R0], R1
00003A9D 21rr                    		BNE L2139
00003A9F                         L2138:	; bb278
00003A9F 6331                    		MUL #03H, R1
00003AA1 6211                    		ADD #01H, R1
00003AA3 6811                    		SHLR #01H, R1
00003AA5 6231                    		ADD #03H, R1
00003AA7 E301                    		MOV.L R1, [R0]
00003AA9 08                   S  		BRA L2140
00003AAA                         L2139:	; bb284
00003AAA 6C11                    		SHLL #01H, R1
00003AAC 6241                    		ADD #04H, R1
00003AAE E301                    		MOV.L R1, [R0]
00003AB0                         L2140:	; bb288
00003AB0 EC01                    		MOV.L [R0], R1
00003AB2 A409                    		MOV.L R1, 44H[R0]
                                 ;    4075 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4075
00003AB4 7211FF01                		ADD #01FFH, R1
00003AB8 6891                    		SHLR #09H, R1
00003ABA A409                    		MOV.L R1, 44H[R0]
00003ABC                         L2141:	; bb288.split
                                 ;    4076 		n_rsv = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4076
00003ABC 3E8001                  		MOV.L #00000001H, 40H[R0]
00003ABF                         L2142:	; bb288.split6
                                 ;    4077 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4077
00003ABF 3E8220                  		MOV.L #00000020H, 48H[R0]
00003AC2                         L2143:	; bb300
                                 ;    4078 	}
                                 ;    4079 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4079
00003AC2 AA89                    		MOV.L 2CH[R0], R1
00003AC4 06890110                		ADD 40H[R0].L, R1
00003AC8 A301                    		MOV.L R1, 30H[R0]
00003ACA                         L2144:	; bb300.split
                                 ;    4080 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4080
00003ACA AB01                    		MOV.L 30H[R0], R1
00003ACC 06890111                		ADD 44H[R0].L, R1
00003AD0 A309                    		MOV.L R1, 34H[R0]
00003AD2                         L2145:	; bb300.split7
                                 ;    4081 	b_data = b_dir + n_dir;				/* Data area start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4081
00003AD2 AB09                    		MOV.L 34H[R0], R1
00003AD4 06890112                		ADD 48H[R0].L, R1
00003AD8 A381                    		MOV.L R1, 38H[R0]
00003ADA                         L2146:	; bb300.split8
                                 ;    4082 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4082
00003ADA AB81                    		MOV.L 38H[R0], R1
00003ADC 06890116                		ADD 58H[R0].L, R1
00003AE0 0681010B                		SUB 2CH[R0].L, R1
00003AE4 0685010F                		CMP 3CH[R0].L, R1
00003AE8 25rr                    		BLEU L2148
00003AEA                         L2147:	; bb312
00003AEA 3E010E                  		MOV.L #0000000EH, 04H[R0]
00003AED 38rrrr               W  		BRA L2293
00003AF0                         L2148:	; bb324
                                 ;    4083 
                                 ;    4084 	/* Align data start sector to erase block boundary (for flash memory media) */
                                 ;    4085 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4085
00003AF0 B581                    		MOVU.B 16H[R0], R1
00003AF2 710320                  		ADD #20H, R0, R3
00003AF5 6632                    		MOV.L #00000003H, R2
00003AF7 05rrrrrr             A  		BSR _disk_ioctl
00003AFB 6101                    		CMP #00H, R1
00003AFD 21rr                    		BNE L2154
00003AFF 08                   S  		BRA L2150
00003B00                         L2149:	; bb325
00003B00 3E0801                  		MOV.L #00000001H, 20H[R0]
00003B03 2Err                 B  		BRA L2161
00003B05                         L2150:	; bb331
00003B05 AA01                    		MOV.L 20H[R0], R1
00003B07 6101                    		CMP #00H, R1
00003B09 10                   S  		BEQ L2152
00003B0A                         L2151:	; bb335
00003B0A F80600                  		MOV.L #00000000H, [R0]
00003B0D 08                   S  		BRA L2153
00003B0E                         L2152:	; bb336
00003B0E F80601                  		MOV.L #00000001H, [R0]
00003B11                         L2153:	; bb337
00003B11 EC01                    		MOV.L [R0], R1
00003B13 6101                    		CMP #00H, R1
00003B15 10                   S  		BEQ L2155
00003B16                         L2154:	; bb340
00003B16 F80601                  		MOV.L #00000001H, [R0]
00003B19 08                   S  		BRA L2156
00003B1A                         L2155:	; bb341
00003B1A F80600                  		MOV.L #00000000H, [R0]
00003B1D                         L2156:	; bb342
00003B1D EC01                    		MOV.L [R0], R1
00003B1F 6101                    		CMP #00H, R1
00003B21 18                   S  		BNE L2158
00003B22                         L2157:	; bb346
00003B22 AA01                    		MOV.L 20H[R0], R1
00003B24 7701018000              		CMP #8001H, R1
00003B29 23rr                    		BLTU L2159
00003B2B                         L2158:	; bb350
00003B2B F80601                  		MOV.L #00000001H, [R0]
00003B2E 08                   S  		BRA L2160
00003B2F                         L2159:	; bb351
00003B2F F80600                  		MOV.L #00000000H, [R0]
00003B32                         L2160:	; bb352
00003B32 EC01                    		MOV.L [R0], R1
00003B34 6101                    		CMP #00H, R1
00003B36 21rr                    		BNE L2149
00003B38                         L2161:	; bb357
                                 ;    4086 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4086
00003B38 AA01                    		MOV.L 20H[R0], R1
00003B3A EF12                    		MOV.L R1, R2
00003B3C 0689020E                		ADD 38H[R0].L, R2
00003B40 6012                    		SUB #01H, R2
00003B42 6011                    		SUB #01H, R1
00003B44 7E01                    		NOT R1
00003B46 5312                    		AND R1, R2
00003B48 A202                    		MOV.L R2, 20H[R0]
00003B4A                         L2162:	; bb357.split
                                 ;    4087 	n = (n - b_data) / N_FATS;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4087
00003B4A AA01                    		MOV.L 20H[R0], R1
00003B4C 0681010E                		SUB 38H[R0].L, R1
00003B50 A201                    		MOV.L R1, 20H[R0]
00003B52                         L2163:	; bb357.split9
                                 ;    4088 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4088
00003B52 B309                    		MOVU.B 0DH[R0], R1
00003B54 6131                    		CMP #03H, R1
00003B56 AA01                    		MOV.L 20H[R0], R1
00003B58 21rr                    		BNE L2166
00003B5A                         L2164:	; bb370
                                 ;    4089 		n_rsv += n;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4089
00003B5A 06890110                		ADD 40H[R0].L, R1
00003B5E A401                    		MOV.L R1, 40H[R0]
00003B60                         L2165:	; bb370.split
                                 ;    4090 		b_fat += n;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4090
00003B60 AB01                    		MOV.L 30H[R0], R1
00003B62 06890108                		ADD 20H[R0].L, R1
00003B66 A301                    		MOV.L R1, 30H[R0]
00003B68 08                   S  		BRA L2167
00003B69                         L2166:	; bb377
                                 ;    4091 	} else {					/* FAT12/16: Expand FAT size */
                                 ;    4092 		n_fat += n;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4092
00003B69 06890111                		ADD 44H[R0].L, R1
00003B6D A409                    		MOV.L R1, 44H[R0]
00003B6F                         L2167:	; bb386
                                 ;    4093 	}
                                 ;    4094 
                                 ;    4095 	/* Determine number of clusters and final check of validity of the FAT sub-type */
                                 ;    4096 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4096
00003B6F AB89                    		MOV.L 3CH[R0], R1
00003B71 06810110                		SUB 40H[R0].L, R1
00003B75 06810111                		SUB 44H[R0].L, R1
00003B79 06810112                		SUB 48H[R0].L, R1
00003B7D 06A1090116              		DIVU 58H[R0].L, R1
00003B82 A181                    		MOV.L R1, 18H[R0]
00003B84                         L2168:	; bb386.split
                                 ;    4097 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4097
00003B84 B309                    		MOVU.B 0DH[R0], R1
00003B86 6121                    		CMP #02H, R1
00003B88 10                   S  		BEQ L2170
00003B89 2Err                 B  		BRA L2172
00003B8B                         L2169:	; bb398
                                 ;    4098 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
                                 ;    4099 		return FR_MKFS_ABORTED;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4099
00003B8B 3E010E                  		MOV.L #0000000EH, 04H[R0]
00003B8E 38rrrr               W  		BRA L2293
00003B91                         L2170:	; bb404
00003B91 A981                    		MOV.L 18H[R0], R1
00003B93 7601F50F                		CMP #0FF5H, R1
00003B97 24rr                    		BGTU L2172
00003B99                         L2171:	; bb408
00003B99 F80601                  		MOV.L #00000001H, [R0]
00003B9C 08                   S  		BRA L2173
00003B9D                         L2172:	; bb409
00003B9D F80600                  		MOV.L #00000000H, [R0]
00003BA0                         L2173:	; bb410
00003BA0 EC01                    		MOV.L [R0], R1
00003BA2 6101                    		CMP #00H, R1
00003BA4 21rr                    		BNE L2179
00003BA6                         L2174:	; bb414
00003BA6 B309                    		MOVU.B 0DH[R0], R1
00003BA8 6131                    		CMP #03H, R1
00003BAA 21rr                    		BNE L2177
00003BAC                         L2175:	; bb419
00003BAC A981                    		MOV.L 18H[R0], R1
00003BAE 7701F5FF00              		CMP #0FFF5H, R1
00003BB3 24rr                    		BGTU L2177
00003BB5                         L2176:	; bb423
00003BB5 F80601                  		MOV.L #00000001H, [R0]
00003BB8 08                   S  		BRA L2178
00003BB9                         L2177:	; bb424
00003BB9 F80600                  		MOV.L #00000000H, [R0]
00003BBC                         L2178:	; bb425
00003BBC EC01                    		MOV.L [R0], R1
00003BBE 6101                    		CMP #00H, R1
00003BC0 10                   S  		BEQ L2180
00003BC1                         L2179:	; bb429
00003BC1 F80601                  		MOV.L #00000001H, [R0]
00003BC4 08                   S  		BRA L2181
00003BC5                         L2180:	; bb430
00003BC5 F80600                  		MOV.L #00000000H, [R0]
00003BC8                         L2181:	; bb431
00003BC8 EC01                    		MOV.L [R0], R1
00003BCA 6101                    		CMP #00H, R1
00003BCC 21rr                    		BNE L2169
00003BCE                         L2182:	; bb437
                                 ;    4100 
                                 ;    4101 	/* Determine system ID in the partition table */
                                 ;    4102 	if (fmt == FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4102
00003BCE B309                    		MOVU.B 0DH[R0], R1
00003BD0 6131                    		CMP #03H, R1
00003BD2 18                   S  		BNE L2184
00003BD3                         L2183:	; bb438
                                 ;    4103 		sys = 0x0C;		/* FAT32X */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4103
00003BD3 3C0F0C                  		MOV.B #0CH, 0FH[R0]
00003BD6 2Err                 B  		BRA L2194
00003BD8                         L2184:	; bb440
                                 ;    4104 	} else {
                                 ;    4105 		if (fmt == FS_FAT12 && n_vol < 0x10000) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4105
00003BD8 B309                    		MOVU.B 0DH[R0], R1
00003BDA 6111                    		CMP #01H, R1
00003BDC 20rr                    		BEQ L2190
00003BDE 2Err                 B  		BRA L2192
00003BE0                         L2185:	; bb441
                                 ;    4106 			sys = 0x01;	/* FAT12(<65536) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4106
00003BE0 3C0F01                  		MOV.B #01H, 0FH[R0]
00003BE3 2Err                 B  		BRA L2194
00003BE5                         L2186:	; bb442
                                 ;    4107 		} else {
                                 ;    4108 			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4108
00003BE5 AB89                    		MOV.L 3CH[R0], R1
00003BE7 7701FFFF00              		CMP #0FFFFH, R1
00003BEC 24rr                    		BGTU L2188
00003BEE                         L2187:	; bb446
00003BEE F80604                  		MOV.L #00000004H, [R0]
00003BF1 08                   S  		BRA L2189
00003BF2                         L2188:	; bb447
00003BF2 F80606                  		MOV.L #00000006H, [R0]
00003BF5                         L2189:	; bb448
00003BF5 EC01                    		MOV.L [R0], R1
00003BF7 8389                    		MOV.B R1, 0FH[R0]
00003BF9 2Err                 B  		BRA L2194
00003BFB                         L2190:	; bb456
00003BFB AB89                    		MOV.L 3CH[R0], R1
00003BFD 7701FFFF00              		CMP #0FFFFH, R1
00003C02 24rr                    		BGTU L2192
00003C04                         L2191:	; bb460
00003C04 F80601                  		MOV.L #00000001H, [R0]
00003C07 08                   S  		BRA L2193
00003C08                         L2192:	; bb461
00003C08 F80600                  		MOV.L #00000000H, [R0]
00003C0B                         L2193:	; bb462
00003C0B EC01                    		MOV.L [R0], R1
00003C0D 6101                    		CMP #00H, R1
00003C0F 21rr                    		BNE L2185
00003C11 2Err                 B  		BRA L2186
00003C13                         L2194:	; bb501.split
                                 ;    4109 		}
                                 ;    4110 	}
                                 ;    4111 
                                 ;    4112 	if (_MULTI_PARTITION && part) {
                                 ;    4113 		/* Update system ID in the partition table */
                                 ;    4114 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
                                 ;    4115 		tbl[4] = sys;
                                 ;    4116 		if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to teh MBR */
                                 ;    4117 			return FR_DISK_ERR;
                                 ;    4118 		md = 0xF8;
                                 ;    4119 	} else {
                                 ;    4120 		if (sfd) {	/* No partition table (SFD) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4120
00003C13 59015F                  		MOVU.B 5FH[R0], R1
00003C16 6101                    		CMP #00H, R1
00003C18 10                   S  		BEQ L2196
00003C19                         L2195:	; bb502
                                 ;    4121 			md = 0xF0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4121
00003C19 3C0EF0                  		MOV.B #0F0H, 0EH[R0]
00003C1C 38rrrr               W  		BRA L2212
00003C1F                         L2196:	; bb503
                                 ;    4122 		} else {	/* Create partition table (FDISK) */
                                 ;    4123 			mem_set(fs->win, 0, SS(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4123
00003C1F AC89                    		MOV.L 4CH[R0], R1
00003C21 711134                  		ADD #34H, R1
00003C24 FB3A0002                		MOV.L #00000200H, R3
00003C28 6602                    		MOV.L #00000000H, R2
00003C2A 39rrrr               W  		BSR __$mem_set
00003C2D                         L2197:	; bb503.split
                                 ;    4124 			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4124
00003C2D AC89                    		MOV.L 4CH[R0], R1
00003C2F 7211F201                		ADD #01F2H, R1
00003C33 A101                    		MOV.L R1, 10H[R0]
00003C35                         L2198:	; bb503.split10
                                 ;    4125 			tbl[1] = 1;						/* Partition start head */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4125
00003C35 A901                    		MOV.L 10H[R0], R1
00003C37 3C1101                  		MOV.B #01H, 01H[R1]
00003C3A                         L2199:	; bb503.split11
                                 ;    4126 			tbl[2] = 1;						/* Partition start sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4126
00003C3A A901                    		MOV.L 10H[R0], R1
00003C3C 3C1201                  		MOV.B #01H, 02H[R1]
00003C3F                         L2200:	; bb503.split12
                                 ;    4127 			tbl[3] = 0;						/* Partition start cylinder */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4127
00003C3F A901                    		MOV.L 10H[R0], R1
00003C41 3C1300                  		MOV.B #00H, 03H[R1]
00003C44                         L2201:	; bb503.split13
                                 ;    4128 			tbl[4] = sys;					/* System type */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4128
00003C44 B389                    		MOVU.B 0FH[R0], R1
00003C46 A902                    		MOV.L 10H[R0], R2
00003C48 8121                    		MOV.B R1, 04H[R2]
00003C4A                         L2202:	; bb503.split14
                                 ;    4129 			tbl[5] = 254;					/* Partition end head */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4129
00003C4A A901                    		MOV.L 10H[R0], R1
00003C4C 3C15FE                  		MOV.B #0FEH, 05H[R1]
00003C4F                         L2203:	; bb503.split15
                                 ;    4130 			n = (b_vol + n_vol) / 63 / 255;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4130
00003C4F AA89                    		MOV.L 2CH[R0], R1
00003C51 0689010F                		ADD 3CH[R0].L, R1
00003C55 FD74913F                		DIVU #3FH, R1
00003C59 FD7891FF00              		DIVU #0FFH, R1
00003C5E A201                    		MOV.L R1, 20H[R0]
00003C60                         L2204:	; bb503.split16
                                 ;    4131 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4131
00003C60 AA01                    		MOV.L 20H[R0], R1
00003C62 6821                    		SHLR #02H, R1
00003C64 75313F                  		OR #3FH, R1
00003C67 A902                    		MOV.L 10H[R0], R2
00003C69 81A1                    		MOV.B R1, 06H[R2]
00003C6B                         L2205:	; bb503.split17
                                 ;    4132 			tbl[7] = (BYTE)n;				/* End cylinder */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4132
00003C6B AA01                    		MOV.L 20H[R0], R1
00003C6D A902                    		MOV.L 10H[R0], R2
00003C6F 81A9                    		MOV.B R1, 07H[R2]
00003C71                         L2206:	; bb503.split18
                                 ;    4133 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4133
00003C71 A901                    		MOV.L 10H[R0], R1
00003C73 3E123F                  		MOV.L #0000003FH, 08H[R1]
00003C76                         L2207:	; bb503.split19
                                 ;    4134 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4134
00003C76 AB89                    		MOV.L 3CH[R0], R1
00003C78 A902                    		MOV.L 10H[R0], R2
00003C7A A0A9                    		MOV.L R1, 0CH[R2]
00003C7C                         L2208:	; bb503.split20
                                 ;    4135 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4135
00003C7C AC89                    		MOV.L 4CH[R0], R1
00003C7E FA19190155AA            		MOV.W #0AA55H, 0232H[R1]
00003C84                         L2209:	; bb503.split21
                                 ;    4136 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4136
00003C84 AC8A                    		MOV.L 4CH[R0], R2
00003C86 B581                    		MOVU.B 16H[R0], R1
00003C88 712234                  		ADD #34H, R2
00003C8B 6614                    		MOV.L #00000001H, R4
00003C8D 6603                    		MOV.L #00000000H, R3
00003C8F 05rrrrrr             A  		BSR _disk_write
00003C93 6101                    		CMP #00H, R1
00003C95 10                   S  		BEQ L2211
00003C96                         L2210:	; bb550
                                 ;    4137 				return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4137
00003C96 3E0101                  		MOV.L #00000001H, 04H[R0]
00003C99 38rrrr               W  		BRA L2293
00003C9C                         L2211:	; bb560
                                 ;    4138 			md = 0xF8;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4138
00003C9C 3C0EF8                  		MOV.B #0F8H, 0EH[R0]
00003C9F                         L2212:	; bb567
                                 ;    4139 		}
                                 ;    4140 	}
                                 ;    4141 
                                 ;    4142 	/* Create BPB in the VBR */
                                 ;    4143 	tbl = fs->win;							/* Clear sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4143
00003C9F AC89                    		MOV.L 4CH[R0], R1
00003CA1 711134                  		ADD #34H, R1
00003CA4 A101                    		MOV.L R1, 10H[R0]
00003CA6                         L2213:	; bb567.split
                                 ;    4144 	mem_set(tbl, 0, SS(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4144
00003CA6 A901                    		MOV.L 10H[R0], R1
00003CA8 FB3A0002                		MOV.L #00000200H, R3
00003CAC 6602                    		MOV.L #00000000H, R2
00003CAE 39rrrr               W  		BSR __$mem_set
00003CB1                         L2214:	; bb567.split22
                                 ;    4145 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4145
00003CB1 A901                    		MOV.L 10H[R0], R1
00003CB3 66B3                    		MOV.L #0000000BH, R3
00003CB5 FB22rrrrrrrr            		MOV.L #_L13, R2
00003CBB 39rrrr               W  		BSR __$mem_cpy
00003CBE                         L2215:	; bb567.split23
                                 ;    4146 	i = SS(fs);								/* Sector size */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4146
00003CBE F90A0A0002              		MOV.L #00000200H, 28H[R0]
00003CC3                         L2216:	; bb567.split24
                                 ;    4147 	ST_WORD(tbl+BPB_BytsPerSec, i);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4147
00003CC3 A901                    		MOV.L 10H[R0], R1
00003CC5 62B1                    		ADD #0BH, R1
00003CC7 AA82                    		MOV.L 28H[R0], R2
00003CC9 D312                    		MOV.W R2, [R1]
00003CCB                         L2217:	; bb567.split25
                                 ;    4148 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4148
00003CCB AD81                    		MOV.L 58H[R0], R1
00003CCD A902                    		MOV.L 10H[R0], R2
00003CCF 8329                    		MOV.B R1, 0DH[R2]
00003CD1                         L2218:	; bb567.split26
                                 ;    4149 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4149
00003CD1 AC01                    		MOV.L 40H[R0], R1
00003CD3 A902                    		MOV.L 10H[R0], R2
00003CD5 91A9                    		MOV.W R1, 0EH[R2]
00003CD7                         L2219:	; bb567.split27
                                 ;    4150 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4150
00003CD7 A901                    		MOV.L 10H[R0], R1
00003CD9 3C9001                  		MOV.B #01H, 10H[R1]
00003CDC                         L2220:	; bb567.split28
                                 ;    4151 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4151
00003CDC B309                    		MOVU.B 0DH[R0], R1
00003CDE 6131                    		CMP #03H, R1
00003CE0 18                   S  		BNE L2222
00003CE1                         L2221:	; bb593
00003CE1 F80600                  		MOV.L #00000000H, [R0]
00003CE4 08                   S  		BRA L2223
00003CE5                         L2222:	; bb594
00003CE5 F80A0002                		MOV.L #00000200H, [R0]
00003CE9                         L2223:	; bb595
00003CE9 EC01                    		MOV.L [R0], R1
00003CEB A281                    		MOV.L R1, 28H[R0]
                                 ;    4152 	ST_WORD(tbl+BPB_RootEntCnt, i);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4152
00003CED A902                    		MOV.L 10H[R0], R2
00003CEF 712211                  		ADD #11H, R2
00003CF2 D321                    		MOV.W R1, [R2]
00003CF4                         L2224:	; bb595.split
                                 ;    4153 	if (n_vol < 0x10000) {					/* Number of total sectors */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4153
00003CF4 AB89                    		MOV.L 3CH[R0], R1
00003CF6 7701FFFF00              		CMP #0FFFFH, R1
00003CFB A901                    		MOV.L 10H[R0], R1
00003CFD 24rr                    		BGTU L2226
00003CFF                         L2225:	; bb604
                                 ;    4154 		ST_WORD(tbl+BPB_TotSec16, n_vol);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4154
00003CFF 711113                  		ADD #13H, R1
00003D02 AB8A                    		MOV.L 3CH[R0], R2
00003D04 D312                    		MOV.W R2, [R1]
00003D06 08                   S  		BRA L2227
00003D07                         L2226:	; bb610
                                 ;    4155 	} else {
                                 ;    4156 		ST_DWORD(tbl+BPB_TotSec32, n_vol);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4156
00003D07 E5010F08                		MOV.L 3CH[R0], 20H[R1]
00003D0B                         L2227:	; bb619
                                 ;    4157 	}
                                 ;    4158 	tbl[BPB_Media] = md;					/* Media descriptor */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4158
00003D0B B381                    		MOVU.B 0EH[R0], R1
00003D0D A902                    		MOV.L 10H[R0], R2
00003D0F 8529                    		MOV.B R1, 15H[R2]
00003D11                         L2228:	; bb619.split
                                 ;    4159 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4159
00003D11 A901                    		MOV.L 10H[R0], R1
00003D13 3D1C3F                  		MOV.W #003FH, 18H[R1]
00003D16                         L2229:	; bb619.split29
                                 ;    4160 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4160
00003D16 A901                    		MOV.L 10H[R0], R1
00003D18 3D1DFF                  		MOV.W #00FFH, 1AH[R1]
00003D1B                         L2230:	; bb619.split30
                                 ;    4161 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4161
00003D1B AA89                    		MOV.L 2CH[R0], R1
00003D1D A902                    		MOV.L 10H[R0], R2
00003D1F A1A9                    		MOV.L R1, 1CH[R2]
00003D21                         L2231:	; bb619.split31
                                 ;    4162 	n = GET_FATTIME();						/* Use current time as VSN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4162
00003D21 F9020800006945          		MOV.L #45690000H, 20H[R0]
00003D28                         L2232:	; bb619.split32
                                 ;    4163 	if (fmt == FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4163
00003D28 B309                    		MOVU.B 0DH[R0], R1
00003D2A 6131                    		CMP #03H, R1
00003D2C A901                    		MOV.L 10H[R0], R1
00003D2E 21rr                    		BNE L2241
00003D30                         L2233:	; bb634
                                 ;    4164 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4164
00003D30 711143                  		ADD #43H, R1
00003D33 E10108                  		MOV.L 20H[R0], [R1]
00003D36                         L2234:	; bb634.split
                                 ;    4165 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4165
00003D36 AC09                    		MOV.L 44H[R0], R1
00003D38 A902                    		MOV.L 10H[R0], R2
00003D3A A229                    		MOV.L R1, 24H[R2]
00003D3C                         L2235:	; bb634.split33
                                 ;    4166 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4166
00003D3C A901                    		MOV.L 10H[R0], R1
00003D3E 3E1B02                  		MOV.L #00000002H, 2CH[R1]
00003D41                         L2236:	; bb634.split34
                                 ;    4167 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4167
00003D41 A901                    		MOV.L 10H[R0], R1
00003D43 3D9801                  		MOV.W #0001H, 30H[R1]
00003D46                         L2237:	; bb634.split35
                                 ;    4168 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4168
00003D46 A901                    		MOV.L 10H[R0], R1
00003D48 3D9906                  		MOV.W #0006H, 32H[R1]
00003D4B                         L2238:	; bb634.split36
                                 ;    4169 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4169
00003D4B A901                    		MOV.L 10H[R0], R1
00003D4D F9144080                		MOV.B #80H, 40H[R1]
00003D51                         L2239:	; bb634.split37
                                 ;    4170 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4170
00003D51 A901                    		MOV.L 10H[R0], R1
00003D53 F9144229                		MOV.B #29H, 42H[R1]
00003D57                         L2240:	; bb634.split38
                                 ;    4171 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4171
00003D57 A901                    		MOV.L 10H[R0], R1
00003D59 711147                  		ADD #47H, R1
00003D5C 754313                  		MOV.L #00000013H, R3
00003D5F FB22rrrrrrrr            		MOV.L #_L14, R2
00003D65 39rrrr               W  		BSR __$mem_cpy
00003D68 2Err                 B  		BRA L2246
00003D6A                         L2241:	; bb658
                                 ;    4172 	} else {
                                 ;    4173 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4173
00003D6A 711127                  		ADD #27H, R1
00003D6D E10108                  		MOV.L 20H[R0], [R1]
00003D70                         L2242:	; bb658.split
                                 ;    4174 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4174
00003D70 AC09                    		MOV.L 44H[R0], R1
00003D72 A902                    		MOV.L 10H[R0], R2
00003D74 92A9                    		MOV.W R1, 16H[R2]
00003D76                         L2243:	; bb658.split39
                                 ;    4175 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4175
00003D76 A901                    		MOV.L 10H[R0], R1
00003D78 F9142480                		MOV.B #80H, 24H[R1]
00003D7C                         L2244:	; bb658.split40
                                 ;    4176 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4176
00003D7C A901                    		MOV.L 10H[R0], R1
00003D7E F9142629                		MOV.B #29H, 26H[R1]
00003D82                         L2245:	; bb658.split41
                                 ;    4177 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4177
00003D82 A901                    		MOV.L 10H[R0], R1
00003D84 71112B                  		ADD #2BH, R1
00003D87 754313                  		MOV.L #00000013H, R3
00003D8A FB22rrrrrrrr            		MOV.L #_L15, R2
00003D90 39rrrr               W  		BSR __$mem_cpy
00003D93                         L2246:	; bb679
                                 ;    4178 	}
                                 ;    4179 	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4179
00003D93 A901                    		MOV.L 10H[R0], R1
00003D95 F919FF55AA              		MOV.W #0AA55H, 01FEH[R1]
00003D9A                         L2247:	; bb679.split
                                 ;    4180 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4180
00003D9A AA8B                    		MOV.L 2CH[R0], R3
00003D9C A902                    		MOV.L 10H[R0], R2
00003D9E B581                    		MOVU.B 16H[R0], R1
00003DA0 6614                    		MOV.L #00000001H, R4
00003DA2 05rrrrrr             A  		BSR _disk_write
00003DA6 6101                    		CMP #00H, R1
00003DA8 10                   S  		BEQ L2249
00003DA9                         L2248:	; bb684
                                 ;    4181 		return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4181
00003DA9 3E0101                  		MOV.L #00000001H, 04H[R0]
00003DAC 38rrrr               W  		BRA L2293
00003DAF                         L2249:	; bb694
                                 ;    4182 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR+6) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4182
00003DAF B309                    		MOVU.B 0DH[R0], R1
00003DB1 6131                    		CMP #03H, R1
00003DB3 21rr                    		BNE L2251
00003DB5                         L2250:	; bb695
                                 ;    4183 		disk_write(pdrv, tbl, b_vol + 6, 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4183
00003DB5 AA8B                    		MOV.L 2CH[R0], R3
00003DB7 A902                    		MOV.L 10H[R0], R2
00003DB9 B581                    		MOVU.B 16H[R0], R1
00003DBB 6263                    		ADD #06H, R3
00003DBD 6614                    		MOV.L #00000001H, R4
00003DBF 05rrrrrr             A  		BSR _disk_write
00003DC3                         L2251:	; bb706
                                 ;    4184 
                                 ;    4185 	/* Initialize FAT area */
                                 ;    4186 	wsect = b_fat;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4186
00003DC3 E5000C09                		MOV.L 30H[R0], 24H[R0]
00003DC7                         L2252:	; bb706.split
                                 ;    4187 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4187
00003DC7 3E0A00                  		MOV.L #00000000H, 28H[R0]
00003DCA 38rrrr               W  		BRA L2273
00003DCD                         L2253:	; bb708
                                 ;    4188 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4188
00003DCD A901                    		MOV.L 10H[R0], R1
00003DCF FB3A0002                		MOV.L #00000200H, R3
00003DD3 6602                    		MOV.L #00000000H, R2
00003DD5 39rrrr               W  		BSR __$mem_set
00003DD8                         L2254:	; bb708.split
                                 ;    4189 		n = md;								/* Media descriptor byte */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4189
00003DD8 B381                    		MOVU.B 0EH[R0], R1
00003DDA A201                    		MOV.L R1, 20H[R0]
00003DDC                         L2255:	; bb708.split42
                                 ;    4190 		if (fmt != FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4190
00003DDC B309                    		MOVU.B 0DH[R0], R1
00003DDE 6131                    		CMP #03H, R1
00003DE0 20rr                    		BEQ L2260
00003DE2                         L2256:	; bb713
                                 ;    4191 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4191
00003DE2 B309                    		MOVU.B 0DH[R0], R1
00003DE4 6111                    		CMP #01H, R1
00003DE6 18                   S  		BNE L2258
00003DE7                         L2257:	; bb718
00003DE7 F80200FFFF00            		MOV.L #00FFFF00H, [R0]
00003DED 08                   S  		BRA L2259
00003DEE                         L2258:	; bb719
00003DEE F80A00FF                		MOV.L #0FFFFFF00H, [R0]
00003DF2                         L2259:	; bb720
00003DF2 AA01                    		MOV.L 20H[R0], R1
00003DF4 069401                  		OR [R0].L, R1
00003DF7 A201                    		MOV.L R1, 20H[R0]
                                 ;    4192 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4192
00003DF9 A902                    		MOV.L 10H[R0], R2
00003DFB E321                    		MOV.L R1, [R2]
00003DFD 2Err                 B  		BRA L2264
00003DFF                         L2260:	; bb729
                                 ;    4193 		} else {
                                 ;    4194 			n |= 0xFFFFFF00;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4194
00003DFF AA01                    		MOV.L 20H[R0], R1
00003E01 763100FF                		OR #0FFFFFF00H, R1
00003E05 A201                    		MOV.L R1, 20H[R0]
00003E07                         L2261:	; bb729.split
                                 ;    4195 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4195
00003E07 AA01                    		MOV.L 20H[R0], R1
00003E09 A902                    		MOV.L 10H[R0], R2
00003E0B E321                    		MOV.L R1, [R2]
00003E0D                         L2262:	; bb729.split43
                                 ;    4196 			ST_DWORD(tbl+4, 0xFFFFFFFF);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4196
00003E0D A901                    		MOV.L 10H[R0], R1
00003E0F F91601FF                		MOV.L #0FFFFFFFFH, 04H[R1]
00003E13                         L2263:	; bb729.split44
                                 ;    4197 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4197
00003E13 A901                    		MOV.L 10H[R0], R1
00003E15 F91202FFFFFF0F          		MOV.L #0FFFFFFFH, 08H[R1]
00003E1C                         L2264:	; bb748
                                 ;    4198 		}
                                 ;    4199 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4199
00003E1C AA0B                    		MOV.L 24H[R0], R3
00003E1E 713401                  		ADD #01H, R3, R4
00003E21 A902                    		MOV.L 10H[R0], R2
00003E23 B581                    		MOVU.B 16H[R0], R1
00003E25 A20C                    		MOV.L R4, 24H[R0]
00003E27 6614                    		MOV.L #00000001H, R4
00003E29 05rrrrrr             A  		BSR _disk_write
00003E2D 6101                    		CMP #00H, R1
00003E2F 10                   S  		BEQ L2266
00003E30                         L2265:	; bb749
                                 ;    4200 			return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4200
00003E30 3E0101                  		MOV.L #00000001H, 04H[R0]
00003E33 38rrrr               W  		BRA L2293
00003E36                         L2266:	; bb760
                                 ;    4201 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4201
00003E36 A901                    		MOV.L 10H[R0], R1
00003E38 FB3A0002                		MOV.L #00000200H, R3
00003E3C 6602                    		MOV.L #00000000H, R2
00003E3E 39rrrr               W  		BSR __$mem_set
00003E41                         L2267:	; bb760.split
                                 ;    4202 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single sector writes */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4202
00003E41 3E0801                  		MOV.L #00000001H, 20H[R0]
00003E44 2Err                 B  		BRA L2271
00003E46                         L2268:	; bb763
                                 ;    4203 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4203
00003E46 AA0B                    		MOV.L 24H[R0], R3
00003E48 713401                  		ADD #01H, R3, R4
00003E4B A902                    		MOV.L 10H[R0], R2
00003E4D B581                    		MOVU.B 16H[R0], R1
00003E4F A20C                    		MOV.L R4, 24H[R0]
00003E51 6614                    		MOV.L #00000001H, R4
00003E53 05rrrrrr             A  		BSR _disk_write
00003E57 6101                    		CMP #00H, R1
00003E59 10                   S  		BEQ L2270
00003E5A                         L2269:	; bb764
                                 ;    4204 				return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4204
00003E5A 3E0101                  		MOV.L #00000001H, 04H[R0]
00003E5D 38rrrr               W  		BRA L2293
00003E60                         L2270:	; bb775
00003E60 AA01                    		MOV.L 20H[R0], R1
00003E62 6211                    		ADD #01H, R1
00003E64 A201                    		MOV.L R1, 20H[R0]
00003E66                         L2271:	; bb778
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4202
00003E66 AA01                    		MOV.L 20H[R0], R1
00003E68 06850111                		CMP 44H[R0].L, R1
00003E6C 23rr                    		BLTU L2268
00003E6E                         L2272:	; bb784
00003E6E AA81                    		MOV.L 28H[R0], R1
00003E70 6211                    		ADD #01H, R1
00003E72 A281                    		MOV.L R1, 28H[R0]
00003E74                         L2273:	; bb787
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4187
00003E74 AA81                    		MOV.L 28H[R0], R1
00003E76 6101                    		CMP #00H, R1
00003E78 3Arrrr               W  		BEQ L2253
00003E7B                         L2274:	; bb792
                                 ;    4205 		}
                                 ;    4206 	}
                                 ;    4207 
                                 ;    4208 	/* Initialize root directory */
                                 ;    4209 	i = (fmt == FS_FAT32) ? au : (UINT)n_dir;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4209
00003E7B B309                    		MOVU.B 0DH[R0], R1
00003E7D 6131                    		CMP #03H, R1
00003E7F 18                   S  		BNE L2276
00003E80                         L2275:	; bb797
00003E80 E10016                  		MOV.L 58H[R0], [R0]
00003E83 08                   S  		BRA L2277
00003E84                         L2276:	; bb799
00003E84 E10012                  		MOV.L 48H[R0], [R0]
00003E87                         L2277:	; bb801
00003E87 E4000A                  		MOV.L [R0], 28H[R0]
00003E8A                         L2278:	; bb805
                                 ;    4210 	do {
                                 ;    4211 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4211
00003E8A AA0B                    		MOV.L 24H[R0], R3
00003E8C 713401                  		ADD #01H, R3, R4
00003E8F A902                    		MOV.L 10H[R0], R2
00003E91 B581                    		MOVU.B 16H[R0], R1
00003E93 A20C                    		MOV.L R4, 24H[R0]
00003E95 6614                    		MOV.L #00000001H, R4
00003E97 05rrrrrr             A  		BSR _disk_write
00003E9B 6101                    		CMP #00H, R1
00003E9D 10                   S  		BEQ L2280
00003E9E                         L2279:	; bb806
                                 ;    4212 			return FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4212
00003E9E 3E0101                  		MOV.L #00000001H, 04H[R0]
00003EA1 2Err                 B  		BRA L2293
00003EA3                         L2280:	; bb817
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4210
00003EA3 AA81                    		MOV.L 28H[R0], R1
00003EA5 6011                    		SUB #01H, R1
00003EA7 A281                    		MOV.L R1, 28H[R0]
00003EA9 6101                    		CMP #00H, R1
00003EAB 21rr                    		BNE L2278
00003EAD                         L2281:	; bb825
                                 ;    4213 	} while (--i);
                                 ;    4214 
                                 ;    4215 #if _USE_TRIM	/* Erase data area if needed */
                                 ;    4216 	{
                                 ;    4217 		DWORD eb[2];
                                 ;    4218 
                                 ;    4219 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
                                 ;    4220 		disk_ioctl(pdrv, CTRL_TRIM, eb);
                                 ;    4221 	}
                                 ;    4222 #endif
                                 ;    4223 
                                 ;    4224 	/* Create FSINFO if needed */
                                 ;    4225 	if (fmt == FS_FAT32) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4225
00003EAD B309                    		MOVU.B 0DH[R0], R1
00003EAF 6131                    		CMP #03H, R1
00003EB1 21rr                    		BNE L2289
00003EB3                         L2282:	; bb826
                                 ;    4226 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4226
00003EB3 A901                    		MOV.L 10H[R0], R1
00003EB5 F81252526141            		MOV.L #41615252H, [R1]
00003EBB                         L2283:	; bb826.split
                                 ;    4227 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4227
00003EBB A901                    		MOV.L 10H[R0], R1
00003EBD F9127972724161          		MOV.L #61417272H, 01E4H[R1]
00003EC4                         L2284:	; bb826.split45
                                 ;    4228 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4228
00003EC4 A981                    		MOV.L 18H[R0], R1
00003EC6 6011                    		SUB #01H, R1
00003EC8 A902                    		MOV.L 10H[R0], R2
00003ECA E7217A                  		MOV.L R1, 01E8H[R2]
00003ECD                         L2285:	; bb826.split46
                                 ;    4229 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4229
00003ECD A901                    		MOV.L 10H[R0], R1
00003ECF F9167B02                		MOV.L #00000002H, 01ECH[R1]
00003ED3                         L2286:	; bb826.split47
                                 ;    4230 		ST_WORD(tbl+BS_55AA, 0xAA55);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4230
00003ED3 A901                    		MOV.L 10H[R0], R1
00003ED5 F919FF55AA              		MOV.W #0AA55H, 01FEH[R1]
00003EDA                         L2287:	; bb826.split48
                                 ;    4231 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4231
00003EDA AA8B                    		MOV.L 2CH[R0], R3
00003EDC A902                    		MOV.L 10H[R0], R2
00003EDE B581                    		MOVU.B 16H[R0], R1
00003EE0 6213                    		ADD #01H, R3
00003EE2 6614                    		MOV.L #00000001H, R4
00003EE4 05rrrrrr             A  		BSR _disk_write
00003EE8                         L2288:	; bb826.split49
                                 ;    4232 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4232
00003EE8 AA8B                    		MOV.L 2CH[R0], R3
00003EEA A902                    		MOV.L 10H[R0], R2
00003EEC B581                    		MOVU.B 16H[R0], R1
00003EEE 6273                    		ADD #07H, R3
00003EF0 6614                    		MOV.L #00000001H, R4
00003EF2 05rrrrrr             A  		BSR _disk_write
00003EF6                         L2289:	; bb859
                                 ;    4233 	}
                                 ;    4234 
                                 ;    4235 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4235
00003EF6 B581                    		MOVU.B 16H[R0], R1
00003EF8 6602                    		MOV.L #00000000H, R2
00003EFA EF23                    		MOV.L R2, R3
00003EFC 05rrrrrr             A  		BSR _disk_ioctl
00003F00 6101                    		CMP #00H, R1
00003F02 18                   S  		BNE L2291
00003F03                         L2290:	; bb864
00003F03 F80600                  		MOV.L #00000000H, [R0]
00003F06 08                   S  		BRA L2292
00003F07                         L2291:	; bb865
00003F07 F80601                  		MOV.L #00000001H, [R0]
00003F0A                         L2292:	; bb866
00003F0A E40001                  		MOV.L [R0], 04H[R0]
00003F0D                         L2293:	; bb870
00003F0D A809                    		MOV.L 04H[R0], R1
00003F0F A509                    		MOV.L R1, 54H[R0]
                                 ;    4236 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4236
00003F11 6719                    		RTSD #64H
00003F13                         _f_gets:
                                 		.STACK	_f_gets=44
                                 ;    4237 
                                 ;    4238 
                                 ;    4239 
                                 ;    4240 #if _MULTI_PARTITION
                                 ;    4241 /*-----------------------------------------------------------------------*/
                                 ;    4242 /* Divide Physical Drive                                                 */
                                 ;    4243 /*-----------------------------------------------------------------------*/
                                 ;    4244 
                                 ;    4245 FRESULT f_fdisk (
                                 ;    4246 	BYTE pdrv,			/* Physical drive number */
                                 ;    4247 	const DWORD szt[],	/* Pointer to the size table for each partitions */
                                 ;    4248 	void* work			/* Pointer to the working buffer */
                                 ;    4249 )
                                 ;    4250 {
                                 ;    4251 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
                                 ;    4252 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
                                 ;    4253 	DSTATUS stat;
                                 ;    4254 	DWORD sz_disk, sz_part, s_part;
                                 ;    4255 
                                 ;    4256 
                                 ;    4257 	stat = disk_initialize(pdrv);
                                 ;    4258 	if (stat & STA_NOINIT) return FR_NOT_READY;
                                 ;    4259 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
                                 ;    4260 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
                                 ;    4261 
                                 ;    4262 	/* Determine CHS in the table regardless of the drive geometry */
                                 ;    4263 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
                                 ;    4264 	if (n == 256) n--;
                                 ;    4265 	e_hd = n - 1;
                                 ;    4266 	sz_cyl = 63 * n;
                                 ;    4267 	tot_cyl = sz_disk / sz_cyl;
                                 ;    4268 
                                 ;    4269 	/* Create partition table */
                                 ;    4270 	mem_set(buf, 0, _MAX_SS);
                                 ;    4271 	p = buf + MBR_Table; b_cyl = 0;
                                 ;    4272 	for (i = 0; i < 4; i++, p += SZ_PTE) {
                                 ;    4273 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
                                 ;    4274 		if (!p_cyl) continue;
                                 ;    4275 		s_part = (DWORD)sz_cyl * b_cyl;
                                 ;    4276 		sz_part = (DWORD)sz_cyl * p_cyl;
                                 ;    4277 		if (i == 0) {	/* Exclude first track of cylinder 0 */
                                 ;    4278 			s_hd = 1;
                                 ;    4279 			s_part += 63; sz_part -= 63;
                                 ;    4280 		} else {
                                 ;    4281 			s_hd = 0;
                                 ;    4282 		}
                                 ;    4283 		e_cyl = b_cyl + p_cyl - 1;
                                 ;    4284 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
                                 ;    4285 
                                 ;    4286 		/* Set partition table */
                                 ;    4287 		p[1] = s_hd;						/* Start head */
                                 ;    4288 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
                                 ;    4289 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
                                 ;    4290 		p[4] = 0x06;						/* System type (temporary setting) */
                                 ;    4291 		p[5] = e_hd;						/* End head */
                                 ;    4292 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
                                 ;    4293 		p[7] = (BYTE)e_cyl;					/* End cylinder */
                                 ;    4294 		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
                                 ;    4295 		ST_DWORD(p + 12, sz_part);			/* Partition size */
                                 ;    4296 
                                 ;    4297 		/* Next partition */
                                 ;    4298 		b_cyl += p_cyl;
                                 ;    4299 	}
                                 ;    4300 	ST_WORD(p, 0xAA55);
                                 ;    4301 
                                 ;    4302 	/* Write it to the MBR */
                                 ;    4303 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DISK_ERR : FR_OK;
                                 ;    4304 }
                                 ;    4305 
                                 ;    4306 
                                 ;    4307 #endif /* _MULTI_PARTITION */
                                 ;    4308 #endif /* _USE_MKFS && !_FS_READONLY */
                                 ;    4309 
                                 ;    4310 
                                 ;    4311 
                                 ;    4312 
                                 ;    4313 #if _USE_STRFUNC
                                 ;    4314 /*-----------------------------------------------------------------------*/
                                 ;    4315 /* Get a string from the file                                            */
                                 ;    4316 /*-----------------------------------------------------------------------*/
                                 ;    4317 
                                 ;    4318 TCHAR* f_gets (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4318
00003F13 7100D8                  		ADD #0FFFFFFD8H, R0
00003F16 A209                    		MOV.L R1, 24H[R0]
00003F18 A202                    		MOV.L R2, 20H[R0]
00003F1A A18B                    		MOV.L R3, 1CH[R0]
                                 ;    4319 	TCHAR* buff,	/* Pointer to the string buffer to read */
                                 ;    4320 	int len,		/* Size of string buffer (characters) */
                                 ;    4321 	FIL* fp			/* Pointer to the file object */
                                 ;    4322 )
                                 ;    4323 {
                                 ;    4324 	int n = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4324
00003F1C 3E0100                  		MOV.L #00000000H, 04H[R0]
00003F1F                         L2295:	; entry.split
                                 ;    4325 	TCHAR c, *p = buff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4325
00003F1F E5000903                		MOV.L 24H[R0], 0CH[R0]
00003F23 2Err                 B  		BRA L2302
00003F25                         L2296:	; bb
                                 ;    4326 	BYTE s[2];
                                 ;    4327 	UINT rc;
                                 ;    4328 
                                 ;    4329 
                                 ;    4330 	while (n < len - 1) {	/* Read characters until buffer gets filled */
                                 ;    4331 #if _USE_LFN && _LFN_UNICODE
                                 ;    4332 #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
                                 ;    4333 		f_read(fp, s, 1, &rc);
                                 ;    4334 		if (rc != 1) break;
                                 ;    4335 		c = s[0];
                                 ;    4336 		if (c >= 0x80) {
                                 ;    4337 			if (c < 0xC0) continue;	/* Skip stray trailer */
                                 ;    4338 			if (c < 0xE0) {			/* Two-byte sequence */
                                 ;    4339 				f_read(fp, s, 1, &rc);
                                 ;    4340 				if (rc != 1) break;
                                 ;    4341 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
                                 ;    4342 				if (c < 0x80) c = '?';
                                 ;    4343 			} else {
                                 ;    4344 				if (c < 0xF0) {		/* Three-byte sequence */
                                 ;    4345 					f_read(fp, s, 2, &rc);
                                 ;    4346 					if (rc != 2) break;
                                 ;    4347 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
                                 ;    4348 					if (c < 0x800) c = '?';
                                 ;    4349 				} else {			/* Reject four-byte sequence */
                                 ;    4350 					c = '?';
                                 ;    4351 				}
                                 ;    4352 			}
                                 ;    4353 		}
                                 ;    4354 #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
                                 ;    4355 		f_read(fp, s, 2, &rc);
                                 ;    4356 		if (rc != 2) break;
                                 ;    4357 		c = s[1] + (s[0] << 8);
                                 ;    4358 #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
                                 ;    4359 		f_read(fp, s, 2, &rc);
                                 ;    4360 		if (rc != 2) break;
                                 ;    4361 		c = s[0] + (s[1] << 8);
                                 ;    4362 #else						/* Read a character in ANSI/OEM */
                                 ;    4363 		f_read(fp, s, 1, &rc);
                                 ;    4364 		if (rc != 1) break;
                                 ;    4365 		c = s[0];
                                 ;    4366 		if (IsDBCS1(c)) {
                                 ;    4367 			f_read(fp, s, 1, &rc);
                                 ;    4368 			if (rc != 1) break;
                                 ;    4369 			c = (c << 8) + s[0];
                                 ;    4370 		}
                                 ;    4371 		c = ff_convert(c, 1);	/* OEM -> Unicode */
                                 ;    4372 		if (!c) c = '?';
                                 ;    4373 #endif
                                 ;    4374 #else						/* Read a character without conversion */
                                 ;    4375 		f_read(fp, s, 1, &rc);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4375
00003F25 A989                    		MOV.L 1CH[R0], R1
00003F27 710414                  		ADD #14H, R0, R4
00003F2A 6613                    		MOV.L #00000001H, R3
00003F2C 710212                  		ADD #12H, R0, R2
00003F2F 39rrrr               W  		BSR _f_read
00003F32                         L2297:	; bb.split
                                 ;    4376 		if (rc != 1) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4376
00003F32 A909                    		MOV.L 14H[R0], R1
00003F34 6111                    		CMP #01H, R1
00003F36 21rr                    		BNE L2303
00003F38                         L2298:	; bb19
                                 ;    4377 		c = s[0];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4377
00003F38 C500120B                		MOV.B 12H[R0], 0BH[R0]
00003F3C                         L2299:	; bb19.split1
                                 ;    4378 #endif
                                 ;    4379 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
                                 ;    4380 		*p++ = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4380
00003F3C B289                    		MOVU.B 0BH[R0], R1
00003F3E A88A                    		MOV.L 0CH[R0], R2
00003F40 C321                    		MOV.B R1, [R2]
00003F42 A889                    		MOV.L 0CH[R0], R1
00003F44 6211                    		ADD #01H, R1
00003F46 A089                    		MOV.L R1, 0CH[R0]
00003F48                         L2300:	; bb19.split2
                                 ;    4381 		n++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4381
00003F48 A809                    		MOV.L 04H[R0], R1
00003F4A 6211                    		ADD #01H, R1
00003F4C A009                    		MOV.L R1, 04H[R0]
00003F4E                         L2301:	; bb19.split3
                                 ;    4382 		if (c == '\n') break;		/* Break on EOL */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4382
00003F4E B289                    		MOVU.B 0BH[R0], R1
00003F50 61A1                    		CMP #0AH, R1
00003F52 20rr                    		BEQ L2303
00003F54                         L2302:	; bb43
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4330
00003F54 AA01                    		MOV.L 20H[R0], R1
00003F56 6011                    		SUB #01H, R1
00003F58 06850101                		CMP 04H[R0].L, R1
00003F5C 2Arr                    		BGT L2296
00003F5E                         L2303:	; bb51
                                 ;    4383 	}
                                 ;    4384 	*p = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4384
00003F5E A889                    		MOV.L 0CH[R0], R1
00003F60 F81400                  		MOV.B #00H, [R1]
00003F63                         L2304:	; bb51.split
                                 ;    4385 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4385
00003F63 A809                    		MOV.L 04H[R0], R1
00003F65 6101                    		CMP #00H, R1
00003F67 10                   S  		BEQ L2306
00003F68                         L2305:	; bb56
00003F68 E10009                  		MOV.L 24H[R0], [R0]
00003F6B 08                   S  		BRA L2307
00003F6C                         L2306:	; bb58
00003F6C F80600                  		MOV.L #00000000H, [R0]
00003F6F                         L2307:	; bb59
00003F6F EC01                    		MOV.L [R0], R1
00003F71 A181                    		MOV.L R1, 18H[R0]
                                 ;    4386 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4386
00003F73 670A                    		RTSD #28H
00003F75                         __$putc_bfd:
                                 		.STACK	__$putc_bfd=24
                                 ;    4387 
                                 ;    4388 
                                 ;    4389 
                                 ;    4390 #if !_FS_READONLY
                                 ;    4391 #include <stdarg.h>
                                 ;    4392 /*-----------------------------------------------------------------------*/
                                 ;    4393 /* Put a character to the file                                           */
                                 ;    4394 /*-----------------------------------------------------------------------*/
                                 ;    4395 
                                 ;    4396 typedef struct {
                                 ;    4397 	FIL* fp;
                                 ;    4398 	int idx, nchr;
                                 ;    4399 	BYTE buf[64];
                                 ;    4400 } putbuff;
                                 ;    4401 
                                 ;    4402 
                                 ;    4403 static
                                 ;    4404 void putc_bfd (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4404
00003F75 7100EC                  		ADD #0FFFFFFECH, R0
00003F78 A101                    		MOV.L R1, 10H[R0]
00003F7A 838A                    		MOV.B R2, 0FH[R0]
00003F7C                         L2309:	; entry.split
                                 ;    4405 	putbuff* pb,
                                 ;    4406 	TCHAR c
                                 ;    4407 )
                                 ;    4408 {
                                 ;    4409 	UINT bw;
                                 ;    4410 	int i;
                                 ;    4411 
                                 ;    4412 
                                 ;    4413 	if (_USE_STRFUNC == 2 && c == '\n')	 /* LF -> CRLF conversion */
                                 ;    4414 		putc_bfd(pb, '\r');
                                 ;    4415 
                                 ;    4416 	i = pb->idx;	/* Buffer write index (-1:error) */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4416
00003F7C A901                    		MOV.L 10H[R0], R1
00003F7E E5100102                		MOV.L 04H[R1], 08H[R0]
00003F82                         L2310:	; entry.split1
                                 ;    4417 	if (i < 0) return;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4417
00003F82 A881                    		MOV.L 08H[R0], R1
00003F84 6101                    		CMP #00H, R1
00003F86 29rr                    		BLT L2320
00003F88                         L2311:	; bb16
                                 ;    4418 
                                 ;    4419 #if _USE_LFN && _LFN_UNICODE
                                 ;    4420 #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
                                 ;    4421 	if (c < 0x80) {				/* 7-bit */
                                 ;    4422 		pb->buf[i++] = (BYTE)c;
                                 ;    4423 	} else {
                                 ;    4424 		if (c < 0x800) {		/* 11-bit */
                                 ;    4425 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
                                 ;    4426 		} else {				/* 16-bit */
                                 ;    4427 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
                                 ;    4428 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
                                 ;    4429 		}
                                 ;    4430 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
                                 ;    4431 	}
                                 ;    4432 #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
                                 ;    4433 	pb->buf[i++] = (BYTE)(c >> 8);
                                 ;    4434 	pb->buf[i++] = (BYTE)c;
                                 ;    4435 #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
                                 ;    4436 	pb->buf[i++] = (BYTE)c;
                                 ;    4437 	pb->buf[i++] = (BYTE)(c >> 8);
                                 ;    4438 #else							/* Write a character in ANSI/OEM */
                                 ;    4439 	c = ff_convert(c, 0);	/* Unicode -> OEM */
                                 ;    4440 	if (!c) c = '?';
                                 ;    4441 	if (c >= 0x100)
                                 ;    4442 		pb->buf[i++] = (BYTE)(c >> 8);
                                 ;    4443 	pb->buf[i++] = (BYTE)c;
                                 ;    4444 #endif
                                 ;    4445 #else							/* Write a character without conversion */
                                 ;    4446 	pb->buf[i++] = (BYTE)c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4446
00003F88 A901                    		MOV.L 10H[R0], R1
00003F8A 06890102                		ADD 08H[R0].L, R1
00003F8E C5010F0C                		MOV.B 0FH[R0], 0CH[R1]
00003F92 A881                    		MOV.L 08H[R0], R1
00003F94 6211                    		ADD #01H, R1
00003F96 A081                    		MOV.L R1, 08H[R0]
00003F98                         L2312:	; bb16.split
                                 ;    4447 #endif
                                 ;    4448 
                                 ;    4449 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4449
00003F98 A881                    		MOV.L 08H[R0], R1
00003F9A 75513D                  		CMP #3DH, R1
00003F9D 29rr                    		BLT L2318
00003F9F                         L2313:	; bb26
                                 ;    4450 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4450
00003F9F A902                    		MOV.L 10H[R0], R2
00003FA1 EC21                    		MOV.L [R2], R1
00003FA3 A883                    		MOV.L 08H[R0], R3
00003FA5 62C2                    		ADD #0CH, R2
00003FA7 710404                  		ADD #04H, R0, R4
00003FAA 39rrrr               W  		BSR _f_write
00003FAD                         L2314:	; bb26.split
                                 ;    4451 		i = (bw == (UINT)i) ? 0 : -1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4451
00003FAD A809                    		MOV.L 04H[R0], R1
00003FAF 06850102                		CMP 08H[R0].L, R1
00003FB3 18                   S  		BNE L2316
00003FB4                         L2315:	; bb39
00003FB4 F80600                  		MOV.L #00000000H, [R0]
00003FB7 08                   S  		BRA L2317
00003FB8                         L2316:	; bb40
00003FB8 F806FF                  		MOV.L #0FFFFFFFFH, [R0]
00003FBB                         L2317:	; bb41
00003FBB E40002                  		MOV.L [R0], 08H[R0]
00003FBE                         L2318:	; bb48
                                 ;    4452 	}
                                 ;    4453 	pb->idx = i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4453
00003FBE A881                    		MOV.L 08H[R0], R1
00003FC0 A902                    		MOV.L 10H[R0], R2
00003FC2 A029                    		MOV.L R1, 04H[R2]
00003FC4                         L2319:	; bb48.split
                                 ;    4454 	pb->nchr++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4454
00003FC4 A901                    		MOV.L 10H[R0], R1
00003FC6 A892                    		MOV.L 08H[R1], R2
00003FC8 6212                    		ADD #01H, R2
00003FCA A092                    		MOV.L R2, 08H[R1]
00003FCC 6705                    		RTSD #14H
00003FCE                         L2320:	; return
                                 ;    4455 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4455
00003FCE 6705                    		RTSD #14H
00003FD0                         _f_putc:
                                 		.STACK	_f_putc=104
                                 ;    4456 
                                 ;    4457 
                                 ;    4458 
                                 ;    4459 int f_putc (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4459
00003FD0 71009C                  		ADD #0FFFFFF9CH, R0
00003FD3 C70163                  		MOV.B R1, 63H[R0]
00003FD6 A58A                    		MOV.L R2, 5CH[R0]
                                 ;    4460 	TCHAR c,	/* A character to be output */
                                 ;    4461 	FIL* fp		/* Pointer to the file object */
                                 ;    4462 )
                                 ;    4463 {
                                 ;    4464 	putbuff pb;
                                 ;    4465 	UINT nw;
                                 ;    4466 
                                 ;    4467 
                                 ;    4468 	pb.fp = fp;			/* Initialize output buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4468
00003FD8 A082                    		MOV.L R2, 08H[R0]
00003FDA                         L2322:	; entry.split
                                 ;    4469 	pb.nchr = pb.idx = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4469
00003FDA 3E0300                  		MOV.L #00000000H, 0CH[R0]
00003FDD 3E0400                  		MOV.L #00000000H, 10H[R0]
00003FE0                         L2323:	; entry.split1
                                 ;    4470 
                                 ;    4471 	putc_bfd(&pb, c);	/* Put a character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4471
00003FE0 590263                  		MOVU.B 63H[R0], R2
00003FE3 710108                  		ADD #08H, R0, R1
00003FE6 39rrrr               W  		BSR __$putc_bfd
00003FE9                         L2324:	; entry.split2
                                 ;    4472 
                                 ;    4473 	if (   pb.idx >= 0	/* Flush buffered characters to the file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4473
00003FE9 A889                    		MOV.L 0CH[R0], R1
00003FEB 6101                    		CMP #00H, R1
00003FED 28rr                    		BGE L2326
00003FEF 2Err                 B  		BRA L2328
00003FF1                         L2325:	; bb11
                                 ;    4474 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                                 ;    4475 		&& (UINT)pb.idx == nw) return pb.nchr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4475
00003FF1 E5000401                		MOV.L 10H[R0], 04H[R0]
00003FF5 2Err                 B  		BRA L2335
00003FF7                         L2326:	; bb19
00003FF7 A88B                    		MOV.L 0CH[R0], R3
00003FF9 A881                    		MOV.L 08H[R0], R1
00003FFB 710454                  		ADD #54H, R0, R4
00003FFE 710214                  		ADD #14H, R0, R2
00004001 39rrrr               W  		BSR _f_write
00004004 6101                    		CMP #00H, R1
00004006 18                   S  		BNE L2328
00004007                         L2327:	; bb29
00004007 F80601                  		MOV.L #00000001H, [R0]
0000400A 08                   S  		BRA L2329
0000400B                         L2328:	; bb30
0000400B F80600                  		MOV.L #00000000H, [R0]
0000400E                         L2329:	; bb31
0000400E EC01                    		MOV.L [R0], R1
00004010 6101                    		CMP #00H, R1
00004012 20rr                    		BEQ L2332
00004014                         L2330:	; bb34
00004014 A889                    		MOV.L 0CH[R0], R1
00004016 06850115                		CMP 54H[R0].L, R1
0000401A 18                   S  		BNE L2332
0000401B                         L2331:	; bb40
0000401B F80601                  		MOV.L #00000001H, [R0]
0000401E 08                   S  		BRA L2333
0000401F                         L2332:	; bb41
0000401F F80600                  		MOV.L #00000000H, [R0]
00004022                         L2333:	; bb42
00004022 EC01                    		MOV.L [R0], R1
00004024 6101                    		CMP #00H, R1
00004026 21rr                    		BNE L2325
00004028                         L2334:	; bb47
                                 ;    4476 	return EOF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4476
00004028 F90601FF                		MOV.L #0FFFFFFFFH, 04H[R0]
0000402C                         L2335:	; bb49
0000402C A809                    		MOV.L 04H[R0], R1
0000402E A581                    		MOV.L R1, 58H[R0]
                                 ;    4477 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4477
00004030 6719                    		RTSD #64H
00004032                         _f_puts:
                                 		.STACK	_f_puts=104
                                 ;    4478 
                                 ;    4479 
                                 ;    4480 
                                 ;    4481 
                                 ;    4482 /*-----------------------------------------------------------------------*/
                                 ;    4483 /* Put a string to the file                                              */
                                 ;    4484 /*-----------------------------------------------------------------------*/
                                 ;    4485 
                                 ;    4486 int f_puts (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4486
00004032 71009C                  		ADD #0FFFFFF9CH, R0
00004035 A601                    		MOV.L R1, 60H[R0]
00004037 A58A                    		MOV.L R2, 5CH[R0]
                                 ;    4487 	const TCHAR* str,	/* Pointer to the string to be output */
                                 ;    4488 	FIL* fp				/* Pointer to the file object */
                                 ;    4489 )
                                 ;    4490 {
                                 ;    4491 	putbuff pb;
                                 ;    4492 	UINT nw;
                                 ;    4493 
                                 ;    4494 
                                 ;    4495 	pb.fp = fp;				/* Initialize output buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4495
00004039 A082                    		MOV.L R2, 08H[R0]
0000403B                         L2337:	; entry.split
                                 ;    4496 	pb.nchr = pb.idx = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4496
0000403B 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000403E 3E0400                  		MOV.L #00000000H, 10H[R0]
00004041 2Err                 B  		BRA L2339
00004043                         L2338:	; bb
                                 ;    4497 
                                 ;    4498 	while (*str)			/* Put the string */
                                 ;    4499 		putc_bfd(&pb, *str++);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4499
00004043 AE01                    		MOV.L 60H[R0], R1
00004045 711201                  		ADD #01H, R1, R2
00004048 A602                    		MOV.L R2, 60H[R0]
0000404A 5812                    		MOVU.B [R1], R2
0000404C 710108                  		ADD #08H, R0, R1
0000404F 39rrrr               W  		BSR __$putc_bfd
00004052                         L2339:	; bb14
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4498
00004052 AE01                    		MOV.L 60H[R0], R1
00004054 581E                    		MOVU.B [R1], R14
00004056 610E                    		CMP #00H, R14
00004058 21rr                    		BNE L2338
0000405A                         L2340:	; bb21
                                 ;    4500 
                                 ;    4501 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4501
0000405A A889                    		MOV.L 0CH[R0], R1
0000405C 6101                    		CMP #00H, R1
0000405E 28rr                    		BGE L2342
00004060 2Err                 B  		BRA L2344
00004062                         L2341:	; bb22
                                 ;    4502 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                                 ;    4503 		&& (UINT)pb.idx == nw) return pb.nchr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4503
00004062 E5000401                		MOV.L 10H[R0], 04H[R0]
00004066 2Err                 B  		BRA L2351
00004068                         L2342:	; bb30
00004068 A88B                    		MOV.L 0CH[R0], R3
0000406A A881                    		MOV.L 08H[R0], R1
0000406C 710454                  		ADD #54H, R0, R4
0000406F 710214                  		ADD #14H, R0, R2
00004072 39rrrr               W  		BSR _f_write
00004075 6101                    		CMP #00H, R1
00004077 18                   S  		BNE L2344
00004078                         L2343:	; bb40
00004078 F80601                  		MOV.L #00000001H, [R0]
0000407B 08                   S  		BRA L2345
0000407C                         L2344:	; bb41
0000407C F80600                  		MOV.L #00000000H, [R0]
0000407F                         L2345:	; bb42
0000407F EC01                    		MOV.L [R0], R1
00004081 6101                    		CMP #00H, R1
00004083 20rr                    		BEQ L2348
00004085                         L2346:	; bb46
00004085 A889                    		MOV.L 0CH[R0], R1
00004087 06850115                		CMP 54H[R0].L, R1
0000408B 18                   S  		BNE L2348
0000408C                         L2347:	; bb52
0000408C F80601                  		MOV.L #00000001H, [R0]
0000408F 08                   S  		BRA L2349
00004090                         L2348:	; bb53
00004090 F80600                  		MOV.L #00000000H, [R0]
00004093                         L2349:	; bb54
00004093 EC01                    		MOV.L [R0], R1
00004095 6101                    		CMP #00H, R1
00004097 21rr                    		BNE L2341
00004099                         L2350:	; bb59
                                 ;    4504 	return EOF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4504
00004099 F90601FF                		MOV.L #0FFFFFFFFH, 04H[R0]
0000409D                         L2351:	; bb61
0000409D A809                    		MOV.L 04H[R0], R1
0000409F A581                    		MOV.L R1, 58H[R0]
                                 ;    4505 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4505
000040A1 6719                    		RTSD #64H
000040A3                         _f_printf:
                                 		.STACK	_f_printf=152
                                 ;    4506 
                                 ;    4507 
                                 ;    4508 
                                 ;    4509 
                                 ;    4510 /*-----------------------------------------------------------------------*/
                                 ;    4511 /* Put a formatted string to the file                                    */
                                 ;    4512 /*-----------------------------------------------------------------------*/
                                 ;    4513 
                                 ;    4514 int f_printf (
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4514
000040A3 72006CFF                		ADD #0FFFFFF6CH, R0
000040A7 E70124                  		MOV.L R1, 90H[R0]
000040AA E5002623                		MOV.L 98H[R0], 8CH[R0]
                                 ;    4515 	FIL* fp,			/* Pointer to the file object */
                                 ;    4516 	const TCHAR* fmt,	/* Pointer to the format string */
                                 ;    4517 	...					/* Optional arguments... */
                                 ;    4518 )
                                 ;    4519 {
                                 ;    4520 	va_list arp;
                                 ;    4521 	BYTE f, r;
                                 ;    4522 	UINT nw, i, j, w;
                                 ;    4523 	DWORD v;
                                 ;    4524 	TCHAR c, d, s[16], *p;
                                 ;    4525 	putbuff pb;
                                 ;    4526 
                                 ;    4527 
                                 ;    4528 	pb.fp = fp;				/* Initialize output buffer */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4528
000040AE E500240F                		MOV.L 90H[R0], 3CH[R0]
000040B2                         L2353:	; entry.split
                                 ;    4529 	pb.nchr = pb.idx = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4529
000040B2 3E8000                  		MOV.L #00000000H, 40H[R0]
000040B5 3E8100                  		MOV.L #00000000H, 44H[R0]
000040B8                         L2354:	; entry.split1
000040B8 72019C00                		ADD #9CH, R0, R1
                                 ;    4530 
                                 ;    4531 	va_start(arp, fmt);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4531
000040BC A081                    		MOV.L R1, 08H[R0]
000040BE 38rrrr               W  		BRA L2461
000040C1                         L2355:	; bb34
                                 ;    4532 
                                 ;    4533 	for (;;) {
                                 ;    4534 		c = *fmt++;
                                 ;    4535 		if (c == 0) break;			/* End of string */
                                 ;    4536 		if (c != '%') {				/* Non escape character */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4536
000040C1 590126                  		MOVU.B 26H[R0], R1
000040C4 755125                  		CMP #25H, R1
000040C7 20rr                    		BEQ L2357
000040C9                         L2356:	; bb35
                                 ;    4537 			putc_bfd(&pb, c);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4537
000040C9 590226                  		MOVU.B 26H[R0], R2
000040CC 71013C                  		ADD #3CH, R0, R1
000040CF 39rrrr               W  		BSR __$putc_bfd
000040D2 38rrrr               W  		BRA L2461
000040D5                         L2357:	; bb43
                                 ;    4538 			continue;
                                 ;    4539 		}
                                 ;    4540 		w = f = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4540
000040D5 3C0E00                  		MOV.B #00H, 0EH[R0]
000040D8 B381                    		MOVU.B 0EH[R0], R1
000040DA A189                    		MOV.L R1, 1CH[R0]
000040DC                         L2358:	; bb43.split
                                 ;    4541 		c = *fmt++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4541
000040DC ED0123                  		MOV.L 8CH[R0], R1
000040DF C41026                  		MOV.B [R1], 26H[R0]
000040E2 ED0123                  		MOV.L 8CH[R0], R1
000040E5 6211                    		ADD #01H, R1
000040E7 E70123                  		MOV.L R1, 8CH[R0]
000040EA                         L2359:	; bb43.split2
                                 ;    4542 		if (c == '0') {				/* Flag: '0' padding */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4542
000040EA 590126                  		MOVU.B 26H[R0], R1
000040ED 755130                  		CMP #30H, R1
000040F0 21rr                    		BNE L2362
000040F2                         L2360:	; bb51
                                 ;    4543 			f = 1; c = *fmt++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4543
000040F2 3C0E01                  		MOV.B #01H, 0EH[R0]
000040F5                         L2361:	; bb51.split
000040F5 ED0123                  		MOV.L 8CH[R0], R1
000040F8 C41026                  		MOV.B [R1], 26H[R0]
000040FB ED0123                  		MOV.L 8CH[R0], R1
000040FE 6211                    		ADD #01H, R1
00004100 E70123                  		MOV.L R1, 8CH[R0]
00004103 2Err                 B  		BRA L2367
00004105                         L2362:	; bb57
                                 ;    4544 		} else {
                                 ;    4545 			if (c == '-') {			/* Flag: left justified */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4545
00004105 590126                  		MOVU.B 26H[R0], R1
00004108 75512D                  		CMP #2DH, R1
0000410B 21rr                    		BNE L2367
0000410D                         L2363:	; bb58
                                 ;    4546 				f = 2; c = *fmt++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4546
0000410D 3C0E02                  		MOV.B #02H, 0EH[R0]
00004110                         L2364:	; bb58.split
00004110 ED0123                  		MOV.L 8CH[R0], R1
00004113 C41026                  		MOV.B [R1], 26H[R0]
00004116 ED0123                  		MOV.L 8CH[R0], R1
00004119 6211                    		ADD #01H, R1
0000411B E70123                  		MOV.L R1, 8CH[R0]
0000411E 2Err                 B  		BRA L2367
00004120                         L2365:	; bb75
                                 ;    4547 			}
                                 ;    4548 		}
                                 ;    4549 		while (IsDigit(c)) {		/* Precision */
                                 ;    4550 			w = w * 10 + c - '0';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4550
00004120 A989                    		MOV.L 1CH[R0], R1
00004122 63A1                    		MUL #0AH, R1
00004124 490126                  		ADD 26H[R0].UB, R1
00004127 7111D0                  		ADD #0FFFFFFD0H, R1
0000412A A189                    		MOV.L R1, 1CH[R0]
0000412C                         L2366:	; bb75.split
                                 ;    4551 			c = *fmt++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4551
0000412C ED0123                  		MOV.L 8CH[R0], R1
0000412F C41026                  		MOV.B [R1], 26H[R0]
00004132 ED0123                  		MOV.L 8CH[R0], R1
00004135 6211                    		ADD #01H, R1
00004137 E70123                  		MOV.L R1, 8CH[R0]
0000413A                         L2367:	; bb86
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4549
0000413A 590126                  		MOVU.B 26H[R0], R1
0000413D 755130                  		CMP #30H, R1
00004140 29rr                    		BLT L2370
00004142                         L2368:	; bb91
00004142 590126                  		MOVU.B 26H[R0], R1
00004145 755139                  		CMP #39H, R1
00004148 2Arr                    		BGT L2370
0000414A                         L2369:	; bb96
0000414A F80601                  		MOV.L #00000001H, [R0]
0000414D 08                   S  		BRA L2371
0000414E                         L2370:	; bb97
0000414E F80600                  		MOV.L #00000000H, [R0]
00004151                         L2371:	; bb98
00004151 EC01                    		MOV.L [R0], R1
00004153 6101                    		CMP #00H, R1
00004155 21rr                    		BNE L2365
00004157                         L2372:	; bb104
                                 ;    4552 		}
                                 ;    4553 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4553
00004157 590126                  		MOVU.B 26H[R0], R1
0000415A 75516C                  		CMP #6CH, R1
0000415D 20rr                    		BEQ L2376
0000415F 2Err                 B  		BRA L2375
00004161                         L2373:	; bb105
                                 ;    4554 			f |= 4; c = *fmt++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4554
00004161 F1020E                  		BSET #02H, 0EH[R0].B
00004164                         L2374:	; bb105.split
00004164 ED0123                  		MOV.L 8CH[R0], R1
00004167 C41026                  		MOV.B [R1], 26H[R0]
0000416A ED0123                  		MOV.L 8CH[R0], R1
0000416D 6211                    		ADD #01H, R1
0000416F E70123                  		MOV.L R1, 8CH[R0]
00004172 2Err                 B  		BRA L2379
00004174                         L2375:	; bb118
00004174 590126                  		MOVU.B 26H[R0], R1
00004177 75514C                  		CMP #4CH, R1
0000417A 18                   S  		BNE L2377
0000417B                         L2376:	; bb123
0000417B F80601                  		MOV.L #00000001H, [R0]
0000417E 08                   S  		BRA L2378
0000417F                         L2377:	; bb124
0000417F F80600                  		MOV.L #00000000H, [R0]
00004182                         L2378:	; bb125
00004182 EC01                    		MOV.L [R0], R1
00004184 6101                    		CMP #00H, R1
00004186 21rr                    		BNE L2373
00004188                         L2379:	; bb131
                                 ;    4555 		}
                                 ;    4556 		if (!c) break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4556
00004188 590126                  		MOVU.B 26H[R0], R1
0000418B 6101                    		CMP #00H, R1
0000418D 10                   S  		BEQ L2381
0000418E                         L2380:	; bb138
0000418E F80600                  		MOV.L #00000000H, [R0]
00004191 08                   S  		BRA L2382
00004192                         L2381:	; bb139
00004192 F80601                  		MOV.L #00000001H, [R0]
00004195                         L2382:	; bb140
00004195 EC01                    		MOV.L [R0], R1
00004197 6101                    		CMP #00H, R1
00004199 3Brrrr               W  		BNE L2463
0000419C                         L2383:	; bb144
                                 ;    4557 		d = c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4557
0000419C C5002627                		MOV.B 26H[R0], 27H[R0]
000041A0                         L2384:	; bb144.split
                                 ;    4558 		if (IsLower(d)) d -= 0x20;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4558
000041A0 590127                  		MOVU.B 27H[R0], R1
000041A3 755160                  		CMP #60H, R1
000041A6 2Arr                    		BGT L2386
000041A8 2Err                 B  		BRA L2388
000041AA                         L2385:	; bb147
000041AA 590127                  		MOVU.B 27H[R0], R1
000041AD 7111E0                  		ADD #0FFFFFFE0H, R1
000041B0 C70127                  		MOV.B R1, 27H[R0]
000041B3 2Err                 B  		BRA L2390
000041B5                         L2386:	; bb156
000041B5 590127                  		MOVU.B 27H[R0], R1
000041B8 75517A                  		CMP #7AH, R1
000041BB 2Arr                    		BGT L2388
000041BD                         L2387:	; bb161
000041BD F80601                  		MOV.L #00000001H, [R0]
000041C0 08                   S  		BRA L2389
000041C1                         L2388:	; bb162
000041C1 F80600                  		MOV.L #00000000H, [R0]
000041C4                         L2389:	; bb163
000041C4 EC01                    		MOV.L [R0], R1
000041C6 6101                    		CMP #00H, R1
000041C8 21rr                    		BNE L2385
000041CA                         L2390:	; bb168
                                 ;    4559 		switch (d) {				/* Type is... */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4559
000041CA 590127                  		MOVU.B 27H[R0], R1
000041CD 755142                  		CMP #42H, R1
000041D0 3Arrrr               W  		BEQ L2412
000041D3                         L2391:	; bb168
000041D3 755143                  		CMP #43H, R1
000041D6 3Arrrr               W  		BEQ L2411
000041D9                         L2392:	; bb168
000041D9 755144                  		CMP #44H, R1
000041DC 3Arrrr               W  		BEQ L2414
000041DF                         L2393:	; bb168
000041DF 75514F                  		CMP #4FH, R1
000041E2 3Arrrr               W  		BEQ L2413
000041E5                         L2394:	; bb168
000041E5 755158                  		CMP #58H, R1
000041E8 3Arrrr               W  		BEQ L2415
000041EB                         L2395:	; bb168
000041EB 755155                  		CMP #55H, R1
000041EE 3Arrrr               W  		BEQ L2414
000041F1                         L2396:	; bb168
000041F1 755153                  		CMP #53H, R1
000041F4 3Brrrr               W  		BNE L2416
000041F7                         L2397:	; bb171
                                 ;    4560 		case 'S' :					/* String */
                                 ;    4561 			p = va_arg(arp, TCHAR*);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4561
000041F7 A881                    		MOV.L 08H[R0], R1
000041F9 711204                  		ADD #04H, R1, R2
000041FC A082                    		MOV.L R2, 08H[R0]
000041FE E4100E                  		MOV.L [R1], 38H[R0]
00004201                         L2398:	; bb171.split
                                 ;    4562 			for (j = 0; p[j]; j++) ;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4562
00004201 3E0600                  		MOV.L #00000000H, 18H[R0]
00004204 08                   S  		BRA L2400
00004205                         L2399:	; bb179
00004205 A981                    		MOV.L 18H[R0], R1
00004207 6211                    		ADD #01H, R1
00004209 A181                    		MOV.L R1, 18H[R0]
0000420B                         L2400:	; bb182
0000420B A981                    		MOV.L 18H[R0], R1
0000420D AB82                    		MOV.L 38H[R0], R2
0000420F FEC21E                  		MOVU.B [R2,R1], R14
00004212 610E                    		CMP #00H, R14
00004214 21rr                    		BNE L2399
00004216                         L2401:	; bb192
                                 ;    4563 			if (!(f & 2)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4563
00004216 F5010E                  		BTST #01H, 0EH[R0].B
00004219 21rr                    		BNE L2404
0000421B 2Err                 B  		BRA L2405
0000421D                         L2402:	; bb194
0000421D 754220                  		MOV.L #00000020H, R2
00004220 71013C                  		ADD #3CH, R0, R1
00004223 39rrrr               W  		BSR __$putc_bfd
00004226                         L2403:	; bb195
                                 ;    4564 				while (j++ < w) putc_bfd(&pb, ' ');
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4564
00004226 A981                    		MOV.L 18H[R0], R1
00004228 711201                  		ADD #01H, R1, R2
0000422B A98B                    		MOV.L 1CH[R0], R3
0000422D A182                    		MOV.L R2, 18H[R0]
0000422F 4731                    		CMP R3, R1
00004231 23rr                    		BLTU L2402
00004233 2Err                 B  		BRA L2408
00004235                         L2404:	; bb209
00004235 F80600                  		MOV.L #00000000H, [R0]
00004238 08                   S  		BRA L2406
00004239                         L2405:	; bb210
00004239 F80601                  		MOV.L #00000001H, [R0]
0000423C                         L2406:	; bb211
0000423C EC01                    		MOV.L [R0], R1
0000423E 6101                    		CMP #00H, R1
00004240 21rr                    		BNE L2403
00004242 2Err                 B  		BRA L2408
00004244                         L2407:	; bb216
00004244 AB81                    		MOV.L 38H[R0], R1
00004246 711201                  		ADD #01H, R1, R2
00004249 A382                    		MOV.L R2, 38H[R0]
0000424B 5812                    		MOVU.B [R1], R2
0000424D 71013C                  		ADD #3CH, R0, R1
00004250 39rrrr               W  		BSR __$putc_bfd
00004253                         L2408:	; bb221
                                 ;    4565 			}
                                 ;    4566 			while (*p) putc_bfd(&pb, *p++);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4566
00004253 AB81                    		MOV.L 38H[R0], R1
00004255 581E                    		MOVU.B [R1], R14
00004257 610E                    		CMP #00H, R14
00004259 21rr                    		BNE L2407
0000425B 08                   S  		BRA L2410
0000425C                         L2409:	; bb229
0000425C 754220                  		MOV.L #00000020H, R2
0000425F 71013C                  		ADD #3CH, R0, R1
00004262 39rrrr               W  		BSR __$putc_bfd
00004265                         L2410:	; bb230
                                 ;    4567 			while (j++ < w) putc_bfd(&pb, ' ');
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4567
00004265 A981                    		MOV.L 18H[R0], R1
00004267 711201                  		ADD #01H, R1, R2
0000426A A98B                    		MOV.L 1CH[R0], R3
0000426C A182                    		MOV.L R2, 18H[R0]
0000426E 4731                    		CMP R3, R1
00004270 23rr                    		BLTU L2409
00004272 38rrrr               W  		BRA L2461
00004275                         L2411:	; bb240
                                 ;    4568 			continue;
                                 ;    4569 		case 'C' :					/* Character */
                                 ;    4570 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4570
00004275 A881                    		MOV.L 08H[R0], R1
00004277 711204                  		ADD #04H, R1, R2
0000427A A082                    		MOV.L R2, 08H[R0]
0000427C 5812                    		MOVU.B [R1], R2
0000427E 71013C                  		ADD #3CH, R0, R1
00004281 39rrrr               W  		BSR __$putc_bfd
00004284 38rrrr               W  		BRA L2461
00004287                         L2412:	; bb250
                                 ;    4571 		case 'B' :					/* Binary */
                                 ;    4572 			r = 2; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4572
00004287 3C0F02                  		MOV.B #02H, 0FH[R0]
0000428A 2Err                 B  		BRA L2417
0000428C                         L2413:	; bb251
                                 ;    4573 		case 'O' :					/* Octal */
                                 ;    4574 			r = 8; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4574
0000428C 3C0F08                  		MOV.B #08H, 0FH[R0]
0000428F 2Err                 B  		BRA L2417
00004291                         L2414:	; bb252
                                 ;    4575 		case 'D' :					/* Signed decimal */
                                 ;    4576 		case 'U' :					/* Unsigned decimal */
                                 ;    4577 			r = 10; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4577
00004291 3C0F0A                  		MOV.B #0AH, 0FH[R0]
00004294 2Err                 B  		BRA L2417
00004296                         L2415:	; bb253
                                 ;    4578 		case 'X' :					/* Hexdecimal */
                                 ;    4579 			r = 16; break;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4579
00004296 3C0F10                  		MOV.B #10H, 0FH[R0]
00004299 2Err                 B  		BRA L2417
0000429B                         L2416:	; bb254
                                 ;    4580 		default:					/* Unknown type (pass-through) */
                                 ;    4581 			putc_bfd(&pb, c); continue;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4581
0000429B 590226                  		MOVU.B 26H[R0], R2
0000429E 71013C                  		ADD #3CH, R0, R1
000042A1 39rrrr               W  		BSR __$putc_bfd
000042A4 38rrrr               W  		BRA L2461
000042A7                         L2417:	; bb257
                                 ;    4582 		}
                                 ;    4583 
                                 ;    4584 		/* Get an argument and put it in numeral */
                                 ;    4585 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_arg(arp, unsigned int));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4585
000042A7 F5020E                  		BTST #02H, 0EH[R0].B
000042AA 20rr                    		BEQ L2419
000042AC                         L2418:	; bb263
000042AC A881                    		MOV.L 08H[R0], R1
000042AE 711204                  		ADD #04H, R1, R2
000042B1 A082                    		MOV.L R2, 08H[R0]
000042B3 E010                    		MOV.L [R1], [R0]
000042B5 08                   S  		BRA L2420
000042B6                         L2419:	; bb271
000042B6 A881                    		MOV.L 08H[R0], R1
000042B8 711204                  		ADD #04H, R1, R2
000042BB A082                    		MOV.L R2, 08H[R0]
000042BD E010                    		MOV.L [R1], [R0]
000042BF                         L2420:	; bb295
000042BF E40008                  		MOV.L [R0], 20H[R0]
                                 ;    4586 		if (d == 'D' && (v & 0x80000000)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4586
000042C2 590127                  		MOVU.B 27H[R0], R1
000042C5 755144                  		CMP #44H, R1
000042C8 20rr                    		BEQ L2423
000042CA 2Err                 B  		BRA L2425
000042CC                         L2421:	; bb299
000042CC 6601                    		MOV.L #00000000H, R1
                                 ;    4587 			v = 0 - v;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4587
000042CE 06810108                		SUB 20H[R0].L, R1
000042D2 A201                    		MOV.L R1, 20H[R0]
000042D4                         L2422:	; bb299.split
                                 ;    4588 			f |= 8;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4588
000042D4 F1030E                  		BSET #03H, 0EH[R0].B
000042D7 2Err                 B  		BRA L2427
000042D9                         L2423:	; bb310
000042D9 AA01                    		MOV.L 20H[R0], R1
000042DB 7DF1                    		BTST #1FH, R1
000042DD 10                   S  		BEQ L2425
000042DE                         L2424:	; bb315
000042DE F80601                  		MOV.L #00000001H, [R0]
000042E1 08                   S  		BRA L2426
000042E2                         L2425:	; bb316
000042E2 F80600                  		MOV.L #00000000H, [R0]
000042E5                         L2426:	; bb317
000042E5 EC01                    		MOV.L [R0], R1
000042E7 6101                    		CMP #00H, R1
000042E9 21rr                    		BNE L2421
000042EB                         L2427:	; bb322
                                 ;    4589 		}
                                 ;    4590 		i = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4590
000042EB 3E0500                  		MOV.L #00000000H, 14H[R0]
000042EE                         L2428:	; bb323
                                 ;    4591 		do {
                                 ;    4592 			d = (TCHAR)(v % r); v /= r;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4592
000042EE AA01                    		MOV.L 20H[R0], R1
000042F0 B38A                    		MOVU.B 0FH[R0], R2
000042F2 EF1E                    		MOV.L R1, R14
000042F4 FC272E                  		DIVU R2, R14
000042F7 4F2E                    		MUL R2, R14
000042F9 43E1                    		SUB R14, R1
000042FB C70127                  		MOV.B R1, 27H[R0]
000042FE                         L2429:	; bb323.split
000042FE AA01                    		MOV.L 20H[R0], R1
00004300 FC25010F                		DIVU 0FH[R0].UB, R1
00004304 A201                    		MOV.L R1, 20H[R0]
00004306                         L2430:	; bb323.split3
                                 ;    4593 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4593
00004306 590127                  		MOVU.B 27H[R0], R1
00004309 61A1                    		CMP #0AH, R1
0000430B 29rr                    		BLT L2435
0000430D                         L2431:	; bb334
0000430D 590126                  		MOVU.B 26H[R0], R1
00004310 755178                  		CMP #78H, R1
00004313 18                   S  		BNE L2433
00004314                         L2432:	; bb339
00004314 F80627                  		MOV.L #00000027H, [R0]
00004317 08                   S  		BRA L2434
00004318                         L2433:	; bb340
00004318 F80607                  		MOV.L #00000007H, [R0]
0000431B                         L2434:	; bb341
0000431B 590127                  		MOVU.B 27H[R0], R1
0000431E 068801                  		ADD [R0].L, R1
00004321 C70127                  		MOV.B R1, 27H[R0]
00004324                         L2435:	; bb353
                                 ;    4594 			s[i++] = d + '0';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4594
00004324 590127                  		MOVU.B 27H[R0], R1
00004327 711130                  		ADD #30H, R1
0000432A 710E28                  		ADD #28H, R0, R14
0000432D A90A                    		MOV.L 14H[R0], R2
0000432F FE0E21                  		MOV.B R1, [R14,R2]
00004332 A909                    		MOV.L 14H[R0], R1
00004334 6211                    		ADD #01H, R1
00004336 A109                    		MOV.L R1, 14H[R0]
00004338                         L2436:	; bb353.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4591
00004338 AA01                    		MOV.L 20H[R0], R1
0000433A 6101                    		CMP #00H, R1
0000433C 20rr                    		BEQ L2439
0000433E                         L2437:	; bb366
0000433E A909                    		MOV.L 14H[R0], R1
00004340 61F1                    		CMP #0FH, R1
00004342 24rr                    		BGTU L2439
00004344                         L2438:	; bb370
00004344 F80601                  		MOV.L #00000001H, [R0]
00004347 08                   S  		BRA L2440
00004348                         L2439:	; bb371
00004348 F80600                  		MOV.L #00000000H, [R0]
0000434B                         L2440:	; bb372
0000434B EC01                    		MOV.L [R0], R1
0000434D 6101                    		CMP #00H, R1
0000434F 21rr                    		BNE L2428
00004351                         L2441:	; bb378
                                 ;    4595 		} while (v && i < sizeof s / sizeof s[0]);
                                 ;    4596 		if (f & 8) s[i++] = '-';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4596
00004351 F5030E                  		BTST #03H, 0EH[R0].B
00004354 20rr                    		BEQ L2443
00004356                         L2442:	; bb379
00004356 A909                    		MOV.L 14H[R0], R1
00004358 710E28                  		ADD #28H, R0, R14
0000435B 754F2D                  		MOV.L #0000002DH, R15
0000435E FE0E1F                  		MOV.B R15, [R14,R1]
00004361 A909                    		MOV.L 14H[R0], R1
00004363 6211                    		ADD #01H, R1
00004365 A109                    		MOV.L R1, 14H[R0]
00004367                         L2443:	; bb391
                                 ;    4597 		j = i; d = (f & 1) ? '0' : ' ';
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4597
00004367 E5000506                		MOV.L 14H[R0], 18H[R0]
0000436B                         L2444:	; bb391.split
0000436B F5000E                  		BTST #00H, 0EH[R0].B
0000436E 10                   S  		BEQ L2446
0000436F                         L2445:	; bb398
0000436F F80630                  		MOV.L #00000030H, [R0]
00004372 08                   S  		BRA L2447
00004373                         L2446:	; bb399
00004373 F80620                  		MOV.L #00000020H, [R0]
00004376                         L2447:	; bb400
00004376 EC01                    		MOV.L [R0], R1
00004378 C70127                  		MOV.B R1, 27H[R0]
0000437B 08                   S  		BRA L2449
0000437C                         L2448:	; bb404
0000437C 590227                  		MOVU.B 27H[R0], R2
0000437F 71013C                  		ADD #3CH, R0, R1
00004382 39rrrr               W  		BSR __$putc_bfd
00004385                         L2449:	; bb406
                                 ;    4598 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4598
00004385 F5010E                  		BTST #01H, 0EH[R0].B
00004388 10                   S  		BEQ L2451
00004389                         L2450:	; bb412
00004389 F80600                  		MOV.L #00000000H, [R0]
0000438C 08                   S  		BRA L2452
0000438D                         L2451:	; bb413
0000438D F80601                  		MOV.L #00000001H, [R0]
00004390                         L2452:	; bb414
00004390 EC01                    		MOV.L [R0], R1
00004392 6101                    		CMP #00H, R1
00004394 20rr                    		BEQ L2455
00004396                         L2453:	; bb417
00004396 A981                    		MOV.L 18H[R0], R1
00004398 711201                  		ADD #01H, R1, R2
0000439B A98B                    		MOV.L 1CH[R0], R3
0000439D A182                    		MOV.L R2, 18H[R0]
0000439F 4731                    		CMP R3, R1
000043A1 22rr                    		BGEU L2455
000043A3                         L2454:	; bb424
000043A3 F80601                  		MOV.L #00000001H, [R0]
000043A6 08                   S  		BRA L2456
000043A7                         L2455:	; bb425
000043A7 F80600                  		MOV.L #00000000H, [R0]
000043AA                         L2456:	; bb426
000043AA EC01                    		MOV.L [R0], R1
000043AC 6101                    		CMP #00H, R1
000043AE 21rr                    		BNE L2448
000043B0                         L2457:	; bb432
                                 ;    4599 		do putc_bfd(&pb, s[--i]); while (i);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4599
000043B0 A909                    		MOV.L 14H[R0], R1
000043B2 6011                    		SUB #01H, R1
000043B4 A109                    		MOV.L R1, 14H[R0]
000043B6 710E28                  		ADD #28H, R0, R14
000043B9 FECE12                  		MOVU.B [R14,R1], R2
000043BC 71013C                  		ADD #3CH, R0, R1
000043BF 39rrrr               W  		BSR __$putc_bfd
000043C2                         L2458:	; bb432.split
000043C2 A909                    		MOV.L 14H[R0], R1
000043C4 6101                    		CMP #00H, R1
000043C6 21rr                    		BNE L2457
000043C8 08                   S  		BRA L2460
000043C9                         L2459:	; bb444
000043C9 590227                  		MOVU.B 27H[R0], R2
000043CC 71013C                  		ADD #3CH, R0, R1
000043CF 39rrrr               W  		BSR __$putc_bfd
000043D2                         L2460:	; bb446
                                 ;    4600 		while (j++ < w) putc_bfd(&pb, d);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4600
000043D2 A981                    		MOV.L 18H[R0], R1
000043D4 711201                  		ADD #01H, R1, R2
000043D7 A98B                    		MOV.L 1CH[R0], R3
000043D9 A182                    		MOV.L R2, 18H[R0]
000043DB 4731                    		CMP R3, R1
000043DD 23rr                    		BLTU L2459
000043DF                         L2461:	; bb456.split
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4534
000043DF ED0123                  		MOV.L 8CH[R0], R1
000043E2 C41026                  		MOV.B [R1], 26H[R0]
000043E5 ED0123                  		MOV.L 8CH[R0], R1
000043E8 6211                    		ADD #01H, R1
000043EA E70123                  		MOV.L R1, 8CH[R0]
000043ED                         L2462:	; bb456.split4
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4535
000043ED 590126                  		MOVU.B 26H[R0], R1
000043F0 6101                    		CMP #00H, R1
000043F2 3Brrrr               W  		BNE L2355
000043F5                         L2463:	; bb459
                                 ;    4601 	}
                                 ;    4602 
                                 ;    4603 	va_end(arp);
                                 ;    4604 
                                 ;    4605 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4605
000043F5 AC01                    		MOV.L 40H[R0], R1
000043F7 6101                    		CMP #00H, R1
000043F9 28rr                    		BGE L2465
000043FB 2Err                 B  		BRA L2467
000043FD                         L2464:	; bb460
                                 ;    4606 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                                 ;    4607 		&& (UINT)pb.idx == nw) return pb.nchr;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4607
000043FD E5001101                		MOV.L 44H[R0], 04H[R0]
00004401 2Err                 B  		BRA L2474
00004403                         L2465:	; bb468
00004403 AC03                    		MOV.L 40H[R0], R3
00004405 AB89                    		MOV.L 3CH[R0], R1
00004407 710410                  		ADD #10H, R0, R4
0000440A 710248                  		ADD #48H, R0, R2
0000440D 39rrrr               W  		BSR _f_write
00004410 6101                    		CMP #00H, R1
00004412 18                   S  		BNE L2467
00004413                         L2466:	; bb478
00004413 F80601                  		MOV.L #00000001H, [R0]
00004416 08                   S  		BRA L2468
00004417                         L2467:	; bb479
00004417 F80600                  		MOV.L #00000000H, [R0]
0000441A                         L2468:	; bb480
0000441A EC01                    		MOV.L [R0], R1
0000441C 6101                    		CMP #00H, R1
0000441E 20rr                    		BEQ L2471
00004420                         L2469:	; bb484
00004420 AC01                    		MOV.L 40H[R0], R1
00004422 06850104                		CMP 10H[R0].L, R1
00004426 18                   S  		BNE L2471
00004427                         L2470:	; bb490
00004427 F80601                  		MOV.L #00000001H, [R0]
0000442A 08                   S  		BRA L2472
0000442B                         L2471:	; bb491
0000442B F80600                  		MOV.L #00000000H, [R0]
0000442E                         L2472:	; bb492
0000442E EC01                    		MOV.L [R0], R1
00004430 6101                    		CMP #00H, R1
00004432 21rr                    		BNE L2464
00004434                         L2473:	; bb497
                                 ;    4608 	return EOF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4608
00004434 F90601FF                		MOV.L #0FFFFFFFFH, 04H[R0]
00004438                         L2474:	; bb499
00004438 A809                    		MOV.L 04H[R0], R1
0000443A E70122                  		MOV.L R1, 88H[R0]
                                 ;    4609 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\fsystem\ff.c",4609
0000443D 6725                    		RTSD #94H
                                 ;    4610 
                                 ;    4611 #endif /* !_FS_READONLY */
                                 ;    4612 #endif /* _USE_STRFUNC */
                                 		.SECTION	C_2,ROMDATA,ALIGN=2
00000000                         __$cst$2:
00000000 0080                    		.word	8000H
00000002 0040                    		.word	4000H
00000004 0020                    		.word	2000H
00000006 0010                    		.word	1000H
00000008 0008                    		.word	0800H
0000000A 0040                    		.word	4000H
0000000C 0020                    		.word	2000H
0000000E 0010                    		.word	1000H
00000010 0008                    		.word	0800H
00000012 0004                    		.word	0400H
00000014 0002                    		.word	0200H
00000016                         __$vst$1:
00000016 0004                    		.word	0400H
00000018 0002                    		.word	0200H
0000001A 0001                    		.word	0100H
0000001C 8000                    		.word	0080H
0000001E 4000                    		.word	0040H
00000020 2000                    		.word	0020H
00000022 1000                    		.word	0010H
00000024 0800                    		.word	0008H
00000026 0400                    		.word	0004H
00000028 0200                    		.word	0002H
0000002A 0000                    		.word	0000H
                                 		.SECTION	C_1,ROMDATA
00000000                         __$ExCvt:
00000000 80818283                		.byte	80H,81H,82H,83H,84H,85H,86H,87H,88H,89H,8AH,8BH,8CH,8DH,8EH,8FH
         84858687                
         88898A8B                
         8C8D8E8F                
00000010 90919293                		.byte	90H,91H,92H,93H,94H,95H,96H,97H,98H,99H,0ADH,9BH,8CH,9DH,0AEH,9FH
         94959697                
         9899AD9B                
         8C9DAE9F                
00000020 A0                      		.byte	0A0H
00000021 21                      		.byte	"!"
00000022 A2A3A4A5                		.byte	0A2H,0A3H,0A4H,0A5H,0A6H,0A7H,0A8H,0A9H,0AAH,0ABH,0ACH,0ADH,0AEH,0AFH,0B0H,0B1H
         A6A7A8A9                
         AAABACAD                
         AEAFB0B1                
00000032 B2B3B4B5                		.byte	0B2H,0B3H,0B4H,0B5H,0B6H,0B7H,0B8H,0B9H,0BAH,0BBH,0BCH,0BDH,0BEH,0BFH,0C0H,0C1H
         B6B7B8B9                
         BABBBCBD                
         BEBFC0C1                
00000042 C2C3C4C5                		.byte	0C2H,0C3H,0C4H,0C5H,0C6H,0C7H,0C8H,0C9H,0CAH,0CBH,0CCH,0CDH,0CEH,0CFH,0D0H,0D1H
         C6C7C8C9                
         CACBCCCD                
         CECFD0D1                
00000052 D2D3D4D5                		.byte	0D2H,0D3H,0D4H,0D5H,0D6H,0D7H,0D8H,0D9H,0DAH,0DBH,0DCH,0DDH,0DEH,0DFH,0C0H,0C1H
         D6D7D8D9                
         DADBDCDD                
         DEDFC0C1                
00000062 C2C3C4C5                		.byte	0C2H,0C3H,0C4H,0C5H,0C6H,0C7H,0C8H,0C9H,0CAH,0CBH,0CCH,0CDH,0CEH,0CFH,0D0H,0D1H
         C6C7C8C9                
         CACBCCCD                
         CECFD0D1                
00000072 D2D3D4D5                		.byte	0D2H,0D3H,0D4H,0D5H,0D6H,0F7H,0D8H,0D9H,0DAH,0DBH,0DCH,0DDH,0DEH,9FH
         D6F7D8D9                
         DADBDCDD                
         DE9F                    
00000080                         __$LfnOfs:
00000080 01030507                		.byte	01H,03H,05H,07H,09H,0EH,10H,12H,14H,16H,18H,1CH,1EH
         090E1012                
         1416181C                
         1E                      
                                 		.SECTION	L,ROMDATA,ALIGN=4
00000000                         _L10:
00000000 22                      		.byte	22H
00000001 2A3A3C3E                		.byte	"*:<>?|"
         3F7C                    
00000007 7F00                    		.byte	7FH,00H
00000009                         _L11:
00000009 2B2C3B3D                		.byte	"+,;=[]"
         5B5D                    
0000000F 00                      		.byte	00H
00000010                         _L12:
00000010 22                      		.byte	22H
00000011 2A2B2C2E                		.byte	"*+,.:;<=>?[]|"
         3A3B3C3D                
         3E3F5B5D                
         7C                      
0000001E 7F00                    		.byte	7FH,00H
00000020                         _L13:
00000020 EBFE90                  		.byte	0EBH,0FEH,90H
00000023 4D53444F                		.byte	"MSDOS5.0"
         53352E30                
0000002B 00                      		.byte	00H
0000002C                         _L14:
0000002C 4E4F204E                		.byte	"NO NAME    FAT32   "
         414D4520                
         20202046                
         41543332                
         202020                  
0000003F 00                      		.byte	00H
00000040                         _L15:
00000040 4E4F204E                		.byte	"NO NAME    FAT     "
         414D4520                
         20202046                
         41542020                
         202020                  
00000053 00                      		.byte	00H
                                 		.SECTION	B,DATA,ALIGN=4
00000000                         __$FatFs:
00000000(00000004H)              		.blkl	1
                                 		.SECTION	B_2,DATA,ALIGN=2
00000000                         __$Fsid:
00000000(00000002H)              		.blkw	1
00000002                         __$LfnBuf:
00000002(00000200H)              		.blkw	256
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     16290   LINES

Section List

Attr         Size               Name
CODE     0000017471(0000443FH)  P
ROMDATA  0000000044(0000002CH)  C_2
ROMDATA  0000000141(0000008DH)  C_1
ROMDATA  0000000084(00000054H)  L
DATA     0000000004(00000004H)  B
DATA     0000000514(00000202H)  B_2

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx305E\$ccrx\ff.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\ff.lst
-output=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\fsystem\ff.obj
