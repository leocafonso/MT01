* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Sun Feb 19 10:49:01 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  19-Feb-2017 10:49:01
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=spiffs_check.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01\r_lvd_rx,C:\Workspace\e2studio\git\MT01\r_lvd_rx\src,C:/Workspace/e2studio/git/MT01/r_tfa
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=spiffs_check.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=0,EASYMAK=1,MOBILE=0,FREE_RTOS_PP
                                 ;spiffs_check.c
                                 
                                 		.glb	_spiffs_obj_lu_find_id_and_span
                                 		.glb	_spiffs_phys_rd
                                 		.glb	_spiffs_page_allocate_data
                                 		.glb	_spiffs_phys_cpy
                                 		.glb	_spiffs_obj_lu_find_free
                                 		.glb	_spiffs_page_delete
                                 		.glb	_spiffs_phys_wr
                                 		.glb	_spiffs_obj_lu_find_id_and_span_by_phdr
                                 		.glb	_spiffs_lookup_consistency_check
                                 		.glb	_spiffs_obj_lu_find_entry_visitor
                                 		.glb	_spiffs_page_consistency_check
                                 		.glb	_spiffs_object_index_consistency_check
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         __$spiffs_object_get_data_page_index_reference:
                                 		.STACK	__$spiffs_object_get_data_page_index_reference=52
                                 ;       1 /*
                                 ;       2  * spiffs_check.c
                                 ;       3  *
                                 ;       4  * Contains functionality for checking file system consistency
                                 ;       5  * and mending problems.
                                 ;       6  * Three levels of consistency checks are implemented:
                                 ;       7  *
                                 ;       8  * Look up consistency
                                 ;       9  *   Checks if indices in lookup pages are coherent with page headers
                                 ;      10  * Object index consistency
                                 ;      11  *   Checks if there are any orphaned object indices (missing object index headers).
                                 ;      12  *   If an object index is found but not its header, the object index is deleted.
                                 ;      13  *   This is critical for the following page consistency check.
                                 ;      14  * Page consistency
                                 ;      15  *   Checks for pages that ought to be indexed, ought not to be indexed, are multiple indexed
                                 ;      16  *
                                 ;      17  *
                                 ;      18  *  Created on: Jul 7, 2013
                                 ;      19  *      Author: petera
                                 ;      20  */
                                 ;      21 
                                 ;      22 
                                 ;      23 #include "spiffs.h"
                                 ;      24 #include "spiffs_nucleus.h"
                                 ;      25 
                                 ;      26 #if !SPIFFS_READ_ONLY
                                 ;      27 
                                 ;      28 #if SPIFFS_HAL_CALLBACK_EXTRA
                                 ;      29 #define CHECK_CB(_fs, _type, _rep, _arg1, _arg2) \
                                 ;      30   do { \
                                 ;      31     if ((_fs)->check_cb_f) (_fs)->check_cb_f((_fs), (_type), (_rep), (_arg1), (_arg2)); \
                                 ;      32   } while (0)
                                 ;      33 #else
                                 ;      34 #define CHECK_CB(_fs, _type, _rep, _arg1, _arg2) \
                                 ;      35   do { \
                                 ;      36     if ((_fs)->check_cb_f) (_fs)->check_cb_f((_type), (_rep), (_arg1), (_arg2)); \
                                 ;      37   } while (0)
                                 ;      38 #endif
                                 ;      39 
                                 ;      40 //---------------------------------------
                                 ;      41 // Look up consistency
                                 ;      42 
                                 ;      43 // searches in the object indices and returns the referenced page index given
                                 ;      44 // the object id and the data span index
                                 ;      45 // destroys fs->lu_work
                                 ;      46 static s32_t spiffs_object_get_data_page_index_reference(
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",46
00000000 7100D8                  		ADD #0FFFFFFD8H, R0
00000003 A209                    		MOV.L R1, 24H[R0]
00000005 940A                    		MOV.W R2, 22H[R0]
00000007 9403                    		MOV.W R3, 20H[R0]
00000009 A18C                    		MOV.L R4, 1CH[R0]
0000000B E5000B06                		MOV.L 2CH[R0], 18H[R0]
                                 ;      47   spiffs *fs,
                                 ;      48   spiffs_obj_id obj_id,
                                 ;      49   spiffs_span_ix data_spix,
                                 ;      50   spiffs_page_ix *pix,
                                 ;      51   spiffs_page_ix *objix_pix) {
                                 ;      52   s32_t res;
                                 ;      53 
                                 ;      54   // calculate object index span index for given data page span index
                                 ;      55   spiffs_span_ix objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",55
0000000F BC01                    		MOVU.W 20H[R0], R1
00000011 755167                  		CMP #67H, R1
00000014 24rr                    		BGTU L12
00000016                         L11:	; bb
00000016 F80600                  		MOV.L #00000000H, [R0]
00000019 2Err                 B  		BRA L13
0000001B                         L12:	; bb13
0000001B BC01                    		MOVU.W 20H[R0], R1
0000001D 711198                  		ADD #0FFFFFF98H, R1
00000020 FD74917C                		DIVU #7CH, R1
00000024 6211                    		ADD #01H, R1
00000026 E301                    		MOV.L R1, [R0]
00000028                         L13:	; bb19
00000028 EC01                    		MOV.L [R0], R1
0000002A 9189                    		MOV.W R1, 0EH[R0]
                                 ;      56 
                                 ;      57   // find obj index for obj id and span index
                                 ;      58   res = spiffs_obj_lu_find_id_and_span(fs, obj_id | SPIFFS_OBJ_ID_IX_FLAG, objix_spix, 0, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",58
0000002C A984                    		MOV.L 18H[R0], R4
0000002E B98B                    		MOVU.W 0EH[R0], R3
00000030 BC0A                    		MOVU.W 22H[R0], R2
00000032 AA09                    		MOV.L 24H[R0], R1
00000034 6040                    		SUB #04H, R0
00000036 E304                    		MOV.L R4, [R0]
00000038 78F2                    		BSET #0FH, R2
0000003A 6604                    		MOV.L #00000000H, R4
0000003C 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000040 6240                    		ADD #04H, R0
00000042 A081                    		MOV.L R1, 08H[R0]
00000044                         L14:	; bb19.split
                                 ;      59   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",59
00000044 A881                    		MOV.L 08H[R0], R1
00000046 69F1                    		SHLR #1FH, R1
00000048 6101                    		CMP #00H, R1
0000004A 10                   S  		BEQ L16
0000004B                         L15:	; bb32
0000004B E5000201                		MOV.L 08H[R0], 04H[R0]
0000004F 2Err                 B  		BRA L25
00000051                         L16:	; bb40
                                 ;      60 
                                 ;      61   // load obj index entry
                                 ;      62   u32_t addr = SPIFFS_PAGE_TO_PADDR(fs, *objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",62
00000051 A981                    		MOV.L 18H[R0], R1
00000053 5C11                    		MOVU.W [R1], R1
00000055 6C81                    		SHLL #08H, R1
00000057 7311000010              		ADD #00100000H, R1
0000005C A101                    		MOV.L R1, 10H[R0]
0000005E                         L17:	; bb40.split
                                 ;      63   if (objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",63
0000005E B989                    		MOVU.W 0EH[R0], R1
00000060 6101                    		CMP #00H, R1
00000062 BC01                    		MOVU.W 20H[R0], R1
00000064 21rr                    		BNE L19
00000066                         L18:	; bb47
                                 ;      64     // get referenced page from object index header
                                 ;      65     addr += sizeof(spiffs_page_object_ix_header) + data_spix * sizeof(spiffs_page_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",65
00000066 6C11                    		SHLL #01H, R1
00000068 06890104                		ADD 10H[R0].L, R1
0000006C 711130                  		ADD #30H, R1
0000006F A101                    		MOV.L R1, 10H[R0]
00000071 2Err                 B  		BRA L23
00000073                         L19:	; bb54
                                 ;      66   } else {
                                 ;      67     // get referenced page from object index
                                 ;      68     addr += sizeof(spiffs_page_object_ix) + SPIFFS_OBJ_IX_ENTRY(fs, data_spix) * sizeof(spiffs_page_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",68
00000073 755167                  		CMP #67H, R1
00000076 BC01                    		MOVU.W 20H[R0], R1
00000078 24rr                    		BGTU L21
0000007A                         L20:	; bb59
0000007A E301                    		MOV.L R1, [R0]
0000007C 2Err                 B  		BRA L22
0000007E                         L21:	; bb62
0000007E 711198                  		ADD #0FFFFFF98H, R1
00000081 EF1E                    		MOV.L R1, R14
00000083 FD749E7C                		DIVU #7CH, R14
00000087 751E7C                  		MUL #7CH, R14
0000008A 43E1                    		SUB R14, R1
0000008C E301                    		MOV.L R1, [R0]
0000008E                         L22:	; bb67
0000008E EC01                    		MOV.L [R0], R1
00000090 6C11                    		SHLL #01H, R1
00000092 06890104                		ADD 10H[R0].L, R1
00000096 6281                    		ADD #08H, R1
00000098 A101                    		MOV.L R1, 10H[R0]
0000009A                         L23:	; bb79
                                 ;      69   }
                                 ;      70 
                                 ;      71   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ, 0, addr, sizeof(spiffs_page_ix), (u8_t *)pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",71
0000009A A98A                    		MOV.L 1CH[R0], R2
0000009C A904                    		MOV.L 10H[R0], R4
0000009E AA09                    		MOV.L 24H[R0], R1
000000A0 6080                    		SUB #08H, R0
000000A2 A00A                    		MOV.L R2, 04H[R0]
000000A4 F80602                  		MOV.L #00000002H, [R0]
000000A7 6603                    		MOV.L #00000000H, R3
000000A9 754215                  		MOV.L #00000015H, R2
000000AC 05rrrrrr             A  		BSR _spiffs_phys_rd
000000B0 6280                    		ADD #08H, R0
000000B2 A081                    		MOV.L R1, 08H[R0]
000000B4                         L24:	; bb79.split
                                 ;      72 
                                 ;      73   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",73
000000B4 E5000201                		MOV.L 08H[R0], 04H[R0]
000000B8                         L25:	; bb87
000000B8 A809                    		MOV.L 04H[R0], R1
000000BA A109                    		MOV.L R1, 14H[R0]
                                 ;      74 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",74
000000BC 670A                    		RTSD #28H
000000BE                         __$spiffs_rewrite_page:
                                 		.STACK	__$spiffs_rewrite_page=48
                                 ;      75 
                                 ;      76 // copies page contents to a new page
                                 ;      77 static s32_t spiffs_rewrite_page(spiffs *fs, spiffs_page_ix cur_pix, spiffs_page_header *p_hdr, spiffs_page_ix *new_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",77
000000BE 7100E4                  		ADD #0FFFFFFE4H, R0
000000C1 A181                    		MOV.L R1, 18H[R0]
000000C3 928A                    		MOV.W R2, 16H[R0]
000000C5 A103                    		MOV.L R3, 10H[R0]
000000C7 A08C                    		MOV.L R4, 0CH[R0]
                                 ;      78   s32_t res;
                                 ;      79   res = spiffs_page_allocate_data(fs, p_hdr->obj_id, p_hdr, 0,0,0,0, new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",79
000000C9 A903                    		MOV.L 10H[R0], R3
000000CB 5C32                    		MOVU.W [R3], R2
000000CD A981                    		MOV.L 18H[R0], R1
000000CF 7100F0                  		ADD #0FFFFFFF0H, R0
000000D2 6605                    		MOV.L #00000000H, R5
000000D4 8205                    		MOV.B R5, 08H[R0]
000000D6 A00D                    		MOV.L R5, 04H[R0]
000000D8 E305                    		MOV.L R5, [R0]
000000DA A08C                    		MOV.L R4, 0CH[R0]
000000DC EF54                    		MOV.L R5, R4
000000DE 05rrrrrr             A  		BSR _spiffs_page_allocate_data
000000E2 710010                  		ADD #10H, R0
000000E5 A009                    		MOV.L R1, 04H[R0]
000000E7                         L27:	; entry.split
                                 ;      80   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",80
000000E7 A809                    		MOV.L 04H[R0], R1
000000E9 69F1                    		SHLR #1FH, R1
000000EB 6101                    		CMP #00H, R1
000000ED 10                   S  		BEQ L29
000000EE                         L28:	; bb14
000000EE E10001                  		MOV.L 04H[R0], [R0]
000000F1 2Err                 B  		BRA L31
000000F3                         L29:	; bb21
                                 ;      81   res = spiffs_phys_cpy(fs, 0,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",81
000000F3 A889                    		MOV.L 0CH[R0], R1
000000F5 5C13                    		MOVU.W [R1], R3
000000F7 BA8C                    		MOVU.W 16H[R0], R4
000000F9 A981                    		MOV.L 18H[R0], R1
000000FB 6040                    		SUB #04H, R0
000000FD 3E00FA                  		MOV.L #000000FAH, 00H[R0]
00000100 6C84                    		SHLL #08H, R4
00000102 7344060010              		ADD #00100006H, R4
00000107 6C83                    		SHLL #08H, R3
00000109 7333060010              		ADD #00100006H, R3
0000010E 6602                    		MOV.L #00000000H, R2
00000110 05rrrrrr             A  		BSR _spiffs_phys_cpy
00000114 6240                    		ADD #04H, R0
00000116 A009                    		MOV.L R1, 04H[R0]
00000118                         L30:	; bb21.split
                                 ;      82       SPIFFS_PAGE_TO_PADDR(fs, *new_pix) + sizeof(spiffs_page_header),
                                 ;      83       SPIFFS_PAGE_TO_PADDR(fs, cur_pix) + sizeof(spiffs_page_header),
                                 ;      84       SPIFFS_DATA_PAGE_SIZE(fs));
                                 ;      85   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",85
00000118 E10001                  		MOV.L 04H[R0], [R0]
0000011B                         L31:	; bb48
0000011B EC01                    		MOV.L [R0], R1
0000011D A081                    		MOV.L R1, 08H[R0]
                                 ;      86   return res;
                                 ;      87 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",87
0000011F 6707                    		RTSD #1CH
00000121                         __$spiffs_rewrite_index:
                                 		.STACK	__$spiffs_rewrite_index=56
                                 ;      88 
                                 ;      89 // rewrites the object index for given object id and replaces the
                                 ;      90 // data page index to a new page index
                                 ;      91 static s32_t spiffs_rewrite_index(spiffs *fs, spiffs_obj_id obj_id, spiffs_span_ix data_spix, spiffs_page_ix new_data_pix, spiffs_page_ix objix_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",91
00000121 7100D4                  		ADD #0FFFFFFD4H, R0
00000124 A281                    		MOV.L R1, 28H[R0]
00000126 948A                    		MOV.W R2, 26H[R0]
00000128 9483                    		MOV.W R3, 24H[R0]
0000012A 940C                    		MOV.W R4, 22H[R0]
0000012C D5001810                		MOV.W 30H[R0], 20H[R0]
                                 ;      92   s32_t res;
                                 ;      93   spiffs_block_ix bix;
                                 ;      94   int entry;
                                 ;      95   spiffs_page_ix free_pix;
                                 ;      96   obj_id |= SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",96
00000130 9C89                    		MOV.W 26H[R0], R1
00000132 78F1                    		BSET #0FH, R1
00000134 9489                    		MOV.W R1, 26H[R0]
00000136                         L33:	; entry.split
                                 ;      97 
                                 ;      98   // find free entry
                                 ;      99   res = spiffs_obj_lu_find_free(fs, fs->free_cursor_block_ix, fs->free_cursor_obj_lu_entry, &bix, &entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",99
00000136 AA81                    		MOV.L 28H[R0], R1
00000138 A91B                    		MOV.L 14H[R1], R3
0000013A BA12                    		MOVU.W 10H[R1], R2
0000013C 6040                    		SUB #04H, R0
0000013E 710E14                  		ADD #14H, R0, R14
00000141 E30E                    		MOV.L R14, [R0]
00000143 710412                  		ADD #12H, R0, R4
00000146 05rrrrrr             A  		BSR _spiffs_obj_lu_find_free
0000014A 6240                    		ADD #04H, R0
0000014C A081                    		MOV.L R1, 08H[R0]
0000014E                         L34:	; entry.split1
                                 ;     100   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",100
0000014E A881                    		MOV.L 08H[R0], R1
00000150 69F1                    		SHLR #1FH, R1
00000152 6101                    		CMP #00H, R1
00000154 10                   S  		BEQ L36
00000155                         L35:	; bb26
00000155 E5000201                		MOV.L 08H[R0], 04H[R0]
00000159 38rrrr               W  		BRA L73
0000015C                         L36:	; bb33
                                 ;     101   free_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, bix, entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",101
0000015C B989                    		MOVU.W 0EH[R0], R1
0000015E 6C81                    		SHLL #08H, R1
00000160 06890104                		ADD 10H[R0].L, R1
00000164 6221                    		ADD #02H, R1
00000166 9281                    		MOV.W R1, 14H[R0]
00000168                         L37:	; bb33.split
                                 ;     102 
                                 ;     103   // calculate object index span index for given data page span index
                                 ;     104   spiffs_span_ix objix_spix = SPIFFS_OBJ_IX_ENTRY_SPAN_IX(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",104
00000168 BC81                    		MOVU.W 24H[R0], R1
0000016A 755167                  		CMP #67H, R1
0000016D 24rr                    		BGTU L39
0000016F                         L38:	; bb45
0000016F F80600                  		MOV.L #00000000H, [R0]
00000172 2Err                 B  		BRA L40
00000174                         L39:	; bb46
00000174 BC81                    		MOVU.W 24H[R0], R1
00000176 711198                  		ADD #0FFFFFF98H, R1
00000179 FD74917C                		DIVU #7CH, R1
0000017D 6211                    		ADD #01H, R1
0000017F E301                    		MOV.L R1, [R0]
00000181                         L40:	; bb52
00000181 5C01                    		MOVU.W [R0], R1
00000183 9289                    		MOV.W R1, 16H[R0]
                                 ;     105   if (objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",105
00000185 6101                    		CMP #00H, R1
00000187 BC81                    		MOVU.W 24H[R0], R1
00000189 18                   S  		BNE L42
0000018A                         L41:	; bb57
                                 ;     106     // calc index in index header
                                 ;     107     entry = data_spix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",107
0000018A A101                    		MOV.L R1, 10H[R0]
0000018C 2Err                 B  		BRA L46
0000018E                         L42:	; bb60
                                 ;     108   } else {
                                 ;     109     // calc entry in index
                                 ;     110     entry = SPIFFS_OBJ_IX_ENTRY(fs, data_spix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",110
0000018E 755167                  		CMP #67H, R1
00000191 BC81                    		MOVU.W 24H[R0], R1
00000193 24rr                    		BGTU L44
00000195                         L43:	; bb65
00000195 E301                    		MOV.L R1, [R0]
00000197 2Err                 B  		BRA L45
00000199                         L44:	; bb68
00000199 711198                  		ADD #0FFFFFF98H, R1
0000019C EF1E                    		MOV.L R1, R14
0000019E FD749E7C                		DIVU #7CH, R14
000001A2 751E7C                  		MUL #7CH, R14
000001A5 43E1                    		SUB R14, R1
000001A7 E301                    		MOV.L R1, [R0]
000001A9                         L45:	; bb73
000001A9 E40004                  		MOV.L [R0], 10H[R0]
000001AC                         L46:	; bb81
                                 ;     111 
                                 ;     112   }
                                 ;     113   // load index
                                 ;     114   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",114
000001AC AA81                    		MOV.L 28H[R0], R1
000001AE BC04                    		MOVU.W 20H[R0], R4
000001B0 6080                    		SUB #08H, R0
000001B2 E5100801                		MOV.L 20H[R1], 04H[R0]
000001B6 F80A0001                		MOV.L #00000100H, [R0]
000001BA 6C84                    		SHLL #08H, R4
000001BC 7344000010              		ADD #00100000H, R4
000001C1 6603                    		MOV.L #00000000H, R3
000001C3 754215                  		MOV.L #00000015H, R2
000001C6 05rrrrrr             A  		BSR _spiffs_phys_rd
000001CA 6280                    		ADD #08H, R0
000001CC A081                    		MOV.L R1, 08H[R0]
000001CE                         L47:	; bb81.split
                                 ;     115       0, SPIFFS_PAGE_TO_PADDR(fs, objix_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     116   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",116
000001CE A881                    		MOV.L 08H[R0], R1
000001D0 69F1                    		SHLR #1FH, R1
000001D2 6101                    		CMP #00H, R1
000001D4 10                   S  		BEQ L49
000001D5                         L48:	; bb93
000001D5 E5000201                		MOV.L 08H[R0], 04H[R0]
000001D9 38rrrr               W  		BRA L73
000001DC                         L49:	; bb101
                                 ;     117   spiffs_page_header *objix_p_hdr = (spiffs_page_header *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",117
000001DC AA81                    		MOV.L 28H[R0], R1
000001DE E5100806                		MOV.L 20H[R1], 18H[R0]
000001E2                         L50:	; bb101.split
                                 ;     118 
                                 ;     119   // be ultra safe, double check header against provided data
                                 ;     120   if (objix_p_hdr->obj_id != obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",120
000001E2 A981                    		MOV.L 18H[R0], R1
000001E4 5C1E                    		MOVU.W [R1], R14
000001E6 06C50E13                		CMP 26H[R0].UW, R14
000001EA 20rr                    		BEQ L53
000001EC                         L51:	; bb107
                                 ;     121     spiffs_page_delete(fs, free_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",121
000001EC BA82                    		MOVU.W 14H[R0], R2
000001EE AA81                    		MOV.L 28H[R0], R1
000001F0 05rrrrrr             A  		BSR _spiffs_page_delete
000001F4                         L52:	; bb107.split
                                 ;     122     return SPIFFS_ERR_CHECK_OBJ_ID_MISM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",122
000001F4 F90A01BDD8              		MOV.L #0FFFFD8BDH, 04H[R0]
000001F9 38rrrr               W  		BRA L73
000001FC                         L53:	; bb122
                                 ;     123   }
                                 ;     124   if (objix_p_hdr->span_ix != objix_spix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",124
000001FC A981                    		MOV.L 18H[R0], R1
000001FE B819                    		MOVU.W 02H[R1], R1
00000200 06C5010B                		CMP 16H[R0].UW, R1
00000204 20rr                    		BEQ L56
00000206                         L54:	; bb123
                                 ;     125     spiffs_page_delete(fs, free_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",125
00000206 BA82                    		MOVU.W 14H[R0], R2
00000208 AA81                    		MOV.L 28H[R0], R1
0000020A 05rrrrrr             A  		BSR _spiffs_page_delete
0000020E                         L55:	; bb123.split
                                 ;     126     return SPIFFS_ERR_CHECK_SPIX_MISM;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",126
0000020E F90A01BCD8              		MOV.L #0FFFFD8BCH, 04H[R0]
00000213 38rrrr               W  		BRA L73
00000216                         L56:	; bb138
00000216 754EC7                  		MOV.L #000000C7H, R14
                                 ;     127   }
                                 ;     128   if ((objix_p_hdr->flags & (SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_IXDELE | SPIFFS_PH_FLAG_INDEX |
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",128
00000219 A981                    		MOV.L 18H[R0], R1
0000021B 511E04                  		AND 04H[R1].UB, R14
0000021E 755EC0                  		CMP #0C0H, R14
00000221 20rr                    		BEQ L59
00000223                         L57:	; bb139
                                 ;     129                             SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_DELET)) !=
                                 ;     130                                 (SPIFFS_PH_FLAG_IXDELE | SPIFFS_PH_FLAG_DELET)) {
                                 ;     131     spiffs_page_delete(fs, free_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",131
00000223 BA82                    		MOVU.W 14H[R0], R2
00000225 AA81                    		MOV.L 28H[R0], R1
00000227 05rrrrrr             A  		BSR _spiffs_page_delete
0000022B                         L58:	; bb139.split
                                 ;     132     return SPIFFS_ERR_CHECK_FLAGS_BAD;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",132
0000022B F90A01BBD8              		MOV.L #0FFFFD8BBH, 04H[R0]
00000230 38rrrr               W  		BRA L73
00000233                         L59:	; bb153
                                 ;     133   }
                                 ;     134 
                                 ;     135   // rewrite in mem
                                 ;     136   if (objix_spix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",136
00000233 BA89                    		MOVU.W 16H[R0], R1
00000235 6101                    		CMP #00H, R1
00000237 AA81                    		MOV.L 28H[R0], R1
00000239 AA11                    		MOV.L 20H[R1], R1
0000023B 21rr                    		BNE L61
0000023D                         L60:	; bb154
                                 ;     137     ((spiffs_page_ix*)((u8_t *)fs->lu_work + sizeof(spiffs_page_object_ix_header)))[data_spix] = new_data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",137
0000023D BC82                    		MOVU.W 24H[R0], R2
0000023F 6C12                    		SHLL #01H, R2
00000241 4B21                    		ADD R2, R1
00000243 D5011118                		MOV.W 22H[R0], 30H[R1]
00000247 2Err                 B  		BRA L65
00000249                         L61:	; bb164
                                 ;     138   } else {
                                 ;     139     ((spiffs_page_ix*)((u8_t *)fs->lu_work + sizeof(spiffs_page_object_ix)))[SPIFFS_OBJ_IX_ENTRY(fs, data_spix)] = new_data_pix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",139
00000249 6281                    		ADD #08H, R1
0000024B BC82                    		MOVU.W 24H[R0], R2
0000024D 755267                  		CMP #67H, R2
00000250 24rr                    		BGTU L63
00000252                         L62:	; bb174
00000252 E302                    		MOV.L R2, [R0]
00000254 2Err                 B  		BRA L64
00000256                         L63:	; bb177
00000256 712298                  		ADD #0FFFFFF98H, R2
00000259 EF2E                    		MOV.L R2, R14
0000025B FD749E7C                		DIVU #7CH, R14
0000025F 751E7C                  		MUL #7CH, R14
00000262 43E2                    		SUB R14, R2
00000264 E302                    		MOV.L R2, [R0]
00000266                         L64:	; bb182
00000266 9C0A                    		MOV.W 22H[R0], R2
00000268 EC03                    		MOV.L [R0], R3
0000026A FE1312                  		MOV.W R2, [R3,R1]
0000026D                         L65:	; bb192
                                 ;     140   }
                                 ;     141 
                                 ;     142   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",142
0000026D AA81                    		MOV.L 28H[R0], R1
0000026F BA84                    		MOVU.W 14H[R0], R4
00000271 6080                    		SUB #08H, R0
00000273 E5100801                		MOV.L 20H[R1], 04H[R0]
00000277 F80A0001                		MOV.L #00000100H, [R0]
0000027B 6C84                    		SHLL #08H, R4
0000027D 7344000010              		ADD #00100000H, R4
00000282 6603                    		MOV.L #00000000H, R3
00000284 6672                    		MOV.L #00000007H, R2
00000286 05rrrrrr             A  		BSR _spiffs_phys_wr
0000028A 6280                    		ADD #08H, R0
0000028C A081                    		MOV.L R1, 08H[R0]
0000028E                         L66:	; bb192.split
                                 ;     143       0, SPIFFS_PAGE_TO_PADDR(fs, free_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     144   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",144
0000028E A881                    		MOV.L 08H[R0], R1
00000290 69F1                    		SHLR #1FH, R1
00000292 6101                    		CMP #00H, R1
00000294 10                   S  		BEQ L68
00000295                         L67:	; bb204
00000295 E5000201                		MOV.L 08H[R0], 04H[R0]
00000299 2Err                 B  		BRA L73
0000029B                         L68:	; bb212
                                 ;     145   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",145
0000029B BA82                    		MOVU.W 14H[R0], R2
0000029D AA81                    		MOV.L 28H[R0], R1
0000029F 6080                    		SUB #08H, R0
000002A1 71032E                  		ADD #2EH, R0, R3
000002A4 A00B                    		MOV.L R3, 04H[R0]
000002A6 F80602                  		MOV.L #00000002H, [R0]
000002A9 5B24                    		MOVU.B R2, R4
000002AB 6C14                    		SHLL #01H, R4
000002AD 772200FF00              		AND #0FF00H, R2
000002B2 6C82                    		SHLL #08H, R2
000002B4 5724                    		OR R2, R4
000002B6 7344FCFF0F              		ADD #000FFFFCH, R4
000002BB 6603                    		MOV.L #00000000H, R3
000002BD 6642                    		MOV.L #00000004H, R2
000002BF 05rrrrrr             A  		BSR _spiffs_phys_wr
000002C3 6280                    		ADD #08H, R0
000002C5 A081                    		MOV.L R1, 08H[R0]
000002C7                         L69:	; bb212.split
                                 ;     146       0, SPIFFS_BLOCK_TO_PADDR(fs, SPIFFS_BLOCK_FOR_PAGE(fs, free_pix)) + SPIFFS_OBJ_LOOKUP_ENTRY_FOR_PAGE(fs, free_pix) * sizeof(spiffs_page_ix),
                                 ;     147       sizeof(spiffs_obj_id),
                                 ;     148       (u8_t *)&obj_id);
                                 ;     149   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",149
000002C7 A881                    		MOV.L 08H[R0], R1
000002C9 69F1                    		SHLR #1FH, R1
000002CB 6101                    		CMP #00H, R1
000002CD 10                   S  		BEQ L71
000002CE                         L70:	; bb229
000002CE E5000201                		MOV.L 08H[R0], 04H[R0]
000002D2 2Err                 B  		BRA L73
000002D4                         L71:	; bb237
                                 ;     150   res = spiffs_page_delete(fs, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",150
000002D4 BC02                    		MOVU.W 20H[R0], R2
000002D6 AA81                    		MOV.L 28H[R0], R1
000002D8 05rrrrrr             A  		BSR _spiffs_page_delete
000002DC A081                    		MOV.L R1, 08H[R0]
000002DE                         L72:	; bb237.split
                                 ;     151 
                                 ;     152   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",152
000002DE E5000201                		MOV.L 08H[R0], 04H[R0]
000002E2                         L73:	; bb243
000002E2 A809                    		MOV.L 04H[R0], R1
000002E4 A189                    		MOV.L R1, 1CH[R0]
                                 ;     153 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",153
000002E6 670B                    		RTSD #2CH
000002E8                         __$spiffs_delete_obj_lazy:
                                 		.STACK	__$spiffs_delete_obj_lazy=40
                                 ;     154 
                                 ;     155 // deletes an object just by marking object index header as deleted
                                 ;     156 static s32_t spiffs_delete_obj_lazy(spiffs *fs, spiffs_obj_id obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",156
000002E8 7100E4                  		ADD #0FFFFFFE4H, R0
000002EB A181                    		MOV.L R1, 18H[R0]
000002ED 928A                    		MOV.W R2, 16H[R0]
                                 ;     157   spiffs_page_ix objix_hdr_pix;
                                 ;     158   s32_t res;
                                 ;     159   res = spiffs_obj_lu_find_id_and_span(fs, obj_id, 0, 0, &objix_hdr_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",159
000002EF BA8A                    		MOVU.W 16H[R0], R2
000002F1 A981                    		MOV.L 18H[R0], R1
000002F3 6040                    		SUB #04H, R0
000002F5 710E0A                  		ADD #0AH, R0, R14
000002F8 E30E                    		MOV.L R14, [R0]
000002FA 6603                    		MOV.L #00000000H, R3
000002FC EF34                    		MOV.L R3, R4
000002FE 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000302 6240                    		ADD #04H, R0
00000304 A081                    		MOV.L R1, 08H[R0]
00000306                         L75:	; entry.split
                                 ;     160   if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",160
00000306 A881                    		MOV.L 08H[R0], R1
00000308 7601EED8                		CMP #0FFFFD8EEH, R1
0000030C 18                   S  		BNE L77
0000030D                         L76:	; bb9
                                 ;     161     return SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",161
0000030D F80600                  		MOV.L #00000000H, [R0]
00000310 2Err                 B  		BRA L82
00000312                         L77:	; bb16
                                 ;     162   }
                                 ;     163   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",163
00000312 A881                    		MOV.L 08H[R0], R1
00000314 69F1                    		SHLR #1FH, R1
00000316 6101                    		CMP #00H, R1
00000318 10                   S  		BEQ L79
00000319                         L78:	; bb17
00000319 E10002                  		MOV.L 08H[R0], [R0]
0000031C 2Err                 B  		BRA L82
0000031E                         L79:	; bb25
                                 ;     164   u8_t flags = 0xff & ~SPIFFS_PH_FLAG_IXDELE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",164
0000031E 3C0FBF                  		MOV.B #0BFH, 0FH[R0]
00000321                         L80:	; bb25.split
                                 ;     165   res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_LU | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",165
00000321 B88C                    		MOVU.W 06H[R0], R4
00000323 A981                    		MOV.L 18H[R0], R1
00000325 6080                    		SUB #08H, R0
00000327 710217                  		ADD #17H, R0, R2
0000032A A00A                    		MOV.L R2, 04H[R0]
0000032C F80601                  		MOV.L #00000001H, [R0]
0000032F 6C84                    		SHLL #08H, R4
00000331 7344040010              		ADD #00100004H, R4
00000336 6603                    		MOV.L #00000000H, R3
00000338 6642                    		MOV.L #00000004H, R2
0000033A 05rrrrrr             A  		BSR _spiffs_phys_wr
0000033E 6280                    		ADD #08H, R0
00000340 A081                    		MOV.L R1, 08H[R0]
00000342                         L81:	; bb25.split1
                                 ;     166       0, SPIFFS_PAGE_TO_PADDR(fs, objix_hdr_pix) + offsetof(spiffs_page_header, flags),
                                 ;     167       sizeof(u8_t),
                                 ;     168       (u8_t *)&flags);
                                 ;     169   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",169
00000342 E10002                  		MOV.L 08H[R0], [R0]
00000345                         L82:	; bb35
00000345 EC01                    		MOV.L [R0], R1
00000347 A101                    		MOV.L R1, 10H[R0]
                                 ;     170 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",170
00000349 6707                    		RTSD #1CH
0000034B                         __$spiffs_lookup_check_validate:
                                 		.STACK	__$spiffs_lookup_check_validate=112
                                 ;     171 
                                 ;     172 // validates the given look up entry
                                 ;     173 static s32_t spiffs_lookup_check_validate(spiffs *fs, spiffs_obj_id lu_obj_id, spiffs_page_header *p_hdr,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",173
0000034B 7100A4                  		ADD #0FFFFFFA4H, R0
0000034E A581                    		MOV.L R1, 58H[R0]
00000350 D7022B                  		MOV.W R2, 56H[R0]
00000353 A503                    		MOV.L R3, 50H[R0]
00000355 D70427                  		MOV.W R4, 4EH[R0]
00000358 D5003026                		MOV.W 60H[R0], 4CH[R0]
0000035C E5001912                		MOV.L 64H[R0], 48H[R0]
00000360 E5001A11                		MOV.L 68H[R0], 44H[R0]
00000364                         L84:	; entry.split1
                                 ;     174     spiffs_page_ix cur_pix, spiffs_block_ix cur_block, int cur_entry, int *reload_lu) {
                                 ;     175   (void)cur_block;
                                 ;     176   (void)cur_entry;
                                 ;     177   u8_t delete_page = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",177
00000364 3C0B00                  		MOV.B #00H, 0BH[R0]
00000367                         L85:	; entry.split2
                                 ;     178   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",178
00000367 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000036A                         L86:	; entry.split3
                                 ;     179   spiffs_page_ix objix_pix;
                                 ;     180   spiffs_page_ix ref_pix;
                                 ;     181   // check validity, take actions
                                 ;     182   if (((lu_obj_id == SPIFFS_OBJ_ID_DELETED) && (p_hdr->flags & SPIFFS_PH_FLAG_DELET)) ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",182
0000036A 5D012B                  		MOVU.W 56H[R0], R1
0000036D 6101                    		CMP #00H, R1
0000036F 3Arrrr               W  		BEQ L128
00000372 38rrrr               W  		BRA L130
00000375                         L87:	; bb37
                                 ;     183       ((lu_obj_id == SPIFFS_OBJ_ID_FREE) && (p_hdr->flags & SPIFFS_PH_FLAG_USED) == 0)) {
                                 ;     184     // look up entry deleted / free but used in page header
                                 ;     185     SPIFFS_CHECK_DBG("LU: pix %04x deleted/free in lu but not on page\n", cur_pix);
                                 ;     186     *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",186
00000375 AC09                    		MOV.L 44H[R0], R1
00000377 F81601                  		MOV.L #00000001H, [R1]
0000037A                         L88:	; bb37.split
                                 ;     187     delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",187
0000037A 3C0B01                  		MOV.B #01H, 0BH[R0]
0000037D                         L89:	; bb37.split4
                                 ;     188     if (p_hdr->flags & SPIFFS_PH_FLAG_INDEX) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",188
0000037D AD01                    		MOV.L 50H[R0], R1
0000037F F51204                  		BTST #02H, 04H[R1].B
00000382 DC1E                    		MOV.W [R1], R14
00000384 AD81                    		MOV.L 58H[R0], R1
00000386 3Arrrr               W  		BEQ L116
00000389                         L90:	; bb40
                                 ;     189       // header says data page
                                 ;     190       // data page can be removed if not referenced by some object index
                                 ;     191       res = spiffs_object_get_data_page_index_reference(fs, p_hdr->obj_id, p_hdr->span_ix, &ref_pix, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",191
00000389 AD02                    		MOV.L 50H[R0], R2
0000038B B82B                    		MOVU.W 02H[R2], R3
0000038D 6040                    		SUB #04H, R0
0000038F 710F14                  		ADD #14H, R0, R15
00000392 E30F                    		MOV.L R15, [R0]
00000394 5FE2                    		MOVU.W R14, R2
00000396 710416                  		ADD #16H, R0, R4
00000399 39rrrr               W  		BSR __$spiffs_object_get_data_page_index_reference
0000039C 6240                    		ADD #04H, R0
0000039E A089                    		MOV.L R1, 0CH[R0]
000003A0                         L91:	; bb40.split
                                 ;     192       if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",192
000003A0 ED0E03                  		MOV.L 0CH[R0], R14
000003A3 760EEED8                		CMP #0FFFFD8EEH, R14
000003A7 18                   S  		BNE L93
000003A8                         L92:	; bb50
                                 ;     193         // no object with this id, so remove page safely
                                 ;     194         res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",194
000003A8 3E0300                  		MOV.L #00000000H, 0CH[R0]
000003AB 38rrrr               W  		BRA L140
000003AE                         L93:	; bb53
                                 ;     195       } else {
                                 ;     196         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",196
000003AE ED0E03                  		MOV.L 0CH[R0], R14
000003B1 69FE                    		SHLR #1FH, R14
000003B3 610E                    		CMP #00H, R14
000003B5 10                   S  		BEQ L95
000003B6                         L94:	; bb54
000003B6 E5000301                		MOV.L 0CH[R0], 04H[R0]
000003BA 38rrrr               W  		BRA L362
000003BD                         L95:	; bb62.split
                                 ;     197         if (ref_pix == cur_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",197
000003BD 5D0E09                  		MOVU.W 12H[R0], R14
000003C0 06C50E27                		CMP 4EH[R0].UW, R14
000003C4 3Brrrr               W  		BNE L140
000003C7                         L96:	; bb63
                                 ;     198           // data page referenced by object index but deleted in lu
                                 ;     199           // copy page to new place and re-write the object index to new place
                                 ;     200           spiffs_page_ix new_pix;
                                 ;     201           res = spiffs_rewrite_page(fs, cur_pix, p_hdr, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",201
000003C7 AD03                    		MOV.L 50H[R0], R3
000003C9 5D0227                  		MOVU.W 4EH[R0], R2
000003CC AD81                    		MOV.L 58H[R0], R1
000003CE 710414                  		ADD #14H, R0, R4
000003D1 39rrrr               W  		BSR __$spiffs_rewrite_page
000003D4 A089                    		MOV.L R1, 0CH[R0]
000003D6                         L97:	; bb63.split
                                 ;     202           SPIFFS_CHECK_DBG("LU: FIXUP: data page not found elsewhere, rewriting %04x to new page %04x\n", cur_pix, new_pix);
                                 ;     203           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",203
000003D6 ED0E03                  		MOV.L 0CH[R0], R14
000003D9 69FE                    		SHLR #1FH, R14
000003DB 610E                    		CMP #00H, R14
000003DD 10                   S  		BEQ L99
000003DE                         L98:	; bb70
000003DE E5000301                		MOV.L 0CH[R0], 04H[R0]
000003E2 38rrrr               W  		BRA L362
000003E5                         L99:	; bb78.split
                                 ;     204           *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",204
000003E5 ED0E11                  		MOV.L 44H[R0], R14
000003E8 F8E601                  		MOV.L #00000001H, [R14]
000003EB                         L100:	; bb78.split5
                                 ;     205           SPIFFS_CHECK_DBG("LU: FIXUP: %04x rewritten to %04x, affected objix_pix %04x\n", cur_pix, new_pix, objix_pix);
                                 ;     206           res = spiffs_rewrite_index(fs, p_hdr->obj_id, p_hdr->span_ix, new_pix, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",206
000003EB ED0E14                  		MOV.L 50H[R0], R14
000003EE 5DE301                  		MOVU.W 02H[R14], R3
000003F1 5CE2                    		MOVU.W [R14], R2
000003F3 DD0E08                  		MOV.W 10H[R0], R14
000003F6 BA84                    		MOVU.W 14H[R0], R4
000003F8 AD81                    		MOV.L 58H[R0], R1
000003FA 6040                    		SUB #04H, R0
000003FC D30E                    		MOV.W R14, [R0]
000003FE 39rrrr               W  		BSR __$spiffs_rewrite_index
00000401 6240                    		ADD #04H, R0
00000403 A089                    		MOV.L R1, 0CH[R0]
00000405                         L101:	; bb78.split6
                                 ;     207           if (res <= _SPIFFS_ERR_CHECK_FIRST && res > _SPIFFS_ERR_CHECK_LAST) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",207
00000405 ED0E03                  		MOV.L 0CH[R0], R14
00000408 760EBED8                		CMP #0FFFFD8BEH, R14
0000040C 29rr                    		BLT L110
0000040E 2Err                 B  		BRA L112
00000410                         L102:	; bb91
                                 ;     208             // index bad also, cannot mend this file
                                 ;     209             SPIFFS_CHECK_DBG("LU: FIXUP: index bad %i, cannot mend!\n", res);
                                 ;     210             res = spiffs_page_delete(fs, new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",210
00000410 BA82                    		MOVU.W 14H[R0], R2
00000412 05rrrrrr             A  		BSR _spiffs_page_delete
00000416 A089                    		MOV.L R1, 0CH[R0]
00000418                         L103:	; bb91.split
                                 ;     211             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",211
00000418 ED0E03                  		MOV.L 0CH[R0], R14
0000041B 69FE                    		SHLR #1FH, R14
0000041D 610E                    		CMP #00H, R14
0000041F 10                   S  		BEQ L105
00000420                         L104:	; bb97
00000420 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000424 38rrrr               W  		BRA L362
00000427                         L105:	; bb105.split
                                 ;     212             res = spiffs_delete_obj_lazy(fs, p_hdr->obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",212
00000427 ED0E14                  		MOV.L 50H[R0], R14
0000042A 5CE2                    		MOVU.W [R14], R2
0000042C AD81                    		MOV.L 58H[R0], R1
0000042E 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
00000431 A089                    		MOV.L R1, 0CH[R0]
00000433                         L106:	; bb105.split7
                                 ;     213             CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr->obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",213
00000433 ED0E16                  		MOV.L 58H[R0], R14
00000436 EDEE14                  		MOV.L 50H[R14], R14
00000439 610E                    		CMP #00H, R14
0000043B 20rr                    		BEQ L114
0000043D                         L107:	; bb113
0000043D ED0E14                  		MOV.L 50H[R0], R14
00000440 5CE3                    		MOVU.W [R14], R3
00000442 ED0E16                  		MOV.L 58H[R0], R14
00000445 EDEE14                  		MOV.L 50H[R14], R14
00000448 6662                    		MOV.L #00000006H, R2
0000044A 6601                    		MOV.L #00000000H, R1
0000044C EF14                    		MOV.L R1, R4
0000044E 7F1E                    		JSR R14
00000450 2Err                 B  		BRA L114
00000452                         L108:	; bb131
                                 ;     214           } else {
                                 ;     215             CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_INDEX, p_hdr->obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",215
00000452 ED1E14                  		MOV.L 50H[R1], R14
00000455 610E                    		CMP #00H, R14
00000457 20rr                    		BEQ L114
00000459                         L109:	; bb132
00000459 ED0E14                  		MOV.L 50H[R0], R14
0000045C 5DE401                  		MOVU.W 02H[R14], R4
0000045F 5CE3                    		MOVU.W [R14], R3
00000461 ED0E16                  		MOV.L 58H[R0], R14
00000464 EDEE14                  		MOV.L 50H[R14], R14
00000467 6622                    		MOV.L #00000002H, R2
00000469 6601                    		MOV.L #00000000H, R1
0000046B 7F1E                    		JSR R14
0000046D 2Err                 B  		BRA L114
0000046F                         L110:	; bb155
0000046F ED0E03                  		MOV.L 0CH[R0], R14
00000472 760EBBD8                		CMP #0FFFFD8BBH, R14
00000476 29rr                    		BLT L112
00000478                         L111:	; bb159
00000478 F80601                  		MOV.L #00000001H, [R0]
0000047B 08                   S  		BRA L113
0000047C                         L112:	; bb160
0000047C F80600                  		MOV.L #00000000H, [R0]
0000047F                         L113:	; bb161
0000047F EC0E                    		MOV.L [R0], R14
00000481 610E                    		CMP #00H, R14
00000483 AD81                    		MOV.L 58H[R0], R1
00000485 21rr                    		BNE L102
00000487 2Err                 B  		BRA L108
00000489                         L114:	; bb168
                                 ;     216           }
                                 ;     217           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",217
00000489 ED0E03                  		MOV.L 0CH[R0], R14
0000048C 69FE                    		SHLR #1FH, R14
0000048E 610E                    		CMP #00H, R14
00000490 3Arrrr               W  		BEQ L140
00000493                         L115:	; bb169
00000493 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000497 38rrrr               W  		BRA L362
0000049A                         L116:	; bb191
                                 ;     218         }
                                 ;     219       }
                                 ;     220     } else {
                                 ;     221       // header says index page
                                 ;     222       // index page can be removed if other index with same obj_id and spanix is found
                                 ;     223       res = spiffs_obj_lu_find_id_and_span(fs, p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG, p_hdr->span_ix, cur_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",223
0000049A AD02                    		MOV.L 50H[R0], R2
0000049C B82B                    		MOVU.W 02H[R2], R3
0000049E 5D0427                  		MOVU.W 4EH[R0], R4
000004A1 6040                    		SUB #04H, R0
000004A3 F80600                  		MOV.L #00000000H, [R0]
000004A6 78FE                    		BSET #0FH, R14
000004A8 5FE2                    		MOVU.W R14, R2
000004AA 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
000004AE 6240                    		ADD #04H, R0
000004B0 A089                    		MOV.L R1, 0CH[R0]
000004B2                         L117:	; bb191.split
                                 ;     224       if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",224
000004B2 A889                    		MOV.L 0CH[R0], R1
000004B4 7601EED8                		CMP #0FFFFD8EEH, R1
000004B8 21rr                    		BNE L126
000004BA                         L118:	; bb205
                                 ;     225         // no such index page found, check for a data page amongst page headers
                                 ;     226         // lu cannot be trusted
                                 ;     227         res = spiffs_obj_lu_find_id_and_span_by_phdr(fs, p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG, 0, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",227
000004BA AD01                    		MOV.L 50H[R0], R1
000004BC 5C12                    		MOVU.W [R1], R2
000004BE AD81                    		MOV.L 58H[R0], R1
000004C0 6040                    		SUB #04H, R0
000004C2 F80600                  		MOV.L #00000000H, [R0]
000004C5 78F2                    		BSET #0FH, R2
000004C7 6603                    		MOV.L #00000000H, R3
000004C9 EF34                    		MOV.L R3, R4
000004CB 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span_by_phdr
000004CF 6240                    		ADD #04H, R0
000004D1 A089                    		MOV.L R1, 0CH[R0]
000004D3                         L119:	; bb205.split
                                 ;     228         if (res == SPIFFS_OK) { // ignore other errors
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",228
000004D3 A889                    		MOV.L 0CH[R0], R1
000004D5 6101                    		CMP #00H, R1
000004D7 3Brrrr               W  		BNE L140
000004DA                         L120:	; bb215
                                 ;     229           // got a data page also, assume lu corruption only, rewrite to new page
                                 ;     230           spiffs_page_ix new_pix;
                                 ;     231           res = spiffs_rewrite_page(fs, cur_pix, p_hdr, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",231
000004DA AD03                    		MOV.L 50H[R0], R3
000004DC 5D0227                  		MOVU.W 4EH[R0], R2
000004DF AD81                    		MOV.L 58H[R0], R1
000004E1 710416                  		ADD #16H, R0, R4
000004E4 39rrrr               W  		BSR __$spiffs_rewrite_page
000004E7 A089                    		MOV.L R1, 0CH[R0]
000004E9                         L121:	; bb215.split
                                 ;     232           SPIFFS_CHECK_DBG("LU: FIXUP: ix page with data not found elsewhere, rewriting %04x to new page %04x\n", cur_pix, new_pix);
                                 ;     233           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",233
000004E9 A889                    		MOV.L 0CH[R0], R1
000004EB 69F1                    		SHLR #1FH, R1
000004ED 6101                    		CMP #00H, R1
000004EF 10                   S  		BEQ L123
000004F0                         L122:	; bb222
000004F0 E5000301                		MOV.L 0CH[R0], 04H[R0]
000004F4 38rrrr               W  		BRA L362
000004F7                         L123:	; bb230.split
                                 ;     234           *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",234
000004F7 AC09                    		MOV.L 44H[R0], R1
000004F9 F81601                  		MOV.L #00000001H, [R1]
000004FC                         L124:	; bb230.split8
                                 ;     235           CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_LOOKUP, p_hdr->obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",235
000004FC AD81                    		MOV.L 58H[R0], R1
000004FE AD11                    		MOV.L 50H[R1], R1
00000500 6101                    		CMP #00H, R1
00000502 20rr                    		BEQ L140
00000504                         L125:	; bb234
00000504 AD01                    		MOV.L 50H[R0], R1
00000506 B81C                    		MOVU.W 02H[R1], R4
00000508 5C13                    		MOVU.W [R1], R3
0000050A AD81                    		MOV.L 58H[R0], R1
0000050C AD15                    		MOV.L 50H[R1], R5
0000050E 6632                    		MOV.L #00000003H, R2
00000510 6601                    		MOV.L #00000000H, R1
00000512 7F15                    		JSR R5
00000514 2Err                 B  		BRA L140
00000516                         L126:	; bb261
                                 ;     236         }
                                 ;     237       } else {
                                 ;     238         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",238
00000516 A889                    		MOV.L 0CH[R0], R1
00000518 69F1                    		SHLR #1FH, R1
0000051A 6101                    		CMP #00H, R1
0000051C 20rr                    		BEQ L140
0000051E                         L127:	; bb262
0000051E E5000301                		MOV.L 0CH[R0], 04H[R0]
00000522 38rrrr               W  		BRA L362
00000525                         L128:	; bb289
00000525 AD01                    		MOV.L 50H[R0], R1
00000527 F51704                  		BTST #07H, 04H[R1].B
0000052A 10                   S  		BEQ L130
0000052B                         L129:	; bb297
0000052B F80601                  		MOV.L #00000001H, [R0]
0000052E 08                   S  		BRA L131
0000052F                         L130:	; bb298
0000052F F80600                  		MOV.L #00000000H, [R0]
00000532                         L131:	; bb299
00000532 EC01                    		MOV.L [R0], R1
00000534 6101                    		CMP #00H, R1
00000536 21rr                    		BNE L137
00000538                         L132:	; bb303
00000538 5D012B                  		MOVU.W 56H[R0], R1
0000053B 7701FFFF00              		CMP #0FFFFH, R1
00000540 21rr                    		BNE L135
00000542                         L133:	; bb308
00000542 AD01                    		MOV.L 50H[R0], R1
00000544 F51004                  		BTST #00H, 04H[R1].B
00000547 18                   S  		BNE L135
00000548                         L134:	; bb316
00000548 F80601                  		MOV.L #00000001H, [R0]
0000054B 08                   S  		BRA L136
0000054C                         L135:	; bb317
0000054C F80600                  		MOV.L #00000000H, [R0]
0000054F                         L136:	; bb318
0000054F EC01                    		MOV.L [R0], R1
00000551 6101                    		CMP #00H, R1
00000553 10                   S  		BEQ L138
00000554                         L137:	; bb322
00000554 F80601                  		MOV.L #00000001H, [R0]
00000557 08                   S  		BRA L139
00000558                         L138:	; bb323
00000558 F80600                  		MOV.L #00000000H, [R0]
0000055B                         L139:	; bb324
0000055B EC01                    		MOV.L [R0], R1
0000055D 6101                    		CMP #00H, R1
0000055F 3Brrrr               W  		BNE L87
00000562                         L140:	; bb330
                                 ;     239       }
                                 ;     240     }
                                 ;     241   }
                                 ;     242   if (lu_obj_id != SPIFFS_OBJ_ID_FREE && lu_obj_id != SPIFFS_OBJ_ID_DELETED) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",242
00000562 5D012B                  		MOVU.W 56H[R0], R1
00000565 7701FFFF00              		CMP #0FFFFH, R1
0000056A 3Brrrr               W  		BNE L351
0000056D 38rrrr               W  		BRA L353
00000570                         L141:	; bb332
                                 ;     243     // look up entry used
                                 ;     244     if ((p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG) != (lu_obj_id | SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",244
00000570 5D012B                  		MOVU.W 56H[R0], R1
00000573 78F1                    		BSET #0FH, R1
00000575 AD02                    		MOV.L 50H[R0], R2
00000577 5C2E                    		MOVU.W [R2], R14
00000579 78FE                    		BSET #0FH, R14
0000057B 471E                    		CMP R1, R14
0000057D 3Arrrr               W  		BEQ L272
00000580                         L142:	; bb333
                                 ;     245       SPIFFS_CHECK_DBG("LU: pix %04x differ in obj_id lu:%04x ph:%04x\n", cur_pix, lu_obj_id, p_hdr->obj_id);
                                 ;     246       delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",246
00000580 3C0B01                  		MOV.B #01H, 0BH[R0]
00000583                         L143:	; bb333.split
                                 ;     247       if ((p_hdr->flags & SPIFFS_PH_FLAG_DELET) == 0 ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",247
00000583 AD01                    		MOV.L 50H[R0], R1
00000585 F51704                  		BTST #07H, 04H[R1].B
00000588 3Arrrr               W  		BEQ L265
0000058B 38rrrr               W  		BRA L264
0000058E                         L144:	; bb337
                                 ;     248           (p_hdr->flags & SPIFFS_PH_FLAG_FINAL) ||
                                 ;     249           (p_hdr->flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_IXDELE)) == 0) {
                                 ;     250         // page deleted or not finalized, just remove it
                                 ;     251       } else {
                                 ;     252         if (p_hdr->flags & SPIFFS_PH_FLAG_INDEX) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",252
0000058E AD01                    		MOV.L 50H[R0], R1
00000590 F51204                  		BTST #02H, 04H[R1].B
00000593 AD81                    		MOV.L 58H[R0], R1
00000595 3Arrrr               W  		BEQ L169
00000598                         L145:	; bb338
                                 ;     253           // if data page, check for reference to this page
                                 ;     254           res = spiffs_object_get_data_page_index_reference(fs, p_hdr->obj_id, p_hdr->span_ix, &ref_pix, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",254
00000598 AD02                    		MOV.L 50H[R0], R2
0000059A B82B                    		MOVU.W 02H[R2], R3
0000059C 5C22                    		MOVU.W [R2], R2
0000059E 6040                    		SUB #04H, R0
000005A0 710E14                  		ADD #14H, R0, R14
000005A3 E30E                    		MOV.L R14, [R0]
000005A5 710416                  		ADD #16H, R0, R4
000005A8 39rrrr               W  		BSR __$spiffs_object_get_data_page_index_reference
000005AB 6240                    		ADD #04H, R0
000005AD A089                    		MOV.L R1, 0CH[R0]
000005AF                         L146:	; bb338.split
                                 ;     255           if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",255
000005AF A889                    		MOV.L 0CH[R0], R1
000005B1 7601EED8                		CMP #0FFFFD8EEH, R1
000005B5 18                   S  		BNE L148
000005B6                         L147:	; bb348
                                 ;     256             // no object with this id, so remove page safely
                                 ;     257             res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",257
000005B6 3E0300                  		MOV.L #00000000H, 0CH[R0]
000005B9 38rrrr               W  		BRA L355
000005BC                         L148:	; bb351
                                 ;     258           } else {
                                 ;     259             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",259
000005BC A889                    		MOV.L 0CH[R0], R1
000005BE 69F1                    		SHLR #1FH, R1
000005C0 6101                    		CMP #00H, R1
000005C2 10                   S  		BEQ L150
000005C3                         L149:	; bb352
000005C3 E5000301                		MOV.L 0CH[R0], 04H[R0]
000005C7 38rrrr               W  		BRA L362
000005CA                         L150:	; bb361.split
                                 ;     260             //   if found, rewrite page with object id, update index, and delete current
                                 ;     261             if (ref_pix == cur_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",261
000005CA BA09                    		MOVU.W 12H[R0], R1
000005CC 06C50127                		CMP 4EH[R0].UW, R1
000005D0 3Brrrr               W  		BNE L355
000005D3                         L151:	; bb362
                                 ;     262               spiffs_page_ix new_pix;
                                 ;     263               res = spiffs_rewrite_page(fs, cur_pix, p_hdr, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",263
000005D3 AD03                    		MOV.L 50H[R0], R3
000005D5 5D0227                  		MOVU.W 4EH[R0], R2
000005D8 AD81                    		MOV.L 58H[R0], R1
000005DA 710418                  		ADD #18H, R0, R4
000005DD 39rrrr               W  		BSR __$spiffs_rewrite_page
000005E0 A089                    		MOV.L R1, 0CH[R0]
000005E2                         L152:	; bb362.split
                                 ;     264               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",264
000005E2 A889                    		MOV.L 0CH[R0], R1
000005E4 69F1                    		SHLR #1FH, R1
000005E6 6101                    		CMP #00H, R1
000005E8 10                   S  		BEQ L154
000005E9                         L153:	; bb369
000005E9 E5000301                		MOV.L 0CH[R0], 04H[R0]
000005ED 38rrrr               W  		BRA L362
000005F0                         L154:	; bb377.split
                                 ;     265               res = spiffs_rewrite_index(fs, p_hdr->obj_id, p_hdr->span_ix, new_pix, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",265
000005F0 AD01                    		MOV.L 50H[R0], R1
000005F2 B81B                    		MOVU.W 02H[R1], R3
000005F4 5C12                    		MOVU.W [R1], R2
000005F6 9A05                    		MOV.W 10H[R0], R5
000005F8 BB04                    		MOVU.W 18H[R0], R4
000005FA AD81                    		MOV.L 58H[R0], R1
000005FC 6040                    		SUB #04H, R0
000005FE D305                    		MOV.W R5, [R0]
00000600 39rrrr               W  		BSR __$spiffs_rewrite_index
00000603 6240                    		ADD #04H, R0
00000605 A089                    		MOV.L R1, 0CH[R0]
00000607                         L155:	; bb377.split9
                                 ;     266               if (res <= _SPIFFS_ERR_CHECK_FIRST && res > _SPIFFS_ERR_CHECK_LAST) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",266
00000607 A889                    		MOV.L 0CH[R0], R1
00000609 7601BED8                		CMP #0FFFFD8BEH, R1
0000060D 29rr                    		BLT L163
0000060F 2Err                 B  		BRA L165
00000611                         L156:	; bb389
                                 ;     267                 // index bad also, cannot mend this file
                                 ;     268                 SPIFFS_CHECK_DBG("LU: FIXUP: index bad %i, cannot mend!\n", res);
                                 ;     269                 res = spiffs_page_delete(fs, new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",269
00000611 BB02                    		MOVU.W 18H[R0], R2
00000613 AD81                    		MOV.L 58H[R0], R1
00000615 05rrrrrr             A  		BSR _spiffs_page_delete
00000619 A089                    		MOV.L R1, 0CH[R0]
0000061B                         L157:	; bb389.split
                                 ;     270                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",270
0000061B A889                    		MOV.L 0CH[R0], R1
0000061D 69F1                    		SHLR #1FH, R1
0000061F 6101                    		CMP #00H, R1
00000621 10                   S  		BEQ L159
00000622                         L158:	; bb395
00000622 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000626 38rrrr               W  		BRA L362
00000629                         L159:	; bb403.split
                                 ;     271                 res = spiffs_delete_obj_lazy(fs, p_hdr->obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",271
00000629 AD01                    		MOV.L 50H[R0], R1
0000062B 5C12                    		MOVU.W [R1], R2
0000062D AD81                    		MOV.L 58H[R0], R1
0000062F 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
00000632 A089                    		MOV.L R1, 0CH[R0]
00000634                         L160:	; bb403.split10
                                 ;     272                 *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",272
00000634 AC09                    		MOV.L 44H[R0], R1
00000636 F81601                  		MOV.L #00000001H, [R1]
00000639                         L161:	; bb403.split11
                                 ;     273                 CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr->obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",273
00000639 AD81                    		MOV.L 58H[R0], R1
0000063B AD11                    		MOV.L 50H[R1], R1
0000063D 6101                    		CMP #00H, R1
0000063F 20rr                    		BEQ L167
00000641                         L162:	; bb412
00000641 AD01                    		MOV.L 50H[R0], R1
00000643 5C13                    		MOVU.W [R1], R3
00000645 AD81                    		MOV.L 58H[R0], R1
00000647 AD15                    		MOV.L 50H[R1], R5
00000649 6662                    		MOV.L #00000006H, R2
0000064B 6601                    		MOV.L #00000000H, R1
0000064D EF14                    		MOV.L R1, R4
0000064F 7F15                    		JSR R5
00000651 2Err                 B  		BRA L167
00000653                         L163:	; bb431
00000653 A889                    		MOV.L 0CH[R0], R1
00000655 7601BBD8                		CMP #0FFFFD8BBH, R1
00000659 29rr                    		BLT L165
0000065B                         L164:	; bb435
0000065B F80601                  		MOV.L #00000001H, [R0]
0000065E 08                   S  		BRA L166
0000065F                         L165:	; bb436
0000065F F80600                  		MOV.L #00000000H, [R0]
00000662                         L166:	; bb437
00000662 EC01                    		MOV.L [R0], R1
00000664 6101                    		CMP #00H, R1
00000666 21rr                    		BNE L156
00000668                         L167:	; bb444
                                 ;     274               }
                                 ;     275               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",275
00000668 A889                    		MOV.L 0CH[R0], R1
0000066A 69F1                    		SHLR #1FH, R1
0000066C 6101                    		CMP #00H, R1
0000066E 3Arrrr               W  		BEQ L355
00000671                         L168:	; bb445
00000671 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000675 38rrrr               W  		BRA L362
00000678                         L169:	; bb467
                                 ;     276             }
                                 ;     277           }
                                 ;     278         } else {
                                 ;     279           // else if index, check for other pages with both obj_id's and spanix
                                 ;     280           spiffs_page_ix objix_pix_lu, objix_pix_ph;
                                 ;     281           // see if other object index page exists for lookup obj id and span index
                                 ;     282           res = spiffs_obj_lu_find_id_and_span(fs, lu_obj_id | SPIFFS_OBJ_ID_IX_FLAG, p_hdr->span_ix, 0, &objix_pix_lu);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",282
00000678 AD02                    		MOV.L 50H[R0], R2
0000067A B82B                    		MOVU.W 02H[R2], R3
0000067C 5D022B                  		MOVU.W 56H[R0], R2
0000067F 6040                    		SUB #04H, R0
00000681 710E1E                  		ADD #1EH, R0, R14
00000684 E30E                    		MOV.L R14, [R0]
00000686 78F2                    		BSET #0FH, R2
00000688 6604                    		MOV.L #00000000H, R4
0000068A 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
0000068E 6240                    		ADD #04H, R0
00000690 A089                    		MOV.L R1, 0CH[R0]
00000692                         L170:	; bb467.split
                                 ;     283           if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",283
00000692 A889                    		MOV.L 0CH[R0], R1
00000694 7601EED8                		CMP #0FFFFD8EEH, R1
00000698 18                   S  		BNE L173
00000699                         L171:	; bb478
                                 ;     284             res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",284
00000699 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000069C                         L172:	; bb478.split
                                 ;     285             objix_pix_lu = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",285
0000069C 3D0D00                  		MOV.W #0000H, 1AH[R0]
0000069F                         L173:	; bb485
                                 ;     286           }
                                 ;     287           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",287
0000069F A889                    		MOV.L 0CH[R0], R1
000006A1 69F1                    		SHLR #1FH, R1
000006A3 6101                    		CMP #00H, R1
000006A5 10                   S  		BEQ L175
000006A6                         L174:	; bb486
000006A6 E5000301                		MOV.L 0CH[R0], 04H[R0]
000006AA 38rrrr               W  		BRA L362
000006AD                         L175:	; bb494.split
                                 ;     288           // see if other object index exists for page header obj id and span index
                                 ;     289           res = spiffs_obj_lu_find_id_and_span(fs, p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG, p_hdr->span_ix, 0, &objix_pix_ph);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",289
000006AD AD01                    		MOV.L 50H[R0], R1
000006AF B81B                    		MOVU.W 02H[R1], R3
000006B1 5C12                    		MOVU.W [R1], R2
000006B3 AD81                    		MOV.L 58H[R0], R1
000006B5 6040                    		SUB #04H, R0
000006B7 710E20                  		ADD #20H, R0, R14
000006BA E30E                    		MOV.L R14, [R0]
000006BC 78F2                    		BSET #0FH, R2
000006BE 6604                    		MOV.L #00000000H, R4
000006C0 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
000006C4 6240                    		ADD #04H, R0
000006C6 A089                    		MOV.L R1, 0CH[R0]
000006C8                         L176:	; bb494.split12
                                 ;     290           if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",290
000006C8 A889                    		MOV.L 0CH[R0], R1
000006CA 7601EED8                		CMP #0FFFFD8EEH, R1
000006CE 18                   S  		BNE L179
000006CF                         L177:	; bb507
                                 ;     291             res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",291
000006CF 3E0300                  		MOV.L #00000000H, 0CH[R0]
000006D2                         L178:	; bb507.split
                                 ;     292             objix_pix_ph = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",292
000006D2 3D0E00                  		MOV.W #0000H, 1CH[R0]
000006D5                         L179:	; bb514
                                 ;     293           }
                                 ;     294           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",294
000006D5 A889                    		MOV.L 0CH[R0], R1
000006D7 69F1                    		SHLR #1FH, R1
000006D9 6101                    		CMP #00H, R1
000006DB 10                   S  		BEQ L181
000006DC                         L180:	; bb515
000006DC E5000301                		MOV.L 0CH[R0], 04H[R0]
000006E0 38rrrr               W  		BRA L362
000006E3                         L181:	; bb524.split
                                 ;     295           //   if both obj_id's found, just delete current
                                 ;     296           if (objix_pix_ph == 0 || objix_pix_lu == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",296
000006E3 BB81                    		MOVU.W 1CH[R0], R1
000006E5 6101                    		CMP #00H, R1
000006E7 3Arrrr               W  		BEQ L261
000006EA 38rrrr               W  		BRA L260
000006ED                         L182:	; bb525
                                 ;     297             // otherwise try finding first corresponding data pages
                                 ;     298             spiffs_page_ix data_pix_lu, data_pix_ph;
                                 ;     299             // see if other data page exists for look up obj id and span index
                                 ;     300             res = spiffs_obj_lu_find_id_and_span(fs, lu_obj_id & ~SPIFFS_OBJ_ID_IX_FLAG, 0, 0, &data_pix_lu);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",300
000006ED 5D022B                  		MOVU.W 56H[R0], R2
000006F0 AD81                    		MOV.L 58H[R0], R1
000006F2 6040                    		SUB #04H, R0
000006F4 710E22                  		ADD #22H, R0, R14
000006F7 E30E                    		MOV.L R14, [R0]
000006F9 7622FF7F                		AND #7FFFH, R2
000006FD 6603                    		MOV.L #00000000H, R3
000006FF EF34                    		MOV.L R3, R4
00000701 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000705 6240                    		ADD #04H, R0
00000707 A089                    		MOV.L R1, 0CH[R0]
00000709                         L183:	; bb525.split
                                 ;     301             if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",301
00000709 A889                    		MOV.L 0CH[R0], R1
0000070B 7601EED8                		CMP #0FFFFD8EEH, R1
0000070F 18                   S  		BNE L186
00000710                         L184:	; bb533
                                 ;     302               res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",302
00000710 3E0300                  		MOV.L #00000000H, 0CH[R0]
00000713                         L185:	; bb533.split
                                 ;     303               objix_pix_lu = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",303
00000713 3D0D00                  		MOV.W #0000H, 1AH[R0]
00000716                         L186:	; bb540
                                 ;     304             }
                                 ;     305             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",305
00000716 A889                    		MOV.L 0CH[R0], R1
00000718 69F1                    		SHLR #1FH, R1
0000071A 6101                    		CMP #00H, R1
0000071C 10                   S  		BEQ L188
0000071D                         L187:	; bb541
0000071D E5000301                		MOV.L 0CH[R0], 04H[R0]
00000721 38rrrr               W  		BRA L362
00000724                         L188:	; bb549.split
                                 ;     306             // see if other data page exists for page header obj id and span index
                                 ;     307             res = spiffs_obj_lu_find_id_and_span(fs, p_hdr->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG, 0, 0, &data_pix_ph);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",307
00000724 AD01                    		MOV.L 50H[R0], R1
00000726 5C12                    		MOVU.W [R1], R2
00000728 AD81                    		MOV.L 58H[R0], R1
0000072A 6040                    		SUB #04H, R0
0000072C 710E24                  		ADD #24H, R0, R14
0000072F E30E                    		MOV.L R14, [R0]
00000731 7622FF7F                		AND #7FFFH, R2
00000735 6603                    		MOV.L #00000000H, R3
00000737 EF34                    		MOV.L R3, R4
00000739 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
0000073D 6240                    		ADD #04H, R0
0000073F A089                    		MOV.L R1, 0CH[R0]
00000741                         L189:	; bb549.split13
                                 ;     308             if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",308
00000741 A889                    		MOV.L 0CH[R0], R1
00000743 7601EED8                		CMP #0FFFFD8EEH, R1
00000747 18                   S  		BNE L192
00000748                         L190:	; bb559
                                 ;     309               res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",309
00000748 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000074B                         L191:	; bb559.split
                                 ;     310               objix_pix_ph = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",310
0000074B 3D0E00                  		MOV.W #0000H, 1CH[R0]
0000074E                         L192:	; bb566
                                 ;     311             }
                                 ;     312             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",312
0000074E A889                    		MOV.L 0CH[R0], R1
00000750 69F1                    		SHLR #1FH, R1
00000752 6101                    		CMP #00H, R1
00000754 10                   S  		BEQ L194
00000755                         L193:	; bb567
00000755 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000759 38rrrr               W  		BRA L362
0000075C                         L194:	; bb575.split
                                 ;     313 
                                 ;     314             spiffs_page_header new_ph;
                                 ;     315             new_ph.flags = 0xff & ~(SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_FINAL);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",315
0000075C F90426F8                		MOV.B #0F8H, 26H[R0]
00000760                         L195:	; bb575.split14
                                 ;     316             new_ph.span_ix = p_hdr->span_ix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",316
00000760 AD01                    		MOV.L 50H[R0], R1
00000762 D5100112                		MOV.W 02H[R1], 24H[R0]
00000766                         L196:	; bb575.split15
                                 ;     317             spiffs_page_ix new_pix;
                                 ;     318             if ((objix_pix_lu && data_pix_lu && data_pix_ph && objix_pix_ph == 0) ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",318
00000766 BB09                    		MOVU.W 1AH[R0], R1
00000768 6101                    		CMP #00H, R1
0000076A 3Brrrr               W  		BNE L236
0000076D 38rrrr               W  		BRA L238
00000770                         L197:	; bb582
                                 ;     319                 (objix_pix_lu == 0 && data_pix_ph && objix_pix_ph == 0)) {
                                 ;     320               //   got a data page for page header obj id
                                 ;     321               //   rewrite as obj_id_ph
                                 ;     322               new_ph.obj_id = p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",322
00000770 AD01                    		MOV.L 50H[R0], R1
00000772 DC11                    		MOV.W [R1], R1
00000774 78F1                    		BSET #0FH, R1
00000776 9409                    		MOV.W R1, 22H[R0]
00000778                         L198:	; bb582.split
                                 ;     323               res = spiffs_rewrite_page(fs, cur_pix, &new_ph, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",323
00000778 5D0227                  		MOVU.W 4EH[R0], R2
0000077B AD81                    		MOV.L 58H[R0], R1
0000077D 710428                  		ADD #28H, R0, R4
00000780 710322                  		ADD #22H, R0, R3
00000783 39rrrr               W  		BSR __$spiffs_rewrite_page
00000786 A089                    		MOV.L R1, 0CH[R0]
00000788                         L199:	; bb582.split16
                                 ;     324               SPIFFS_CHECK_DBG("LU: FIXUP: rewrite page %04x as %04x to pix %04x\n", cur_pix, new_ph.obj_id, new_pix);
                                 ;     325               CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_LOOKUP, p_hdr->obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",325
00000788 AD81                    		MOV.L 58H[R0], R1
0000078A AD11                    		MOV.L 50H[R1], R1
0000078C 6101                    		CMP #00H, R1
0000078E 20rr                    		BEQ L201
00000790                         L200:	; bb595
00000790 AD01                    		MOV.L 50H[R0], R1
00000792 B81C                    		MOVU.W 02H[R1], R4
00000794 5C13                    		MOVU.W [R1], R3
00000796 AD81                    		MOV.L 58H[R0], R1
00000798 AD15                    		MOV.L 50H[R1], R5
0000079A 6632                    		MOV.L #00000003H, R2
0000079C 6601                    		MOV.L #00000000H, R1
0000079E 7F15                    		JSR R5
000007A0                         L201:	; bb616.split
                                 ;     326               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",326
000007A0 A889                    		MOV.L 0CH[R0], R1
000007A2 69F1                    		SHLR #1FH, R1
000007A4 6101                    		CMP #00H, R1
000007A6 10                   S  		BEQ L203
000007A7                         L202:	; bb617
000007A7 E5000301                		MOV.L 0CH[R0], 04H[R0]
000007AB 38rrrr               W  		BRA L362
000007AE                         L203:	; bb625.split
                                 ;     327               *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",327
000007AE AC09                    		MOV.L 44H[R0], R1
000007B0 F81601                  		MOV.L #00000001H, [R1]
000007B3 38rrrr               W  		BRA L355
000007B6                         L204:	; bb628
                                 ;     328             } else if ((objix_pix_ph && data_pix_ph && data_pix_lu && objix_pix_lu == 0) ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",328
000007B6 BB81                    		MOVU.W 1CH[R0], R1
000007B8 6101                    		CMP #00H, R1
000007BA 21rr                    		BNE L212
000007BC 2Err                 B  		BRA L214
000007BE                         L205:	; bb629
                                 ;     329                 (objix_pix_ph == 0 && data_pix_lu && objix_pix_lu == 0)) {
                                 ;     330               //   got a data page for look up obj id
                                 ;     331               //   rewrite as obj_id_lu
                                 ;     332               new_ph.obj_id =  lu_obj_id | SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",332
000007BE DD012B                  		MOV.W 56H[R0], R1
000007C1 78F1                    		BSET #0FH, R1
000007C3 9409                    		MOV.W R1, 22H[R0]
000007C5                         L206:	; bb629.split
                                 ;     333               SPIFFS_CHECK_DBG("LU: FIXUP: rewrite page %04x as %04x\n", cur_pix, new_ph.obj_id);
                                 ;     334               CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_LOOKUP, p_hdr->obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",334
000007C5 AD81                    		MOV.L 58H[R0], R1
000007C7 AD11                    		MOV.L 50H[R1], R1
000007C9 6101                    		CMP #00H, R1
000007CB 20rr                    		BEQ L208
000007CD                         L207:	; bb637
000007CD AD01                    		MOV.L 50H[R0], R1
000007CF B81C                    		MOVU.W 02H[R1], R4
000007D1 5C13                    		MOVU.W [R1], R3
000007D3 AD81                    		MOV.L 58H[R0], R1
000007D5 AD15                    		MOV.L 50H[R1], R5
000007D7 6632                    		MOV.L #00000003H, R2
000007D9 6601                    		MOV.L #00000000H, R1
000007DB 7F15                    		JSR R5
000007DD                         L208:	; bb656.split
                                 ;     335               res = spiffs_rewrite_page(fs, cur_pix, &new_ph, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",335
000007DD 5D0227                  		MOVU.W 4EH[R0], R2
000007E0 AD81                    		MOV.L 58H[R0], R1
000007E2 710428                  		ADD #28H, R0, R4
000007E5 710322                  		ADD #22H, R0, R3
000007E8 39rrrr               W  		BSR __$spiffs_rewrite_page
000007EB A089                    		MOV.L R1, 0CH[R0]
000007ED                         L209:	; bb656.split17
                                 ;     336               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",336
000007ED A889                    		MOV.L 0CH[R0], R1
000007EF 69F1                    		SHLR #1FH, R1
000007F1 6101                    		CMP #00H, R1
000007F3 10                   S  		BEQ L211
000007F4                         L210:	; bb662
000007F4 E5000301                		MOV.L 0CH[R0], 04H[R0]
000007F8 38rrrr               W  		BRA L362
000007FB                         L211:	; bb670.split
                                 ;     337               *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",337
000007FB AC09                    		MOV.L 44H[R0], R1
000007FD F81601                  		MOV.L #00000001H, [R1]
00000800 38rrrr               W  		BRA L355
00000803                         L212:	; bb677
00000803 BC01                    		MOVU.W 20H[R0], R1
00000805 6101                    		CMP #00H, R1
00000807 10                   S  		BEQ L214
00000808                         L213:	; bb682
00000808 F80601                  		MOV.L #00000001H, [R0]
0000080B 08                   S  		BRA L215
0000080C                         L214:	; bb683
0000080C F80600                  		MOV.L #00000000H, [R0]
0000080F                         L215:	; bb684
0000080F EC01                    		MOV.L [R0], R1
00000811 6101                    		CMP #00H, R1
00000813 10                   S  		BEQ L218
00000814                         L216:	; bb688
00000814 BB89                    		MOVU.W 1EH[R0], R1
00000816 6101                    		CMP #00H, R1
00000818 10                   S  		BEQ L218
00000819                         L217:	; bb693
00000819 F80601                  		MOV.L #00000001H, [R0]
0000081C 08                   S  		BRA L219
0000081D                         L218:	; bb694
0000081D F80600                  		MOV.L #00000000H, [R0]
00000820                         L219:	; bb695
00000820 EC01                    		MOV.L [R0], R1
00000822 6101                    		CMP #00H, R1
00000824 10                   S  		BEQ L222
00000825                         L220:	; bb699
00000825 BB09                    		MOVU.W 1AH[R0], R1
00000827 6101                    		CMP #00H, R1
00000829 18                   S  		BNE L222
0000082A                         L221:	; bb704
0000082A F80601                  		MOV.L #00000001H, [R0]
0000082D 08                   S  		BRA L223
0000082E                         L222:	; bb705
0000082E F80600                  		MOV.L #00000000H, [R0]
00000831                         L223:	; bb706
00000831 EC01                    		MOV.L [R0], R1
00000833 6101                    		CMP #00H, R1
00000835 21rr                    		BNE L233
00000837                         L224:	; bb710
00000837 BB81                    		MOVU.W 1CH[R0], R1
00000839 6101                    		CMP #00H, R1
0000083B 18                   S  		BNE L227
0000083C                         L225:	; bb715
0000083C BB89                    		MOVU.W 1EH[R0], R1
0000083E 6101                    		CMP #00H, R1
00000840 10                   S  		BEQ L227
00000841                         L226:	; bb720
00000841 F80601                  		MOV.L #00000001H, [R0]
00000844 08                   S  		BRA L228
00000845                         L227:	; bb721
00000845 F80600                  		MOV.L #00000000H, [R0]
00000848                         L228:	; bb722
00000848 EC01                    		MOV.L [R0], R1
0000084A 6101                    		CMP #00H, R1
0000084C 10                   S  		BEQ L231
0000084D                         L229:	; bb726
0000084D BB09                    		MOVU.W 1AH[R0], R1
0000084F 6101                    		CMP #00H, R1
00000851 18                   S  		BNE L231
00000852                         L230:	; bb731
00000852 F80601                  		MOV.L #00000001H, [R0]
00000855 08                   S  		BRA L232
00000856                         L231:	; bb732
00000856 F80600                  		MOV.L #00000000H, [R0]
00000859                         L232:	; bb733
00000859 EC01                    		MOV.L [R0], R1
0000085B 6101                    		CMP #00H, R1
0000085D 10                   S  		BEQ L234
0000085E                         L233:	; bb737
0000085E F80601                  		MOV.L #00000001H, [R0]
00000861 08                   S  		BRA L235
00000862                         L234:	; bb738
00000862 F80600                  		MOV.L #00000000H, [R0]
00000865                         L235:	; bb739
00000865 EC01                    		MOV.L [R0], R1
00000867 6101                    		CMP #00H, R1
00000869 3Brrrr               W  		BNE L205
0000086C 38rrrr               W  		BRA L355
0000086F                         L236:	; bb749
0000086F BB89                    		MOVU.W 1EH[R0], R1
00000871 6101                    		CMP #00H, R1
00000873 10                   S  		BEQ L238
00000874                         L237:	; bb754
00000874 F80601                  		MOV.L #00000001H, [R0]
00000877 08                   S  		BRA L239
00000878                         L238:	; bb755
00000878 F80600                  		MOV.L #00000000H, [R0]
0000087B                         L239:	; bb756
0000087B EC01                    		MOV.L [R0], R1
0000087D 6101                    		CMP #00H, R1
0000087F 10                   S  		BEQ L242
00000880                         L240:	; bb760
00000880 BC01                    		MOVU.W 20H[R0], R1
00000882 6101                    		CMP #00H, R1
00000884 10                   S  		BEQ L242
00000885                         L241:	; bb765
00000885 F80601                  		MOV.L #00000001H, [R0]
00000888 08                   S  		BRA L243
00000889                         L242:	; bb766
00000889 F80600                  		MOV.L #00000000H, [R0]
0000088C                         L243:	; bb767
0000088C EC01                    		MOV.L [R0], R1
0000088E 6101                    		CMP #00H, R1
00000890 10                   S  		BEQ L246
00000891                         L244:	; bb771
00000891 BB81                    		MOVU.W 1CH[R0], R1
00000893 6101                    		CMP #00H, R1
00000895 18                   S  		BNE L246
00000896                         L245:	; bb776
00000896 F80601                  		MOV.L #00000001H, [R0]
00000899 08                   S  		BRA L247
0000089A                         L246:	; bb777
0000089A F80600                  		MOV.L #00000000H, [R0]
0000089D                         L247:	; bb778
0000089D EC01                    		MOV.L [R0], R1
0000089F 6101                    		CMP #00H, R1
000008A1 21rr                    		BNE L257
000008A3                         L248:	; bb782
000008A3 BB09                    		MOVU.W 1AH[R0], R1
000008A5 6101                    		CMP #00H, R1
000008A7 18                   S  		BNE L251
000008A8                         L249:	; bb787
000008A8 BC01                    		MOVU.W 20H[R0], R1
000008AA 6101                    		CMP #00H, R1
000008AC 10                   S  		BEQ L251
000008AD                         L250:	; bb792
000008AD F80601                  		MOV.L #00000001H, [R0]
000008B0 08                   S  		BRA L252
000008B1                         L251:	; bb793
000008B1 F80600                  		MOV.L #00000000H, [R0]
000008B4                         L252:	; bb794
000008B4 EC01                    		MOV.L [R0], R1
000008B6 6101                    		CMP #00H, R1
000008B8 10                   S  		BEQ L255
000008B9                         L253:	; bb798
000008B9 BB81                    		MOVU.W 1CH[R0], R1
000008BB 6101                    		CMP #00H, R1
000008BD 18                   S  		BNE L255
000008BE                         L254:	; bb803
000008BE F80601                  		MOV.L #00000001H, [R0]
000008C1 08                   S  		BRA L256
000008C2                         L255:	; bb804
000008C2 F80600                  		MOV.L #00000000H, [R0]
000008C5                         L256:	; bb805
000008C5 EC01                    		MOV.L [R0], R1
000008C7 6101                    		CMP #00H, R1
000008C9 10                   S  		BEQ L258
000008CA                         L257:	; bb809
000008CA F80601                  		MOV.L #00000001H, [R0]
000008CD 08                   S  		BRA L259
000008CE                         L258:	; bb810
000008CE F80600                  		MOV.L #00000000H, [R0]
000008D1                         L259:	; bb811
000008D1 EC01                    		MOV.L [R0], R1
000008D3 6101                    		CMP #00H, R1
000008D5 3Brrrr               W  		BNE L197
000008D8 38rrrr               W  		BRA L204
000008DB                         L260:	; bb821
000008DB BB09                    		MOVU.W 1AH[R0], R1
000008DD 6101                    		CMP #00H, R1
000008DF 18                   S  		BNE L262
000008E0                         L261:	; bb826
000008E0 F80601                  		MOV.L #00000001H, [R0]
000008E3 08                   S  		BRA L263
000008E4                         L262:	; bb827
000008E4 F80600                  		MOV.L #00000000H, [R0]
000008E7                         L263:	; bb828
000008E7 EC01                    		MOV.L [R0], R1
000008E9 6101                    		CMP #00H, R1
000008EB 3Brrrr               W  		BNE L182
000008EE 38rrrr               W  		BRA L355
000008F1                         L264:	; bb850
000008F1 AD01                    		MOV.L 50H[R0], R1
000008F3 F51104                  		BTST #01H, 04H[R1].B
000008F6 10                   S  		BEQ L266
000008F7                         L265:	; bb858
000008F7 F80601                  		MOV.L #00000001H, [R0]
000008FA 08                   S  		BRA L267
000008FB                         L266:	; bb859
000008FB F80600                  		MOV.L #00000000H, [R0]
000008FE                         L267:	; bb860
000008FE EC01                    		MOV.L [R0], R1
00000900 6101                    		CMP #00H, R1
00000902 21rr                    		BNE L269
00000904                         L268:	; bb864
00000904 AD01                    		MOV.L 50H[R0], R1
00000906 754E44                  		MOV.L #00000044H, R14
00000909 FC311E04                		TST 04H[R1].UB, R14
0000090D 18                   S  		BNE L270
0000090E                         L269:	; bb872
0000090E F80601                  		MOV.L #00000001H, [R0]
00000911 08                   S  		BRA L271
00000912                         L270:	; bb873
00000912 F80600                  		MOV.L #00000000H, [R0]
00000915                         L271:	; bb874
00000915 EC01                    		MOV.L [R0], R1
00000917 6101                    		CMP #00H, R1
00000919 3Brrrr               W  		BNE L355
0000091C 38rrrr               W  		BRA L144
0000091F                         L272:	; bb881
                                 ;     338             } else {
                                 ;     339               // cannot safely do anything
                                 ;     340               SPIFFS_CHECK_DBG("LU: FIXUP: nothing to do, just delete\n");
                                 ;     341             }
                                 ;     342           }
                                 ;     343         }
                                 ;     344       }
                                 ;     345     } else if (((lu_obj_id & SPIFFS_OBJ_ID_IX_FLAG) && (p_hdr->flags & SPIFFS_PH_FLAG_INDEX)) ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",345
0000091F 5D012B                  		MOVU.W 56H[R0], R1
00000922 7CF1                    		BTST #0FH, R1
00000924 3Brrrr               W  		BNE L339
00000927 38rrrr               W  		BRA L341
0000092A                         L273:	; bb882
                                 ;     346         ((lu_obj_id & SPIFFS_OBJ_ID_IX_FLAG) == 0 && (p_hdr->flags & SPIFFS_PH_FLAG_INDEX) == 0)) {
                                 ;     347       SPIFFS_CHECK_DBG("LU: %04x lu/page index marking differ\n", cur_pix);
                                 ;     348       spiffs_page_ix data_pix, objix_pix_d;
                                 ;     349       // see if other data page exists for given obj id and span index
                                 ;     350       res = spiffs_obj_lu_find_id_and_span(fs, lu_obj_id & ~SPIFFS_OBJ_ID_IX_FLAG, p_hdr->span_ix, cur_pix, &data_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",350
0000092A AD01                    		MOV.L 50H[R0], R1
0000092C B81B                    		MOVU.W 02H[R1], R3
0000092E 5D0427                  		MOVU.W 4EH[R0], R4
00000931 5D022B                  		MOVU.W 56H[R0], R2
00000934 AD81                    		MOV.L 58H[R0], R1
00000936 6040                    		SUB #04H, R0
00000938 710E2E                  		ADD #2EH, R0, R14
0000093B E30E                    		MOV.L R14, [R0]
0000093D 7622FF7F                		AND #7FFFH, R2
00000941 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000945 6240                    		ADD #04H, R0
00000947 A089                    		MOV.L R1, 0CH[R0]
00000949                         L274:	; bb882.split
                                 ;     351       if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",351
00000949 A889                    		MOV.L 0CH[R0], R1
0000094B 7601EED8                		CMP #0FFFFD8EEH, R1
0000094F 18                   S  		BNE L277
00000950                         L275:	; bb894
                                 ;     352         res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",352
00000950 3E0300                  		MOV.L #00000000H, 0CH[R0]
00000953                         L276:	; bb894.split
                                 ;     353         data_pix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",353
00000953 3D8500                  		MOV.W #0000H, 2AH[R0]
00000956                         L277:	; bb901
                                 ;     354       }
                                 ;     355       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",355
00000956 A889                    		MOV.L 0CH[R0], R1
00000958 69F1                    		SHLR #1FH, R1
0000095A 6101                    		CMP #00H, R1
0000095C 10                   S  		BEQ L279
0000095D                         L278:	; bb902
0000095D E5000301                		MOV.L 0CH[R0], 04H[R0]
00000961 38rrrr               W  		BRA L362
00000964                         L279:	; bb910.split
                                 ;     356       // see if other object index exists for given obj id and span index
                                 ;     357       res = spiffs_obj_lu_find_id_and_span(fs, lu_obj_id | SPIFFS_OBJ_ID_IX_FLAG, p_hdr->span_ix, cur_pix, &objix_pix_d);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",357
00000964 AD01                    		MOV.L 50H[R0], R1
00000966 B81B                    		MOVU.W 02H[R1], R3
00000968 5D0427                  		MOVU.W 4EH[R0], R4
0000096B 5D022B                  		MOVU.W 56H[R0], R2
0000096E AD81                    		MOV.L 58H[R0], R1
00000970 6040                    		SUB #04H, R0
00000972 710E30                  		ADD #30H, R0, R14
00000975 E30E                    		MOV.L R14, [R0]
00000977 78F2                    		BSET #0FH, R2
00000979 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
0000097D 6240                    		ADD #04H, R0
0000097F A089                    		MOV.L R1, 0CH[R0]
00000981                         L280:	; bb910.split18
                                 ;     358       if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",358
00000981 A889                    		MOV.L 0CH[R0], R1
00000983 7601EED8                		CMP #0FFFFD8EEH, R1
00000987 18                   S  		BNE L283
00000988                         L281:	; bb922
                                 ;     359         res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",359
00000988 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000098B                         L282:	; bb922.split
                                 ;     360         objix_pix_d = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",360
0000098B 3D8600                  		MOV.W #0000H, 2CH[R0]
0000098E                         L283:	; bb929
                                 ;     361       }
                                 ;     362       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",362
0000098E A889                    		MOV.L 0CH[R0], R1
00000990 69F1                    		SHLR #1FH, R1
00000992 6101                    		CMP #00H, R1
00000994 10                   S  		BEQ L285
00000995                         L284:	; bb930
00000995 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000999 38rrrr               W  		BRA L362
0000099C                         L285:	; bb938.split
                                 ;     363 
                                 ;     364       delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",364
0000099C 3C0B01                  		MOV.B #01H, 0BH[R0]
0000099F                         L286:	; bb938.split19
                                 ;     365       // if other data page exists and object index exists, just delete page
                                 ;     366       if (data_pix && objix_pix_d) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",366
0000099F BD09                    		MOVU.W 2AH[R0], R1
000009A1 6101                    		CMP #00H, R1
000009A3 3Brrrr               W  		BNE L319
000009A6 38rrrr               W  		BRA L321
000009A9                         L287:	; bb942
                                 ;     367         SPIFFS_CHECK_DBG("LU: FIXUP: other index and data page exists, simply remove\n");
                                 ;     368       } else
                                 ;     369       // if only data page exists, make this page index
                                 ;     370       if (data_pix && objix_pix_d == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",370
000009A9 BD09                    		MOVU.W 2AH[R0], R1
000009AB 6101                    		CMP #00H, R1
000009AD 3Brrrr               W  		BNE L315
000009B0 38rrrr               W  		BRA L317
000009B3                         L288:	; bb945
                                 ;     371         SPIFFS_CHECK_DBG("LU: FIXUP: other data page exists, make this index\n");
                                 ;     372         CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_INDEX, lu_obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",372
000009B3 AD81                    		MOV.L 58H[R0], R1
000009B5 AD11                    		MOV.L 50H[R1], R1
000009B7 6101                    		CMP #00H, R1
000009B9 20rr                    		BEQ L290
000009BB                         L289:	; bb946
000009BB AD01                    		MOV.L 50H[R0], R1
000009BD B81C                    		MOVU.W 02H[R1], R4
000009BF AD81                    		MOV.L 58H[R0], R1
000009C1 AD15                    		MOV.L 50H[R1], R5
000009C3 5D032B                  		MOVU.W 56H[R0], R3
000009C6 6622                    		MOV.L #00000002H, R2
000009C8 6601                    		MOV.L #00000000H, R1
000009CA 7F15                    		JSR R5
000009CC                         L290:	; bb963.split
                                 ;     373         spiffs_page_header new_ph;
                                 ;     374         spiffs_page_ix new_pix;
                                 ;     375         new_ph.flags = 0xff & ~(SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_INDEX);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",375
000009CC F90432F8                		MOV.B #0F8H, 32H[R0]
000009D0                         L291:	; bb963.split20
                                 ;     376         new_ph.obj_id = lu_obj_id | SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",376
000009D0 DD012B                  		MOV.W 56H[R0], R1
000009D3 78F1                    		BSET #0FH, R1
000009D5 9589                    		MOV.W R1, 2EH[R0]
000009D7                         L292:	; bb963.split21
                                 ;     377         new_ph.span_ix = p_hdr->span_ix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",377
000009D7 AD01                    		MOV.L 50H[R0], R1
000009D9 D5100118                		MOV.W 02H[R1], 30H[R0]
000009DD                         L293:	; bb963.split22
                                 ;     378         res = spiffs_page_allocate_data(fs, new_ph.obj_id, &new_ph, 0, 0, 0, 1, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",378
000009DD BD8A                    		MOVU.W 2EH[R0], R2
000009DF AD81                    		MOV.L 58H[R0], R1
000009E1 7100F0                  		ADD #0FFFFFFF0H, R0
000009E4 710344                  		ADD #44H, R0, R3
000009E7 A08B                    		MOV.L R3, 0CH[R0]
000009E9 3C0801                  		MOV.B #01H, 08H[R0]
000009EC 3E0100                  		MOV.L #00000000H, 04H[R0]
000009EF F80600                  		MOV.L #00000000H, [R0]
000009F2 6604                    		MOV.L #00000000H, R4
000009F4 71033E                  		ADD #3EH, R0, R3
000009F7 05rrrrrr             A  		BSR _spiffs_page_allocate_data
000009FB 710010                  		ADD #10H, R0
000009FE A089                    		MOV.L R1, 0CH[R0]
00000A00                         L294:	; bb963.split23
                                 ;     379         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",379
00000A00 A889                    		MOV.L 0CH[R0], R1
00000A02 69F1                    		SHLR #1FH, R1
00000A04 6101                    		CMP #00H, R1
00000A06 10                   S  		BEQ L296
00000A07                         L295:	; bb980
00000A07 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000A0B 38rrrr               W  		BRA L362
00000A0E                         L296:	; bb988.split
                                 ;     380         res = spiffs_phys_cpy(fs, 0, SPIFFS_PAGE_TO_PADDR(fs, new_pix) + sizeof(spiffs_page_header),
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",380
00000A0E 5D0427                  		MOVU.W 4EH[R0], R4
00000A11 BE83                    		MOVU.W 34H[R0], R3
00000A13 AD81                    		MOV.L 58H[R0], R1
00000A15 6040                    		SUB #04H, R0
00000A17 3E00FA                  		MOV.L #000000FAH, 00H[R0]
00000A1A 6C84                    		SHLL #08H, R4
00000A1C 7344060010              		ADD #00100006H, R4
00000A21 6C83                    		SHLL #08H, R3
00000A23 7333060010              		ADD #00100006H, R3
00000A28 6602                    		MOV.L #00000000H, R2
00000A2A 05rrrrrr             A  		BSR _spiffs_phys_cpy
00000A2E 6240                    		ADD #04H, R0
00000A30 A089                    		MOV.L R1, 0CH[R0]
00000A32                         L297:	; bb988.split24
                                 ;     381             SPIFFS_PAGE_TO_PADDR(fs, cur_pix) + sizeof(spiffs_page_header),
                                 ;     382             SPIFFS_CFG_LOG_PAGE_SZ(fs) - sizeof(spiffs_page_header));
                                 ;     383         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",383
00000A32 A889                    		MOV.L 0CH[R0], R1
00000A34 69F1                    		SHLR #1FH, R1
00000A36 6101                    		CMP #00H, R1
00000A38 3Arrrr               W  		BEQ L355
00000A3B                         L298:	; bb1003
00000A3B E5000301                		MOV.L 0CH[R0], 04H[R0]
00000A3F 38rrrr               W  		BRA L362
00000A42                         L299:	; bb1013
                                 ;     384       } else
                                 ;     385       // if only index exists, make data page
                                 ;     386       if (data_pix == 0 && objix_pix_d) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",386
00000A42 BD09                    		MOVU.W 2AH[R0], R1
00000A44 6101                    		CMP #00H, R1
00000A46 3Arrrr               W  		BEQ L311
00000A49 38rrrr               W  		BRA L313
00000A4C                         L300:	; bb1016
                                 ;     387         SPIFFS_CHECK_DBG("LU: FIXUP: other index page exists, make this data\n");
                                 ;     388         CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_LOOKUP, lu_obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",388
00000A4C AD81                    		MOV.L 58H[R0], R1
00000A4E AD11                    		MOV.L 50H[R1], R1
00000A50 6101                    		CMP #00H, R1
00000A52 20rr                    		BEQ L302
00000A54                         L301:	; bb1017
00000A54 AD01                    		MOV.L 50H[R0], R1
00000A56 B81C                    		MOVU.W 02H[R1], R4
00000A58 AD81                    		MOV.L 58H[R0], R1
00000A5A AD15                    		MOV.L 50H[R1], R5
00000A5C 5D032B                  		MOVU.W 56H[R0], R3
00000A5F 6632                    		MOV.L #00000003H, R2
00000A61 6601                    		MOV.L #00000000H, R1
00000A63 7F15                    		JSR R5
00000A65                         L302:	; bb1034.split
                                 ;     389         spiffs_page_header new_ph;
                                 ;     390         spiffs_page_ix new_pix;
                                 ;     391         new_ph.flags = 0xff & ~(SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_FINAL);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",391
00000A65 F9043AFC                		MOV.B #0FCH, 3AH[R0]
00000A69                         L303:	; bb1034.split25
                                 ;     392         new_ph.obj_id = lu_obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",392
00000A69 5D012B                  		MOVU.W 56H[R0], R1
00000A6C 7621FF7F                		AND #7FFFH, R1
00000A70 9689                    		MOV.W R1, 36H[R0]
00000A72                         L304:	; bb1034.split26
                                 ;     393         new_ph.span_ix = p_hdr->span_ix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",393
00000A72 AD01                    		MOV.L 50H[R0], R1
00000A74 D510011C                		MOV.W 02H[R1], 38H[R0]
00000A78                         L305:	; bb1034.split27
                                 ;     394         res = spiffs_page_allocate_data(fs, new_ph.obj_id, &new_ph, 0, 0, 0, 1, &new_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",394
00000A78 BE8A                    		MOVU.W 36H[R0], R2
00000A7A AD81                    		MOV.L 58H[R0], R1
00000A7C 7100F0                  		ADD #0FFFFFFF0H, R0
00000A7F 71034C                  		ADD #4CH, R0, R3
00000A82 A08B                    		MOV.L R3, 0CH[R0]
00000A84 3C0801                  		MOV.B #01H, 08H[R0]
00000A87 3E0100                  		MOV.L #00000000H, 04H[R0]
00000A8A F80600                  		MOV.L #00000000H, [R0]
00000A8D 6604                    		MOV.L #00000000H, R4
00000A8F 710346                  		ADD #46H, R0, R3
00000A92 05rrrrrr             A  		BSR _spiffs_page_allocate_data
00000A96 710010                  		ADD #10H, R0
00000A99 A089                    		MOV.L R1, 0CH[R0]
00000A9B                         L306:	; bb1034.split28
                                 ;     395         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",395
00000A9B A889                    		MOV.L 0CH[R0], R1
00000A9D 69F1                    		SHLR #1FH, R1
00000A9F 6101                    		CMP #00H, R1
00000AA1 10                   S  		BEQ L308
00000AA2                         L307:	; bb1051
00000AA2 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000AA6 38rrrr               W  		BRA L362
00000AA9                         L308:	; bb1059.split
                                 ;     396         res = spiffs_phys_cpy(fs, 0, SPIFFS_PAGE_TO_PADDR(fs, new_pix) + sizeof(spiffs_page_header),
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",396
00000AA9 5D0427                  		MOVU.W 4EH[R0], R4
00000AAC BF83                    		MOVU.W 3CH[R0], R3
00000AAE AD81                    		MOV.L 58H[R0], R1
00000AB0 6040                    		SUB #04H, R0
00000AB2 3E00FA                  		MOV.L #000000FAH, 00H[R0]
00000AB5 6C84                    		SHLL #08H, R4
00000AB7 7344060010              		ADD #00100006H, R4
00000ABC 6C83                    		SHLL #08H, R3
00000ABE 7333060010              		ADD #00100006H, R3
00000AC3 6602                    		MOV.L #00000000H, R2
00000AC5 05rrrrrr             A  		BSR _spiffs_phys_cpy
00000AC9 6240                    		ADD #04H, R0
00000ACB A089                    		MOV.L R1, 0CH[R0]
00000ACD                         L309:	; bb1059.split29
                                 ;     397             SPIFFS_PAGE_TO_PADDR(fs, cur_pix) + sizeof(spiffs_page_header),
                                 ;     398             SPIFFS_CFG_LOG_PAGE_SZ(fs) - sizeof(spiffs_page_header));
                                 ;     399         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",399
00000ACD A889                    		MOV.L 0CH[R0], R1
00000ACF 69F1                    		SHLR #1FH, R1
00000AD1 6101                    		CMP #00H, R1
00000AD3 3Arrrr               W  		BEQ L355
00000AD6                         L310:	; bb1074
00000AD6 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000ADA 38rrrr               W  		BRA L362
00000ADD                         L311:	; bb1088
00000ADD BD81                    		MOVU.W 2CH[R0], R1
00000ADF 6101                    		CMP #00H, R1
00000AE1 10                   S  		BEQ L313
00000AE2                         L312:	; bb1093
00000AE2 F80601                  		MOV.L #00000001H, [R0]
00000AE5 08                   S  		BRA L314
00000AE6                         L313:	; bb1094
00000AE6 F80600                  		MOV.L #00000000H, [R0]
00000AE9                         L314:	; bb1095
00000AE9 EC01                    		MOV.L [R0], R1
00000AEB 6101                    		CMP #00H, R1
00000AED 3Brrrr               W  		BNE L300
00000AF0 38rrrr               W  		BRA L355
00000AF3                         L315:	; bb1105
00000AF3 BD81                    		MOVU.W 2CH[R0], R1
00000AF5 6101                    		CMP #00H, R1
00000AF7 18                   S  		BNE L317
00000AF8                         L316:	; bb1110
00000AF8 F80601                  		MOV.L #00000001H, [R0]
00000AFB 08                   S  		BRA L318
00000AFC                         L317:	; bb1111
00000AFC F80600                  		MOV.L #00000000H, [R0]
00000AFF                         L318:	; bb1112
00000AFF EC01                    		MOV.L [R0], R1
00000B01 6101                    		CMP #00H, R1
00000B03 3Brrrr               W  		BNE L288
00000B06 38rrrr               W  		BRA L299
00000B09                         L319:	; bb1122
00000B09 BD81                    		MOVU.W 2CH[R0], R1
00000B0B 6101                    		CMP #00H, R1
00000B0D 10                   S  		BEQ L321
00000B0E                         L320:	; bb1127
00000B0E F80601                  		MOV.L #00000001H, [R0]
00000B11 08                   S  		BRA L322
00000B12                         L321:	; bb1128
00000B12 F80600                  		MOV.L #00000000H, [R0]
00000B15                         L322:	; bb1129
00000B15 EC01                    		MOV.L [R0], R1
00000B17 6101                    		CMP #00H, R1
00000B19 3Brrrr               W  		BNE L355
00000B1C 38rrrr               W  		BRA L287
00000B1F                         L323:	; bb1136
                                 ;     400       } else {
                                 ;     401         // if nothing exists, we cannot safely make a decision - delete
                                 ;     402       }
                                 ;     403     }
                                 ;     404     else if ((p_hdr->flags & SPIFFS_PH_FLAG_DELET) == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",404
00000B1F AD01                    		MOV.L 50H[R0], R1
00000B21 F51704                  		BTST #07H, 04H[R1].B
00000B24 18                   S  		BNE L325
00000B25                         L324:	; bb1137
                                 ;     405       SPIFFS_CHECK_DBG("LU: pix %04x busy in lu but deleted on page\n", cur_pix);
                                 ;     406       delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",406
00000B25 3C0B01                  		MOV.B #01H, 0BH[R0]
00000B28 38rrrr               W  		BRA L355
00000B2B                         L325:	; bb1139
                                 ;     407     } else if ((p_hdr->flags & SPIFFS_PH_FLAG_FINAL)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",407
00000B2B AD01                    		MOV.L 50H[R0], R1
00000B2D F51104                  		BTST #01H, 04H[R1].B
00000B30 3Arrrr               W  		BEQ L355
00000B33                         L326:	; bb1140
                                 ;     408       SPIFFS_CHECK_DBG("LU: pix %04x busy but not final\n", cur_pix);
                                 ;     409       // page can be removed if not referenced by object index
                                 ;     410       *reload_lu = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",410
00000B33 AC09                    		MOV.L 44H[R0], R1
00000B35 F81601                  		MOV.L #00000001H, [R1]
00000B38                         L327:	; bb1140.split
                                 ;     411       res = spiffs_object_get_data_page_index_reference(fs, lu_obj_id, p_hdr->span_ix, &ref_pix, &objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",411
00000B38 AD01                    		MOV.L 50H[R0], R1
00000B3A B81B                    		MOVU.W 02H[R1], R3
00000B3C 5D022B                  		MOVU.W 56H[R0], R2
00000B3F AD81                    		MOV.L 58H[R0], R1
00000B41 6040                    		SUB #04H, R0
00000B43 710E14                  		ADD #14H, R0, R14
00000B46 E30E                    		MOV.L R14, [R0]
00000B48 710416                  		ADD #16H, R0, R4
00000B4B 39rrrr               W  		BSR __$spiffs_object_get_data_page_index_reference
00000B4E 6240                    		ADD #04H, R0
00000B50 A089                    		MOV.L R1, 0CH[R0]
00000B52                         L328:	; bb1140.split30
                                 ;     412       if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",412
00000B52 A889                    		MOV.L 0CH[R0], R1
00000B54 7601EED8                		CMP #0FFFFD8EEH, R1
00000B58 18                   S  		BNE L331
00000B59                         L329:	; bb1149
                                 ;     413         // no object with this id, so remove page safely
                                 ;     414         res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",414
00000B59 3E0300                  		MOV.L #00000000H, 0CH[R0]
00000B5C                         L330:	; bb1149.split
                                 ;     415         delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",415
00000B5C 3C0B01                  		MOV.B #01H, 0BH[R0]
00000B5F 38rrrr               W  		BRA L355
00000B62                         L331:	; bb1152
                                 ;     416       } else {
                                 ;     417         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",417
00000B62 A889                    		MOV.L 0CH[R0], R1
00000B64 69F1                    		SHLR #1FH, R1
00000B66 6101                    		CMP #00H, R1
00000B68 10                   S  		BEQ L333
00000B69                         L332:	; bb1153
00000B69 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000B6D 38rrrr               W  		BRA L362
00000B70                         L333:	; bb1162.split
                                 ;     418         if (ref_pix != cur_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",418
00000B70 BA09                    		MOVU.W 12H[R0], R1
00000B72 06C50127                		CMP 4EH[R0].UW, R1
00000B76 10                   S  		BEQ L335
00000B77                         L334:	; bb1163
                                 ;     419           SPIFFS_CHECK_DBG("LU: FIXUP: other finalized page is referred, just delete\n");
                                 ;     420           delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",420
00000B77 3C0B01                  		MOV.B #01H, 0BH[R0]
00000B7A 38rrrr               W  		BRA L355
00000B7D                         L335:	; bb1166
                                 ;     421         } else {
                                 ;     422           // page referenced by object index but not final
                                 ;     423           // just finalize
                                 ;     424           SPIFFS_CHECK_DBG("LU: FIXUP: unfinalized page is referred, finalizing\n");
                                 ;     425           CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_FIX_LOOKUP, p_hdr->obj_id, p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",425
00000B7D AD81                    		MOV.L 58H[R0], R1
00000B7F AD11                    		MOV.L 50H[R1], R1
00000B81 6101                    		CMP #00H, R1
00000B83 20rr                    		BEQ L337
00000B85                         L336:	; bb1167
00000B85 AD01                    		MOV.L 50H[R0], R1
00000B87 B81C                    		MOVU.W 02H[R1], R4
00000B89 5C13                    		MOVU.W [R1], R3
00000B8B AD81                    		MOV.L 58H[R0], R1
00000B8D AD15                    		MOV.L 50H[R1], R5
00000B8F 6632                    		MOV.L #00000003H, R2
00000B91 6601                    		MOV.L #00000000H, R1
00000B93 7F15                    		JSR R5
00000B95                         L337:	; bb1186.split
                                 ;     426           u8_t flags = 0xff & ~SPIFFS_PH_FLAG_FINAL;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",426
00000B95 F9043FFD                		MOV.B #0FDH, 3FH[R0]
00000B99                         L338:	; bb1186.split31
                                 ;     427           res = _spiffs_wr(fs, SPIFFS_OP_T_OBJ_DA | SPIFFS_OP_C_UPDT,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",427
00000B99 5D0427                  		MOVU.W 4EH[R0], R4
00000B9C AD81                    		MOV.L 58H[R0], R1
00000B9E 6080                    		SUB #08H, R0
00000BA0 710247                  		ADD #47H, R0, R2
00000BA3 A00A                    		MOV.L R2, 04H[R0]
00000BA5 F80601                  		MOV.L #00000001H, [R0]
00000BA8 6C84                    		SHLL #08H, R4
00000BAA 7344040010              		ADD #00100004H, R4
00000BAF 6603                    		MOV.L #00000000H, R3
00000BB1 6672                    		MOV.L #00000007H, R2
00000BB3 05rrrrrr             A  		BSR _spiffs_phys_wr
00000BB7 6280                    		ADD #08H, R0
00000BB9 A089                    		MOV.L R1, 0CH[R0]
00000BBB 2Err                 B  		BRA L355
00000BBD                         L339:	; bb1230
00000BBD AD01                    		MOV.L 50H[R0], R1
00000BBF F51204                  		BTST #02H, 04H[R1].B
00000BC2 10                   S  		BEQ L341
00000BC3                         L340:	; bb1238
00000BC3 F80601                  		MOV.L #00000001H, [R0]
00000BC6 08                   S  		BRA L342
00000BC7                         L341:	; bb1239
00000BC7 F80600                  		MOV.L #00000000H, [R0]
00000BCA                         L342:	; bb1240
00000BCA EC01                    		MOV.L [R0], R1
00000BCC 6101                    		CMP #00H, R1
00000BCE 21rr                    		BNE L348
00000BD0                         L343:	; bb1244
00000BD0 5D012B                  		MOVU.W 56H[R0], R1
00000BD3 7CF1                    		BTST #0FH, R1
00000BD5 21rr                    		BNE L346
00000BD7                         L344:	; bb1250
00000BD7 AD01                    		MOV.L 50H[R0], R1
00000BD9 F51204                  		BTST #02H, 04H[R1].B
00000BDC 18                   S  		BNE L346
00000BDD                         L345:	; bb1258
00000BDD F80601                  		MOV.L #00000001H, [R0]
00000BE0 08                   S  		BRA L347
00000BE1                         L346:	; bb1259
00000BE1 F80600                  		MOV.L #00000000H, [R0]
00000BE4                         L347:	; bb1260
00000BE4 EC01                    		MOV.L [R0], R1
00000BE6 6101                    		CMP #00H, R1
00000BE8 10                   S  		BEQ L349
00000BE9                         L348:	; bb1264
00000BE9 F80601                  		MOV.L #00000001H, [R0]
00000BEC 08                   S  		BRA L350
00000BED                         L349:	; bb1265
00000BED F80600                  		MOV.L #00000000H, [R0]
00000BF0                         L350:	; bb1266
00000BF0 EC01                    		MOV.L [R0], R1
00000BF2 6101                    		CMP #00H, R1
00000BF4 3Brrrr               W  		BNE L273
00000BF7 38rrrr               W  		BRA L323
00000BFA                         L351:	; bb1288
00000BFA 5D012B                  		MOVU.W 56H[R0], R1
00000BFD 6101                    		CMP #00H, R1
00000BFF 10                   S  		BEQ L353
00000C00                         L352:	; bb1293
00000C00 F80601                  		MOV.L #00000001H, [R0]
00000C03 08                   S  		BRA L354
00000C04                         L353:	; bb1294
00000C04 F80600                  		MOV.L #00000000H, [R0]
00000C07                         L354:	; bb1295
00000C07 EC01                    		MOV.L [R0], R1
00000C09 6101                    		CMP #00H, R1
00000C0B 3Brrrr               W  		BNE L141
00000C0E                         L355:	; bb1301
                                 ;     428               0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix) + offsetof(spiffs_page_header, flags),
                                 ;     429               sizeof(u8_t), (u8_t*)&flags);
                                 ;     430         }
                                 ;     431       }
                                 ;     432     }
                                 ;     433   }
                                 ;     434 
                                 ;     435   if (delete_page) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",435
00000C0E B289                    		MOVU.B 0BH[R0], R1
00000C10 6101                    		CMP #00H, R1
00000C12 20rr                    		BEQ L361
00000C14                         L356:	; bb1304
                                 ;     436     SPIFFS_CHECK_DBG("LU: FIXUP: deleting page %04x\n", cur_pix);
                                 ;     437     CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_DELETE_PAGE, cur_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",437
00000C14 AD81                    		MOV.L 58H[R0], R1
00000C16 AD11                    		MOV.L 50H[R1], R1
00000C18 6101                    		CMP #00H, R1
00000C1A 20rr                    		BEQ L358
00000C1C                         L357:	; bb1305
00000C1C AD81                    		MOV.L 58H[R0], R1
00000C1E AD15                    		MOV.L 50H[R1], R5
00000C20 5D0327                  		MOVU.W 4EH[R0], R3
00000C23 6652                    		MOV.L #00000005H, R2
00000C25 6601                    		MOV.L #00000000H, R1
00000C27 EF14                    		MOV.L R1, R4
00000C29 7F15                    		JSR R5
00000C2B                         L358:	; bb1318.split
                                 ;     438     res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",438
00000C2B 5D0227                  		MOVU.W 4EH[R0], R2
00000C2E AD81                    		MOV.L 58H[R0], R1
00000C30 05rrrrrr             A  		BSR _spiffs_page_delete
00000C34 A089                    		MOV.L R1, 0CH[R0]
00000C36                         L359:	; bb1318.split32
                                 ;     439     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",439
00000C36 A889                    		MOV.L 0CH[R0], R1
00000C38 69F1                    		SHLR #1FH, R1
00000C3A 6101                    		CMP #00H, R1
00000C3C 10                   S  		BEQ L361
00000C3D                         L360:	; bb1324
00000C3D E5000301                		MOV.L 0CH[R0], 04H[R0]
00000C41 08                   S  		BRA L362
00000C42                         L361:	; bb1338
                                 ;     440   }
                                 ;     441 
                                 ;     442   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",442
00000C42 E5000301                		MOV.L 0CH[R0], 04H[R0]
00000C46                         L362:	; bb1341
00000C46 A809                    		MOV.L 04H[R0], R1
00000C48 A401                    		MOV.L R1, 40H[R0]
                                 ;     443 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",443
00000C4A 6717                    		RTSD #5CH
00000C4C                         __$spiffs_lookup_check_v:
                                 		.STACK	__$spiffs_lookup_check_v=64
                                 ;     444 
                                 ;     445 static s32_t spiffs_lookup_check_v(spiffs *fs, spiffs_obj_id obj_id, spiffs_block_ix cur_block, int cur_entry,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",445
00000C4C 7100D0                  		ADD #0FFFFFFD0H, R0
00000C4F A289                    		MOV.L R1, 2CH[R0]
00000C51 950A                    		MOV.W R2, 2AH[R0]
00000C53 9503                    		MOV.W R3, 28H[R0]
00000C55 A20C                    		MOV.L R4, 24H[R0]
00000C57 E5000D08                		MOV.L 34H[R0], 20H[R0]
00000C5B E5000E07                		MOV.L 38H[R0], 1CH[R0]
00000C5F                         L364:	; entry.split1
                                 ;     446     const void *user_const_p, void *user_var_p) {
                                 ;     447   (void)user_const_p;
                                 ;     448   (void)user_var_p;
                                 ;     449   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",449
00000C5F 3E0200                  		MOV.L #00000000H, 08H[R0]
00000C62                         L365:	; entry.split2
                                 ;     450   spiffs_page_header p_hdr;
                                 ;     451   spiffs_page_ix cur_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, cur_block, cur_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",451
00000C62 BD01                    		MOVU.W 28H[R0], R1
00000C64 6C81                    		SHLL #08H, R1
00000C66 06890109                		ADD 24H[R0].L, R1
00000C6A 6221                    		ADD #02H, R1
00000C6C 9209                    		MOV.W R1, 12H[R0]
00000C6E                         L366:	; entry.split3
                                 ;     452 
                                 ;     453   CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_PROGRESS,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",453
00000C6E AA89                    		MOV.L 2CH[R0], R1
00000C70 AD11                    		MOV.L 50H[R1], R1
00000C72 6101                    		CMP #00H, R1
00000C74 20rr                    		BEQ L368
00000C76                         L367:	; bb21
00000C76 BD03                    		MOVU.W 28H[R0], R3
00000C78 6C83                    		SHLL #08H, R3
00000C7A AA89                    		MOV.L 2CH[R0], R1
00000C7C 06A1091303              		DIVU 0CH[R1].L, R3
00000C81 AD15                    		MOV.L 50H[R1], R5
00000C83 6601                    		MOV.L #00000000H, R1
00000C85 EF12                    		MOV.L R1, R2
00000C87 EF14                    		MOV.L R1, R4
00000C89 7F15                    		JSR R5
00000C8B                         L368:	; bb38
                                 ;     454       (cur_block * 256)/fs->block_count, 0);
                                 ;     455 
                                 ;     456   // load header
                                 ;     457   res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",457
00000C8B BA0C                    		MOVU.W 12H[R0], R4
00000C8D AA89                    		MOV.L 2CH[R0], R1
00000C8F 6080                    		SUB #08H, R0
00000C91 710214                  		ADD #14H, R0, R2
00000C94 A00A                    		MOV.L R2, 04H[R0]
00000C96 F80606                  		MOV.L #00000006H, [R0]
00000C99 6C84                    		SHLL #08H, R4
00000C9B 7344000010              		ADD #00100000H, R4
00000CA0 6603                    		MOV.L #00000000H, R3
00000CA2 754215                  		MOV.L #00000015H, R2
00000CA5 05rrrrrr             A  		BSR _spiffs_phys_rd
00000CA9 6280                    		ADD #08H, R0
00000CAB A081                    		MOV.L R1, 08H[R0]
00000CAD                         L369:	; bb38.split
                                 ;     458       0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     459   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",459
00000CAD A881                    		MOV.L 08H[R0], R1
00000CAF 69F1                    		SHLR #1FH, R1
00000CB1 6101                    		CMP #00H, R1
00000CB3 10                   S  		BEQ L371
00000CB4                         L370:	; bb48
00000CB4 E5000201                		MOV.L 08H[R0], 04H[R0]
00000CB8 2Err                 B  		BRA L381
00000CBA                         L371:	; bb56
                                 ;     460 
                                 ;     461   int reload_lu = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",461
00000CBA 3E0500                  		MOV.L #00000000H, 14H[R0]
00000CBD                         L372:	; bb56.split
                                 ;     462 
                                 ;     463   res = spiffs_lookup_check_validate(fs, obj_id, &p_hdr, cur_pix, cur_block, cur_entry, &reload_lu);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",463
00000CBD AA0B                    		MOV.L 24H[R0], R3
00000CBF 9D05                    		MOV.W 28H[R0], R5
00000CC1 BA0C                    		MOVU.W 12H[R0], R4
00000CC3 BD0A                    		MOVU.W 2AH[R0], R2
00000CC5 AA89                    		MOV.L 2CH[R0], R1
00000CC7 60C0                    		SUB #0CH, R0
00000CC9 710F20                  		ADD #20H, R0, R15
00000CCC E70F02                  		MOV.L R15, 08H[R0]
00000CCF A00B                    		MOV.L R3, 04H[R0]
00000CD1 D305                    		MOV.W R5, [R0]
00000CD3 710318                  		ADD #18H, R0, R3
00000CD6 39rrrr               W  		BSR __$spiffs_lookup_check_validate
00000CD9 62C0                    		ADD #0CH, R0
00000CDB A081                    		MOV.L R1, 08H[R0]
00000CDD                         L373:	; bb56.split4
                                 ;     464   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",464
00000CDD A881                    		MOV.L 08H[R0], R1
00000CDF FD9F1E                  		SHLR #1FH, R1, R14
00000CE2 610E                    		CMP #00H, R14
00000CE4 10                   S  		BEQ L375
00000CE5                         L374:	; bb65
00000CE5 A009                    		MOV.L R1, 04H[R0]
00000CE7 2Err                 B  		BRA L381
00000CE9                         L375:	; bb74
                                 ;     465 
                                 ;     466   if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",466
00000CE9 6101                    		CMP #00H, R1
00000CEB 21rr                    		BNE L380
00000CED                         L376:	; bb75
                                 ;     467     return reload_lu ? SPIFFS_VIS_COUNTINUE_RELOAD : SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",467
00000CED A909                    		MOV.L 14H[R0], R1
00000CEF 6101                    		CMP #00H, R1
00000CF1 10                   S  		BEQ L378
00000CF2                         L377:	; bb79
00000CF2 F80AA9D8                		MOV.L #0FFFFD8A9H, [R0]
00000CF6 08                   S  		BRA L379
00000CF7                         L378:	; bb80
00000CF7 F80AAAD8                		MOV.L #0FFFFD8AAH, [R0]
00000CFB                         L379:	; bb81
00000CFB E40001                  		MOV.L [R0], 04H[R0]
00000CFE 08                   S  		BRA L381
00000CFF                         L380:	; bb89
                                 ;     468   }
                                 ;     469   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",469
00000CFF E5000201                		MOV.L 08H[R0], 04H[R0]
00000D03                         L381:	; bb92
00000D03 A809                    		MOV.L 04H[R0], R1
00000D05 A181                    		MOV.L R1, 18H[R0]
                                 ;     470 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",470
00000D07 670C                    		RTSD #30H
00000D09                         _spiffs_lookup_consistency_check:
                                 		.STACK	_spiffs_lookup_consistency_check=44
                                 ;     471 
                                 ;     472 
                                 ;     473 // Scans all object look up. For each entry, corresponding page header is checked for validity.
                                 ;     474 // If an object index header page is found, this is also checked
                                 ;     475 s32_t spiffs_lookup_consistency_check(spiffs *fs, u8_t check_all_objects) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",475
00000D09 7100F0                  		ADD #0FFFFFFF0H, R0
00000D0C A089                    		MOV.L R1, 0CH[R0]
00000D0E 828A                    		MOV.B R2, 0BH[R0]
00000D10                         L383:	; entry.split
                                 ;     476   (void)check_all_objects;
                                 ;     477   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",477
00000D10 F80600                  		MOV.L #00000000H, [R0]
00000D13                         L384:	; entry.split1
                                 ;     478 
                                 ;     479   CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_PROGRESS, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",479
00000D13 A889                    		MOV.L 0CH[R0], R1
00000D15 AD11                    		MOV.L 50H[R1], R1
00000D17 6101                    		CMP #00H, R1
00000D19 20rr                    		BEQ L386
00000D1B                         L385:	; bb6
00000D1B A889                    		MOV.L 0CH[R0], R1
00000D1D AD15                    		MOV.L 50H[R1], R5
00000D1F 6601                    		MOV.L #00000000H, R1
00000D21 EF12                    		MOV.L R1, R2
00000D23 EF13                    		MOV.L R1, R3
00000D25 EF14                    		MOV.L R1, R4
00000D27 7F15                    		JSR R5
00000D29                         L386:	; bb16
                                 ;     480 
                                 ;     481   res = spiffs_obj_lu_find_entry_visitor(fs, 0, 0, 0, 0, spiffs_lookup_check_v, 0, 0, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",481
00000D29 A889                    		MOV.L 0CH[R0], R1
00000D2B 7100E8                  		ADD #0FFFFFFE8H, R0
00000D2E 6602                    		MOV.L #00000000H, R2
00000D30 A10A                    		MOV.L R2, 14H[R0]
00000D32 A102                    		MOV.L R2, 10H[R0]
00000D34 A08A                    		MOV.L R2, 0CH[R0]
00000D36 A082                    		MOV.L R2, 08H[R0]
00000D38 FB32rrrrrrrr            		MOV.L #__$spiffs_lookup_check_v, R3
00000D3E A00B                    		MOV.L R3, 04H[R0]
00000D40 D302                    		MOV.W R2, [R0]
00000D42 EF23                    		MOV.L R2, R3
00000D44 EF24                    		MOV.L R2, R4
00000D46 05rrrrrr             A  		BSR _spiffs_obj_lu_find_entry_visitor
00000D4A 710018                  		ADD #18H, R0
00000D4D E301                    		MOV.L R1, [R0]
00000D4F                         L387:	; bb16.split
                                 ;     482 
                                 ;     483   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",483
00000D4F EC01                    		MOV.L [R0], R1
00000D51 7601A8D8                		CMP #0FFFFD8A8H, R1
00000D55 18                   S  		BNE L389
00000D56                         L388:	; bb20
                                 ;     484     res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",484
00000D56 F80600                  		MOV.L #00000000H, [R0]
00000D59                         L389:	; bb26
                                 ;     485   }
                                 ;     486 
                                 ;     487   if (res != SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",487
00000D59 EC01                    		MOV.L [R0], R1
00000D5B 6101                    		CMP #00H, R1
00000D5D 20rr                    		BEQ L392
00000D5F                         L390:	; bb29
                                 ;     488     CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_ERROR, res, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",488
00000D5F A889                    		MOV.L 0CH[R0], R1
00000D61 AD11                    		MOV.L 50H[R1], R1
00000D63 6101                    		CMP #00H, R1
00000D65 20rr                    		BEQ L392
00000D67                         L391:	; bb30
00000D67 A889                    		MOV.L 0CH[R0], R1
00000D69 AD15                    		MOV.L 50H[R1], R5
00000D6B EC03                    		MOV.L [R0], R3
00000D6D 6612                    		MOV.L #00000001H, R2
00000D6F 6601                    		MOV.L #00000000H, R1
00000D71 EF14                    		MOV.L R1, R4
00000D73 7F15                    		JSR R5
00000D75                         L392:	; bb49
                                 ;     489   }
                                 ;     490 
                                 ;     491   CHECK_CB(fs, SPIFFS_CHECK_LOOKUP, SPIFFS_CHECK_PROGRESS, 256, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",491
00000D75 A889                    		MOV.L 0CH[R0], R1
00000D77 AD11                    		MOV.L 50H[R1], R1
00000D79 6101                    		CMP #00H, R1
00000D7B 20rr                    		BEQ L394
00000D7D                         L393:	; bb50
00000D7D A889                    		MOV.L 0CH[R0], R1
00000D7F AD15                    		MOV.L 50H[R1], R5
00000D81 FB3A0001                		MOV.L #00000100H, R3
00000D85 6601                    		MOV.L #00000000H, R1
00000D87 EF12                    		MOV.L R1, R2
00000D89 EF14                    		MOV.L R1, R4
00000D8B 7F15                    		JSR R5
00000D8D                         L394:	; bb61
                                 ;     492 
                                 ;     493   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",493
00000D8D EC01                    		MOV.L [R0], R1
00000D8F A009                    		MOV.L R1, 04H[R0]
00000D91                         L395:	; bb61.split
                                 ;     494 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",494
00000D91 6704                    		RTSD #10H
00000D93                         __$spiffs_page_consistency_check_i:
                                 		.STACK	__$spiffs_page_consistency_check_i=148
                                 ;     495 
                                 ;     496 //---------------------------------------
                                 ;     497 // Page consistency
                                 ;     498 
                                 ;     499 // Scans all pages (except lu pages), reserves 4 bits in working memory for each page
                                 ;     500 // bit 0: 0 == FREE|DELETED, 1 == USED
                                 ;     501 // bit 1: 0 == UNREFERENCED, 1 == REFERENCED
                                 ;     502 // bit 2: 0 == NOT_INDEX,    1 == INDEX
                                 ;     503 // bit 3: unused
                                 ;     504 // A consistent file system will have only pages being
                                 ;     505 //  * x000 free, unreferenced, not index
                                 ;     506 //  * x011 used, referenced only once, not index
                                 ;     507 //  * x101 used, unreferenced, index
                                 ;     508 // The working memory might not fit all pages so several scans might be needed
                                 ;     509 static s32_t spiffs_page_consistency_check_i(spiffs *fs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",509
00000D93 710080                  		ADD #0FFFFFF80H, R0
00000D96 A789                    		MOV.L R1, 7CH[R0]
                                 ;     510   const u32_t bits = 4;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",510
00000D98 3E0204                  		MOV.L #00000004H, 08H[R0]
00000D9B                         L397:	; entry.split
00000D9B FB1A0008                		MOV.L #00000800H, R1
                                 ;     511   const spiffs_page_ix pages_per_scan = SPIFFS_CFG_LOG_PAGE_SZ(fs) * 8 / bits;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",511
00000D9F 06A1090102              		DIVU 08H[R0].L, R1
00000DA4 9189                    		MOV.W R1, 0EH[R0]
00000DA6                         L398:	; entry.split1
                                 ;     512 
                                 ;     513   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",513
00000DA6 3E0400                  		MOV.L #00000000H, 10H[R0]
00000DA9                         L399:	; entry.split2
                                 ;     514   spiffs_page_ix pix_offset = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",514
00000DA9 3D0A00                  		MOV.W #0000H, 14H[R0]
00000DAC 38rrrr               W  		BRA L659
00000DAF                         L400:	; bb
                                 ;     515 
                                 ;     516   // for each range of pages fitting into work memory
                                 ;     517   while (pix_offset < SPIFFS_PAGES_PER_BLOCK(fs) * fs->block_count) {
                                 ;     518     // set this flag to abort all checks and rescan the page range
                                 ;     519     u8_t restart = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",519
00000DAF 3C8700                  		MOV.B #00H, 17H[R0]
00000DB2                         L401:	; bb.split
                                 ;     520     memset(fs->work, 0, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",520
00000DB2 AF89                    		MOV.L 7CH[R0], R1
00000DB4 AA19                    		MOV.L 24H[R1], R1
00000DB6 FB3A0001                		MOV.L #00000100H, R3
00000DBA 6602                    		MOV.L #00000000H, R2
00000DBC 7F88                    		SSTR.B
00000DBE                         L402:	; bb.split3
                                 ;     521 
                                 ;     522     spiffs_block_ix cur_block = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",522
00000DBE 3D0C00                  		MOV.W #0000H, 18H[R0]
00000DC1 38rrrr               W  		BRA L564
00000DC4                         L403:	; bb49
                                 ;     523     // build consistency bitmap for id range traversing all blocks
                                 ;     524     while (!restart && cur_block < fs->block_count) {
                                 ;     525       CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_PROGRESS,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",525
00000DC4 AF89                    		MOV.L 7CH[R0], R1
00000DC6 AD11                    		MOV.L 50H[R1], R1
00000DC8 6101                    		CMP #00H, R1
00000DCA 20rr                    		BEQ L405
00000DCC                         L404:	; bb50
00000DCC AF89                    		MOV.L 7CH[R0], R1
00000DCE A89A                    		MOV.L 0CH[R1], R2
00000DD0 BB04                    		MOVU.W 18H[R0], R4
00000DD2 06CD0407                		MUL 0EH[R0].UW, R4
00000DD6 AD15                    		MOV.L 50H[R1], R5
00000DD8 BA83                    		MOVU.W 14H[R0], R3
00000DDA FDC82E                  		SHLL #08H, R2, R14
00000DDD 6C83                    		SHLL #08H, R3
00000DDF FC27E3                  		DIVU R14, R3
00000DE2 6C84                    		SHLL #08H, R4
00000DE4 FC27E4                  		DIVU R14, R4
00000DE7 FC2724                  		DIVU R2, R4
00000DEA 4B43                    		ADD R4, R3
00000DEC 6602                    		MOV.L #00000000H, R2
00000DEE 6621                    		MOV.L #00000002H, R1
00000DF0 EF24                    		MOV.L R2, R4
00000DF2 7F15                    		JSR R5
00000DF4                         L405:	; bb84.split
                                 ;     526           (pix_offset*256)/(SPIFFS_PAGES_PER_BLOCK(fs) * fs->block_count) +
                                 ;     527           ((((cur_block * pages_per_scan * 256)/ (SPIFFS_PAGES_PER_BLOCK(fs) * fs->block_count))) / fs->block_count),
                                 ;     528           0);
                                 ;     529       // traverse each page except for lookup pages
                                 ;     530       spiffs_page_ix cur_pix = SPIFFS_OBJ_LOOKUP_PAGES(fs) + SPIFFS_PAGES_PER_BLOCK(fs) * cur_block;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",530
00000DF4 9B01                    		MOV.W 18H[R0], R1
00000DF6 6C81                    		SHLL #08H, R1
00000DF8 7811                    		BSET #01H, R1
00000DFA 9309                    		MOV.W R1, 1AH[R0]
00000DFC 38rrrr               W  		BRA L555
00000DFF                         L406:	; bb90
                                 ;     531       while (!restart && cur_pix < SPIFFS_PAGES_PER_BLOCK(fs) * (cur_block+1)) {
                                 ;     532         //if ((cur_pix & 0xff) == 0)
                                 ;     533         //  SPIFFS_CHECK_DBG("PA: processing pix %08x, block %08x of pix %08x, block %08x\n",
                                 ;     534         //      cur_pix, cur_block, SPIFFS_PAGES_PER_BLOCK(fs) * fs->block_count, fs->block_count);
                                 ;     535 
                                 ;     536         // read header
                                 ;     537         spiffs_page_header p_hdr;
                                 ;     538         res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",538
00000DFF BB0C                    		MOVU.W 1AH[R0], R4
00000E01 AF89                    		MOV.L 7CH[R0], R1
00000E03 6080                    		SUB #08H, R0
00000E05 710224                  		ADD #24H, R0, R2
00000E08 A00A                    		MOV.L R2, 04H[R0]
00000E0A F80606                  		MOV.L #00000006H, [R0]
00000E0D 6C84                    		SHLL #08H, R4
00000E0F 7344000010              		ADD #00100000H, R4
00000E14 6603                    		MOV.L #00000000H, R3
00000E16 754215                  		MOV.L #00000015H, R2
00000E19 05rrrrrr             A  		BSR _spiffs_phys_rd
00000E1D 6280                    		ADD #08H, R0
00000E1F A101                    		MOV.L R1, 10H[R0]
00000E21                         L407:	; bb90.split
                                 ;     539             0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     540         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",540
00000E21 A901                    		MOV.L 10H[R0], R1
00000E23 69F1                    		SHLR #1FH, R1
00000E25 6101                    		CMP #00H, R1
00000E27 10                   S  		BEQ L409
00000E28                         L408:	; bb100
00000E28 E5000401                		MOV.L 10H[R0], 04H[R0]
00000E2C 38rrrr               W  		BRA L661
00000E2F                         L409:	; bb108.split
                                 ;     541 
                                 ;     542         u8_t within_range = (cur_pix >= pix_offset && cur_pix < pix_offset + pages_per_scan);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",542
00000E2F BB09                    		MOVU.W 1AH[R0], R1
00000E31 06C5010A                		CMP 14H[R0].UW, R1
00000E35 29rr                    		BLT L412
00000E37                         L410:	; bb115
00000E37 BA81                    		MOVU.W 14H[R0], R1
00000E39 06C90107                		ADD 0EH[R0].UW, R1
00000E3D BB0A                    		MOVU.W 1AH[R0], R2
00000E3F 4712                    		CMP R1, R2
00000E41 28rr                    		BGE L412
00000E43                         L411:	; bb125
00000E43 F80601                  		MOV.L #00000001H, [R0]
00000E46 08                   S  		BRA L413
00000E47                         L412:	; bb126
00000E47 F80600                  		MOV.L #00000000H, [R0]
00000E4A                         L413:	; bb127
00000E4A EC01                    		MOV.L [R0], R1
00000E4C C70123                  		MOV.B R1, 23H[R0]
00000E4F 668E                    		MOV.L #00000008H, R14
                                 ;     543         const u32_t pix_byte_ix = (cur_pix - pix_offset) / (8/bits);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",543
00000E51 06A1090E02              		DIVU 08H[R0].L, R14
00000E56 BB09                    		MOVU.W 1AH[R0], R1
00000E58 06C1010A                		SUB 14H[R0].UW, R1
00000E5C FC27E1                  		DIVU R14, R1
00000E5F A209                    		MOV.L R1, 24H[R0]
00000E61                         L414:	; bb127.split
                                 ;     544         const u8_t pix_bit_ix = (cur_pix & ((8/bits)-1)) * bits;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",544
00000E61 A881                    		MOV.L 08H[R0], R1
00000E63 6682                    		MOV.L #00000008H, R2
00000E65 FC2712                  		DIVU R1, R2
00000E68 6012                    		SUB #01H, R2
00000E6A 06D1020D                		AND 1AH[R0].UW, R2
00000E6E 4F12                    		MUL R1, R2
00000E70 C7022B                  		MOV.B R2, 2BH[R0]
00000E73                         L415:	; bb127.split4
                                 ;     545 
                                 ;     546         if (within_range &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",546
00000E73 590123                  		MOVU.B 23H[R0], R1
00000E76 6101                    		CMP #00H, R1
00000E78 21rr                    		BNE L417
00000E7A 2Err                 B  		BRA L419
00000E7C                         L416:	; bb150
00000E7C 661E                    		MOV.L #00000001H, R14
                                 ;     547             (p_hdr.flags & SPIFFS_PH_FLAG_DELET) && (p_hdr.flags & SPIFFS_PH_FLAG_USED) == 0) {
                                 ;     548           // used
                                 ;     549           fs->work[pix_byte_ix] |= (1<<(pix_bit_ix + 0));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",549
00000E7E 59012B                  		MOVU.B 2BH[R0], R1
00000E81 FD621E                  		SHLL R1, R14
00000E84 AF89                    		MOV.L 7CH[R0], R1
00000E86 AA19                    		MOV.L 24H[R1], R1
00000E88 AA0A                    		MOV.L 24H[R0], R2
00000E8A FF2F21                  		ADD R2, R1, R15
00000E8D 54FE                    		OR [R15].UB, R14
00000E8F FE012E                  		MOV.B R14, [R1,R2]
00000E92 2Err                 B  		BRA L425
00000E94                         L417:	; bb168
00000E94 F50720                  		BTST #07H, 20H[R0].B
00000E97 10                   S  		BEQ L419
00000E98                         L418:	; bb175
00000E98 F80601                  		MOV.L #00000001H, [R0]
00000E9B 08                   S  		BRA L420
00000E9C                         L419:	; bb176
00000E9C F80600                  		MOV.L #00000000H, [R0]
00000E9F                         L420:	; bb177
00000E9F EC01                    		MOV.L [R0], R1
00000EA1 6101                    		CMP #00H, R1
00000EA3 10                   S  		BEQ L423
00000EA4                         L421:	; bb181
00000EA4 F50020                  		BTST #00H, 20H[R0].B
00000EA7 18                   S  		BNE L423
00000EA8                         L422:	; bb188
00000EA8 F80601                  		MOV.L #00000001H, [R0]
00000EAB 08                   S  		BRA L424
00000EAC                         L423:	; bb189
00000EAC F80600                  		MOV.L #00000000H, [R0]
00000EAF                         L424:	; bb190
00000EAF EC01                    		MOV.L [R0], R1
00000EB1 6101                    		CMP #00H, R1
00000EB3 21rr                    		BNE L416
00000EB5                         L425:	; bb196
                                 ;     550         }
                                 ;     551         if ((p_hdr.flags & SPIFFS_PH_FLAG_DELET) &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",551
00000EB5 F50720                  		BTST #07H, 20H[R0].B
00000EB8 3Brrrr               W  		BNE L546
00000EBB 38rrrr               W  		BRA L548
00000EBE                         L426:	; bb198
                                 ;     552             (p_hdr.flags & SPIFFS_PH_FLAG_IXDELE) &&
                                 ;     553             (p_hdr.flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_USED)) == 0) {
                                 ;     554           // found non-deleted index
                                 ;     555           if (within_range) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",555
00000EBE 590123                  		MOVU.B 23H[R0], R1
00000EC1 6101                    		CMP #00H, R1
00000EC3 20rr                    		BEQ L428
00000EC5                         L427:	; bb199
                                 ;     556             fs->work[pix_byte_ix] |= (1<<(pix_bit_ix + 2));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",556
00000EC5 59012B                  		MOVU.B 2BH[R0], R1
00000EC8 6221                    		ADD #02H, R1
00000ECA 661E                    		MOV.L #00000001H, R14
00000ECC FD621E                  		SHLL R1, R14
00000ECF AF89                    		MOV.L 7CH[R0], R1
00000ED1 AA19                    		MOV.L 24H[R1], R1
00000ED3 AA0A                    		MOV.L 24H[R0], R2
00000ED5 FF2F21                  		ADD R2, R1, R15
00000ED8 54FE                    		OR [R15].UB, R14
00000EDA FE012E                  		MOV.B R14, [R1,R2]
00000EDD                         L428:	; bb218
                                 ;     557           }
                                 ;     558 
                                 ;     559           // load non-deleted index
                                 ;     560           res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",560
00000EDD AF89                    		MOV.L 7CH[R0], R1
00000EDF BB0C                    		MOVU.W 1AH[R0], R4
00000EE1 6080                    		SUB #08H, R0
00000EE3 E5100801                		MOV.L 20H[R1], 04H[R0]
00000EE7 F80A0001                		MOV.L #00000100H, [R0]
00000EEB 6C84                    		SHLL #08H, R4
00000EED 7344000010              		ADD #00100000H, R4
00000EF2 6603                    		MOV.L #00000000H, R3
00000EF4 754215                  		MOV.L #00000015H, R2
00000EF7 05rrrrrr             A  		BSR _spiffs_phys_rd
00000EFB 6280                    		ADD #08H, R0
00000EFD A101                    		MOV.L R1, 10H[R0]
00000EFF                         L429:	; bb218.split
                                 ;     561               0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), SPIFFS_CFG_LOG_PAGE_SZ(fs), fs->lu_work);
                                 ;     562           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",562
00000EFF A901                    		MOV.L 10H[R0], R1
00000F01 69F1                    		SHLR #1FH, R1
00000F03 6101                    		CMP #00H, R1
00000F05 10                   S  		BEQ L431
00000F06                         L430:	; bb230
00000F06 E5000401                		MOV.L 10H[R0], 04H[R0]
00000F0A 38rrrr               W  		BRA L661
00000F0D                         L431:	; bb238.split
                                 ;     563 
                                 ;     564           // traverse index for referenced pages
                                 ;     565           spiffs_page_ix *object_page_index;
                                 ;     566           spiffs_page_header *objix_p_hdr = (spiffs_page_header *)fs->lu_work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",566
00000F0D AF89                    		MOV.L 7CH[R0], R1
00000F0F E510080C                		MOV.L 20H[R1], 30H[R0]
00000F13                         L432:	; bb238.split5
                                 ;     567 
                                 ;     568           int entries;
                                 ;     569           int i;
                                 ;     570           spiffs_span_ix data_spix_offset;
                                 ;     571           if (p_hdr.span_ix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",571
00000F13 BB89                    		MOVU.W 1EH[R0], R1
00000F15 6101                    		CMP #00H, R1
00000F17 21rr                    		BNE L436
00000F19                         L433:	; bb244
                                 ;     572             // object header page index
                                 ;     573             entries = SPIFFS_OBJ_HDR_IX_LEN(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",573
00000F19 3E0D68                  		MOV.L #00000068H, 34H[R0]
00000F1C                         L434:	; bb244.split
                                 ;     574             data_spix_offset = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",574
00000F1C 3D8F00                  		MOV.W #0000H, 3EH[R0]
00000F1F                         L435:	; bb244.split6
                                 ;     575             object_page_index = (spiffs_page_ix *)((u8_t *)fs->lu_work + sizeof(spiffs_page_object_ix_header));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",575
00000F1F AF89                    		MOV.L 7CH[R0], R1
00000F21 AA11                    		MOV.L 20H[R1], R1
00000F23 711130                  		ADD #30H, R1
00000F26 A289                    		MOV.L R1, 2CH[R0]
00000F28 2Err                 B  		BRA L439
00000F2A                         L436:	; bb250
                                 ;     576           } else {
                                 ;     577             // object page index
                                 ;     578             entries = SPIFFS_OBJ_IX_LEN(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",578
00000F2A 3E0D7C                  		MOV.L #0000007CH, 34H[R0]
00000F2D                         L437:	; bb250.split
                                 ;     579             data_spix_offset = SPIFFS_OBJ_HDR_IX_LEN(fs) + SPIFFS_OBJ_IX_LEN(fs) * (p_hdr.span_ix - 1);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",579
00000F2D BB89                    		MOVU.W 1EH[R0], R1
00000F2F 75117C                  		MUL #7CH, R1
00000F32 7111EC                  		ADD #0FFFFFFECH, R1
00000F35 9789                    		MOV.W R1, 3EH[R0]
00000F37                         L438:	; bb250.split7
                                 ;     580             object_page_index = (spiffs_page_ix *)((u8_t *)fs->lu_work + sizeof(spiffs_page_object_ix));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",580
00000F37 AF89                    		MOV.L 7CH[R0], R1
00000F39 AA11                    		MOV.L 20H[R1], R1
00000F3B 6281                    		ADD #08H, R1
00000F3D A289                    		MOV.L R1, 2CH[R0]
00000F3F                         L439:	; bb269
                                 ;     581           }
                                 ;     582 
                                 ;     583           // for all entries in index
                                 ;     584           for (i = 0; !restart && i < entries; i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",584
00000F3F 3E0E00                  		MOV.L #00000000H, 38H[R0]
00000F42 38rrrr               W  		BRA L538
00000F45                         L440:	; bb270
                                 ;     585             spiffs_page_ix rpix = object_page_index[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",585
00000F45 AA89                    		MOV.L 2CH[R0], R1
00000F47 AB82                    		MOV.L 38H[R0], R2
00000F49 FE5211                  		MOV.W [R2,R1], R1
00000F4C D70120                  		MOV.W R1, 40H[R0]
00000F4F                         L441:	; bb270.split
                                 ;     586             u8_t rpix_within_range = rpix >= pix_offset && rpix < pix_offset + pages_per_scan;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",586
00000F4F 5D0120                  		MOVU.W 40H[R0], R1
00000F52 06C5010A                		CMP 14H[R0].UW, R1
00000F56 29rr                    		BLT L444
00000F58                         L442:	; bb281
00000F58 BA81                    		MOVU.W 14H[R0], R1
00000F5A 06C90107                		ADD 0EH[R0].UW, R1
00000F5E 5D0220                  		MOVU.W 40H[R0], R2
00000F61 4712                    		CMP R1, R2
00000F63 28rr                    		BGE L444
00000F65                         L443:	; bb291
00000F65 F80601                  		MOV.L #00000001H, [R0]
00000F68 08                   S  		BRA L445
00000F69                         L444:	; bb292
00000F69 F80600                  		MOV.L #00000000H, [R0]
00000F6C                         L445:	; bb293
00000F6C EC01                    		MOV.L [R0], R1
00000F6E C70143                  		MOV.B R1, 43H[R0]
                                 ;     587 
                                 ;     588             if ((rpix != (spiffs_page_ix)-1 && rpix > SPIFFS_MAX_PAGES(fs))
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",588
00000F71 5D0120                  		MOVU.W 40H[R0], R1
00000F74 7701FFFF00              		CMP #0FFFFH, R1
00000F79 3Brrrr               W  		BNE L525
00000F7C 38rrrr               W  		BRA L527
00000F7F                         L446:	; bb299
                                 ;     589                 || (rpix_within_range && SPIFFS_IS_LOOKUP_PAGE(fs, rpix))) {
                                 ;     590 
                                 ;     591               // bad reference
                                 ;     592               SPIFFS_CHECK_DBG("PA: pix %04x bad pix / LU referenced from page %04x\n",
                                 ;     593                   rpix, cur_pix);
                                 ;     594               // check for data page elsewhere
                                 ;     595               spiffs_page_ix data_pix;
                                 ;     596               res = spiffs_obj_lu_find_id_and_span(fs, objix_p_hdr->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",596
00000F7F BF8B                    		MOVU.W 3EH[R0], R3
00000F81 0689030E                		ADD 38H[R0].L, R3
00000F85 AB01                    		MOV.L 30H[R0], R1
00000F87 5C12                    		MOVU.W [R1], R2
00000F89 AF89                    		MOV.L 7CH[R0], R1
00000F8B 6040                    		SUB #04H, R0
00000F8D 710E48                  		ADD #48H, R0, R14
00000F90 E30E                    		MOV.L R14, [R0]
00000F92 5F33                    		MOVU.W R3, R3
00000F94 7622FF7F                		AND #7FFFH, R2
00000F98 6604                    		MOV.L #00000000H, R4
00000F9A 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00000F9E 6240                    		ADD #04H, R0
00000FA0 A101                    		MOV.L R1, 10H[R0]
00000FA2                         L447:	; bb299.split
                                 ;     597                   data_spix_offset + i, 0, &data_pix);
                                 ;     598               if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",598
00000FA2 A901                    		MOV.L 10H[R0], R1
00000FA4 7601EED8                		CMP #0FFFFD8EEH, R1
00000FA8 18                   S  		BNE L450
00000FA9                         L448:	; bb314
                                 ;     599                 res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",599
00000FA9 3E0400                  		MOV.L #00000000H, 10H[R0]
00000FAC                         L449:	; bb314.split
                                 ;     600                 data_pix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",600
00000FAC F9052200                		MOV.W #0000H, 44H[R0]
00000FB0                         L450:	; bb321
                                 ;     601               }
                                 ;     602               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",602
00000FB0 A901                    		MOV.L 10H[R0], R1
00000FB2 69F1                    		SHLR #1FH, R1
00000FB4 6101                    		CMP #00H, R1
00000FB6 10                   S  		BEQ L452
00000FB7                         L451:	; bb322
00000FB7 E5000401                		MOV.L 10H[R0], 04H[R0]
00000FBB 38rrrr               W  		BRA L661
00000FBE                         L452:	; bb331.split
                                 ;     603               if (data_pix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",603
00000FBE 5D0122                  		MOVU.W 44H[R0], R1
00000FC1 6101                    		CMP #00H, R1
00000FC3 21rr                    		BNE L459
00000FC5                         L453:	; bb332
                                 ;     604                 // if not, allocate free page
                                 ;     605                 spiffs_page_header new_ph;
                                 ;     606                 new_ph.flags = 0xff & ~(SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_FINAL);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",606
00000FC5 F9044AFC                		MOV.B #0FCH, 4AH[R0]
00000FC9                         L454:	; bb332.split
                                 ;     607                 new_ph.obj_id = objix_p_hdr->obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",607
00000FC9 AB01                    		MOV.L 30H[R0], R1
00000FCB 5C11                    		MOVU.W [R1], R1
00000FCD 7621FF7F                		AND #7FFFH, R1
00000FD1 D70123                  		MOV.W R1, 46H[R0]
00000FD4                         L455:	; bb332.split8
                                 ;     608                 new_ph.span_ix = data_spix_offset + i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",608
00000FD4 BF89                    		MOVU.W 3EH[R0], R1
00000FD6 0689010E                		ADD 38H[R0].L, R1
00000FDA D70124                  		MOV.W R1, 48H[R0]
00000FDD                         L456:	; bb332.split9
                                 ;     609                 res = spiffs_page_allocate_data(fs, new_ph.obj_id, &new_ph, 0, 0, 0, 1, &data_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",609
00000FDD 5D0223                  		MOVU.W 46H[R0], R2
00000FE0 AF89                    		MOV.L 7CH[R0], R1
00000FE2 7100F0                  		ADD #0FFFFFFF0H, R0
00000FE5 710354                  		ADD #54H, R0, R3
00000FE8 A08B                    		MOV.L R3, 0CH[R0]
00000FEA 3C0801                  		MOV.B #01H, 08H[R0]
00000FED 3E0100                  		MOV.L #00000000H, 04H[R0]
00000FF0 F80600                  		MOV.L #00000000H, [R0]
00000FF3 6604                    		MOV.L #00000000H, R4
00000FF5 710356                  		ADD #56H, R0, R3
00000FF8 05rrrrrr             A  		BSR _spiffs_page_allocate_data
00000FFC 710010                  		ADD #10H, R0
00000FFF A101                    		MOV.L R1, 10H[R0]
00001001                         L457:	; bb332.split10
                                 ;     610                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",610
00001001 A901                    		MOV.L 10H[R0], R1
00001003 69F1                    		SHLR #1FH, R1
00001005 6101                    		CMP #00H, R1
00001007 10                   S  		BEQ L459
00001008                         L458:	; bb353
00001008 E5000401                		MOV.L 10H[R0], 04H[R0]
0000100C 38rrrr               W  		BRA L661
0000100F                         L459:	; bb367
                                 ;     611                 SPIFFS_CHECK_DBG("PA: FIXUP: found no existing data page, created new @ %04x\n", data_pix);
                                 ;     612               }
                                 ;     613               // remap index
                                 ;     614               SPIFFS_CHECK_DBG("PA: FIXUP: rewriting index pix %04x\n", cur_pix);
                                 ;     615               res = spiffs_rewrite_index(fs, objix_p_hdr->obj_id | SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",615
0000100F BF8B                    		MOVU.W 3EH[R0], R3
00001011 0689030E                		ADD 38H[R0].L, R3
00001015 AB01                    		MOV.L 30H[R0], R1
00001017 5C12                    		MOVU.W [R1], R2
00001019 9B0D                    		MOV.W 1AH[R0], R5
0000101B 5D0422                  		MOVU.W 44H[R0], R4
0000101E AF89                    		MOV.L 7CH[R0], R1
00001020 6040                    		SUB #04H, R0
00001022 D305                    		MOV.W R5, [R0]
00001024 5F33                    		MOVU.W R3, R3
00001026 78F2                    		BSET #0FH, R2
00001028 39rrrr               W  		BSR __$spiffs_rewrite_index
0000102B 6240                    		ADD #04H, R0
0000102D A101                    		MOV.L R1, 10H[R0]
0000102F                         L460:	; bb367.split
                                 ;     616                   data_spix_offset + i, data_pix, cur_pix);
                                 ;     617               if (res <= _SPIFFS_ERR_CHECK_FIRST && res > _SPIFFS_ERR_CHECK_LAST) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",617
0000102F A901                    		MOV.L 10H[R0], R1
00001031 7601BED8                		CMP #0FFFFD8BEH, R1
00001035 29rr                    		BLT L466
00001037 2Err                 B  		BRA L468
00001039                         L461:	; bb386
                                 ;     618                 // index bad also, cannot mend this file
                                 ;     619                 SPIFFS_CHECK_DBG("PA: FIXUP: index bad %i, cannot mend - delete object\n", res);
                                 ;     620                 CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_BAD_FILE, objix_p_hdr->obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",620
00001039 5BEE                    		MOVU.B R14, R14
0000103B 610E                    		CMP #00H, R14
0000103D 20rr                    		BEQ L463
0000103F                         L462:	; bb387
0000103F ED0E0C                  		MOV.L 30H[R0], R14
00001042 5CE3                    		MOVU.W [R14], R3
00001044 ED0E1F                  		MOV.L 7CH[R0], R14
00001047 EDEE14                  		MOV.L 50H[R14], R14
0000104A 6604                    		MOV.L #00000000H, R4
0000104C 6662                    		MOV.L #00000006H, R2
0000104E 6621                    		MOV.L #00000002H, R1
00001050 7F1E                    		JSR R14
00001052                         L463:	; bb402.split
                                 ;     621                 // delete file
                                 ;     622                 res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",622
00001052 BB0A                    		MOVU.W 1AH[R0], R2
00001054 AF89                    		MOV.L 7CH[R0], R1
00001056 05rrrrrr             A  		BSR _spiffs_page_delete
0000105A A101                    		MOV.L R1, 10H[R0]
0000105C 2Err                 B  		BRA L470
0000105E                         L464:	; bb408
                                 ;     623               } else {
                                 ;     624                 CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_FIX_INDEX, objix_p_hdr->obj_id, objix_p_hdr->span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",624
0000105E 5BEE                    		MOVU.B R14, R14
00001060 610E                    		CMP #00H, R14
00001062 20rr                    		BEQ L470
00001064                         L465:	; bb409
00001064 ED0E0C                  		MOV.L 30H[R0], R14
00001067 5DE401                  		MOVU.W 02H[R14], R4
0000106A 5CE3                    		MOVU.W [R14], R3
0000106C ED0E1F                  		MOV.L 7CH[R0], R14
0000106F EDEE14                  		MOV.L 50H[R14], R14
00001072 6621                    		MOV.L #00000002H, R1
00001074 EF12                    		MOV.L R1, R2
00001076 7F1E                    		JSR R14
00001078 2Err                 B  		BRA L470
0000107A                         L466:	; bb432
0000107A ED0E04                  		MOV.L 10H[R0], R14
0000107D 760EBBD8                		CMP #0FFFFD8BBH, R14
00001081 29rr                    		BLT L468
00001083                         L467:	; bb436
00001083 F80601                  		MOV.L #00000001H, [R0]
00001086 08                   S  		BRA L469
00001087                         L468:	; bb437
00001087 F80600                  		MOV.L #00000000H, [R0]
0000108A                         L469:	; bb438
0000108A ED0E1F                  		MOV.L 7CH[R0], R14
0000108D EDEE14                  		MOV.L 50H[R14], R14
00001090 610E                    		CMP #00H, R14
00001092 FCDBE1                  		SCNE.L R14
00001095 EC01                    		MOV.L [R0], R1
00001097 6101                    		CMP #00H, R1
00001099 21rr                    		BNE L461
0000109B 2Err                 B  		BRA L464
0000109D                         L470:	; bb445
                                 ;     625               }
                                 ;     626               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",626
0000109D A901                    		MOV.L 10H[R0], R1
0000109F 69F1                    		SHLR #1FH, R1
000010A1 6101                    		CMP #00H, R1
000010A3 10                   S  		BEQ L472
000010A4                         L471:	; bb446
000010A4 E5000401                		MOV.L 10H[R0], 04H[R0]
000010A8 38rrrr               W  		BRA L661
000010AB                         L472:	; bb454.split
                                 ;     627               restart = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",627
000010AB 3C8701                  		MOV.B #01H, 17H[R0]
000010AE 38rrrr               W  		BRA L537
000010B1                         L473:	; bb456
                                 ;     628 
                                 ;     629             } else if (rpix_within_range) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",629
000010B1 590143                  		MOVU.B 43H[R0], R1
000010B4 6101                    		CMP #00H, R1
000010B6 3Arrrr               W  		BEQ L537
000010B9                         L474:	; bb457
                                 ;     630 
                                 ;     631               // valid reference
                                 ;     632               // read referenced page header
                                 ;     633               spiffs_page_header rp_hdr;
                                 ;     634               res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",634
000010B9 5D0420                  		MOVU.W 40H[R0], R4
000010BC AF89                    		MOV.L 7CH[R0], R1
000010BE 6080                    		SUB #08H, R0
000010C0 710254                  		ADD #54H, R0, R2
000010C3 A00A                    		MOV.L R2, 04H[R0]
000010C5 F80606                  		MOV.L #00000006H, [R0]
000010C8 6C84                    		SHLL #08H, R4
000010CA 7344000010              		ADD #00100000H, R4
000010CF 6603                    		MOV.L #00000000H, R3
000010D1 754215                  		MOV.L #00000015H, R2
000010D4 05rrrrrr             A  		BSR _spiffs_phys_rd
000010D8 6280                    		ADD #08H, R0
000010DA A101                    		MOV.L R1, 10H[R0]
000010DC                         L475:	; bb457.split
                                 ;     635                   0, SPIFFS_PAGE_TO_PADDR(fs, rpix), sizeof(spiffs_page_header), (u8_t*)&rp_hdr);
                                 ;     636               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",636
000010DC A901                    		MOV.L 10H[R0], R1
000010DE 69F1                    		SHLR #1FH, R1
000010E0 6101                    		CMP #00H, R1
000010E2 10                   S  		BEQ L477
000010E3                         L476:	; bb467
000010E3 E5000401                		MOV.L 10H[R0], 04H[R0]
000010E7 38rrrr               W  		BRA L661
000010EA                         L477:	; bb476.split
                                 ;     637 
                                 ;     638               // cross reference page header check
                                 ;     639               if (rp_hdr.obj_id != (p_hdr.obj_id & ~SPIFFS_OBJ_ID_IX_FLAG) ||
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",639
000010EA BB81                    		MOVU.W 1CH[R0], R1
000010EC 7621FF7F                		AND #7FFFH, R1
000010F0 5D0226                  		MOVU.W 4CH[R0], R2
000010F3 4712                    		CMP R1, R2
000010F5 3Brrrr               W  		BNE L518
000010F8 38rrrr               W  		BRA L517
000010FB                         L478:	; bb477
                                 ;     640                   rp_hdr.span_ix != data_spix_offset + i ||
                                 ;     641                   (rp_hdr.flags & (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_USED)) !=
                                 ;     642                       (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_INDEX)) {
                                 ;     643                SPIFFS_CHECK_DBG("PA: pix %04x has inconsistent page header ix id/span:%04x/%04x, ref id/span:%04x/%04x flags:%02x\n",
                                 ;     644                     rpix, p_hdr.obj_id & ~SPIFFS_OBJ_ID_IX_FLAG, data_spix_offset + i,
                                 ;     645                     rp_hdr.obj_id, rp_hdr.span_ix, rp_hdr.flags);
                                 ;     646                // try finding correct page
                                 ;     647                spiffs_page_ix data_pix;
                                 ;     648                res = spiffs_obj_lu_find_id_and_span(fs, p_hdr.obj_id & ~SPIFFS_OBJ_ID_IX_FLAG,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",648
000010FB BF8B                    		MOVU.W 3EH[R0], R3
000010FD 0689030E                		ADD 38H[R0].L, R3
00001101 5D0420                  		MOVU.W 40H[R0], R4
00001104 BB82                    		MOVU.W 1CH[R0], R2
00001106 AF89                    		MOV.L 7CH[R0], R1
00001108 6040                    		SUB #04H, R0
0000110A 710E56                  		ADD #56H, R0, R14
0000110D E30E                    		MOV.L R14, [R0]
0000110F 7622FF7F                		AND #7FFFH, R2
00001113 5F33                    		MOVU.W R3, R3
00001115 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
00001119 6240                    		ADD #04H, R0
0000111B A101                    		MOV.L R1, 10H[R0]
0000111D                         L479:	; bb477.split
                                 ;     649                    data_spix_offset + i, rpix, &data_pix);
                                 ;     650                if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",650
0000111D A901                    		MOV.L 10H[R0], R1
0000111F 7601EED8                		CMP #0FFFFD8EEH, R1
00001123 18                   S  		BNE L482
00001124                         L480:	; bb492
                                 ;     651                  res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",651
00001124 3E0400                  		MOV.L #00000000H, 10H[R0]
00001127                         L481:	; bb492.split
                                 ;     652                  data_pix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",652
00001127 F9052900                		MOV.W #0000H, 52H[R0]
0000112B                         L482:	; bb499
                                 ;     653                }
                                 ;     654                SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",654
0000112B A901                    		MOV.L 10H[R0], R1
0000112D 69F1                    		SHLR #1FH, R1
0000112F 6101                    		CMP #00H, R1
00001131 10                   S  		BEQ L484
00001132                         L483:	; bb500
00001132 E5000401                		MOV.L 10H[R0], 04H[R0]
00001136 38rrrr               W  		BRA L661
00001139                         L484:	; bb509.split
                                 ;     655                if (data_pix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",655
00001139 5D0129                  		MOVU.W 52H[R0], R1
0000113C 6101                    		CMP #00H, R1
0000113E AF89                    		MOV.L 7CH[R0], R1
00001140 21rr                    		BNE L490
00001142                         L485:	; bb512
                                 ;     656                  // not found, this index is badly borked
                                 ;     657                  SPIFFS_CHECK_DBG("PA: FIXUP: index bad, delete object id %04x\n", p_hdr.obj_id);
                                 ;     658                  CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr.obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",658
00001142 AD11                    		MOV.L 50H[R1], R1
00001144 6101                    		CMP #00H, R1
00001146 20rr                    		BEQ L487
00001148                         L486:	; bb513
00001148 AF89                    		MOV.L 7CH[R0], R1
0000114A AD15                    		MOV.L 50H[R1], R5
0000114C BB83                    		MOVU.W 1CH[R0], R3
0000114E 6604                    		MOV.L #00000000H, R4
00001150 6662                    		MOV.L #00000006H, R2
00001152 6621                    		MOV.L #00000002H, R1
00001154 7F15                    		JSR R5
00001156                         L487:	; bb527.split
                                 ;     659                  res = spiffs_delete_obj_lazy(fs, p_hdr.obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",659
00001156 BB82                    		MOVU.W 1CH[R0], R2
00001158 AF89                    		MOV.L 7CH[R0], R1
0000115A 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
0000115D A101                    		MOV.L R1, 10H[R0]
0000115F                         L488:	; bb527.split11
                                 ;     660                  SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",660
0000115F A901                    		MOV.L 10H[R0], R1
00001161 69F1                    		SHLR #1FH, R1
00001163 6101                    		CMP #00H, R1
00001165 3Arrrr               W  		BEQ L554
00001168                         L489:	; bb534
00001168 E5000401                		MOV.L 10H[R0], 04H[R0]
0000116C 38rrrr               W  		BRA L661
0000116F                         L490:	; bb544
                                 ;     661                  break;
                                 ;     662                } else {
                                 ;     663                  // found it, so rewrite index
                                 ;     664                  SPIFFS_CHECK_DBG("PA: FIXUP: found correct data pix %04x, rewrite ix pix %04x id %04x\n",
                                 ;     665                      data_pix, cur_pix, p_hdr.obj_id);
                                 ;     666                  res = spiffs_rewrite_index(fs, p_hdr.obj_id, data_spix_offset + i, data_pix, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",666
0000116F BF8B                    		MOVU.W 3EH[R0], R3
00001171 0689030E                		ADD 38H[R0].L, R3
00001175 9B0D                    		MOV.W 1AH[R0], R5
00001177 5D0429                  		MOVU.W 52H[R0], R4
0000117A BB82                    		MOVU.W 1CH[R0], R2
0000117C 6040                    		SUB #04H, R0
0000117E D305                    		MOV.W R5, [R0]
00001180 5F33                    		MOVU.W R3, R3
00001182 39rrrr               W  		BSR __$spiffs_rewrite_index
00001185 6240                    		ADD #04H, R0
00001187 A101                    		MOV.L R1, 10H[R0]
00001189                         L491:	; bb544.split
                                 ;     667                  if (res <= _SPIFFS_ERR_CHECK_FIRST && res > _SPIFFS_ERR_CHECK_LAST) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",667
00001189 A901                    		MOV.L 10H[R0], R1
0000118B 7601BED8                		CMP #0FFFFD8BEH, R1
0000118F 29rr                    		BLT L497
00001191 2Err                 B  		BRA L499
00001193                         L492:	; bb559
                                 ;     668                    // index bad also, cannot mend this file
                                 ;     669                    SPIFFS_CHECK_DBG("PA: FIXUP: index bad %i, cannot mend!\n", res);
                                 ;     670                    CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr.obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",670
00001193 5BEE                    		MOVU.B R14, R14
00001195 610E                    		CMP #00H, R14
00001197 20rr                    		BEQ L494
00001199                         L493:	; bb560
00001199 ED0E1F                  		MOV.L 7CH[R0], R14
0000119C EDEE14                  		MOV.L 50H[R14], R14
0000119F BB83                    		MOVU.W 1CH[R0], R3
000011A1 6604                    		MOV.L #00000000H, R4
000011A3 6662                    		MOV.L #00000006H, R2
000011A5 6621                    		MOV.L #00000002H, R1
000011A7 7F1E                    		JSR R14
000011A9                         L494:	; bb574.split
                                 ;     671                    res = spiffs_delete_obj_lazy(fs, p_hdr.obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",671
000011A9 BB82                    		MOVU.W 1CH[R0], R2
000011AB AF89                    		MOV.L 7CH[R0], R1
000011AD 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
000011B0 A101                    		MOV.L R1, 10H[R0]
000011B2 2Err                 B  		BRA L501
000011B4                         L495:	; bb581
                                 ;     672                  } else {
                                 ;     673                    CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_FIX_INDEX, p_hdr.obj_id, p_hdr.span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",673
000011B4 5BEE                    		MOVU.B R14, R14
000011B6 610E                    		CMP #00H, R14
000011B8 20rr                    		BEQ L501
000011BA                         L496:	; bb582
000011BA ED0E1F                  		MOV.L 7CH[R0], R14
000011BD EDEE14                  		MOV.L 50H[R14], R14
000011C0 BB8C                    		MOVU.W 1EH[R0], R4
000011C2 BB83                    		MOVU.W 1CH[R0], R3
000011C4 6621                    		MOV.L #00000002H, R1
000011C6 EF12                    		MOV.L R1, R2
000011C8 7F1E                    		JSR R14
000011CA 2Err                 B  		BRA L501
000011CC                         L497:	; bb603
000011CC ED0E04                  		MOV.L 10H[R0], R14
000011CF 760EBBD8                		CMP #0FFFFD8BBH, R14
000011D3 29rr                    		BLT L499
000011D5                         L498:	; bb607
000011D5 F80601                  		MOV.L #00000001H, [R0]
000011D8 08                   S  		BRA L500
000011D9                         L499:	; bb608
000011D9 F80600                  		MOV.L #00000000H, [R0]
000011DC                         L500:	; bb609
000011DC ED0E1F                  		MOV.L 7CH[R0], R14
000011DF EDEE14                  		MOV.L 50H[R14], R14
000011E2 610E                    		CMP #00H, R14
000011E4 FCDBE1                  		SCNE.L R14
000011E7 EC01                    		MOV.L [R0], R1
000011E9 6101                    		CMP #00H, R1
000011EB 21rr                    		BNE L492
000011ED 2Err                 B  		BRA L495
000011EF                         L501:	; bb616
                                 ;     674                  }
                                 ;     675                  SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",675
000011EF A901                    		MOV.L 10H[R0], R1
000011F1 69F1                    		SHLR #1FH, R1
000011F3 6101                    		CMP #00H, R1
000011F5 10                   S  		BEQ L503
000011F6                         L502:	; bb617
000011F6 E5000401                		MOV.L 10H[R0], 04H[R0]
000011FA 38rrrr               W  		BRA L661
000011FD                         L503:	; bb625.split
                                 ;     676                  restart = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",676
000011FD 3C8701                  		MOV.B #01H, 17H[R0]
00001200 38rrrr               W  		BRA L537
00001203                         L504:	; bb632
                                 ;     677                }
                                 ;     678               }
                                 ;     679               else {
                                 ;     680                 // mark rpix as referenced
                                 ;     681                 const u32_t rpix_byte_ix = (rpix - pix_offset) / (8/bits);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",681
00001203 5D0120                  		MOVU.W 40H[R0], R1
00001206 06C1010A                		SUB 14H[R0].UW, R1
0000120A 668E                    		MOV.L #00000008H, R14
0000120C 06A1090E02              		DIVU 08H[R0].L, R14
00001211 FC27E1                  		DIVU R14, R1
00001214 A509                    		MOV.L R1, 54H[R0]
00001216                         L505:	; bb632.split
                                 ;     682                 const u8_t rpix_bit_ix = (rpix & ((8/bits)-1)) * bits;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",682
00001216 A881                    		MOV.L 08H[R0], R1
00001218 6682                    		MOV.L #00000008H, R2
0000121A FC2712                  		DIVU R1, R2
0000121D 6012                    		SUB #01H, R2
0000121F 06D10220                		AND 40H[R0].UW, R2
00001223 4F12                    		MUL R1, R2
00001225 C7025B                  		MOV.B R2, 5BH[R0]
00001228                         L506:	; bb632.split12
                                 ;     683                 if (fs->work[rpix_byte_ix] & (1<<(rpix_bit_ix + 1))) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",683
00001228 AF89                    		MOV.L 7CH[R0], R1
0000122A AA19                    		MOV.L 24H[R1], R1
0000122C AD0A                    		MOV.L 54H[R0], R2
0000122E FEC12E                  		MOVU.B [R1,R2], R14
00001231 59015B                  		MOVU.B 5BH[R0], R1
00001234 6211                    		ADD #01H, R1
00001236 FC6BE1                  		BTST R1, R14
00001239 20rr                    		BEQ L516
0000123B                         L507:	; bb653
                                 ;     684                   SPIFFS_CHECK_DBG("PA: pix %04x multiple referenced from page %04x\n",
                                 ;     685                       rpix, cur_pix);
                                 ;     686                   // Here, we should have fixed all broken references - getting this means there
                                 ;     687                   // must be multiple files with same object id. Only solution is to delete
                                 ;     688                   // the object which is referring to this page
                                 ;     689                   SPIFFS_CHECK_DBG("PA: FIXUP: removing object %04x and page %04x\n",
                                 ;     690                       p_hdr.obj_id, cur_pix);
                                 ;     691                   CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr.obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",691
0000123B AF89                    		MOV.L 7CH[R0], R1
0000123D AD11                    		MOV.L 50H[R1], R1
0000123F 6101                    		CMP #00H, R1
00001241 20rr                    		BEQ L509
00001243                         L508:	; bb654
00001243 AF89                    		MOV.L 7CH[R0], R1
00001245 AD15                    		MOV.L 50H[R1], R5
00001247 BB83                    		MOVU.W 1CH[R0], R3
00001249 6604                    		MOV.L #00000000H, R4
0000124B 6662                    		MOV.L #00000006H, R2
0000124D 6621                    		MOV.L #00000002H, R1
0000124F 7F15                    		JSR R5
00001251                         L509:	; bb668.split
                                 ;     692                   res = spiffs_delete_obj_lazy(fs, p_hdr.obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",692
00001251 BB82                    		MOVU.W 1CH[R0], R2
00001253 AF89                    		MOV.L 7CH[R0], R1
00001255 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
00001258 A101                    		MOV.L R1, 10H[R0]
0000125A                         L510:	; bb668.split13
                                 ;     693                   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",693
0000125A A901                    		MOV.L 10H[R0], R1
0000125C 69F1                    		SHLR #1FH, R1
0000125E 6101                    		CMP #00H, R1
00001260 10                   S  		BEQ L512
00001261                         L511:	; bb675
00001261 E5000401                		MOV.L 10H[R0], 04H[R0]
00001265 38rrrr               W  		BRA L661
00001268                         L512:	; bb683.split
                                 ;     694                   // extra precaution, delete this page also
                                 ;     695                   res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",695
00001268 BB0A                    		MOVU.W 1AH[R0], R2
0000126A AF89                    		MOV.L 7CH[R0], R1
0000126C 05rrrrrr             A  		BSR _spiffs_page_delete
00001270 A101                    		MOV.L R1, 10H[R0]
00001272                         L513:	; bb683.split14
                                 ;     696                   SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",696
00001272 A901                    		MOV.L 10H[R0], R1
00001274 69F1                    		SHLR #1FH, R1
00001276 6101                    		CMP #00H, R1
00001278 10                   S  		BEQ L515
00001279                         L514:	; bb689
00001279 E5000401                		MOV.L 10H[R0], 04H[R0]
0000127D 38rrrr               W  		BRA L661
00001280                         L515:	; bb697.split
                                 ;     697                   restart = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",697
00001280 3C8701                  		MOV.B #01H, 17H[R0]
00001283                         L516:	; bb713
                                 ;     698                 }
                                 ;     699                 fs->work[rpix_byte_ix] |= (1<<(rpix_bit_ix + 1));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",699
00001283 59015B                  		MOVU.B 5BH[R0], R1
00001286 6211                    		ADD #01H, R1
00001288 661E                    		MOV.L #00000001H, R14
0000128A FD621E                  		SHLL R1, R14
0000128D AF89                    		MOV.L 7CH[R0], R1
0000128F AA19                    		MOV.L 24H[R1], R1
00001291 AD0A                    		MOV.L 54H[R0], R2
00001293 FF2F21                  		ADD R2, R1, R15
00001296 54FE                    		OR [R15].UB, R14
00001298 FE012E                  		MOV.B R14, [R1,R2]
0000129B 2Err                 B  		BRA L537
0000129D                         L517:	; bb736
0000129D BF89                    		MOVU.W 3EH[R0], R1
0000129F 0689010E                		ADD 38H[R0].L, R1
000012A3 5D0227                  		MOVU.W 4EH[R0], R2
000012A6 4712                    		CMP R1, R2
000012A8 10                   S  		BEQ L519
000012A9                         L518:	; bb746
000012A9 F80601                  		MOV.L #00000001H, [R0]
000012AC 08                   S  		BRA L520
000012AD                         L519:	; bb747
000012AD F80600                  		MOV.L #00000000H, [R0]
000012B0                         L520:	; bb748
000012B0 EC01                    		MOV.L [R0], R1
000012B2 6101                    		CMP #00H, R1
000012B4 21rr                    		BNE L522
000012B6                         L521:	; bb752
000012B6 754E85                  		MOV.L #00000085H, R14
000012B9 510E50                  		AND 50H[R0].UB, R14
000012BC 755E84                  		CMP #84H, R14
000012BF 10                   S  		BEQ L523
000012C0                         L522:	; bb759
000012C0 F80601                  		MOV.L #00000001H, [R0]
000012C3 08                   S  		BRA L524
000012C4                         L523:	; bb760
000012C4 F80600                  		MOV.L #00000000H, [R0]
000012C7                         L524:	; bb761
000012C7 EC01                    		MOV.L [R0], R1
000012C9 6101                    		CMP #00H, R1
000012CB 3Brrrr               W  		BNE L478
000012CE 38rrrr               W  		BRA L504
000012D1                         L525:	; bb777
000012D1 5D0120                  		MOVU.W 40H[R0], R1
000012D4 76010170                		CMP #7001H, R1
000012D8 29rr                    		BLT L527
000012DA                         L526:	; bb782
000012DA F80601                  		MOV.L #00000001H, [R0]
000012DD 08                   S  		BRA L528
000012DE                         L527:	; bb783
000012DE F80600                  		MOV.L #00000000H, [R0]
000012E1                         L528:	; bb784
000012E1 EC01                    		MOV.L [R0], R1
000012E3 6101                    		CMP #00H, R1
000012E5 21rr                    		BNE L534
000012E7                         L529:	; bb788
000012E7 590143                  		MOVU.B 43H[R0], R1
000012EA 6101                    		CMP #00H, R1
000012EC 20rr                    		BEQ L532
000012EE                         L530:	; bb793
000012EE 590140                  		MOVU.B 40H[R0], R1
000012F1 6111                    		CMP #01H, R1
000012F3 24rr                    		BGTU L532
000012F5                         L531:	; bb799
000012F5 F80601                  		MOV.L #00000001H, [R0]
000012F8 08                   S  		BRA L533
000012F9                         L532:	; bb800
000012F9 F80600                  		MOV.L #00000000H, [R0]
000012FC                         L533:	; bb801
000012FC EC01                    		MOV.L [R0], R1
000012FE 6101                    		CMP #00H, R1
00001300 10                   S  		BEQ L535
00001301                         L534:	; bb805
00001301 F80601                  		MOV.L #00000001H, [R0]
00001304 08                   S  		BRA L536
00001305                         L535:	; bb806
00001305 F80600                  		MOV.L #00000000H, [R0]
00001308                         L536:	; bb807
00001308 EC01                    		MOV.L [R0], R1
0000130A 6101                    		CMP #00H, R1
0000130C 3Brrrr               W  		BNE L446
0000130F 38rrrr               W  		BRA L473
00001312                         L537:	; bb812
00001312 AB81                    		MOV.L 38H[R0], R1
00001314 6211                    		ADD #01H, R1
00001316 A381                    		MOV.L R1, 38H[R0]
00001318                         L538:	; bb815
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",584
00001318 B589                    		MOVU.B 17H[R0], R1
0000131A 6101                    		CMP #00H, R1
0000131C 10                   S  		BEQ L540
0000131D                         L539:	; bb820
0000131D F80600                  		MOV.L #00000000H, [R0]
00001320 08                   S  		BRA L541
00001321                         L540:	; bb821
00001321 F80601                  		MOV.L #00000001H, [R0]
00001324                         L541:	; bb822
00001324 EC01                    		MOV.L [R0], R1
00001326 6101                    		CMP #00H, R1
00001328 20rr                    		BEQ L544
0000132A                         L542:	; bb825
0000132A AB81                    		MOV.L 38H[R0], R1
0000132C 0685010D                		CMP 34H[R0].L, R1
00001330 28rr                    		BGE L544
00001332                         L543:	; bb830
00001332 F80601                  		MOV.L #00000001H, [R0]
00001335 08                   S  		BRA L545
00001336                         L544:	; bb831
00001336 F80600                  		MOV.L #00000000H, [R0]
00001339                         L545:	; bb832
00001339 EC01                    		MOV.L [R0], R1
0000133B 6101                    		CMP #00H, R1
0000133D 3Brrrr               W  		BNE L440
00001340 2Err                 B  		BRA L554
00001342                         L546:	; bb845
00001342 F50620                  		BTST #06H, 20H[R0].B
00001345 10                   S  		BEQ L548
00001346                         L547:	; bb852
00001346 F80601                  		MOV.L #00000001H, [R0]
00001349 08                   S  		BRA L549
0000134A                         L548:	; bb853
0000134A F80600                  		MOV.L #00000000H, [R0]
0000134D                         L549:	; bb854
0000134D EC01                    		MOV.L [R0], R1
0000134F 6101                    		CMP #00H, R1
00001351 20rr                    		BEQ L552
00001353                         L550:	; bb858
00001353 665E                    		MOV.L #00000005H, R14
00001355 FC310E20                		TST 20H[R0].UB, R14
00001359 18                   S  		BNE L552
0000135A                         L551:	; bb865
0000135A F80601                  		MOV.L #00000001H, [R0]
0000135D 08                   S  		BRA L553
0000135E                         L552:	; bb866
0000135E F80600                  		MOV.L #00000000H, [R0]
00001361                         L553:	; bb867
00001361 EC01                    		MOV.L [R0], R1
00001363 6101                    		CMP #00H, R1
00001365 3Brrrr               W  		BNE L426
00001368                         L554:	; bb872
                                 ;     700               }
                                 ;     701             }
                                 ;     702           } // for all index entries
                                 ;     703         } // found index
                                 ;     704 
                                 ;     705         // next page
                                 ;     706         cur_pix++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",706
00001368 9B09                    		MOV.W 1AH[R0], R1
0000136A 6211                    		ADD #01H, R1
0000136C 9309                    		MOV.W R1, 1AH[R0]
0000136E                         L555:	; bb875
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",531
0000136E B589                    		MOVU.B 17H[R0], R1
00001370 6101                    		CMP #00H, R1
00001372 10                   S  		BEQ L557
00001373                         L556:	; bb880
00001373 F80600                  		MOV.L #00000000H, [R0]
00001376 08                   S  		BRA L558
00001377                         L557:	; bb881
00001377 F80601                  		MOV.L #00000001H, [R0]
0000137A                         L558:	; bb882
0000137A EC01                    		MOV.L [R0], R1
0000137C 6101                    		CMP #00H, R1
0000137E 20rr                    		BEQ L561
00001380                         L559:	; bb885
00001380 BB01                    		MOVU.W 18H[R0], R1
00001382 6211                    		ADD #01H, R1
00001384 6C81                    		SHLL #08H, R1
00001386 BB0A                    		MOVU.W 1AH[R0], R2
00001388 4712                    		CMP R1, R2
0000138A 28rr                    		BGE L561
0000138C                         L560:	; bb894
0000138C F80601                  		MOV.L #00000001H, [R0]
0000138F 08                   S  		BRA L562
00001390                         L561:	; bb895
00001390 F80600                  		MOV.L #00000000H, [R0]
00001393                         L562:	; bb896
00001393 EC01                    		MOV.L [R0], R1
00001395 6101                    		CMP #00H, R1
00001397 3Brrrr               W  		BNE L406
0000139A                         L563:	; bb901
                                 ;     707       }
                                 ;     708       // next block
                                 ;     709       cur_block++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",709
0000139A 9B01                    		MOV.W 18H[R0], R1
0000139C 6211                    		ADD #01H, R1
0000139E 9301                    		MOV.W R1, 18H[R0]
000013A0                         L564:	; bb904
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",524
000013A0 B589                    		MOVU.B 17H[R0], R1
000013A2 6101                    		CMP #00H, R1
000013A4 10                   S  		BEQ L566
000013A5                         L565:	; bb909
000013A5 F80600                  		MOV.L #00000000H, [R0]
000013A8 08                   S  		BRA L567
000013A9                         L566:	; bb910
000013A9 F80601                  		MOV.L #00000001H, [R0]
000013AC                         L567:	; bb911
000013AC EC01                    		MOV.L [R0], R1
000013AE 6101                    		CMP #00H, R1
000013B0 20rr                    		BEQ L570
000013B2                         L568:	; bb914
000013B2 AF89                    		MOV.L 7CH[R0], R1
000013B4 BB02                    		MOVU.W 18H[R0], R2
000013B6 06851203                		CMP 0CH[R1].L, R2
000013BA 22rr                    		BGEU L570
000013BC                         L569:	; bb922
000013BC F80601                  		MOV.L #00000001H, [R0]
000013BF 08                   S  		BRA L571
000013C0                         L570:	; bb923
000013C0 F80600                  		MOV.L #00000000H, [R0]
000013C3                         L571:	; bb924
000013C3 EC01                    		MOV.L [R0], R1
000013C5 6101                    		CMP #00H, R1
000013C7 3Brrrr               W  		BNE L403
000013CA                         L572:	; bb930
                                 ;     710     }
                                 ;     711     // check consistency bitmap
                                 ;     712     if (!restart) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",712
000013CA B589                    		MOVU.B 17H[R0], R1
000013CC 6101                    		CMP #00H, R1
000013CE 3Brrrr               W  		BNE L651
000013D1 38rrrr               W  		BRA L652
000013D4                         L573:	; bb931
                                 ;     713       spiffs_page_ix objix_pix;
                                 ;     714       spiffs_page_ix rpix;
                                 ;     715 
                                 ;     716       u32_t byte_ix;
                                 ;     717       u8_t bit_ix;
                                 ;     718       for (byte_ix = 0; !restart && byte_ix < SPIFFS_CFG_LOG_PAGE_SZ(fs); byte_ix++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",718
000013D4 3E8800                  		MOV.L #00000000H, 60H[R0]
000013D7 38rrrr               W  		BRA L643
000013DA                         L574:	; bb932
                                 ;     719         for (bit_ix = 0; !restart && bit_ix < 8/bits; bit_ix ++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",719
000013DA F9046600                		MOV.B #00H, 66H[R0]
000013DE 38rrrr               W  		BRA L634
000013E1                         L575:	; bb933
                                 ;     720           u8_t bitmask = (fs->work[byte_ix] >> (bit_ix * bits)) & 0x7;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",720
000013E1 AF89                    		MOV.L 7CH[R0], R1
000013E3 AA19                    		MOV.L 24H[R1], R1
000013E5 AE02                    		MOV.L 60H[R0], R2
000013E7 FEC121                  		MOVU.B [R1,R2], R1
000013EA 590266                  		MOVU.B 66H[R0], R2
000013ED 068D0202                		MUL 08H[R0].L, R2
000013F1 FD6021                  		SHLR R2, R1
000013F4 6471                    		AND #07H, R1
000013F6 C70167                  		MOV.B R1, 67H[R0]
000013F9                         L576:	; bb933.split
000013F9 6681                    		MOV.L #00000008H, R1
                                 ;     721           spiffs_page_ix cur_pix = pix_offset + byte_ix * (8/bits) + bit_ix;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",721
000013FB 06A1090102              		DIVU 08H[R0].L, R1
00001400 068D0118                		MUL 60H[R0].L, R1
00001404 06C9010A                		ADD 14H[R0].UW, R1
00001408 490166                  		ADD 66H[R0].UB, R1
0000140B D70134                  		MOV.W R1, 68H[R0]
0000140E                         L577:	; bb933.split15
                                 ;     722 
                                 ;     723           // 000 ok - free, unreferenced, not index
                                 ;     724 
                                 ;     725           if (bitmask == 0x1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",725
0000140E 590167                  		MOVU.B 67H[R0], R1
00001411 6111                    		CMP #01H, R1
00001413 3Brrrr               W  		BNE L633
00001416                         L578:	; bb960
                                 ;     726 
                                 ;     727             // 001
                                 ;     728             SPIFFS_CHECK_DBG("PA: pix %04x USED, UNREFERENCED, not index\n", cur_pix);
                                 ;     729 
                                 ;     730             u8_t rewrite_ix_to_this = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",730
00001416 F9046A00                		MOV.B #00H, 6AH[R0]
0000141A                         L579:	; bb960.split
                                 ;     731             u8_t delete_page = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",731
0000141A F9046B00                		MOV.B #00H, 6BH[R0]
0000141E                         L580:	; bb960.split16
                                 ;     732             // check corresponding object index entry
                                 ;     733             spiffs_page_header p_hdr;
                                 ;     734             res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",734
0000141E 5D0434                  		MOVU.W 68H[R0], R4
00001421 AF89                    		MOV.L 7CH[R0], R1
00001423 6080                    		SUB #08H, R0
00001425 710274                  		ADD #74H, R0, R2
00001428 A00A                    		MOV.L R2, 04H[R0]
0000142A F80606                  		MOV.L #00000006H, [R0]
0000142D 6C84                    		SHLL #08H, R4
0000142F 7344000010              		ADD #00100000H, R4
00001434 6603                    		MOV.L #00000000H, R3
00001436 754215                  		MOV.L #00000015H, R2
00001439 05rrrrrr             A  		BSR _spiffs_phys_rd
0000143D 6280                    		ADD #08H, R0
0000143F A101                    		MOV.L R1, 10H[R0]
00001441                         L581:	; bb960.split17
                                 ;     735                 0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     736             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",736
00001441 A901                    		MOV.L 10H[R0], R1
00001443 69F1                    		SHLR #1FH, R1
00001445 6101                    		CMP #00H, R1
00001447 10                   S  		BEQ L583
00001448                         L582:	; bb970
00001448 E5000401                		MOV.L 10H[R0], 04H[R0]
0000144C 38rrrr               W  		BRA L661
0000144F                         L583:	; bb978.split
                                 ;     737 
                                 ;     738             res = spiffs_object_get_data_page_index_reference(fs, p_hdr.obj_id, p_hdr.span_ix,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",738
0000144F 5D0337                  		MOVU.W 6EH[R0], R3
00001452 5D0236                  		MOVU.W 6CH[R0], R2
00001455 AF89                    		MOV.L 7CH[R0], R1
00001457 6040                    		SUB #04H, R0
00001459 710E60                  		ADD #60H, R0, R14
0000145C E30E                    		MOV.L R14, [R0]
0000145E 710462                  		ADD #62H, R0, R4
00001461 39rrrr               W  		BSR __$spiffs_object_get_data_page_index_reference
00001464 6240                    		ADD #04H, R0
00001466 A101                    		MOV.L R1, 10H[R0]
00001468                         L584:	; bb978.split18
                                 ;     739                 &rpix, &objix_pix);
                                 ;     740             if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",740
00001468 A901                    		MOV.L 10H[R0], R1
0000146A 6101                    		CMP #00H, R1
0000146C 3Brrrr               W  		BNE L606
0000146F                         L585:	; bb987
                                 ;     741               if (((rpix == (spiffs_page_ix)-1 || rpix > SPIFFS_MAX_PAGES(fs)) || (SPIFFS_IS_LOOKUP_PAGE(fs, rpix)))) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",741
0000146F 5D012F                  		MOVU.W 5EH[R0], R1
00001472 7701FFFF00              		CMP #0FFFFH, R1
00001477 3Arrrr               W  		BEQ L599
0000147A 2Err                 B  		BRA L598
0000147C                         L586:	; bb988
                                 ;     742                 // pointing to a bad page altogether, rewrite index to this
                                 ;     743                 rewrite_ix_to_this = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",743
0000147C F9046A01                		MOV.B #01H, 6AH[R0]
00001480 38rrrr               W  		BRA L609
00001483                         L587:	; bb989
                                 ;     744                 SPIFFS_CHECK_DBG("PA: corresponding ref is bad: %04x, rewrite to this %04x\n", rpix, cur_pix);
                                 ;     745               } else {
                                 ;     746                 // pointing to something else, check what
                                 ;     747                 spiffs_page_header rp_hdr;
                                 ;     748                 res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",748
00001483 5D042F                  		MOVU.W 5EH[R0], R4
00001486 AF89                    		MOV.L 7CH[R0], R1
00001488 6080                    		SUB #08H, R0
0000148A 71027A                  		ADD #7AH, R0, R2
0000148D A00A                    		MOV.L R2, 04H[R0]
0000148F F80606                  		MOV.L #00000006H, [R0]
00001492 6C84                    		SHLL #08H, R4
00001494 7344000010              		ADD #00100000H, R4
00001499 6603                    		MOV.L #00000000H, R3
0000149B 754215                  		MOV.L #00000015H, R2
0000149E 05rrrrrr             A  		BSR _spiffs_phys_rd
000014A2 6280                    		ADD #08H, R0
000014A4 A101                    		MOV.L R1, 10H[R0]
000014A6                         L588:	; bb989.split
                                 ;     749                     0, SPIFFS_PAGE_TO_PADDR(fs, rpix), sizeof(spiffs_page_header), (u8_t*)&rp_hdr);
                                 ;     750                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",750
000014A6 A901                    		MOV.L 10H[R0], R1
000014A8 69F1                    		SHLR #1FH, R1
000014AA 6101                    		CMP #00H, R1
000014AC 10                   S  		BEQ L590
000014AD                         L589:	; bb999
000014AD E5000401                		MOV.L 10H[R0], 04H[R0]
000014B1 38rrrr               W  		BRA L661
000014B4                         L590:	; bb1008.split
                                 ;     751                 if (((p_hdr.obj_id & ~SPIFFS_OBJ_ID_IX_FLAG) == rp_hdr.obj_id) &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",751
000014B4 5D0136                  		MOVU.W 6CH[R0], R1
000014B7 7621FF7F                		AND #7FFFH, R1
000014BB 06C50139                		CMP 72H[R0].UW, R1
000014BF 20rr                    		BEQ L594
000014C1 2Err                 B  		BRA L596
000014C3                         L591:	; bb1009
                                 ;     752                     ((rp_hdr.flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_USED | SPIFFS_PH_FLAG_FINAL)) ==
                                 ;     753                         (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_DELET))) {
                                 ;     754                   // pointing to something else valid, just delete this page then
                                 ;     755                   SPIFFS_CHECK_DBG("PA: corresponding ref is good but different: %04x, delete this %04x\n", rpix, cur_pix);
                                 ;     756                   delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",756
000014C3 F9046B01                		MOV.B #01H, 6BH[R0]
000014C7 2Err                 B  		BRA L609
000014C9                         L592:	; bb1011
                                 ;     757                 } else {
                                 ;     758                   // pointing to something weird, update index to point to this page instead
                                 ;     759                   if (rpix != cur_pix) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",759
000014C9 5D012F                  		MOVU.W 5EH[R0], R1
000014CC 06C50134                		CMP 68H[R0].UW, R1
000014D0 20rr                    		BEQ L609
000014D2                         L593:	; bb1012
                                 ;     760                     SPIFFS_CHECK_DBG("PA: corresponding ref is weird: %04x %s%s%s%s, rewrite this %04x\n", rpix,
                                 ;     761                         (rp_hdr.flags & SPIFFS_PH_FLAG_INDEX) ? "" : "INDEX ",
                                 ;     762                             (rp_hdr.flags & SPIFFS_PH_FLAG_DELET) ? "" : "DELETED ",
                                 ;     763                                 (rp_hdr.flags & SPIFFS_PH_FLAG_USED) ? "NOTUSED " : "",
                                 ;     764                                     (rp_hdr.flags & SPIFFS_PH_FLAG_FINAL) ? "NOTFINAL " : "",
                                 ;     765                         cur_pix);
                                 ;     766                     rewrite_ix_to_this = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",766
000014D2 F9046A01                		MOV.B #01H, 6AH[R0]
000014D6 2Err                 B  		BRA L609
000014D8                         L594:	; bb1031
000014D8 754E87                  		MOV.L #00000087H, R14
000014DB 510E76                  		AND 76H[R0].UB, R14
000014DE 755E84                  		CMP #84H, R14
000014E1 18                   S  		BNE L596
000014E2                         L595:	; bb1038
000014E2 F80601                  		MOV.L #00000001H, [R0]
000014E5 08                   S  		BRA L597
000014E6                         L596:	; bb1039
000014E6 F80600                  		MOV.L #00000000H, [R0]
000014E9                         L597:	; bb1040
000014E9 EC01                    		MOV.L [R0], R1
000014EB 6101                    		CMP #00H, R1
000014ED 21rr                    		BNE L591
000014EF 2Err                 B  		BRA L592
000014F1                         L598:	; bb1050
000014F1 5D012F                  		MOVU.W 5EH[R0], R1
000014F4 76010170                		CMP #7001H, R1
000014F8 29rr                    		BLT L600
000014FA                         L599:	; bb1055
000014FA F80601                  		MOV.L #00000001H, [R0]
000014FD 08                   S  		BRA L601
000014FE                         L600:	; bb1056
000014FE F80600                  		MOV.L #00000000H, [R0]
00001501                         L601:	; bb1057
00001501 EC01                    		MOV.L [R0], R1
00001503 6101                    		CMP #00H, R1
00001505 18                   S  		BNE L603
00001506                         L602:	; bb1061
00001506 59015E                  		MOVU.B 5EH[R0], R1
00001509 6111                    		CMP #01H, R1
0000150B 24rr                    		BGTU L604
0000150D                         L603:	; bb1067
0000150D F80601                  		MOV.L #00000001H, [R0]
00001510 08                   S  		BRA L605
00001511                         L604:	; bb1068
00001511 F80600                  		MOV.L #00000000H, [R0]
00001514                         L605:	; bb1069
00001514 EC01                    		MOV.L [R0], R1
00001516 6101                    		CMP #00H, R1
00001518 3Brrrr               W  		BNE L586
0000151B 38rrrr               W  		BRA L587
0000151E                         L606:	; bb1076
                                 ;     767                   } else {
                                 ;     768                     // should not happen, destined for fubar
                                 ;     769                   }
                                 ;     770                 }
                                 ;     771               }
                                 ;     772             } else if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",772
0000151E A901                    		MOV.L 10H[R0], R1
00001520 7601EED8                		CMP #0FFFFD8EEH, R1
00001524 18                   S  		BNE L609
00001525                         L607:	; bb1077
                                 ;     773               SPIFFS_CHECK_DBG("PA: corresponding ref not found, delete %04x\n", cur_pix);
                                 ;     774               delete_page = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",774
00001525 F9046B01                		MOV.B #01H, 6BH[R0]
00001529                         L608:	; bb1077.split
                                 ;     775               res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",775
00001529 3E0400                  		MOV.L #00000000H, 10H[R0]
0000152C                         L609:	; bb1088
                                 ;     776             }
                                 ;     777 
                                 ;     778             if (rewrite_ix_to_this) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",778
0000152C 59016A                  		MOVU.B 6AH[R0], R1
0000152F 6101                    		CMP #00H, R1
00001531 3Arrrr               W  		BEQ L627
00001534                         L610:	; bb1089
                                 ;     779               // if pointing to invalid page, redirect index to this page
                                 ;     780               SPIFFS_CHECK_DBG("PA: FIXUP: rewrite index id %04x data spix %04x to point to this pix: %04x\n",
                                 ;     781                   p_hdr.obj_id, p_hdr.span_ix, cur_pix);
                                 ;     782               res = spiffs_rewrite_index(fs, p_hdr.obj_id, p_hdr.span_ix, cur_pix, objix_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",782
00001534 DD052E                  		MOV.W 5CH[R0], R5
00001537 5D0434                  		MOVU.W 68H[R0], R4
0000153A 5D0337                  		MOVU.W 6EH[R0], R3
0000153D 5D0236                  		MOVU.W 6CH[R0], R2
00001540 AF89                    		MOV.L 7CH[R0], R1
00001542 6040                    		SUB #04H, R0
00001544 D305                    		MOV.W R5, [R0]
00001546 39rrrr               W  		BSR __$spiffs_rewrite_index
00001549 6240                    		ADD #04H, R0
0000154B A101                    		MOV.L R1, 10H[R0]
0000154D                         L611:	; bb1089.split
                                 ;     783               if (res <= _SPIFFS_ERR_CHECK_FIRST && res > _SPIFFS_ERR_CHECK_LAST) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",783
0000154D A901                    		MOV.L 10H[R0], R1
0000154F 7601BED8                		CMP #0FFFFD8BEH, R1
00001553 29rr                    		BLT L620
00001555 2Err                 B  		BRA L622
00001557                         L612:	; bb1101
                                 ;     784                 // index bad also, cannot mend this file
                                 ;     785                 SPIFFS_CHECK_DBG("PA: FIXUP: index bad %i, cannot mend!\n", res);
                                 ;     786                 CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_BAD_FILE, p_hdr.obj_id, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",786
00001557 5BEE                    		MOVU.B R14, R14
00001559 610E                    		CMP #00H, R14
0000155B 20rr                    		BEQ L614
0000155D                         L613:	; bb1102
0000155D ED0E1F                  		MOV.L 7CH[R0], R14
00001560 EDEE14                  		MOV.L 50H[R14], R14
00001563 5D0336                  		MOVU.W 6CH[R0], R3
00001566 6604                    		MOV.L #00000000H, R4
00001568 6662                    		MOV.L #00000006H, R2
0000156A 6621                    		MOV.L #00000002H, R1
0000156C 7F1E                    		JSR R14
0000156E                         L614:	; bb1116.split
                                 ;     787                 res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",787
0000156E 5D0234                  		MOVU.W 68H[R0], R2
00001571 AF89                    		MOV.L 7CH[R0], R1
00001573 05rrrrrr             A  		BSR _spiffs_page_delete
00001577 A101                    		MOV.L R1, 10H[R0]
00001579                         L615:	; bb1116.split19
                                 ;     788                 SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",788
00001579 ED0E04                  		MOV.L 10H[R0], R14
0000157C 69FE                    		SHLR #1FH, R14
0000157E 610E                    		CMP #00H, R14
00001580 10                   S  		BEQ L617
00001581                         L616:	; bb1122
00001581 E5000401                		MOV.L 10H[R0], 04H[R0]
00001585 38rrrr               W  		BRA L661
00001588                         L617:	; bb1130.split
                                 ;     789                 res = spiffs_delete_obj_lazy(fs, p_hdr.obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",789
00001588 5D0236                  		MOVU.W 6CH[R0], R2
0000158B AF89                    		MOV.L 7CH[R0], R1
0000158D 39rrrr               W  		BSR __$spiffs_delete_obj_lazy
00001590 A101                    		MOV.L R1, 10H[R0]
00001592 2Err                 B  		BRA L624
00001594                         L618:	; bb1137
                                 ;     790               } else {
                                 ;     791                 CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_FIX_INDEX, p_hdr.obj_id, p_hdr.span_ix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",791
00001594 5BEE                    		MOVU.B R14, R14
00001596 610E                    		CMP #00H, R14
00001598 20rr                    		BEQ L624
0000159A                         L619:	; bb1138
0000159A ED0E1F                  		MOV.L 7CH[R0], R14
0000159D EDEE14                  		MOV.L 50H[R14], R14
000015A0 5D0437                  		MOVU.W 6EH[R0], R4
000015A3 5D0336                  		MOVU.W 6CH[R0], R3
000015A6 6621                    		MOV.L #00000002H, R1
000015A8 EF12                    		MOV.L R1, R2
000015AA 7F1E                    		JSR R14
000015AC 2Err                 B  		BRA L624
000015AE                         L620:	; bb1159
000015AE ED0E04                  		MOV.L 10H[R0], R14
000015B1 760EBBD8                		CMP #0FFFFD8BBH, R14
000015B5 29rr                    		BLT L622
000015B7                         L621:	; bb1163
000015B7 F80601                  		MOV.L #00000001H, [R0]
000015BA 08                   S  		BRA L623
000015BB                         L622:	; bb1164
000015BB F80600                  		MOV.L #00000000H, [R0]
000015BE                         L623:	; bb1165
000015BE ED0E1F                  		MOV.L 7CH[R0], R14
000015C1 EDEE14                  		MOV.L 50H[R14], R14
000015C4 610E                    		CMP #00H, R14
000015C6 FCDBE1                  		SCNE.L R14
000015C9 EC01                    		MOV.L [R0], R1
000015CB 6101                    		CMP #00H, R1
000015CD 21rr                    		BNE L612
000015CF 2Err                 B  		BRA L618
000015D1                         L624:	; bb1172
                                 ;     792               }
                                 ;     793               SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",793
000015D1 A901                    		MOV.L 10H[R0], R1
000015D3 69F1                    		SHLR #1FH, R1
000015D5 6101                    		CMP #00H, R1
000015D7 10                   S  		BEQ L626
000015D8                         L625:	; bb1173
000015D8 E5000401                		MOV.L 10H[R0], 04H[R0]
000015DC 38rrrr               W  		BRA L661
000015DF                         L626:	; bb1181.split
                                 ;     794               restart = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",794
000015DF 3C8701                  		MOV.B #01H, 17H[R0]
000015E2 2Err                 B  		BRA L633
000015E4                         L627:	; bb1184
                                 ;     795               continue;
                                 ;     796             } else if (delete_page) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",796
000015E4 59016B                  		MOVU.B 6BH[R0], R1
000015E7 6101                    		CMP #00H, R1
000015E9 20rr                    		BEQ L631
000015EB                         L628:	; bb1187
                                 ;     797               SPIFFS_CHECK_DBG("PA: FIXUP: deleting page %04x\n", cur_pix);
                                 ;     798               CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_DELETE_PAGE, cur_pix, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",798
000015EB AF89                    		MOV.L 7CH[R0], R1
000015ED AD11                    		MOV.L 50H[R1], R1
000015EF 6101                    		CMP #00H, R1
000015F1 20rr                    		BEQ L630
000015F3                         L629:	; bb1188
000015F3 AF89                    		MOV.L 7CH[R0], R1
000015F5 AD15                    		MOV.L 50H[R1], R5
000015F7 5D0334                  		MOVU.W 68H[R0], R3
000015FA 6604                    		MOV.L #00000000H, R4
000015FC 6652                    		MOV.L #00000005H, R2
000015FE 6621                    		MOV.L #00000002H, R1
00001600 7F15                    		JSR R5
00001602                         L630:	; bb1201.split
                                 ;     799               res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",799
00001602 5D0234                  		MOVU.W 68H[R0], R2
00001605 AF89                    		MOV.L 7CH[R0], R1
00001607 05rrrrrr             A  		BSR _spiffs_page_delete
0000160B A101                    		MOV.L R1, 10H[R0]
0000160D                         L631:	; bb1218
                                 ;     800             }
                                 ;     801             SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",801
0000160D A901                    		MOV.L 10H[R0], R1
0000160F 69F1                    		SHLR #1FH, R1
00001611 6101                    		CMP #00H, R1
00001613 10                   S  		BEQ L633
00001614                         L632:	; bb1219
00001614 E5000401                		MOV.L 10H[R0], 04H[R0]
00001618 38rrrr               W  		BRA L661
0000161B                         L633:	; bb1266
0000161B 590166                  		MOVU.B 66H[R0], R1
0000161E 6211                    		ADD #01H, R1
00001620 C70166                  		MOV.B R1, 66H[R0]
00001623                         L634:	; bb1269
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",719
00001623 B589                    		MOVU.B 17H[R0], R1
00001625 6101                    		CMP #00H, R1
00001627 10                   S  		BEQ L636
00001628                         L635:	; bb1274
00001628 F80600                  		MOV.L #00000000H, [R0]
0000162B 08                   S  		BRA L637
0000162C                         L636:	; bb1275
0000162C F80601                  		MOV.L #00000001H, [R0]
0000162F                         L637:	; bb1276
0000162F EC01                    		MOV.L [R0], R1
00001631 6101                    		CMP #00H, R1
00001633 20rr                    		BEQ L640
00001635                         L638:	; bb1279
00001635 668E                    		MOV.L #00000008H, R14
00001637 06A1090E02              		DIVU 08H[R0].L, R14
0000163C 590166                  		MOVU.B 66H[R0], R1
0000163F 47E1                    		CMP R14, R1
00001641 22rr                    		BGEU L640
00001643                         L639:	; bb1286
00001643 F80601                  		MOV.L #00000001H, [R0]
00001646 08                   S  		BRA L641
00001647                         L640:	; bb1287
00001647 F80600                  		MOV.L #00000000H, [R0]
0000164A                         L641:	; bb1288
0000164A EC01                    		MOV.L [R0], R1
0000164C 6101                    		CMP #00H, R1
0000164E 3Brrrr               W  		BNE L575
00001651                         L642:	; bb1293
00001651 AE01                    		MOV.L 60H[R0], R1
00001653 6211                    		ADD #01H, R1
00001655 A601                    		MOV.L R1, 60H[R0]
00001657                         L643:	; bb1296
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",718
00001657 B589                    		MOVU.B 17H[R0], R1
00001659 6101                    		CMP #00H, R1
0000165B 10                   S  		BEQ L645
0000165C                         L644:	; bb1301
0000165C F80600                  		MOV.L #00000000H, [R0]
0000165F 08                   S  		BRA L646
00001660                         L645:	; bb1302
00001660 F80601                  		MOV.L #00000001H, [R0]
00001663                         L646:	; bb1303
00001663 EC01                    		MOV.L [R0], R1
00001665 6101                    		CMP #00H, R1
00001667 20rr                    		BEQ L649
00001669                         L647:	; bb1306
00001669 AE01                    		MOV.L 60H[R0], R1
0000166B 7551FF                  		CMP #0FFH, R1
0000166E 24rr                    		BGTU L649
00001670                         L648:	; bb1310
00001670 F80601                  		MOV.L #00000001H, [R0]
00001673 08                   S  		BRA L650
00001674                         L649:	; bb1311
00001674 F80600                  		MOV.L #00000000H, [R0]
00001677                         L650:	; bb1312
00001677 EC01                    		MOV.L [R0], R1
00001679 6101                    		CMP #00H, R1
0000167B 3Brrrr               W  		BNE L574
0000167E 2Err                 B  		BRA L654
00001680                         L651:	; bb1322
00001680 F80600                  		MOV.L #00000000H, [R0]
00001683 08                   S  		BRA L653
00001684                         L652:	; bb1323
00001684 F80601                  		MOV.L #00000001H, [R0]
00001687                         L653:	; bb1324
00001687 EC01                    		MOV.L [R0], R1
00001689 6101                    		CMP #00H, R1
0000168B 3Brrrr               W  		BNE L573
0000168E                         L654:	; bb1329
                                 ;     802           }
                                 ;     803           if (bitmask == 0x2) {
                                 ;     804 
                                 ;     805             // 010
                                 ;     806             SPIFFS_CHECK_DBG("PA: pix %04x FREE, REFERENCED, not index\n", cur_pix);
                                 ;     807 
                                 ;     808             // no op, this should be taken care of when checking valid references
                                 ;     809           }
                                 ;     810 
                                 ;     811           // 011 ok - busy, referenced, not index
                                 ;     812 
                                 ;     813           if (bitmask == 0x4) {
                                 ;     814 
                                 ;     815             // 100
                                 ;     816             SPIFFS_CHECK_DBG("PA: pix %04x FREE, unreferenced, INDEX\n", cur_pix);
                                 ;     817 
                                 ;     818             // this should never happen, major fubar
                                 ;     819           }
                                 ;     820 
                                 ;     821           // 101 ok - busy, unreferenced, index
                                 ;     822 
                                 ;     823           if (bitmask == 0x6) {
                                 ;     824 
                                 ;     825             // 110
                                 ;     826             SPIFFS_CHECK_DBG("PA: pix %04x FREE, REFERENCED, INDEX\n", cur_pix);
                                 ;     827 
                                 ;     828             // no op, this should be taken care of when checking valid references
                                 ;     829           }
                                 ;     830           if (bitmask == 0x7) {
                                 ;     831 
                                 ;     832             // 111
                                 ;     833             SPIFFS_CHECK_DBG("PA: pix %04x USED, REFERENCED, INDEX\n", cur_pix);
                                 ;     834 
                                 ;     835             // no op, this should be taken care of when checking valid references
                                 ;     836           }
                                 ;     837         }
                                 ;     838       }
                                 ;     839     }
                                 ;     840 
                                 ;     841     SPIFFS_CHECK_DBG("PA: processed %04x, restart %i\n", pix_offset, restart);
                                 ;     842     // next page range
                                 ;     843     if (!restart) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",843
0000168E B589                    		MOVU.B 17H[R0], R1
00001690 6101                    		CMP #00H, R1
00001692 21rr                    		BNE L656
00001694 2Err                 B  		BRA L657
00001696                         L655:	; bb1330
                                 ;     844       pix_offset += pages_per_scan;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",844
00001696 BA81                    		MOVU.W 14H[R0], R1
00001698 06C90107                		ADD 0EH[R0].UW, R1
0000169C 9281                    		MOV.W R1, 14H[R0]
0000169E 2Err                 B  		BRA L659
000016A0                         L656:	; bb1341
000016A0 F80600                  		MOV.L #00000000H, [R0]
000016A3 08                   S  		BRA L658
000016A4                         L657:	; bb1342
000016A4 F80601                  		MOV.L #00000001H, [R0]
000016A7                         L658:	; bb1343
000016A7 EC01                    		MOV.L [R0], R1
000016A9 6101                    		CMP #00H, R1
000016AB 21rr                    		BNE L655
000016AD                         L659:	; bb1348
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",517
000016AD AF89                    		MOV.L 7CH[R0], R1
000016AF A899                    		MOV.L 0CH[R1], R1
000016B1 6C81                    		SHLL #08H, R1
000016B3 BA82                    		MOVU.W 14H[R0], R2
000016B5 4712                    		CMP R1, R2
000016B7 22rr                  * 		BLTU L400
         38rrrr                  
000016BC                         L660:	; bb1358
                                 ;     845     }
                                 ;     846   } // while page range not reached end
                                 ;     847   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",847
000016BC E5000401                		MOV.L 10H[R0], 04H[R0]
000016C0                         L661:	; bb1361
000016C0 A809                    		MOV.L 04H[R0], R1
000016C2 A781                    		MOV.L R1, 78H[R0]
                                 ;     848 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",848
000016C4 6720                    		RTSD #80H
000016C6                         _spiffs_page_consistency_check:
                                 		.STACK	_spiffs_page_consistency_check=16
                                 ;     849 
                                 ;     850 // Checks consistency amongst all pages and fixes irregularities
                                 ;     851 s32_t spiffs_page_consistency_check(spiffs *fs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",851
000016C6 60C0                    		SUB #0CH, R0
000016C8 A081                    		MOV.L R1, 08H[R0]
                                 ;     852   CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_PROGRESS, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",852
000016CA AD11                    		MOV.L 50H[R1], R1
000016CC 6101                    		CMP #00H, R1
000016CE 20rr                    		BEQ L664
000016D0                         L663:	; bb4
000016D0 A881                    		MOV.L 08H[R0], R1
000016D2 AD15                    		MOV.L 50H[R1], R5
000016D4 6602                    		MOV.L #00000000H, R2
000016D6 6621                    		MOV.L #00000002H, R1
000016D8 EF23                    		MOV.L R2, R3
000016DA EF24                    		MOV.L R2, R4
000016DC 7F15                    		JSR R5
000016DE                         L664:	; bb14
                                 ;     853   s32_t res = spiffs_page_consistency_check_i(fs);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",853
000016DE A881                    		MOV.L 08H[R0], R1
000016E0 39rrrr               W  		BSR __$spiffs_page_consistency_check_i
000016E3 E301                    		MOV.L R1, [R0]
000016E5                         L665:	; bb14.split
                                 ;     854   if (res != SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",854
000016E5 EC01                    		MOV.L [R0], R1
000016E7 6101                    		CMP #00H, R1
000016E9 20rr                    		BEQ L668
000016EB                         L666:	; bb20
                                 ;     855     CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_ERROR, res, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",855
000016EB A881                    		MOV.L 08H[R0], R1
000016ED AD11                    		MOV.L 50H[R1], R1
000016EF 6101                    		CMP #00H, R1
000016F1 20rr                    		BEQ L668
000016F3                         L667:	; bb21
000016F3 A881                    		MOV.L 08H[R0], R1
000016F5 AD15                    		MOV.L 50H[R1], R5
000016F7 EC03                    		MOV.L [R0], R3
000016F9 6604                    		MOV.L #00000000H, R4
000016FB 6612                    		MOV.L #00000001H, R2
000016FD 6621                    		MOV.L #00000002H, R1
000016FF 7F15                    		JSR R5
00001701                         L668:	; bb40
                                 ;     856   }
                                 ;     857   CHECK_CB(fs, SPIFFS_CHECK_PAGE, SPIFFS_CHECK_PROGRESS, 256, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",857
00001701 A881                    		MOV.L 08H[R0], R1
00001703 AD11                    		MOV.L 50H[R1], R1
00001705 6101                    		CMP #00H, R1
00001707 20rr                    		BEQ L670
00001709                         L669:	; bb41
00001709 A881                    		MOV.L 08H[R0], R1
0000170B AD15                    		MOV.L 50H[R1], R5
0000170D FB3A0001                		MOV.L #00000100H, R3
00001711 6602                    		MOV.L #00000000H, R2
00001713 6621                    		MOV.L #00000002H, R1
00001715 EF24                    		MOV.L R2, R4
00001717 7F15                    		JSR R5
00001719                         L670:	; bb52
                                 ;     858   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",858
00001719 EC01                    		MOV.L [R0], R1
0000171B A009                    		MOV.L R1, 04H[R0]
0000171D                         L671:	; bb52.split
                                 ;     859 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",859
0000171D 6703                    		RTSD #0CH
0000171F                         __$spiffs_object_index_search:
                                 		.STACK	__$spiffs_object_index_search=28
                                 ;     860 
                                 ;     861 //---------------------------------------
                                 ;     862 // Object index consistency
                                 ;     863 
                                 ;     864 // searches for given object id in temporary object id index,
                                 ;     865 // returns the index or -1
                                 ;     866 static int spiffs_object_index_search(spiffs *fs, spiffs_obj_id obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",866
0000171F 7100E8                  		ADD #0FFFFFFE8H, R0
00001722 A109                    		MOV.L R1, 14H[R0]
00001724 920A                    		MOV.W R2, 12H[R0]
                                 ;     867   u32_t i;
                                 ;     868   spiffs_obj_id *obj_table = (spiffs_obj_id *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",868
00001726 A909                    		MOV.L 14H[R0], R1
00001728 E5100902                		MOV.L 24H[R1], 08H[R0]
0000172C                         L673:	; entry.split
                                 ;     869   obj_id &= ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",869
0000172C BA09                    		MOVU.W 12H[R0], R1
0000172E 7621FF7F                		AND #7FFFH, R1
00001732 9209                    		MOV.W R1, 12H[R0]
00001734                         L674:	; entry.split1
                                 ;     870   for (i = 0; i < SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id); i++) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",870
00001734 3E0100                  		MOV.L #00000000H, 04H[R0]
00001737 2Err                 B  		BRA L678
00001739                         L675:	; bb13
                                 ;     871     if ((obj_table[i] & ~SPIFFS_OBJ_ID_IX_FLAG) == obj_id) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",871
00001739 A881                    		MOV.L 08H[R0], R1
0000173B A80A                    		MOV.L 04H[R0], R2
0000173D FED21E                  		MOVU.W [R2,R1], R14
00001740 762EFF7F                		AND #7FFFH, R14
00001744 06C50E09                		CMP 12H[R0].UW, R14
00001748 18                   S  		BNE L677
00001749                         L676:	; bb14
                                 ;     872       return i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",872
00001749 E302                    		MOV.L R2, [R0]
0000174B 2Err                 B  		BRA L680
0000174D                         L677:	; bb27
0000174D 6212                    		ADD #01H, R2
0000174F A00A                    		MOV.L R2, 04H[R0]
00001751                         L678:	; bb30
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",870
00001751 A809                    		MOV.L 04H[R0], R1
00001753 755180                  		CMP #80H, R1
00001756 23rr                    		BLTU L675
00001758                         L679:	; bb35
                                 ;     873     }
                                 ;     874   }
                                 ;     875   return -1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",875
00001758 F806FF                  		MOV.L #0FFFFFFFFH, [R0]
0000175B                         L680:	; bb37
0000175B EC01                    		MOV.L [R0], R1
0000175D A089                    		MOV.L R1, 0CH[R0]
                                 ;     876 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",876
0000175F 6706                    		RTSD #18H
00001761                         __$spiffs_object_index_consistency_check_v:
                                 		.STACK	__$spiffs_object_index_consistency_check_v=80
                                 ;     877 
                                 ;     878 static s32_t spiffs_object_index_consistency_check_v(spiffs *fs, spiffs_obj_id obj_id, spiffs_block_ix cur_block,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",878
00001761 7100BC                  		ADD #0FFFFFFBCH, R0
00001764 A401                    		MOV.L R1, 40H[R0]
00001766 978A                    		MOV.W R2, 3EH[R0]
00001768 9783                    		MOV.W R3, 3CH[R0]
0000176A A384                    		MOV.L R4, 38H[R0]
0000176C E500120D                		MOV.L 48H[R0], 34H[R0]
00001770 E500130C                		MOV.L 4CH[R0], 30H[R0]
00001774                         L682:	; entry.split
                                 ;     879     int cur_entry, const void *user_const_p, void *user_var_p) {
                                 ;     880   (void)user_const_p;
                                 ;     881   s32_t res_c = SPIFFS_VIS_COUNTINUE;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",881
00001774 F90A02AAD8              		MOV.L #0FFFFD8AAH, 08H[R0]
00001779                         L683:	; entry.split1
                                 ;     882   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",882
00001779 3E0300                  		MOV.L #00000000H, 0CH[R0]
0000177C                         L684:	; entry.split2
                                 ;     883   u32_t *log_ix = (u32_t*)user_var_p;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",883
0000177C E5000C04                		MOV.L 30H[R0], 10H[R0]
00001780                         L685:	; entry.split3
                                 ;     884   spiffs_obj_id *obj_table = (spiffs_obj_id *)fs->work;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",884
00001780 AC01                    		MOV.L 40H[R0], R1
00001782 E5100905                		MOV.L 24H[R1], 14H[R0]
00001786                         L686:	; entry.split4
                                 ;     885 
                                 ;     886   CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_PROGRESS,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",886
00001786 AC01                    		MOV.L 40H[R0], R1
00001788 AD11                    		MOV.L 50H[R1], R1
0000178A 6101                    		CMP #00H, R1
0000178C 20rr                    		BEQ L688
0000178E                         L687:	; bb26
0000178E BF83                    		MOVU.W 3CH[R0], R3
00001790 6C83                    		SHLL #08H, R3
00001792 AC01                    		MOV.L 40H[R0], R1
00001794 06A1091303              		DIVU 0CH[R1].L, R3
00001799 AD15                    		MOV.L 50H[R1], R5
0000179B 6602                    		MOV.L #00000000H, R2
0000179D 6611                    		MOV.L #00000001H, R1
0000179F EF24                    		MOV.L R2, R4
000017A1 7F15                    		JSR R5
000017A3                         L688:	; bb44
                                 ;     887       (cur_block * 256)/fs->block_count, 0);
                                 ;     888 
                                 ;     889   if (obj_id != SPIFFS_OBJ_ID_FREE && obj_id != SPIFFS_OBJ_ID_DELETED && (obj_id & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",889
000017A3 BF89                    		MOVU.W 3EH[R0], R1
000017A5 7701FFFF00              		CMP #0FFFFH, R1
000017AA 3Brrrr               W  		BNE L736
000017AD 38rrrr               W  		BRA L738
000017B0                         L689:	; bb45
                                 ;     890     spiffs_page_header p_hdr;
                                 ;     891     spiffs_page_ix cur_pix = SPIFFS_OBJ_LOOKUP_ENTRY_TO_PIX(fs, cur_block, cur_entry);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",891
000017B0 BF81                    		MOVU.W 3CH[R0], R1
000017B2 6C81                    		SHLL #08H, R1
000017B4 0689010E                		ADD 38H[R0].L, R1
000017B8 6221                    		ADD #02H, R1
000017BA 9389                    		MOV.W R1, 1EH[R0]
000017BC                         L690:	; bb45.split
                                 ;     892 
                                 ;     893     // load header
                                 ;     894     res = _spiffs_rd(fs, SPIFFS_OP_T_OBJ_LU2 | SPIFFS_OP_C_READ,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",894
000017BC BB8C                    		MOVU.W 1EH[R0], R4
000017BE AC01                    		MOV.L 40H[R0], R1
000017C0 6080                    		SUB #08H, R0
000017C2 710220                  		ADD #20H, R0, R2
000017C5 A00A                    		MOV.L R2, 04H[R0]
000017C7 F80606                  		MOV.L #00000006H, [R0]
000017CA 6C84                    		SHLL #08H, R4
000017CC 7344000010              		ADD #00100000H, R4
000017D1 6603                    		MOV.L #00000000H, R3
000017D3 754215                  		MOV.L #00000015H, R2
000017D6 05rrrrrr             A  		BSR _spiffs_phys_rd
000017DA 6280                    		ADD #08H, R0
000017DC A089                    		MOV.L R1, 0CH[R0]
000017DE                         L691:	; bb45.split5
                                 ;     895         0, SPIFFS_PAGE_TO_PADDR(fs, cur_pix), sizeof(spiffs_page_header), (u8_t*)&p_hdr);
                                 ;     896     SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",896
000017DE A889                    		MOV.L 0CH[R0], R1
000017E0 69F1                    		SHLR #1FH, R1
000017E2 6101                    		CMP #00H, R1
000017E4 10                   S  		BEQ L693
000017E5                         L692:	; bb62
000017E5 E5000301                		MOV.L 0CH[R0], 04H[R0]
000017E9 38rrrr               W  		BRA L745
000017EC                         L693:	; bb71.split
                                 ;     897 
                                 ;     898     if (p_hdr.span_ix == 0 &&
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",898
000017EC BB09                    		MOVU.W 1AH[R0], R1
000017EE 6101                    		CMP #00H, R1
000017F0 20rr                    		BEQ L700
000017F2 2Err                 B  		BRA L702
000017F4                         L694:	; bb74
                                 ;     899         (p_hdr.flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_IXDELE)) ==
                                 ;     900         (SPIFFS_PH_FLAG_DELET)) {
                                 ;     901       SPIFFS_CHECK_DBG("IX: pix %04x, obj id:%04x spix:%04x header not fully deleted - deleting\n",
                                 ;     902           cur_pix, obj_id, p_hdr.span_ix);
                                 ;     903       CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_DELETE_PAGE, cur_pix, obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",903
000017F4 AC01                    		MOV.L 40H[R0], R1
000017F6 AD11                    		MOV.L 50H[R1], R1
000017F8 6101                    		CMP #00H, R1
000017FA 20rr                    		BEQ L696
000017FC                         L695:	; bb75
000017FC AC01                    		MOV.L 40H[R0], R1
000017FE AD15                    		MOV.L 50H[R1], R5
00001800 BF8C                    		MOVU.W 3EH[R0], R4
00001802 BB8B                    		MOVU.W 1EH[R0], R3
00001804 6652                    		MOV.L #00000005H, R2
00001806 6611                    		MOV.L #00000001H, R1
00001808 7F15                    		JSR R5
0000180A                         L696:	; bb90.split
                                 ;     904       res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",904
0000180A BB8A                    		MOVU.W 1EH[R0], R2
0000180C AC01                    		MOV.L 40H[R0], R1
0000180E 05rrrrrr             A  		BSR _spiffs_page_delete
00001812 A089                    		MOV.L R1, 0CH[R0]
00001814                         L697:	; bb90.split6
                                 ;     905       SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",905
00001814 A889                    		MOV.L 0CH[R0], R1
00001816 69F1                    		SHLR #1FH, R1
00001818 6101                    		CMP #00H, R1
0000181A 10                   S  		BEQ L699
0000181B                         L698:	; bb96
0000181B E5000301                		MOV.L 0CH[R0], 04H[R0]
0000181F 38rrrr               W  		BRA L745
00001822                         L699:	; bb104.split
                                 ;     906       return res_c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",906
00001822 E5000201                		MOV.L 08H[R0], 04H[R0]
00001826 38rrrr               W  		BRA L745
00001829                         L700:	; bb112
00001829 754EC6                  		MOV.L #000000C6H, R14
0000182C 510E1C                  		AND 1CH[R0].UB, R14
0000182F 755E80                  		CMP #80H, R14
00001832 18                   S  		BNE L702
00001833                         L701:	; bb119
00001833 F80601                  		MOV.L #00000001H, [R0]
00001836 08                   S  		BRA L703
00001837                         L702:	; bb120
00001837 F80600                  		MOV.L #00000000H, [R0]
0000183A                         L703:	; bb121
0000183A EC01                    		MOV.L [R0], R1
0000183C 6101                    		CMP #00H, R1
0000183E 21rr                    		BNE L694
00001840                         L704:	; bb127
00001840 754EC6                  		MOV.L #000000C6H, R14
                                 ;     907     }
                                 ;     908 
                                 ;     909     if ((p_hdr.flags & (SPIFFS_PH_FLAG_INDEX | SPIFFS_PH_FLAG_FINAL | SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_IXDELE)) ==
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",909
00001843 510E1C                  		AND 1CH[R0].UB, R14
00001846 755EC0                  		CMP #0C0H, R14
00001849 18                   S  		BNE L706
0000184A                         L705:	; bb128
                                 ;     910         (SPIFFS_PH_FLAG_DELET | SPIFFS_PH_FLAG_IXDELE)) {
                                 ;     911       return res_c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",911
0000184A E5000201                		MOV.L 08H[R0], 04H[R0]
0000184E 38rrrr               W  		BRA L745
00001851                         L706:	; bb139
                                 ;     912     }
                                 ;     913 
                                 ;     914     if (p_hdr.span_ix == 0) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",914
00001851 BB09                    		MOVU.W 1AH[R0], R1
00001853 6101                    		CMP #00H, R1
00001855 9F8A                    		MOV.W 3EH[R0], R2
00001857 AC01                    		MOV.L 40H[R0], R1
00001859 21rr                    		BNE L713
0000185B                         L707:	; bb140
                                 ;     915       // objix header page, register objid as reachable
                                 ;     916       int r = spiffs_object_index_search(fs, obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",916
0000185B 5F22                    		MOVU.W R2, R2
0000185D 39rrrr               W  		BSR __$spiffs_object_index_search
00001860 A201                    		MOV.L R1, 20H[R0]
00001862                         L708:	; bb140.split
                                 ;     917       if (r == -1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",917
00001862 AA02                    		MOV.L 20H[R0], R2
00001864 7502FF                  		CMP #0FFFFFFFFH, R2
00001867 3Brrrr               W  		BNE L744
0000186A                         L709:	; bb145
                                 ;     918         // not registered, do it
                                 ;     919         obj_table[*log_ix] = obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",919
0000186A BF8A                    		MOVU.W 3EH[R0], R2
0000186C 7622FF7F                		AND #7FFFH, R2
00001870 A901                    		MOV.L 10H[R0], R1
00001872 EC1E                    		MOV.L [R1], R14
00001874 A909                    		MOV.L 14H[R0], R1
00001876 FE1E12                  		MOV.W R2, [R14,R1]
00001879                         L710:	; bb145.split
                                 ;     920         (*log_ix)++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",920
00001879 A902                    		MOV.L 10H[R0], R2
0000187B EC2E                    		MOV.L [R2], R14
0000187D 621E                    		ADD #01H, R14
0000187F E32E                    		MOV.L R14, [R2]
00001881                         L711:	; bb145.split7
                                 ;     921         if (*log_ix >= SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",921
00001881 A902                    		MOV.L 10H[R0], R2
00001883 EC2E                    		MOV.L [R2], R14
00001885 755E80                  		CMP #80H, R14
00001888 22rr                  * 		BLTU L744
         38rrrr                  
0000188D                         L712:	; bb158
                                 ;     922           *log_ix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",922
0000188D A902                    		MOV.L 10H[R0], R2
0000188F F82600                  		MOV.L #00000000H, [R2]
00001892 38rrrr               W  		BRA L744
00001895                         L713:	; bb171
                                 ;     923         }
                                 ;     924       }
                                 ;     925     } else { // span index
                                 ;     926       // objix page, see if header can be found
                                 ;     927       int r = spiffs_object_index_search(fs, obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",927
00001895 5F22                    		MOVU.W R2, R2
00001897 39rrrr               W  		BSR __$spiffs_object_index_search
0000189A A209                    		MOV.L R1, 24H[R0]
0000189C                         L714:	; bb171.split
                                 ;     928       u8_t delete = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",928
0000189C F9042900                		MOV.B #00H, 29H[R0]
000018A0                         L715:	; bb171.split8
                                 ;     929       if (r == -1) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",929
000018A0 AA09                    		MOV.L 24H[R0], R1
000018A2 7501FF                  		CMP #0FFFFFFFFH, R1
000018A5 21rr                    		BNE L728
000018A7                         L716:	; bb176
                                 ;     930         // not in temporary index, try finding it
                                 ;     931         spiffs_page_ix objix_hdr_pix;
                                 ;     932         res = spiffs_obj_lu_find_id_and_span(fs, obj_id | SPIFFS_OBJ_ID_IX_FLAG, 0, 0, &objix_hdr_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",932
000018A7 BF8A                    		MOVU.W 3EH[R0], R2
000018A9 AC01                    		MOV.L 40H[R0], R1
000018AB 6040                    		SUB #04H, R0
000018AD 710E2E                  		ADD #2EH, R0, R14
000018B0 E30E                    		MOV.L R14, [R0]
000018B2 78F2                    		BSET #0FH, R2
000018B4 6603                    		MOV.L #00000000H, R3
000018B6 EF34                    		MOV.L R3, R4
000018B8 05rrrrrr             A  		BSR _spiffs_obj_lu_find_id_and_span
000018BC 6240                    		ADD #04H, R0
000018BE A089                    		MOV.L R1, 0CH[R0]
000018C0                         L717:	; bb176.split
                                 ;     933         res_c = SPIFFS_VIS_COUNTINUE_RELOAD;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",933
000018C0 F90A02A9D8              		MOV.L #0FFFFD8A9H, 08H[R0]
000018C5                         L718:	; bb176.split9
                                 ;     934         if (res == SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",934
000018C5 A889                    		MOV.L 0CH[R0], R1
000018C7 6101                    		CMP #00H, R1
000018C9 21rr                    		BNE L720
000018CB                         L719:	; bb184
                                 ;     935           // found, register as reachable
                                 ;     936           obj_table[*log_ix] = obj_id & ~SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",936
000018CB BF89                    		MOVU.W 3EH[R0], R1
000018CD 7621FF7F                		AND #7FFFH, R1
000018D1 A902                    		MOV.L 10H[R0], R2
000018D3 EC2E                    		MOV.L [R2], R14
000018D5 A90A                    		MOV.L 14H[R0], R2
000018D7 FE1E21                  		MOV.W R1, [R14,R2]
000018DA 2Err                 B  		BRA L725
000018DC                         L720:	; bb194
                                 ;     937         } else if (res == SPIFFS_ERR_NOT_FOUND) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",937
000018DC A889                    		MOV.L 0CH[R0], R1
000018DE 7601EED8                		CMP #0FFFFD8EEH, R1
000018E2 21rr                    		BNE L723
000018E4                         L721:	; bb195
                                 ;     938           // not found, register as unreachable
                                 ;     939           delete = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",939
000018E4 F9042901                		MOV.B #01H, 29H[R0]
000018E8                         L722:	; bb195.split
                                 ;     940           obj_table[*log_ix] = obj_id | SPIFFS_OBJ_ID_IX_FLAG;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",940
000018E8 9F89                    		MOV.W 3EH[R0], R1
000018EA 78F1                    		BSET #0FH, R1
000018EC A902                    		MOV.L 10H[R0], R2
000018EE EC2E                    		MOV.L [R2], R14
000018F0 A90A                    		MOV.L 14H[R0], R2
000018F2 FE1E21                  		MOV.W R1, [R14,R2]
000018F5 2Err                 B  		BRA L725
000018F7                         L723:	; bb206
                                 ;     941         } else {
                                 ;     942           SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",942
000018F7 A889                    		MOV.L 0CH[R0], R1
000018F9 69F1                    		SHLR #1FH, R1
000018FB 6101                    		CMP #00H, R1
000018FD 10                   S  		BEQ L725
000018FE                         L724:	; bb207
000018FE E5000301                		MOV.L 0CH[R0], 04H[R0]
00001902 38rrrr               W  		BRA L745
00001905                         L725:	; bb225
                                 ;     943         }
                                 ;     944         (*log_ix)++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",944
00001905 A901                    		MOV.L 10H[R0], R1
00001907 EC1E                    		MOV.L [R1], R14
00001909 621E                    		ADD #01H, R14
0000190B E31E                    		MOV.L R14, [R1]
0000190D                         L726:	; bb225.split
                                 ;     945         if (*log_ix >= SPIFFS_CFG_LOG_PAGE_SZ(fs) / sizeof(spiffs_obj_id)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",945
0000190D A901                    		MOV.L 10H[R0], R1
0000190F EC1E                    		MOV.L [R1], R14
00001911 755E80                  		CMP #80H, R14
00001914 23rr                    		BLTU L730
00001916                         L727:	; bb230
                                 ;     946           *log_ix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",946
00001916 A901                    		MOV.L 10H[R0], R1
00001918 F81600                  		MOV.L #00000000H, [R1]
0000191B 2Err                 B  		BRA L730
0000191D                         L728:	; bb239
                                 ;     947         }
                                 ;     948       } else {
                                 ;     949         // in temporary index, check reachable flag
                                 ;     950         if ((obj_table[r] & SPIFFS_OBJ_ID_IX_FLAG)) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",950
0000191D A909                    		MOV.L 14H[R0], R1
0000191F AA0A                    		MOV.L 24H[R0], R2
00001921 FED21E                  		MOVU.W [R2,R1], R14
00001924 7CFE                    		BTST #0FH, R14
00001926 10                   S  		BEQ L730
00001927                         L729:	; bb240
                                 ;     951           // registered as unreachable
                                 ;     952           delete = 1;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",952
00001927 F9042901                		MOV.B #01H, 29H[R0]
0000192B                         L730:	; bb256
                                 ;     953         }
                                 ;     954       }
                                 ;     955 
                                 ;     956       if (delete) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",956
0000192B 590129                  		MOVU.B 29H[R0], R1
0000192E 6101                    		CMP #00H, R1
00001930 20rr                    		BEQ L744
00001932                         L731:	; bb259
                                 ;     957         SPIFFS_CHECK_DBG("IX: FIXUP: pix %04x, obj id:%04x spix:%04x is orphan index - deleting\n",
                                 ;     958             cur_pix, obj_id, p_hdr.span_ix);
                                 ;     959         CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_DELETE_ORPHANED_INDEX, cur_pix, obj_id);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",959
00001932 AC01                    		MOV.L 40H[R0], R1
00001934 AD11                    		MOV.L 50H[R1], R1
00001936 6101                    		CMP #00H, R1
00001938 20rr                    		BEQ L733
0000193A                         L732:	; bb260
0000193A AC01                    		MOV.L 40H[R0], R1
0000193C AD15                    		MOV.L 50H[R1], R5
0000193E BF8C                    		MOVU.W 3EH[R0], R4
00001940 BB8B                    		MOVU.W 1EH[R0], R3
00001942 6642                    		MOV.L #00000004H, R2
00001944 6611                    		MOV.L #00000001H, R1
00001946 7F15                    		JSR R5
00001948                         L733:	; bb275.split
                                 ;     960         res = spiffs_page_delete(fs, cur_pix);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",960
00001948 BB8A                    		MOVU.W 1EH[R0], R2
0000194A AC01                    		MOV.L 40H[R0], R1
0000194C 05rrrrrr             A  		BSR _spiffs_page_delete
00001950 A089                    		MOV.L R1, 0CH[R0]
00001952                         L734:	; bb275.split10
                                 ;     961         SPIFFS_CHECK_RES(res);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",961
00001952 A889                    		MOV.L 0CH[R0], R1
00001954 69F1                    		SHLR #1FH, R1
00001956 6101                    		CMP #00H, R1
00001958 20rr                    		BEQ L744
0000195A                         L735:	; bb281
0000195A E5000301                		MOV.L 0CH[R0], 04H[R0]
0000195E 2Err                 B  		BRA L745
00001960                         L736:	; bb307
00001960 BF89                    		MOVU.W 3EH[R0], R1
00001962 6101                    		CMP #00H, R1
00001964 10                   S  		BEQ L738
00001965                         L737:	; bb312
00001965 F80601                  		MOV.L #00000001H, [R0]
00001968 08                   S  		BRA L739
00001969                         L738:	; bb313
00001969 F80600                  		MOV.L #00000000H, [R0]
0000196C                         L739:	; bb314
0000196C EC01                    		MOV.L [R0], R1
0000196E 6101                    		CMP #00H, R1
00001970 10                   S  		BEQ L742
00001971                         L740:	; bb318
00001971 BF89                    		MOVU.W 3EH[R0], R1
00001973 7CF1                    		BTST #0FH, R1
00001975 10                   S  		BEQ L742
00001976                         L741:	; bb324
00001976 F80601                  		MOV.L #00000001H, [R0]
00001979 08                   S  		BRA L743
0000197A                         L742:	; bb325
0000197A F80600                  		MOV.L #00000000H, [R0]
0000197D                         L743:	; bb326
0000197D EC01                    		MOV.L [R0], R1
0000197F 6101                    		CMP #00H, R1
00001981 3Brrrr               W  		BNE L689
00001984                         L744:	; bb331
                                 ;     962       }
                                 ;     963     } // span index
                                 ;     964   } // valid object index id
                                 ;     965 
                                 ;     966   return res_c;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",966
00001984 E5000201                		MOV.L 08H[R0], 04H[R0]
00001988                         L745:	; bb334
00001988 A809                    		MOV.L 04H[R0], R1
0000198A A289                    		MOV.L R1, 2CH[R0]
                                 ;     967 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",967
0000198C 6711                    		RTSD #44H
0000198E                         _spiffs_object_index_consistency_check:
                                 		.STACK	_spiffs_object_index_consistency_check=44
                                 ;     968 
                                 ;     969 // Removes orphaned and partially deleted index pages.
                                 ;     970 // Scans for index pages. When an index page is found, corresponding index header is searched for.
                                 ;     971 // If no such page exists, the index page cannot be reached as no index header exists and must be
                                 ;     972 // deleted.
                                 ;     973 s32_t spiffs_object_index_consistency_check(spiffs *fs) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",973
0000198E 7100F0                  		ADD #0FFFFFFF0H, R0
00001991 A089                    		MOV.L R1, 0CH[R0]
                                 ;     974   s32_t res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",974
00001993 F80600                  		MOV.L #00000000H, [R0]
00001996                         L747:	; entry.split
                                 ;     975   // impl note:
                                 ;     976   // fs->work is used for a temporary object index memory, listing found object ids and
                                 ;     977   // indicating whether they can be reached or not. Acting as a fifo if object ids cannot fit.
                                 ;     978   // In the temporary object index memory, SPIFFS_OBJ_ID_IX_FLAG bit is used to indicate
                                 ;     979   // a reachable/unreachable object id.
                                 ;     980   memset(fs->work, 0, SPIFFS_CFG_LOG_PAGE_SZ(fs));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",980
00001996 A889                    		MOV.L 0CH[R0], R1
00001998 AA19                    		MOV.L 24H[R1], R1
0000199A FB3A0001                		MOV.L #00000100H, R3
0000199E 6602                    		MOV.L #00000000H, R2
000019A0 7F88                    		SSTR.B
000019A2                         L748:	; entry.split1
                                 ;     981   u32_t obj_id_log_ix = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",981
000019A2 3E0100                  		MOV.L #00000000H, 04H[R0]
000019A5                         L749:	; entry.split2
                                 ;     982   CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_PROGRESS, 0, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",982
000019A5 A889                    		MOV.L 0CH[R0], R1
000019A7 AD11                    		MOV.L 50H[R1], R1
000019A9 6101                    		CMP #00H, R1
000019AB 20rr                    		BEQ L751
000019AD                         L750:	; bb8
000019AD A889                    		MOV.L 0CH[R0], R1
000019AF AD15                    		MOV.L 50H[R1], R5
000019B1 6602                    		MOV.L #00000000H, R2
000019B3 6611                    		MOV.L #00000001H, R1
000019B5 EF23                    		MOV.L R2, R3
000019B7 EF24                    		MOV.L R2, R4
000019B9 7F15                    		JSR R5
000019BB                         L751:	; bb18
                                 ;     983   res = spiffs_obj_lu_find_entry_visitor(fs, 0, 0, 0, 0, spiffs_object_index_consistency_check_v, 0, &obj_id_log_ix,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",983
000019BB A889                    		MOV.L 0CH[R0], R1
000019BD 7100E8                  		ADD #0FFFFFFE8H, R0
000019C0 6602                    		MOV.L #00000000H, R2
000019C2 A10A                    		MOV.L R2, 14H[R0]
000019C4 A102                    		MOV.L R2, 10H[R0]
000019C6 71031C                  		ADD #1CH, R0, R3
000019C9 A08B                    		MOV.L R3, 0CH[R0]
000019CB A082                    		MOV.L R2, 08H[R0]
000019CD FB32rrrrrrrr            		MOV.L #__$spiffs_object_index_consistency_check_v, R3
000019D3 A00B                    		MOV.L R3, 04H[R0]
000019D5 D302                    		MOV.W R2, [R0]
000019D7 EF23                    		MOV.L R2, R3
000019D9 EF24                    		MOV.L R2, R4
000019DB 05rrrrrr             A  		BSR _spiffs_obj_lu_find_entry_visitor
000019DF 710018                  		ADD #18H, R0
000019E2 E301                    		MOV.L R1, [R0]
000019E4                         L752:	; bb18.split
                                 ;     984         0, 0);
                                 ;     985   if (res == SPIFFS_VIS_END) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",985
000019E4 EC01                    		MOV.L [R0], R1
000019E6 7601A8D8                		CMP #0FFFFD8A8H, R1
000019EA 18                   S  		BNE L754
000019EB                         L753:	; bb23
                                 ;     986     res = SPIFFS_OK;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",986
000019EB F80600                  		MOV.L #00000000H, [R0]
000019EE                         L754:	; bb29
                                 ;     987   }
                                 ;     988   if (res != SPIFFS_OK) {
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",988
000019EE EC01                    		MOV.L [R0], R1
000019F0 6101                    		CMP #00H, R1
000019F2 20rr                    		BEQ L757
000019F4                         L755:	; bb32
                                 ;     989     CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_ERROR, res, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",989
000019F4 A889                    		MOV.L 0CH[R0], R1
000019F6 AD11                    		MOV.L 50H[R1], R1
000019F8 6101                    		CMP #00H, R1
000019FA 20rr                    		BEQ L757
000019FC                         L756:	; bb33
000019FC A889                    		MOV.L 0CH[R0], R1
000019FE AD15                    		MOV.L 50H[R1], R5
00001A00 EC03                    		MOV.L [R0], R3
00001A02 6604                    		MOV.L #00000000H, R4
00001A04 6611                    		MOV.L #00000001H, R1
00001A06 EF12                    		MOV.L R1, R2
00001A08 7F15                    		JSR R5
00001A0A                         L757:	; bb52
                                 ;     990   }
                                 ;     991   CHECK_CB(fs, SPIFFS_CHECK_INDEX, SPIFFS_CHECK_PROGRESS, 256, 0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",991
00001A0A A889                    		MOV.L 0CH[R0], R1
00001A0C AD11                    		MOV.L 50H[R1], R1
00001A0E 6101                    		CMP #00H, R1
00001A10 20rr                    		BEQ L759
00001A12                         L758:	; bb53
00001A12 A889                    		MOV.L 0CH[R0], R1
00001A14 AD15                    		MOV.L 50H[R1], R5
00001A16 FB3A0001                		MOV.L #00000100H, R3
00001A1A 6602                    		MOV.L #00000000H, R2
00001A1C 6611                    		MOV.L #00000001H, R1
00001A1E EF24                    		MOV.L R2, R4
00001A20 7F15                    		JSR R5
00001A22                         L759:	; bb64
                                 ;     992   return res;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",992
00001A22 EC01                    		MOV.L [R0], R1
00001A24 A081                    		MOV.L R1, 08H[R0]
00001A26                         L760:	; bb64.split
                                 ;     993 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\spiffs\spiffs_check.c",993
00001A26 6704                    		RTSD #10H
                                 ;     994 
                                 ;     995 #endif // !SPIFFS_READ_ONLY
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     05019   LINES

Section List

Attr         Size               Name
CODE     0000006696(00001A28H)  P

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx7E87\$ccrx\spiffs_check.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01\EasyMak_build\spiffs_check.lst
-output=C:\Workspace\e2studio\git\MT01\EasyMak_build\spiffs\spiffs_check.obj
