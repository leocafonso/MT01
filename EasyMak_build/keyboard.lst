* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Sun Feb 19 10:48:36 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  19-Feb-2017 10:48:36
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=keyboard.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01\r_lvd_rx,C:\Workspace\e2studio\git\MT01\r_lvd_rx\src,C:/Workspace/e2studio/git/MT01/r_tfa
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=keyboard.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=0,EASYMAK=1,MOBILE=0,FREE_RTOS_PP
                                 ;keyboard.c
                                 
                                 		.glb	_qKeyboard
                                 		.glb	_keyboard_task
                                 		.glb	_vTaskDelay
                                 		.glb	_switch_rtc_callback
                                 		.glb	_xQueueGenericSend
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         _keyboard_task:
                                 		.STACK	_keyboard_task=84
                                 ;       1 /*
                                 ;       2  * keyboard.c
                                 ;       3  *
                                 ;       4  *  Created on: 07/08/2015
                                 ;       5  *      Author: LAfonso01
                                 ;       6  */
                                 ;       7 
                                 ;       8 /******************************************************************************
                                 ;       9 Includes   <System Includes> , "Project Includes"
                                 ;      10  ******************************************************************************/
                                 ;      11 #include "platform.h"
                                 ;      12 #include "keyboard.h"
                                 ;      13 #include "lcd_menu.h"
                                 ;      14 //#include "hardware.h"
                                 ;      15 #include "tinyg.h"
                                 ;      16 #include "config.h"
                                 ;      17 #include "switch.h"
                                 ;      18 
                                 ;      19 #ifdef FREE_RTOS_PP
                                 ;      20 #include "FreeRTOS.h"
                                 ;      21 #include "task.h"
                                 ;      22 #endif
                                 ;      23 /*****************************************************************************
                                 ;      24 Macro definitions
                                 ;      25  ******************************************************************************/
                                 ;      26 
                                 ;      27 
                                 ;      28 /******************************************************************************
                                 ;      29 Section    <Section Definition> , "Data Sections"
                                 ;      30  ******************************************************************************/
                                 ;      31 
                                 ;      32 /******************************************************************************
                                 ;      33 Private global variables and functions
                                 ;      34  ******************************************************************************/
                                 ;      35 
                                 ;      36 
                                 ;      37 /******************************************************************************
                                 ;      38 External variables and functions
                                 ;      39  ******************************************************************************/
                                 ;      40 
                                 ;      41 
                                 ;      42 /*****************************************************************************
                                 ;      43 Enumerated Types
                                 ;      44  ******************************************************************************/
                                 ;      45 
                                 ;      46 /******************************************************************************
                                 ;      47 Section    <Section Definition> , "Project Sections"
                                 ;      48  ******************************************************************************/
                                 ;      49 
                                 ;      50 /******************************************************************************
                                 ;      51 Function Name   : keyboard_task
                                 ;      52 Description     : keyboard scan Task process
                                 ;      53 Arguments       : none
                                 ;      54 Return value    : none
                                 ;      55  ******************************************************************************/
                                 ;      56 #define KEY_DEBOUNCE 10
                                 ;      57 #define KEY_DEBOUNCE_DLYMS 2
                                 ;      58 
                                 ;      59 void keyboard_task(void)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",59
00000000 7100B0                  		ADD #0FFFFFFB0H, R0
                                 ;      60 {
                                 ;      61 	uint8_t key_buf[3][20];
                                 ;      62 	uint8_t colPressed = 0xff;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",62
00000003 F9043FFF                		MOV.B #0FFH, 3FH[R0]
00000007                         L12:	; entry.split
                                 ;      63 	uint32_t key = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",63
00000007 3E8000                  		MOV.L #00000000H, 40H[R0]
0000000A                         L13:	; entry.split1
                                 ;      64 	uint32_t key_old = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",64
0000000A 3E8100                  		MOV.L #00000000H, 44H[R0]
0000000D                         L14:	; entry.split2
                                 ;      65 	uint8_t i = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",65
0000000D F9044900                		MOV.B #00H, 49H[R0]
00000011                         L15:	; entry.split3
                                 ;      66 	uint8_t k = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",66
00000011 F9044A00                		MOV.B #00H, 4AH[R0]
00000015                         L16:	; entry.split4
                                 ;      67 	uint8_t j = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",67
00000015 F9044B00                		MOV.B #00H, 4BH[R0]
00000019                         L17:	; entry.split5
                                 ;      68 	uint8_t matchCount = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",68
00000019 F9044C00                		MOV.B #00H, 4CH[R0]
0000001D                         L18:	; entry.split6
                                 ;      69 	uint8_t col[3] = {KC0,KC1,KC2};
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",69
0000001D FBE2rrrrrrrr            		MOV.L #_L10, R14
00000023 C4E04D                  		MOV.B [R14], 4DH[R0]
00000026 C5E0014E                		MOV.B 01H[R14], 4EH[R0]
0000002A C5E0024F                		MOV.B 02H[R14], 4FH[R0]
0000002E 38rrrr               W  		BRA L46
00000031                         L19:	; bb15
                                 ;      70 
                                 ;      71 	while(1)
                                 ;      72 	{
                                 ;      73 		vTaskDelay(KEY_DEBOUNCE_DLYMS / portTICK_RATE_MS);
                                 ;      74 		WDT_FEED
                                 ;      75 		switch_rtc_callback();					// switch debouncing
                                 ;      76 		for (i = 0; i < 3; i++)
                                 ;      77 		{
                                 ;      78 			KCOL = col[i];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",78
00000031 590149                  		MOVU.B 49H[R0], R1
00000034 710E4D                  		ADD #4DH, R0, R14
00000037 FECE1E                  		MOVU.B [R14,R1], R14
0000003A FBFE0DC008              		MOV.L #0008C00DH, R15
0000003F C3FE                    		MOV.B R14, [R15]
00000041                         L20:	; bb15.split
00000041 6611                    		MOV.L #00000001H, R1
                                 ;      79 			vTaskDelay(1 / portTICK_RATE_MS);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",79
00000043 05rrrrrr             A  		BSR _vTaskDelay
00000047                         L21:	; bb15.split7
                                 ;      80 			key_buf[i][k] = (~(KLINE | 0x81)>>4) & 0x0F;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",80
00000047 590149                  		MOVU.B 49H[R0], R1
0000004A 751114                  		MUL #14H, R1
0000004D 710E03                  		ADD #03H, R0, R14
00000050 4B1E                    		ADD R1, R14
00000052 FBFE44C008              		MOV.L #0008C044H, R15
00000057 59014A                  		MOVU.B 4AH[R0], R1
0000005A 58FF                    		MOVU.B [R15], R15
0000005C 7E0F                    		NOT R15
0000005E 684F                    		SHLR #04H, R15
00000060 647F                    		AND #07H, R15
00000062 FE0E1F                  		MOV.B R15, [R14,R1]
00000065                         L22:	; bb15.split8
                                 ;      81 			if (i == colPressed)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",81
00000065 590149                  		MOVU.B 49H[R0], R1
00000068 45013F                  		CMP 3FH[R0].UB, R1
0000006B 21rr                    		BNE L28
0000006D                         L23:	; bb37
                                 ;      82 			{
                                 ;      83 				if (key_buf[colPressed][k] == 0x00)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",83
0000006D 59013F                  		MOVU.B 3FH[R0], R1
00000070 751114                  		MUL #14H, R1
00000073 710E03                  		ADD #03H, R0, R14
00000076 4B1E                    		ADD R1, R14
00000078 59014A                  		MOVU.B 4AH[R0], R1
0000007B FECE1E                  		MOVU.B [R14,R1], R14
0000007E 610E                    		CMP #00H, R14
00000080 21rr                    		BNE L28
00000082                         L24:	; bb38
                                 ;      84 				{
                                 ;      85 					key = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",85
00000082 3E8000                  		MOV.L #00000000H, 40H[R0]
00000085                         L25:	; bb38.split
                                 ;      86 					key_old = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",86
00000085 3E8100                  		MOV.L #00000000H, 44H[R0]
00000088                         L26:	; bb38.split9
                                 ;      87 					xQueueSend( qKeyboard, &key, 0 );
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",87
00000088 FBE2rrrrrrrr            		MOV.L #_qKeyboard, R14
0000008E ECE1                    		MOV.L [R14], R1
00000090 6603                    		MOV.L #00000000H, R3
00000092 710240                  		ADD #40H, R0, R2
00000095 EF34                    		MOV.L R3, R4
00000097 05rrrrrr             A  		BSR _xQueueGenericSend
0000009B                         L27:	; bb38.split10
                                 ;      88 					colPressed = 0xFF;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",88
0000009B F9043FFF                		MOV.B #0FFH, 3FH[R0]
0000009F                         L28:	; bb63
                                 ;      89 				}
                                 ;      90 			}
                                 ;      91 			if (key_buf[i][k] != 0x00)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",91
0000009F 590149                  		MOVU.B 49H[R0], R1
000000A2 751114                  		MUL #14H, R1
000000A5 710E03                  		ADD #03H, R0, R14
000000A8 4B1E                    		ADD R1, R14
000000AA 59014A                  		MOVU.B 4AH[R0], R1
000000AD FECE1E                  		MOVU.B [R14,R1], R14
000000B0 610E                    		CMP #00H, R14
000000B2 20rr                    		BEQ L41
000000B4                         L29:	; bb64
                                 ;      92 			{
                                 ;      93 				for (j = 0;j < KEY_DEBOUNCE;j++)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",93
000000B4 F9044B00                		MOV.B #00H, 4BH[R0]
000000B8 2Err                 B  		BRA L33
000000BA                         L30:	; bb66
                                 ;      94 				{
                                 ;      95 					if (key_buf[i][0] == key_buf[i][j])
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",95
000000BA 590149                  		MOVU.B 49H[R0], R1
000000BD 751114                  		MUL #14H, R1
000000C0 710E03                  		ADD #03H, R0, R14
000000C3 FECE1F                  		MOVU.B [R14,R1], R15
000000C6 4B1E                    		ADD R1, R14
000000C8 59014B                  		MOVU.B 4BH[R0], R1
000000CB FECE1E                  		MOVU.B [R14,R1], R14
000000CE 47EF                    		CMP R14, R15
000000D0 18                   S  		BNE L32
000000D1                         L31:	; bb67
                                 ;      96 					{
                                 ;      97 						matchCount++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",97
000000D1 59014C                  		MOVU.B 4CH[R0], R1
000000D4 6211                    		ADD #01H, R1
000000D6 C7014C                  		MOV.B R1, 4CH[R0]
000000D9                         L32:	; bb91
000000D9 59014B                  		MOVU.B 4BH[R0], R1
000000DC 6211                    		ADD #01H, R1
000000DE C7014B                  		MOV.B R1, 4BH[R0]
000000E1                         L33:	; bb94
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",93
000000E1 59014B                  		MOVU.B 4BH[R0], R1
000000E4 61A1                    		CMP #0AH, R1
000000E6 29rr                    		BLT L30
000000E8                         L34:	; bb101
                                 ;      98 					}
                                 ;      99 				}
                                 ;     100 				if (matchCount == KEY_DEBOUNCE)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",100
000000E8 59014C                  		MOVU.B 4CH[R0], R1
000000EB 61A1                    		CMP #0AH, R1
000000ED 21rr                    		BNE L40
000000EF                         L35:	; bb102
                                 ;     101 				{
                                 ;     102 					key = key_buf[2][1] << 8 | key_buf[1][1] << 4 | key_buf[0][1];
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",102
000000EF 59012C                  		MOVU.B 2CH[R0], R1
000000F2 6C81                    		SHLL #08H, R1
000000F4 B602                    		MOVU.B 18H[R0], R2
000000F6 6C42                    		SHLL #04H, R2
000000F8 5721                    		OR R2, R1
000000FA 550104                  		OR 04H[R0].UB, R1
000000FD A401                    		MOV.L R1, 40H[R0]
000000FF                         L36:	; bb102.split
                                 ;     103 					colPressed = i;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",103
000000FF C500493F                		MOV.B 49H[R0], 3FH[R0]
00000103                         L37:	; bb102.split11
                                 ;     104 					if (key != key_old)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",104
00000103 AC01                    		MOV.L 40H[R0], R1
00000105 06850111                		CMP 44H[R0].L, R1
00000109 20rr                    		BEQ L39
0000010B                         L38:	; bb127
                                 ;     105 					{
                                 ;     106 						xQueueSend( qKeyboard, &key, 0 );
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",106
0000010B FBE2rrrrrrrr            		MOV.L #_qKeyboard, R14
00000111 ECE1                    		MOV.L [R14], R1
00000113 6603                    		MOV.L #00000000H, R3
00000115 710240                  		ADD #40H, R0, R2
00000118 EF34                    		MOV.L R3, R4
0000011A 05rrrrrr             A  		BSR _xQueueGenericSend
0000011E                         L39:	; bb136
                                 ;     107 					}
                                 ;     108 					key_old = key;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",108
0000011E E5001011                		MOV.L 40H[R0], 44H[R0]
00000122                         L40:	; bb143
                                 ;     109 				}
                                 ;     110 				matchCount = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",110
00000122 F9044C00                		MOV.B #00H, 4CH[R0]
00000126                         L41:	; bb157
00000126 590149                  		MOVU.B 49H[R0], R1
00000129 6211                    		ADD #01H, R1
0000012B C70149                  		MOV.B R1, 49H[R0]
0000012E                         L42:	; bb160
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",76
0000012E 590149                  		MOVU.B 49H[R0], R1
00000131 6131                    		CMP #03H, R1
00000133 28rr                  * 		BLT L19
         38rrrr                  
00000138                         L43:	; bb166
                                 ;     111 			}
                                 ;     112 		}
                                 ;     113 		k++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",113
00000138 59014A                  		MOVU.B 4AH[R0], R1
0000013B 6211                    		ADD #01H, R1
0000013D C7014A                  		MOV.B R1, 4AH[R0]
00000140                         L44:	; bb166.split
                                 ;     114 		if (k == KEY_DEBOUNCE)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",114
00000140 59014A                  		MOVU.B 4AH[R0], R1
00000143 61A1                    		CMP #0AH, R1
00000145 18                   S  		BNE L46
00000146                         L45:	; bb170
                                 ;     115 		{
                                 ;     116 			k = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",116
00000146 F9044A00                		MOV.B #00H, 4AH[R0]
0000014A                         L46:	; bb177.split
0000014A 6621                    		MOV.L #00000002H, R1
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",73
0000014C 05rrrrrr             A  		BSR _vTaskDelay
00000150                         L47:	; bb177.split12
00000150 FBEE308008              		MOV.L #00088030H, R14
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",74
00000155 F8E400                  		MOV.B #00H, [R14]
00000158                         L48:	; bb177.split13
00000158 FBEE308008              		MOV.L #00088030H, R14
0000015D F8E4FF                  		MOV.B #0FFH, [R14]
00000160                         L49:	; bb177.split14
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",75
00000160 05rrrrrr             A  		BSR _switch_rtc_callback
00000164                         L50:	; bb177.split15
                                 		.LINE  "C:\Workspace\e2studio\git\MT01\src\keyboard\keyboard.c",76
00000164 F9044900                		MOV.B #00H, 49H[R0]
00000168 2Err                 B  		BRA L42
                                 ;     117 		}
                                 ;     118 	}
                                 ;     119 }
                                 		.SECTION	L,ROMDATA,ALIGN=4
00000000                         _L10:
00000000 010204                  		.byte	01H,02H,04H
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     00356   LINES

Section List

Attr         Size               Name
CODE     0000000362(0000016AH)  P
ROMDATA  0000000003(00000003H)  L

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx7E87\$ccrx\keyboard.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01\EasyMak_build\keyboard.lst
-output=C:\Workspace\e2studio\git\MT01\EasyMak_build\src\keyboard\keyboard.obj
